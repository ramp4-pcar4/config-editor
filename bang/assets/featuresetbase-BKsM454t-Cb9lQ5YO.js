import{s as P,r as U,bW as Ne,aR as Re,dt as Oe,v as Me,au as $e,P as Ve,Y as we,bx as Ge,ag as B,m as h,E as v,n as ae,R as Te,bP as Ee,H as ze,bw as He}from"./index-BeTPrQ6f.js";import{i as We}from"./TimeOnly-BFfVS_ja-C4MPGwCM.js";import{t as Qe,l as le}from"./arcade-WEshytE2-CynglP9_.js";import{v as k,j as _e,m as de,U as C,A as M,_ as S,P as Je,X as De,l as ve,W as ke,D as Z,s as Y,I as te,w as J,F as Be,e as X,a8 as Ke,z as ne}from"./Dictionary-B0UU8VOj-BnHchtFP.js";import{c as y,E as qe,s as Ye}from"./enum-D3e-PyKo-Bl5V5br5.js";import{I as Xe}from"./Feature-DEFbFbhW-MI6BQTTC.js";import{v as et,R as Se,y as tt,h as ue,e as nt,i as it,s as rt,F as re,E as ot,k as at,O as st,a as _,I as lt,D as ie,b as R,x as me}from"./featureSetUtils-Djc8epG7-B0kYnZBI.js";import{n as dt}from"./ImmutableArray-CiJxhY8_-Kqx7aWRu.js";import{n as ut}from"./portalUtils-BQqUZtd_-DC5noOca.js";import{F as mt,q as xe}from"./SpatialFilter-mqvhBV6T-COxCgKHY.js";import{L as Ae,O as ce}from"./shared-DXZ65waB-BM-XH3jC.js";import{L as T}from"./WhereClause-DrmAQ3eI-CwdMrUuP.js";import Le from"./FeatureLayer-CCD4d2TK-D-vTdTyl.js";import{m as O}from"./Field-Dn1Bgq7n-CJCGLoNR.js";import{g as ct,f as ft,d as pt}from"./utils-CRANtbnc-C6zyufvL.js";import{t as q}from"./NetworkElement-Dj3I3Jn3-9bqqwBZw.js";import"./UnknownTimeZone-DzO8gKMe-d6rtFXqm.js";import"./arcadeEnvironment-CGtXgdl9-Db3WjmFu.js";import"./aiServices-BhAKf1Iw-D6L8gru6.js";import"./commonProperties-D1Pjvz5u-DHiB1uzW.js";import"./fieldType-DvW5hpfa-DYUbIy_X.js";import"./number-BsNxu9Ry-D0lLRJTw.js";import"./streamLayerUtils-CcwO9-27-DFlbJ4P1.js";import"./unitConversion-Dsm_H0Dm-eZfwiAJA.js";import"./uuid-CFz2qBzH-cIdlpVG-.js";import"./featureConversionUtils-CZmIxyv5-DHwRSztU.js";import"./OptimizedFeature-C33SioFK-sn7DeAq-.js";import"./memoryEstimations-C_GUL8g_-JniNFd5l.js";import"./OptimizedGeometry-BYxlP_oK-DvAqrgO1.js";import"./OptimizedFeatureSet-Dz5hF8Qm-CgsRgxJh.js";import"./FieldsIndex-Ds4D9xP7-BiTuE5Z3.js";import"./timeZoneUtils-CdK7eU4Y-fyhJ3EFx.js";import"./MD5-CXHDUqXT-CMrYdOi6.js";import"./RelationshipQuery-Cf-_aN1Z-mThKQ0J2.js";import"./Query-DKLDaFaA-I4zhlfzt.js";import"./FeatureType-BaXpcfS--CXOAiC-Q.js";import"./FeatureTemplate-DN-lMS1p-caqKKpFl.js";import"./PortalItem-BrQqKoE_-zs2bKsCH.js";import"./operatorsWorkerConnection-BI0u3kJm-CDhqefZJ.js";import"./workers-CixlqDQM-CMoJ1YZN.js";import"./Queue-CK6TduSr-C-T211SM.js";import"./intl-DRhjUnwt-Dihhq8dq.js";import"./messages-DQ10DjvF-6kk0dzjG.js";import"./MultiOriginJSONSupport-DNNJhlNT-Bm4fcG4m.js";import"./layerContainerType-CJrPp4UB-BIF7XAYP.js";import"./FormTemplate-VNQ04sPR-DwlQPeuM.js";import"./GraphicOrigin-BZpgptRb-BMZxic91.js";import"./editsZScale-DcYeqiDn-O8ivdk-A.js";import"./queryZScale-B66ZWsfS-D7Zc2_Zh.js";import"./zscale-PLuFqpaL-BIEnWBsg.js";import"./FeatureSet-BIUKCqNW-D9YRl-VE.js";import"./APIKeyMixin-DYy2zfLn-D3z7LonQ.js";import"./ArcGISService-CytDmkiZ-emNrPdED.js";import"./BlendLayer-D8oJmNCO-A0sTzbOF.js";import"./jsonUtils-Bl9MVnOR-Be8hf0yA.js";import"./parser-CXoJuqeV-C7irlk5U.js";import"./mat4f32-BdRMyjXW-CWt6U0BP.js";import"./mat4-R0VY9B_E-DoEP887i.js";import"./CustomParametersMixin-CqtpZgix-ZCd9Um94.js";import"./DisplayFilteredLayer-Ce0lf91Z-D_UnOF-a.js";import"./scaleUtils-Ckma21r5-DhwWQymd.js";import"./displayFilterUtils-BCW-UeaE-CnjPWjFU.js";import"./EditBusLayer-B5fJK8S9-BfKLF1l7.js";import"./FeatureEffectLayer-Bw8pqFtl-COIpRlV8.js";import"./FeatureEffect-xxDa5IRG-DfQBGcCi.js";import"./FeatureFilter-D0iZ4sKI-BBZH0Xo9.js";import"./FeatureLayerBase-Ca6xrS5x-bGdb6Ysq.js";import"./HeightModelInfo-Cjals-AI-DMpn5Tsh.js";import"./OperationalLayer-Ds0FQSCg-DEUbTcjK.js";import"./ElevationInfo-tlrAM5SV-D86C1F9d.js";import"./lengthUtils-CopeXEyE-DjCEitlq.js";import"./labelingInfo-jIy5P_vY-D8rEl7NY.js";import"./asyncUtils-Cu__bxqs-ecCTUaGV.js";import"./SimpleRenderer-DSyBXxyY-CGNZcXII.js";import"./commonProperties-CYpRbAZr-PcmW9U_y.js";import"./colorRamps-C5pnMn-A-BSSJ2zvJ.js";import"./ColorStop-CBXZUZ6o-_LZdJKea.js";import"./visualVariableUtils-DzY4BXXy-D_1S-x1B.js";import"./UniqueValueRenderer-4zUMozui-C0Y5GPGV.js";import"./diffUtils-D3O4EfgX-CznKxD4n.js";import"./RendererLegendOptions-_ue7FeM0-ROeRce-g.js";import"./styleUtils-DoTsJ8ze-DHY40A2q.js";import"./NormalizationBinParametersMixin-DuEmpnQx-abBJwXnQ.js";import"./labelUtils-BLNYRrPe-Cv1ZZjAO.js";import"./LayerFloorInfo-krwL5pHA-C-NgvUlX.js";import"./multiLayerServiceUtils-DET2KhOE-Bw336UOx.js";import"./Relationship-YLK2X_M_-G1AF1PCW.js";import"./serviceCapabilitiesUtils-Cm1_ZgDe-BkUSvtE4.js";import"./infoFor3D-BeWnZejW-CnXQECJx.js";import"./portalItemUtils-C12I5owR-Iiaf4oEu.js";import"./projectionUtils-CsX1UTBu-DsZaU4xz.js";import"./projectBuffer-CMNsPBq1-CMpE7Jo3.js";import"./FeatureReductionLayer-fRVzjp_G-BAykrsM3.js";import"./FeatureReductionSelection-BYDlwJ5u-CQfZ-i0-.js";import"./jsonUtils-5anAqpiW-BnpEYfRl.js";import"./typeUtils-BTAsL08--B1VjqkPN.js";import"./ClassBreaksRenderer-AH_lBYRG-CIe34emV.js";import"./LRUCache-CvGiiws0-B3io5Jp4.js";import"./MemCache-TG-MhOJy-BkjKRNR7.js";import"./DictionaryScriptEvaluator-DrG0wIBl-D15kCKMK.js";import"./Version-DSJSGSLA-Cg87msWM.js";import"./ArcadeExpression-BGPPS6z--7N6gsB31.js";import"./utils-CIm5uQvO-CtKf129F.js";import"./defaultCIMValues-BWu-APou-XI-Li77m.js";import"./heatmapUtils-Bf2yRyEN-BAQJ1IRB.js";import"./vec42-DHp-FUwt-Br7hmYJs.js";import"./vec4f64-DD-nkcCV-CSNWKRqG.js";import"./OrderedLayer-BpzV2gVo-B7bag0TS.js";import"./OrderByInfo-D0eImi6z-Dv2CatL0.js";import"./PortalLayer-B52AUJ7S-DLZhjKpz.js";import"./RefreshableLayer-BEBm0YMm-CEdeDwog.js";import"./ScaleRangeLayer-DkZwCH6_-C95kTMqN.js";import"./TemporalLayer-D43PzGI2-BVfMl_Wx.js";import"./TimeInfo-BoebCPJB-ubr6IA4W.js";import"./TrackableLayer-B6TLWZyJ-CFqD-uca.js";import"./fieldProperties-B4tOVJmv-DQSPMAAi.js";import"./TitleCreator-BrV1DW5U-CU3Ke3Vx.js";import"./sanitizerUtils-CrdmaILo-DztC6Qnx.js";import"./versionUtils-DTdDMzVZ-DiRjVmBE.js";import"./styleUtils-BQqoMgIA-U43o5V_5.js";import"./popupUtils-D0h6TFFF-Bch8GtRu.js";new B({Clean:"clean",Dirty:"dirty"}),new B({Physical:"physical",Virtual:"virtual"}),new B({"Start and end":"start-and-end",Start:"start",Midspan:"midspan",End:"end"}),new B({startingPoint:"starting-point",barrier:"barrier",stoppingPoint:"stopping-point"}),new B({connected:"connected",upstream:"upstream",downstream:"downstream",shortestPath:"shortest-path",subnetwork:"subnetwork",subnetworkController:"subnetwork-controller",loops:"loops",isolation:"isolation",path:"path",circuit:"circuit"});const Ue="{00000000-0000-0000-0000-000000000000}",z=new B({junctionJunctionConnectivity:"junction-junction-connectivity",connectivity:"connectivity",attachment:"attachment",containment:"containment",junctionEdgeFromConnectivity:"junction-edge-from-connectivity",junctionEdgeMidspanConnectivity:"junction-edge-midspan-connectivity",junctionEdgeToConnectivity:"junction-edge-to-connectivity"});new B({normal:"normal",rebuild:"rebuild",forceRebuild:"force-rebuild"});let K=class extends q{constructor(n){super(n),this.type="telecomNetworkElement",this.firstUnit=null,this.numUnits=null}};h([v({json:{write:!1}})],K.prototype,"type",void 0),h([v({json:{write:!0}})],K.prototype,"firstUnit",void 0),h([v({json:{write:!0}})],K.prototype,"numUnits",void 0),K=h([ae("esri.rest.networks.support.TelecomNetworkElement")],K);let A=class extends we{constructor(n){super(n),this.globalId=null,this.associationType=null,this.fromNetworkElement=null,this.toNetworkElement=null,this.geometry=null,this.errorMessage=null,this.percentAlong=null,this.errorCode=null,this.isContentVisible=null,this.status=null}readFromNetworkElement(n,l){return l.fromFirstUnit||l.fromNumUnits?new K({globalId:l.fromGlobalId,networkSourceId:l.fromNetworkSourceId,terminalId:l.fromTerminalId,firstUnit:l.fromFirstUnit,numUnits:l.fromNumUnits}):new q({globalId:l.fromGlobalId,networkSourceId:l.fromNetworkSourceId,terminalId:l.fromTerminalId})}writeFromNetworkElement(n,l){if(n&&(l.fromGlobalId=n.globalId,l.fromNetworkSourceId=n.networkSourceId,l.fromTerminalId=n.terminalId,n.type==="telecomNetworkElement")){const t=n;l.fromFirstUnit=t.firstUnit,l.fromNumUnits=t.numUnits}}readToNetworkElement(n,l){return l.toFirstUnit||l.toNumUnits?new K({globalId:l.toGlobalId,networkSourceId:l.toNetworkSourceId,terminalId:l.toTerminalId,firstUnit:l.toFirstUnit,numUnits:l.toNumUnits}):new q({globalId:l.toGlobalId,networkSourceId:l.toNetworkSourceId,terminalId:l.toTerminalId})}writeToNetworkElement(n,l){if(n&&(l.toGlobalId=n.globalId,l.toNetworkSourceId=n.networkSourceId,l.toTerminalId=n.terminalId,n.type==="telecomNetworkElement")){const t=n;l.toFirstUnit=t.firstUnit,l.toNumUnits=t.numUnits}}equals(n){if(this.globalId===Ue&&n.globalId===Ue){let l=function(o,s){return o.networkSourceId===s.networkSourceId&&o.globalId===s.globalId&&o.terminalId===s.terminalId&&o.firstUnit===s.firstUnit&&o.numUnits===s.numUnits};const t=this.fromNetworkElement,r=this.toNetworkElement,w=n.fromNetworkElement,I=n.toNetworkElement,e=l(t,w),i=l(r,I);return e&&i&&this.associationType===n.associationType}return this.globalId!=null&&n.globalId!=null&&this.globalId===n.globalId}};h([v({type:String,json:{write:!0}})],A.prototype,"globalId",void 0),h([v({type:z.apiValues,json:{type:z.jsonValues,read:z.read,write:z.write}})],A.prototype,"associationType",void 0),h([v({type:q,json:{write:{target:{fromGlobalId:{type:String},fromNetworkSourceId:{type:Number},fromTerminalId:{type:Number},fromFirstUnit:{type:Number},fromNumUnits:{type:Number}}},read:{source:["fromGlobalId","fromNetworkSourceId","fromTerminalId","fromFirstUnit","fromNumUnits"]}}})],A.prototype,"fromNetworkElement",void 0),h([Te("fromNetworkElement")],A.prototype,"readFromNetworkElement",null),h([Ee("fromNetworkElement")],A.prototype,"writeFromNetworkElement",null),h([v({type:q,json:{write:{target:{toGlobalId:{type:String},toNetworkSourceId:{type:Number},toTerminalId:{type:Number},toFirstUnit:{type:Number},toNumUnits:{type:Number}}},read:{source:["toGlobalId","toNetworkSourceId","toTerminalId","toFirstUnit","toNumUnits"]}}})],A.prototype,"toNetworkElement",void 0),h([Te("toNetworkElement")],A.prototype,"readToNetworkElement",null),h([Ee("toNetworkElement")],A.prototype,"writeToNetworkElement",null),h([v({type:ze,json:{write:!0}})],A.prototype,"geometry",void 0),h([v({type:String,json:{write:!0}})],A.prototype,"errorMessage",void 0),h([v({type:Number,json:{write:!0}})],A.prototype,"percentAlong",void 0),h([v({type:Number,json:{write:!0}})],A.prototype,"errorCode",void 0),h([v({type:Boolean,json:{write:!0}})],A.prototype,"isContentVisible",void 0),h([v({type:Number,json:{write:!0}})],A.prototype,"status",void 0),A=h([ae("esri.rest.networks.support.Association")],A);let oe=class extends we{constructor(n){super(n),this.associations=[]}};h([v({type:[A],json:{write:!0}})],oe.prototype,"associations",void 0),oe=h([ae("esri.rest.networks.support.QueryAssociationsResult")],oe);function yt(n){const{returnDeletes:l,elements:t,gdbVersion:r,moment:w}=n.toJSON();return{returnDeletes:l,elements:JSON.stringify(t.map(I=>({globalId:I.globalId,networkSourceId:I.networkSourceId,terminalId:I.terminalId}))),types:JSON.stringify(n.types.map(I=>z.toJSON(I))).replaceAll('"connectivity"','"junctionJunctionConnectivity"'),gdbVersion:r,moment:w??Date.now()}}async function wt(n,l,t){const r=ct(n),w={...yt(l),f:"json"},I=ft({...r.query,...w}),e=pt(I,{...t,method:"post"}),i=`${r.path}/associations/query`,{data:o}=await Me(i,e),s=oe.fromJSON(o);return l.types.includes("connectivity")&&$e(Ve.getLogger("esri/rest/networks/support/QueryAssociationsParameters"),"types",{replacement:"Please use 'junction-junction-connectivity' instead of 'connectivity'.",see:"https://arcg.is/11Tr8a#types",version:"4.29",warnOnce:!0}),s}var pe;let Q=pe=class extends we{static from(n){return Ge(pe,n)}constructor(n){super(n),this.returnDeletes=!1,this.elements=[],this.types=[],this.gdbVersion=null,this.moment=null}};h([v({type:Boolean,json:{write:!0}})],Q.prototype,"returnDeletes",void 0),h([v({type:[q],json:{write:!0}})],Q.prototype,"elements",void 0),h([v({type:[z.apiValues],json:{type:z.jsonValues,read:z.read,write:z.write}})],Q.prototype,"types",void 0),h([v({type:String,json:{write:!0}})],Q.prototype,"gdbVersion",void 0),h([v({type:Date,json:{type:Number,write:{writer:(n,l)=>{l.moment=n==null?void 0:n.getTime()}}}})],Q.prototype,"moment",void 0),Q=pe=h([ae("esri.rest.networks.support.QueryAssociationsParameters")],Q);function It(n){if(n.length===1){if(U(n[0]))return le("distinct",n[0],-1);if(J(n[0]))return le("distinct",n[0].toArray(),-1)}return le("distinct",n,-1)}function fe(n,l,t){const r=n.getVariables();if(r.length>0){const w={};for(const I of r)w[I]=l.evaluateIdentifier(t,{name:I});n.parameters=w}return n}function c(n,l,t=null){for(const r in n)if(r.toLowerCase()===l.toLowerCase())return n[r];return t}function Ce(n){if(n===null)return null;const l={type:c(n,"type",""),name:c(n,"name","")};if(l.type==="range")l.range=c(n,"range",[]);else{l.codedValues=[];for(const t of c(n,"codedValues",[]))l.codedValues.push({name:c(t,"name",""),code:c(t,"code",null)})}return l}function ye(n){if(n===null)return null;const l={},t=c(n,"wkt");t!==null&&(l.wkt=t);const r=c(n,"wkid");return r!==null&&(l.wkid=r),l}function je(n){if(n===null)return null;const l={hasZ:c(n,"hasz",!1),hasM:c(n,"hasm",!1)},t=c(n,"spatialreference");t!=null&&(l.spatialReference=ye(t));const r=c(n,"x",null);if(r!==null)return l.x=r,l.y=c(n,"y",null),l.hasZ&&(l.z=c(n,"z",null)),l.hasM&&(l.m=c(n,"m",null)),l;const w=c(n,"rings",null);if(w!==null)return l.rings=w,l;const I=c(n,"paths",null);if(I!==null)return l.paths=I,l;const e=c(n,"points",null);if(e!==null)return l.points=e,l;for(const i of["xmin","xmax","ymin","ymax","zmin","zmax","mmin","mmax"]){const o=c(n,i,null);o!==null&&(l[i]=o)}return l}function gt(n,l){for(const t of l)if(t===n)return!0;return!1}function ht(n){return!!n.layerDefinition&&!!n.featureSet&&gt(n.layerDefinition.geometryType,["",null,"esriGeometryNull","esriGeometryPoint","esriGeometryPolyline","esriGeometryPolygon","esriGeometryMultipoint","esriGeometryEnvelope"])!==!1&&U(n.layerDefinition.fields)!==!1&&U(n.featureSet.features)!==!1}function ee(n){return(n==null?void 0:n.toLowerCase())==="utc"?"UTC":(n==null?void 0:n.toLowerCase())==="unknown"?"Unknown":n}async function bt(n,l,t,r,w,I,e){var u,f,E;const i=await n.getFeatureSetInfo();if(((i==null?void 0:i.layerId)??null)===null||!w.layerIdLookup.get(i.layerId))return null;const o=n.serviceUrl().replace(/\/FeatureServer/i,"/UtilityNetworkServer"),s=[];switch(t){case"connected":s.push("connectivity"),s.push("junction-edge-from-connectivity"),s.push("junction-edge-to-connectivity"),s.push("junction-edge-midspan-connectivity"),s.push("junction-junction-connectivity");break;case"container":case"content":s.push("containment");break;case"structure":case"attached":s.push("attachment");break;case"junctionedge":s.push("junction-edge-from-connectivity"),s.push("junction-edge-to-connectivity");break;case"midspan":s.push("junction-edge-midspan-connectivity");break;default:throw new y(I,"InvalidParameter",e)}let p=null,m=!1;if(r!==null&&r!==""&&r!==void 0){for(const g of w.terminals)g.terminalName===r&&(p=g.terminalId);p===null&&(m=!0)}const d=[];if(!m){const g=new q({globalId:l.field(n.globalIdField),networkSourceId:w.layerIdLookup.get(i.layerId).sourceId,...p?{terminalId:p}:""}),N=await wt(o,new Q({types:s,elements:[g]}));let D=0;for(const x of N.associations){let $=null,V="",j="";if(((u=x.fromNetworkElement)==null?void 0:u.globalId)===g.globalId?($=x.toNetworkElement,j="to"):((f=x.toNetworkElement)==null?void 0:f.globalId)===g.globalId&&($=x.fromNetworkElement,j="from"),!$)continue;switch(t){case"attached":if(x.associationType!=="attachment"||j!=="to")continue;break;case"structure":if(x.associationType!=="attachment"||j!=="from")continue;break;case"container":if(x.associationType!=="containment"||j!=="from")continue;break;case"content":if(x.associationType!=="containment"||j!=="to")continue;break;case"connected":break;case"junctionedge":x.associationType==="junction-edge-to-connectivity"?V="to":x.associationType==="junction-edge-from-connectivity"&&(V="from");break;case"midspan":if(x.associationType!=="junction-edge-midspan-connectivity")continue}const G=((E=w.sourceIdLookup.get($.networkSourceId))==null?void 0:E.className)??"";d.push(new He({geometry:null,attributes:{objectId:D++,globalId:$.globalId,percentAlong:x.percentAlong??0,isContentVisible:x.isContentVisible?0:1,className:G,side:V}}))}}const a=new Le({source:d,geometryType:null,objectIdField:"objectId",globalIdField:"globalId",fields:[new O({name:"objectId",alias:"objectId",type:"oid"}),new O({name:"globalId",alias:"globalId",type:"global-id"}),new O({name:"percentAlong",alias:"percentAlong",type:"double"}),new O({name:"side",alias:"side",type:"string"}),new O({name:"isContentVisible",alias:"isContentVisible",type:"integer"}),new O({name:"className",alias:"className",type:"string"})]});return re(a)}function Pi(n){if(n.mode==="async"){n.functions.timezone=function(t,r){return n.standardFunctionAsync(t,r,async(w,I,e)=>{var s,p;if(k(e,1,2,t,r),_e(e[0])||de(e[0]))return"Unknown";if(C(e[0])){if(await e[0].load(),e.length===1||e[1]===null)return e[0].datesInUnknownTimezone?ee("unknown"):ee(e[0].dateFieldsTimeZone);if(!(e[1]instanceof M)||e[1].hasField("type")===!1)throw new y(t,"InvalidParameter",r);const m=e[1].field("type");if(P(m)===!1)throw new y(t,"InvalidParameter",r);switch(S(m).toLowerCase()){case"preferredtimezone":return ee(e[0].preferredTimeZone);case"editfieldsinfo":return ee(((s=e[0].editFieldsInfo)==null?void 0:s.timeZone)??null);case"timeinfo":return ee(((p=e[0].timeInfo)==null?void 0:p.timeZone)??null);case"field":if(e[1].hasField("fieldname")&&P(e[1].field("fieldname")))return ee(e[0].fieldTimeZone(S(e[1].field("fieldname"))))}throw new y(t,"InvalidParameter",r)}const i=Je(e[0],De(t));if(i===null)return null;const o=i.timeZone;return o==="system"?We.systemTimeZoneCanonicalName:o.toLowerCase()==="utc"?"UTC":o.toLowerCase()==="unknown"?"Unknown":o})},n.functions.sqltimestamp=function(t,r){return n.standardFunctionAsync(t,r,async(w,I,e)=>{k(e,1,3,t,r);const i=e[0];if(ve(i)){if(e.length===1)return i.toSQLWithKeyword();if(e.length===2)return i.changeTimeZone(S(e[1])).toSQLWithKeyword();throw new y(t,"InvalidParameter",r)}if(de(i))return i.toSQLWithKeyword();if(C(i)){if(e.length!==3)throw new y(t,"InvalidParameter",r);await i.load();const o=S(e[1]);if(de(e[2]))return e[2].toSQLWithKeyword();if(ve(e[2])===!1)throw new y(t,"InvalidParameter",r);const s=i.fieldTimeZone(o);return s==null?e[2].toSQLWithKeyword():e[2].changeTimeZone(s).toSQLWithKeyword()}throw new y(t,"InvalidParameter",r)})},n.signatures.push({name:"sqltimestamp",min:2,max:4}),n.functions.featuresetbyid=function(t,r){return n.standardFunctionAsync(t,r,(w,I,e)=>{if(k(e,2,4,t,r),ke(e[0])){const i=S(e[1]);let o=Z(e[2],null);const s=Y(Z(e[3],!0));if(o===null&&(o=["*"]),U(o)===!1)throw new y(t,"InvalidParameter",r);return e[0].featureSetById(i,s,o)}throw new y(t,"InvalidParameter",r)})},n.signatures.push({name:"featuresetbyid",min:2,max:4});const l=new qe(["datasource","parent","root"]);n.functions.getfeatureset=function(t,r){return n.standardFunctionAsync(t,r,async(w,I,e)=>{if(k(e,1,2,t,r),te(e[0])){const i=e[1]==null?"datasource":l.lookup(S(e[1]));return et(e[0].fullSchema(),i,t.lrucache,t.interceptor,t.spatialReference)}throw new y(t,"InvalidParameter",r)})},n.signatures.push({name:"getfeatureset",min:1,max:2}),n.functions.featuresetbyportalitem=function(t,r){return n.standardFunctionAsync(t,r,(w,I,e)=>{var m,d;if(k(e,2,5,t,r),e[0]===null)throw new y(t,"PortalRequired",r);if(e[0]instanceof Qe){const a=S(e[1]),u=S(e[2]);let f=Z(e[3],null);const E=Y(Z(e[4],!0));if(f===null&&(f=["*"]),U(f)===!1)throw new y(t,"InvalidParameter",r);let g;return g=(m=t.services)!=null&&m.portal?t.services.portal:Ne.getDefault(),g=ut(e[0],g),Se(a,u,t.spatialReference,f,E,g,t.lrucache,t.interceptor)}if(P(e[0])===!1)throw new y(t,"PortalRequired",r);const i=S(e[0]),o=S(e[1]);let s=Z(e[2],null);const p=Y(Z(e[3],!0));if(s===null&&(s=["*"]),U(s)===!1)throw new y(t,"InvalidParameter",r);return Se(i,o,t.spatialReference,s,p,((d=t.services)==null?void 0:d.portal)??Ne.getDefault(),t.lrucache,t.interceptor)})},n.signatures.push({name:"featuresetbyportalitem",min:2,max:5}),n.functions.featuresetbyname=function(t,r){return n.standardFunctionAsync(t,r,(w,I,e)=>{if(k(e,2,4,t,r),ke(e[0])){const i=S(e[1]);let o=Z(e[2],null);const s=Y(Z(e[3],!0));if(o===null&&(o=["*"]),U(o)===!1)throw new y(t,"InvalidParameter",r);return e[0].featureSetByName(i,s,o)}throw new y(t,"InvalidParameter",r)})},n.signatures.push({name:"featuresetbyname",min:2,max:4}),n.functions.featureset=function(t,r){return n.standardFunction(t,r,(w,I,e)=>{k(e,1,1,t,r);const i={layerDefinition:{geometryType:"",objectIdField:"",globalIdField:"",typeIdField:"",hasM:!1,hasZ:!1,fields:[]},featureSet:{geometryType:"",features:[]}};if(P(e[0])){const o=JSON.parse(e[0]);o.layerDefinition!==void 0?(i.layerDefinition=o.layerDefinition,i.featureSet=o.featureSet,o.layerDefinition.spatialReference&&(i.layerDefinition.spatialReference=o.layerDefinition.spatialReference)):(i.featureSet.features=o.features,i.featureSet.geometryType=o.geometryType,i.layerDefinition.geometryType=i.featureSet.geometryType,i.layerDefinition.objectIdField=o.objectIdFieldName??"",i.layerDefinition.typeIdField=o.typeIdFieldName,i.layerDefinition.globalIdField=o.globalIdFieldName,i.layerDefinition.fields=o.fields,o.spatialReference&&(i.layerDefinition.spatialReference=o.spatialReference))}else{if(!(e[0]instanceof M))throw new y(t,"InvalidParameter",r);{const o=JSON.parse(e[0].castToText(!0)),s=c(o,"layerdefinition");if(s!==null){i.layerDefinition.geometryType=c(s,"geometrytype",""),i.featureSet.geometryType=i.layerDefinition.geometryType,i.layerDefinition.globalIdField=c(s,"globalidfield",""),i.layerDefinition.objectIdField=c(s,"objectidfield",""),i.layerDefinition.typeIdField=c(s,"typeidfield",""),i.layerDefinition.hasZ=c(s,"hasz",!1)===!0,i.layerDefinition.hasM=c(s,"hasm",!1)===!0;const p=c(s,"spatialreference");p&&(i.layerDefinition.spatialReference=ye(p));const m=[];for(const a of c(s,"fields",[])){const u={name:c(a,"name",""),alias:c(a,"alias",""),type:c(a,"type",""),nullable:c(a,"nullable",!0),editable:c(a,"editable",!0),length:c(a,"length",null),domain:Ce(c(a,"domain"))};m.push(u)}i.layerDefinition.fields=m;const d=c(o,"featureset");if(d){const a={};for(const u of m)a[u.name.toLowerCase()]=u.name;for(const u of c(d,"features",[])){const f={},E=c(u,"attributes",{});for(const g in E)f[a[g.toLowerCase()]]=E[g];i.featureSet.features.push({attributes:f,geometry:je(c(u,"geometry"))})}}}else{i.layerDefinition.hasZ=c(o,"hasz",!1)===!0,i.layerDefinition.hasM=c(o,"hasm",!1)===!0,i.layerDefinition.geometryType=c(o,"geometrytype",""),i.featureSet.geometryType=i.layerDefinition.geometryType,i.layerDefinition.objectIdField=c(o,"objectidfieldname",""),i.layerDefinition.typeIdField=c(o,"typeidfieldname","");const p=c(o,"spatialreference");p&&(i.layerDefinition.spatialReference=ye(p));const m=[],d=c(o,"fields",null);if(!U(d))throw new y(t,"InvalidParameter",r);for(const f of d){const E={name:c(f,"name",""),alias:c(f,"alias",""),type:c(f,"type",""),nullable:c(f,"nullable",!0),editable:c(f,"editable",!0),length:c(f,"length",null),domain:Ce(c(f,"domain"))};m.push(E)}i.layerDefinition.fields=m;const a={};for(const f of m)a[f.name.toLowerCase()]=f.name;let u=c(o,"features",null);if(U(u))for(const f of u){const E={},g=c(f,"attributes",{});for(const N in g)E[a[N.toLowerCase()]]=g[N];i.featureSet.features.push({attributes:E,geometry:je(c(f,"geometry",null))})}else u=null,i.featureSet.features=u}}}if(ht(i)===!1)throw new y(t,"InvalidParameter",r);return i.layerDefinition.geometryType||(i.layerDefinition.geometryType="esriGeometryNull"),tt.create(i,t.spatialReference)})},n.signatures.push({name:"featureset",min:1,max:1}),n.functions.filter=function(t,r){return n.standardFunctionAsync(t,r,async(w,I,e)=>{if(k(e,2,2,t,r),U(e[0])||J(e[0])){const i=[];let o,s=e[0];if(s instanceof dt&&(s=s.toArray()),!Be(e[1]))throw new y(t,"InvalidParameter",r);o=e[1].createFunction(t);for(const p of s){const m=o(p);Re(m)?await m===!0&&i.push(p):m===!0&&i.push(p)}return i}if(C(e[0])){const i=await e[0].load(),o=T.create(e[1],{fieldsIndex:i.getFieldsIndex(),timeZone:i.dateFieldsTimeZoneDefaultUTC}),s=o.getVariables();if(s.length>0){const p={};for(const m of s)p[m]=n.evaluateIdentifier(t,{name:m});o.parameters=p}return new ue({parentfeatureset:e[0],whereclause:o})}throw new y(t,"InvalidParameter",r)})},n.signatures.push({name:"filter",min:2,max:2}),n.functions.orderby=function(t,r){return n.standardFunctionAsync(t,r,async(w,I,e)=>{if(k(e,2,2,t,r),C(e[0])){const i=new nt(e[1]);return new it({parentfeatureset:e[0],orderbyclause:i})}throw new y(t,"InvalidParameter",r)})},n.signatures.push({name:"orderby",min:2,max:2}),n.functions.top=function(t,r){return n.standardFunctionAsync(t,r,async(w,I,e)=>{if(k(e,2,2,t,r),C(e[0]))return new rt({parentfeatureset:e[0],topnum:e[1]});if(U(e[0]))return X(e[1])>=e[0].length?e[0].slice():e[0].slice(0,X(e[1]));if(J(e[0]))return X(e[1])>=e[0].length()?e[0].slice():e[0].slice(0,X(e[1]));throw new y(t,"InvalidParameter",r)})},n.signatures.push({name:"top",min:2,max:2}),n.functions.first=function(t,r){return n.standardFunctionAsync(t,r,async(w,I,e)=>{if(k(e,1,1,t,r),C(e[0])){const i=await e[0].first(w.abortSignal);if(i!==null){const o=Xe.createFromGraphicLikeObject(i.geometry,i.attributes,e[0],t.timeZone);return o._underlyingGraphic=i,o}return i}return U(e[0])?e[0].length===0?null:e[0][0]:J(e[0])?e[0].length()===0?null:e[0].get(0):null})},n.signatures.push({name:"first",min:1,max:1}),n.functions.attachments=function(t,r){return n.standardFunctionAsync(t,r,async(w,I,e)=>{k(e,1,2,t,r);const i={minsize:-1,maxsize:-1,types:null,returnMetadata:!1};if(e.length>1){if(e[1]instanceof M){if(e[1].hasField("minsize")&&(i.minsize=X(e[1].field("minsize"))),e[1].hasField("metadata")&&(i.returnMetadata=Y(e[1].field("metadata"))),e[1].hasField("maxsize")&&(i.maxsize=X(e[1].field("maxsize"))),e[1].hasField("types")){const o=Ke(e[1].field("types"),!1);o.length>0&&(i.types=o)}}else if(e[1]!==null)throw new y(t,"InvalidParameter",r)}if(te(e[0])){const o=e[0]._layer;let s;if(C(o))s=o;else{if(o==null||!Ae(o))return[];s=re(o,t.spatialReference,["*"],!0,t.lrucache,t.interceptor)}return await s.load(),s.queryAttachments(e[0].field(s.objectIdField),i.minsize,i.maxsize,i.types,i.returnMetadata)}if(e[0]===null)return[];throw new y(t,"InvalidParameter",r)})},n.signatures.push({name:"attachments",min:1,max:2}),n.functions.featuresetbyrelationshipname=function(t,r){return n.standardFunctionAsync(t,r,async(w,I,e)=>{k(e,2,4,t,r);const i=e[0],o=S(e[1]);let s=Z(e[2],null);const p=Y(Z(e[3],!0));if(s===null&&(s=["*"]),U(s)===!1)throw new y(t,"InvalidParameter",r);if(e[0]===null)return null;if(!te(e[0]))throw new y(t,"InvalidParameter",r);const m=i._layer;let d;if(C(m))d=m;else{if(m==null||!Ae(m))return null;d=re(m,t.spatialReference,["*"],!0,t.lrucache,t.interceptor)}d=await d.load();const a=d.relationshipMetaData().filter(N=>N.name===o);if(a.length===0)return null;if(a[0].relationshipTableId!==void 0&&a[0].relationshipTableId!==null&&a[0].relationshipTableId>-1)return ot(d,a[0],i.field(d.objectIdField),d.spatialReference,s,p,t.lrucache,t.interceptor);let u=d.serviceUrl();if(!u)return null;u=u.endsWith("/")?u+a[0].relatedTableId.toString():u+"/"+a[0].relatedTableId.toString();const f=await at(u,d.spatialReference,s,p,t.lrucache,t.interceptor);await f.load();let E=f.relationshipMetaData();if(E=E.filter(N=>N.id===a[0].id),i.hasField(a[0].keyField)===!1||i.field(a[0].keyField)===null){const N=await d.getFeatureByObjectId(i.field(d.objectIdField),[a[0].keyField]);if(N){const D=T.create(E[0].keyField+"= @id",{fieldsIndex:f.getFieldsIndex(),timeZone:f.dateFieldsTimeZoneDefaultUTC});return D.parameters={id:N.attributes[a[0].keyField]},f.filter(D)}return new mt({parentfeatureset:f})}const g=T.create(E[0].keyField+"= @id",{fieldsIndex:f.getFieldsIndex(),timeZone:f.dateFieldsTimeZoneDefaultUTC});return g.parameters={id:i.field(a[0].keyField)},f.filter(g)})},n.signatures.push({name:"featuresetbyrelationshipname",min:2,max:4}),n.functions.featuresetbyassociation=function(t,r){return n.standardFunctionAsync(t,r,async(w,I,e)=>{k(e,2,3,t,r);const i=e[0],o=Ye(S(Z(e[1],""))),s=P(e[2])?S(e[2]):null;if(e[0]===null)return null;if(!te(e[0]))throw new y(t,"InvalidParameter",r);let p=i._layer;if(p instanceof Le&&(p=re(p,t.spatialReference,["*"],!0,t.lrucache,t.interceptor)),p===null||C(p)===!1)return null;await p.load();const m=p.serviceUrl(),d=await st(m,t.spatialReference,!0);if(d.unVersion>=8)return await bt(p,i,o,s,d,t,r);const a=d.associations;let u=null,f=null,E=!1;if(s!==null&&s!==""&&s!==void 0){for(const F of d.terminals)F.terminalName===s&&(f=F.terminalId);f===null&&(E=!0)}const g=a.getFieldsIndex(),N=g.get("TOGLOBALID").name,D=g.get("FROMGLOBALID").name,x=g.get("TOTERMINALID").name,$=g.get("FROMTERMINALID").name,V=g.get("FROMNETWORKSOURCEID").name,j=g.get("TONETWORKSOURCEID").name,G=g.get("ASSOCIATIONTYPE").name,Pe=g.get("ISCONTENTVISIBLE").name,Ze=g.get("OBJECTID").name;for(const F of p.fields)if(F.type==="global-id"){u=i.field(F.name);break}let H=null,Ie=new _(new O({name:"percentalong",alias:"percentalong",type:"double"}),T.create("0",{fieldsIndex:a.getFieldsIndex(),timeZone:a.dateFieldsTimeZoneDefaultUTC})),ge=new _(new O({name:"side",alias:"side",type:"string"}),T.create("''",{fieldsIndex:a.getFieldsIndex(),timeZone:a.dateFieldsTimeZoneDefaultUTC}));const L="globalid",he="globalId",be={};for(const F in d.lkp)be[F]=d.lkp[F].sourceId;const W=new lt(new O({name:"classname",alias:"classname",type:"string"}),null,be);let b="";switch(o){case"midspan":{b=`((${N}='${u}') OR ( ${D}='${u}')) AND (${G} IN (5))`,W.codefield=T.create(`CASE WHEN (${N}='${u}') THEN ${V} ELSE ${j} END`,{fieldsIndex:a.getFieldsIndex(),timeZone:a.dateFieldsTimeZoneDefaultUTC});const F=ce(R.findField(a.fields,D));F.name=L,F.alias=L,H=new _(F,T.create(`CASE WHEN (${D}='${u}') THEN ${N} ELSE ${D} END`,{fieldsIndex:a.getFieldsIndex(),timeZone:a.dateFieldsTimeZoneDefaultUTC})),Ie=d.unVersion>=4?new me(R.findField(a.fields,g.get("PERCENTALONG").name)):new _(new O({name:"percentalong",alias:"percentalong",type:"double"}),T.create("0",{fieldsIndex:a.getFieldsIndex(),timeZone:a.dateFieldsTimeZoneDefaultUTC}));break}case"junctionedge":{b=`((${N}='${u}') OR ( ${D}='${u}')) AND (${G} IN (4,6))`,W.codefield=T.create(`CASE WHEN (${N}='${u}') THEN ${V} ELSE ${j} END`,{fieldsIndex:a.getFieldsIndex(),timeZone:a.dateFieldsTimeZoneDefaultUTC});const F=ce(R.findField(a.fields,D));F.name=L,F.alias=L,H=new _(F,T.create(`CASE WHEN (${D}='${u}') THEN ${N} ELSE ${D} END`,{fieldsIndex:a.getFieldsIndex(),timeZone:a.dateFieldsTimeZoneDefaultUTC})),ge=new _(new O({name:"side",alias:"side",type:"string"}),T.create(`CASE WHEN (${G}=4) THEN 'from' ELSE 'to' END`,{fieldsIndex:a.getFieldsIndex(),timeZone:a.dateFieldsTimeZoneDefaultUTC}));break}case"connected":{let F=`${N}='@T'`,Fe=`${D}='@T'`;f!==null&&(F+=` AND ${x}=@A`,Fe+=` AND ${$}=@A`),b="(("+F+") OR ("+Fe+"))",b=ne(b,"@T",u??""),F=ne(F,"@T",u??""),f!==null&&(F=ne(F,"@A",f.toString()),b=ne(b,"@A",f.toString())),W.codefield=T.create("CASE WHEN "+F+` THEN ${V} ELSE ${j} END`,{fieldsIndex:a.getFieldsIndex(),timeZone:a.dateFieldsTimeZoneDefaultUTC});const se=ce(R.findField(a.fields,D));se.name=L,se.alias=L,H=new _(se,T.create("CASE WHEN "+F+` THEN ${D} ELSE ${N} END`,{fieldsIndex:a.getFieldsIndex(),timeZone:a.dateFieldsTimeZoneDefaultUTC}));break}case"container":b=`${N}='${u}' AND ${G} = 2`,f!==null&&(b+=` AND ${x} = `+f.toString()),W.codefield=V,b="( "+b+" )",H=new ie(R.findField(a.fields,D),L,L);break;case"content":b=`(${D}='${u}' AND ${G} = 2)`,f!==null&&(b+=` AND ${$} = `+f.toString()),W.codefield=j,b="( "+b+" )",H=new ie(R.findField(a.fields,N),L,L);break;case"structure":b=`(${N}='${u}' AND ${G} = 3)`,f!==null&&(b+=` AND ${x} = `+f.toString()),W.codefield=V,b="( "+b+" )",H=new ie(R.findField(a.fields,D),L,he);break;case"attached":b=`(${D}='${u}' AND ${G} = 3)`,f!==null&&(b+=` AND ${$} = `+f.toString()),W.codefield=j,b="( "+b+" )",H=new ie(R.findField(a.fields,N),L,he);break;default:throw new y(t,"InvalidParameter",r)}return E&&(b="1 <> 1"),new R({parentfeatureset:a,adaptedFields:[new me(R.findField(a.fields,Ze)),new me(R.findField(a.fields,Pe)),H,ge,W,Ie],extraFilter:b?T.create(b,{fieldsIndex:a.getFieldsIndex(),timeZone:a.dateFieldsTimeZoneDefaultUTC}):null})})},n.signatures.push({name:"featuresetbyassociation",min:2,max:6}),n.functions.groupby=function(t,r){return n.standardFunctionAsync(t,r,async(w,I,e)=>{if(k(e,3,3,t,r),!C(e[0]))throw new y(t,"InvalidParameter",r);const i=await e[0].load(),o=[],s=[];let p=!1,m=[];if(P(e[1]))m.push(e[1]);else if(e[1]instanceof M)m.push(e[1]);else if(U(e[1]))m=e[1];else{if(!J(e[1]))throw new y(t,"InvalidParameter",r);m=e[1].toArray()}for(const d of m)if(P(d)){const a=T.create(S(d),{fieldsIndex:i.getFieldsIndex(),timeZone:i.dateFieldsTimeZoneDefaultUTC}),u=xe(a)===!0?S(d):"%%%%FIELDNAME";o.push({name:u,expression:a}),u==="%%%%FIELDNAME"&&(p=!0)}else{if(!(d instanceof M))throw new y(t,"InvalidParameter",r);{const a=d.hasField("name")?d.field("name"):"%%%%FIELDNAME",u=d.hasField("expression")?d.field("expression"):"";if(a==="%%%%FIELDNAME"&&(p=!0),!a)throw new y(t,"InvalidParameter",r);o.push({name:a,expression:T.create(u||a,{fieldsIndex:i.getFieldsIndex(),timeZone:i.dateFieldsTimeZoneDefaultUTC})})}}if(m=[],P(e[2]))m.push(e[2]);else if(U(e[2]))m=e[2];else if(J(e[2]))m=e[2].toArray();else{if(!(e[2]instanceof M))throw new y(t,"InvalidParameter",r);m.push(e[2])}for(const d of m){if(!(d instanceof M))throw new y(t,"InvalidParameter",r);{const a=d.hasField("name")?d.field("name"):"",u=d.hasField("statistic")?d.field("statistic"):"",f=d.hasField("expression")?d.field("expression"):"";if(!(a&&u&&P(u)&&f))throw new y(t,"InvalidParameter",r);s.push({name:a,statistic:u,expression:T.create(f,{fieldsIndex:i.getFieldsIndex(),timeZone:i.dateFieldsTimeZoneDefaultUTC})})}}if(p){const d={};for(const u of i.fields)d[u.name.toLowerCase()]=1;for(const u of o)u.name!=="%%%%FIELDNAME"&&(d[u.name.toLowerCase()]=1);for(const u of s)u.name!=="%%%%FIELDNAME"&&(d[u.name.toLowerCase()]=1);let a=0;for(const u of o)if(u.name==="%%%%FIELDNAME"){for(;d["field_"+a.toString()]===1;)a++;d["field_"+a.toString()]=1,u.name="FIELD_"+a.toString()}}for(const d of o)fe(d.expression,n,t);for(const d of s)fe(d.expression,n,t);return e[0].groupby(o,s)})},n.signatures.push({name:"groupby",min:3,max:3}),n.functions.distinct=function(t,r){return n.standardFunctionAsync(t,r,async(w,I,e)=>{if(C(e[0])){k(e,2,2,t,r);const i=await e[0].load(),o=[];let s=[];if(P(e[1]))s.push(e[1]);else if(e[1]instanceof M)s.push(e[1]);else if(U(e[1]))s=e[1];else{if(!J(e[1]))throw new y(t,"InvalidParameter",r);s=e[1].toArray()}let p=!1;for(const m of s)if(P(m)){const d=T.create(S(m),{fieldsIndex:i.getFieldsIndex(),timeZone:i.dateFieldsTimeZoneDefaultUTC}),a=xe(d)===!0?S(m):"%%%%FIELDNAME";o.push({name:a,expression:d}),a==="%%%%FIELDNAME"&&(p=!0)}else{if(!(m instanceof M))throw new y(t,"InvalidParameter",r);{const d=m.hasField("name")?m.field("name"):"%%%%FIELDNAME",a=m.hasField("expression")?m.field("expression"):"";if(d==="%%%%FIELDNAME"&&(p=!0),!d)throw new y(t,"InvalidParameter",r);o.push({name:d,expression:T.create(a||d,{fieldsIndex:i.getFieldsIndex(),timeZone:i.dateFieldsTimeZoneDefaultUTC})})}}if(p){const m={};for(const a of i.fields)m[a.name.toLowerCase()]=1;for(const a of o)a.name!=="%%%%FIELDNAME"&&(m[a.name.toLowerCase()]=1);let d=0;for(const a of o)if(a.name==="%%%%FIELDNAME"){for(;m["field_"+d.toString()]===1;)d++;m["field_"+d.toString()]=1,a.name="FIELD_"+d.toString()}}for(const m of o)fe(m.expression,n,t);return e[0].groupby(o,[])}return It(e)})},n.functions.getfeaturesetinfo=function(t,r){return n.standardFunctionAsync(t,r,async(w,I,e)=>{if(k(e,1,1,t,r),!C(e[0]))return null;const i=await e[0].getFeatureSetInfo();return i?M.convertObjectToArcadeDictionary({layerId:i.layerId,layerName:i.layerName,itemId:i.itemId,serviceLayerUrl:i.serviceLayerUrl,webMapLayerId:i.webMapLayerId??null,webMapLayerTitle:i.webMapLayerTitle??null,className:null,objectClassId:null},De(t),!1,!1):null})},n.signatures.push({name:"getfeaturesetinfo",min:1,max:1}),n.functions.filterbysubtypecode=function(t,r){return n.standardFunctionAsync(t,r,async(w,I,e)=>{if(k(e,2,2,t,r),C(e[0])){const i=await e[0].load(),o=e[1];if(!Oe(o))throw new y(t,"InvalidParameter",r);if(i.subtypeField){const p=T.create(`${i.subtypeField}= ${e[1]}`,{fieldsIndex:i.getFieldsIndex(),timeZone:i.dateFieldsTimeZoneDefaultUTC});return new ue({parentfeatureset:e[0],whereclause:p})}if(i.typeIdField===null||i.typeIdField==="")throw new y(t,"FeatureSetDoesNotHaveSubtypes",r);const s=T.create(`${i.typeIdField}= ${e[1]}`,{fieldsIndex:i.getFieldsIndex(),timeZone:i.dateFieldsTimeZoneDefaultUTC});return new ue({parentfeatureset:e[0],whereclause:s})}throw new y(t,"InvalidParameter",r)})},n.signatures.push({name:"filterbysubtypecode",min:2,max:2})}}export{Pi as registerFunctions};
