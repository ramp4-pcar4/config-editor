import{be as v,F as b,b8 as X,i4 as g,ey as z,eq as R}from"./index-BeTPrQ6f.js";import{q as ee,j as m,X as G,A as P,B as Q,D as Y,k as x}from"./vec32-CI1xtKog-DFVYRcgb.js";import{i as E}from"./HeightModelInfo-Cjals-AI-DMpn5Tsh.js";import{o as W}from"./projectBuffer-CMNsPBq1-CMpE7Jo3.js";function k(n,S){if(!Array.isArray(n)||n.length<S)return!1;for(const h of n)if(typeof h!="number")return!1;return!0}const C=7645211,te={xmin:-180,ymin:-90,zmin:-450,xmax:180,ymax:90,zmax:8850};new E({heightModel:"gravity-related-height",heightUnit:"meters",vertCRS:"EGM96_Geoid"}),new E({heightModel:"gravity-related-height",heightUnit:"meters",vertCRS:"EGM2008_Geoid"}),new E({heightModel:"ellipsoidal",heightUnit:"meters",vertCRS:"WGS_1984"}),new E({heightModel:"ellipsoidal",heightUnit:"meters",vertCRS:"ETRS_1989"}),new E({heightModel:"gravity-related-height",heightUnit:"us-feet",vertCRS:"NAVD88_height_(ftUS)"}),new E({heightModel:"gravity-related-height",heightUnit:"meters",vertCRS:"DHHN2016_(height) "});function re(n){var S,h,i,d,f,_,p,w,y,A,M,U,V,I;return!(!((h=(S=n.extensions)==null?void 0:S.ESRI_crs)!=null&&h.wkid||(d=(i=n.extensions)==null?void 0:i.ESRI_crs)!=null&&d.latestWkid||(_=(f=n.extensions)==null?void 0:f.ESRI_crs)!=null&&_.wkt)||!((A=(y=(w=(p=n.root)==null?void 0:p.extensions)==null?void 0:w.ESRI_crs)==null?void 0:y.boundingVolume)!=null&&A.box)&&!((I=(V=(U=(M=n.root)==null?void 0:M.extensions)==null?void 0:U.ESRI_crs)==null?void 0:V.boundingVolume)!=null&&I.sphere))}function ae(n,S=!1){var p,w,y,A,M,U,V,I,L,q,D,B,H,T,j,F,Z,$,J,K,O;let h=new v({wkid:4326,vcsWkid:115700}),i=(p=n.root)==null?void 0:p.boundingVolume,d=!1,f=(w=n==null?void 0:n.root)==null?void 0:w.transform;if(S&&((A=(y=n.extensions)==null?void 0:y.ESRI_crs)!=null&&A.wkid||(U=(M=n.extensions)==null?void 0:M.ESRI_crs)!=null&&U.latestWkid||(I=(V=n.extensions)==null?void 0:V.ESRI_crs)!=null&&I.wkt)&&((B=(D=(q=(L=n.root)==null?void 0:L.extensions)==null?void 0:q.ESRI_crs)==null?void 0:D.boundingVolume)!=null&&B.box||(F=(j=(T=(H=n.root)==null?void 0:H.extensions)==null?void 0:T.ESRI_crs)==null?void 0:j.boundingVolume)!=null&&F.sphere))h=new v((Z=n.extensions)==null?void 0:Z.ESRI_crs),i=(K=(J=($=n.root)==null?void 0:$.extensions)==null?void 0:J.ESRI_crs)==null?void 0:K.boundingVolume,f=(O=n.root)==null?void 0:O.transform,d=!0;else if(!i)return new b(-180,-90,180,90,h);if(i.box){const t=i==null?void 0:i.box;if(t[3]>C&&t[7]>C&&t[11]>C)return new b({...te,spatialReference:h})}const _=R();if(!d&&i.region&&k(i.region,6)){const t=i.region,a=X(t[0]),r=X(t[1]),o=t[4],s=X(t[2]),e=X(t[3]),l=t[5];return new b({xmin:a,ymin:r,zmin:o,xmax:s,ymax:e,zmax:l,spatialReference:h})}if(i.sphere&&k(i.sphere,4)){const t=i.sphere,a=g(t[0],t[1],t[2]),r=t[3]/Math.sqrt(3),o=R();ee(o,a,g(r,r,r));const s=R();if(m(s,a,g(r,r,r)),f&&k(f,16)){const c=f;G(_,o,c),P(o,_),G(_,s,c),P(s,_)}d||(W(o,z,0,o,v.WGS84,0),W(s,z,0,s,v.WGS84,0));const e=R(),l=R();return Q(e,o,s),Y(l,o,s),new b({xmin:e[0],ymin:e[1],zmin:e[2],xmax:l[0],ymax:l[1],zmax:l[2],spatialReference:h})}if(i.box&&k(i.box,12)){const t=i.box,a=g(t[0],t[1],t[2]),r=g(t[3],t[4],t[5]),o=g(t[6],t[7],t[8]),s=g(t[9],t[10],t[11]),e=[];for(let u=0;u<8;++u)e.push(R());if(m(e[0],a,r),m(e[0],e[0],o),m(e[0],e[0],s),x(e[1],a,r),m(e[1],e[1],o),m(e[1],e[1],s),m(e[2],a,r),x(e[2],e[2],o),m(e[2],e[2],s),x(e[3],a,r),x(e[3],e[3],o),m(e[3],e[3],s),m(e[4],a,r),m(e[4],e[4],o),x(e[4],e[4],s),x(e[5],a,r),m(e[5],e[5],o),x(e[5],e[5],s),m(e[6],a,r),x(e[6],e[6],o),x(e[6],e[6],s),x(e[7],a,r),x(e[7],e[7],o),x(e[7],e[7],s),f&&k(f,16)){const u=f;for(let N=0;N<8;++N)G(e[N],e[N],u)}const l=g(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),c=g(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE);for(let u=0;u<8;++u)d||W(e[u],z,0,e[u],v.WGS84,0),Q(c,c,e[u]),Y(l,l,e[u]);return new b({xmin:c[0],ymin:c[1],zmin:c[2],xmax:l[0],ymax:l[1],zmax:l[2],spatialReference:h})}return new b(-180,-90,180,90,h)}export{re as W,ae as X};
