import{gS as C,gZ as I,iG as M,hy as R,gX as E,g_ as A,h1 as O,hl as Z,h4 as b,hb as $,h7 as t,hg as B,h5 as y,h6 as s,hm as p,h9 as _,ha as x,hc as Q,hd as T,iA as U,hr as S,h8 as q,hf as H,hj as j,hk as Y,gY as G,j8 as K,j9 as z}from"./index-BeTPrQ6f.js";const P={class:"mb-10"},V=["aria-label"],W={key:0,class:"w-full h-30 hidden"},D=["alt","src"],F=["alt","src"],J=["alt"],N={class:"pl-5"},ee={class:"ml-auto pr-5"},ae=["content"],le={key:0,class:"rv-basemap-check absolute top-0 right-0"},te=C({__name:"item",props:{basemap:{type:Object,required:!0},tileSchema:{type:Object,required:!0}},setup(a){const{t:f}=I(),L=Y("iApi"),m=M(),e=R("basemapInfo"),v=E(!1),d=G(()=>m.activeBasemapConfig),g=i=>{i.id!==d.value.id&&L.geo.map.setBasemap(i.id)},w=i=>{var l;i.key==="Tab"&&((l=e.value)!=null&&l.matches(":focus"))&&(v.value=!0,e.value._tippy.show())},r=()=>{v.value=!1,e.value._tippy.hide()},n=i=>{i.pointerType==="touch"&&(v.value=!v.value,v.value?e.value._tippy.show():e.value._tippy.hide())};return A(()=>{var i,l,c,o,u;(i=e.value)==null||i.addEventListener("mouseenter",()=>e.value._tippy.show()),(l=e.value)==null||l.addEventListener("mouseleave",()=>e.value._tippy.hide()),(c=e.value)==null||c.addEventListener("click",n),(o=e.value)==null||o.addEventListener("keyup",w),(u=e.value)==null||u.addEventListener("blur",r)}),O(()=>{var i,l,c,o,u;(i=e.value)==null||i.removeEventListener("mouseenter",()=>e.value._tippy.show()),(l=e.value)==null||l.removeEventListener("mouseleave",()=>e.value._tippy.hide()),(c=e.value)==null||c.removeEventListener("click",n),(o=e.value)==null||o.removeEventListener("focus",()=>w),(u=e.value)==null||u.removeEventListener("blur",()=>r)}),(i,l)=>{const c=b("truncate"),o=b("tippy"),u=b("focus-item");return t(),s("div",P,[y((t(),s("button",{class:"basemap-item-button bg-gray-300 w-full h-full",type:"button","aria-label":j(f)("basemap.select"),onClick:l[2]||(l[2]=h=>g(a.basemap))},[p("div",null,[p("div",{class:T(["flex hover:opacity-50 basemap-item-image basemap-item-container",a.basemap.hideThumbnail?"h-30":"h-180"])},[a.basemap.hideThumbnail?(t(),s("div",W)):a.basemap.thumbnailUrl?(t(),s("img",{key:1,class:"w-full h-180",alt:a.basemap.altText,src:a.basemap.thumbnailUrl},null,8,D)):a.tileSchema.thumbnailTileUrls&&a.tileSchema.thumbnailTileUrls.length>0&&a.basemap.layers.every(h=>h.layerType==="esri-tile")?(t(!0),s(_,{key:2},x(a.basemap.layers,h=>(t(),s("div",{key:h.id,class:"flex basemap-item-inner h-180"},[(t(!0),s(_,null,x(a.tileSchema.thumbnailTileUrls,(k,X)=>(t(),s("img",{class:"w-full",alt:a.basemap.altText,src:h.url+k,key:X},null,8,F))),128))]))),128)):(t(),s("img",{key:3,class:"w-full bg-white h-180",alt:a.basemap.altText,src:"https://openclipart.org/image/800px/275366"},null,8,J))],2)]),p("div",{class:T(["absolute flex w-full bg-black text-white h-30 bottom-6 items-center",a.basemap.hideThumbnail&&a.basemap.id===d.value.id?"opacity-85":"opacity-75"])},[y((t(),s("div",N,[p("span",null,S(a.basemap.name),1)])),[[c]]),p("div",ee,[y((t(),s("a",{onClick:l[0]||(l[0]=z(()=>{},["stop"])),onKeydown:l[1]||(l[1]=K(z(()=>{},["prevent"]),["enter","space"])),content:a.basemap.description,ref_key:"basemapInfo",ref:e},l[3]||(l[3]=[p("svg",{class:"fill-current w-16 h-16",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[p("path",{d:"M0 0h24v24H0z",fill:"none"}),p("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"})],-1)]),40,ae)),[[o,{placement:"bottom",trigger:"manual"}]])])],2),a.basemap.id===d.value.id&&!a.basemap.hideThumbnail?(t(),s("div",le,l[4]||(l[4]=[p("svg",{class:"fill-current w-25 h-25 relative",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[p("path",{d:"M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"})],-1)]))):Q("",!0)],8,V)),[[u]])])}}}),se=H(te,[["__scopeId","data-v-9fadece5"]]),ie=["content"],ne={class:"h-600 overflow-y-auto"},re={class:"font-bold text-xl"},ue={key:0,class:"border-t border-b border-gray-600"},me=C({__name:"screen",props:{panel:{type:Object}},setup(a){const{t:f}=I(),L=M(),m=R("el"),e=E([]),v=E([]),d=r=>{var n;r.key==="Tab"&&((n=m.value)!=null&&n.matches(":focus"))&&m.value._tippy.show()},g=()=>{m.value._tippy.hide()};A(()=>{var n,i;const r=L.config.map;e.value=r.tileSchemas,v.value=r.basemaps,(n=m.value)==null||n.addEventListener("blur",g),(i=m.value)==null||i.addEventListener("keyup",d)}),O(()=>{var r,n;(r=m.value)==null||r.removeEventListener("blur",g),(n=m.value)==null||n.removeEventListener("keyup",d)});const w=r=>v.value.filter(n=>n.tileSchemaId===r);return(r,n)=>{const i=Z("panel-screen"),l=b("truncate"),c=b("focus-list"),o=b("tippy");return t(),$(i,{panel:a.panel},{header:B(()=>[U(S(j(f)("basemap.title")),1)]),content:B(()=>[y((t(),s("div",{content:j(f)("panels.controls.items"),ref_key:"el",ref:m},[p("div",ne,[(t(!0),s(_,null,x(e.value,(u,h)=>(t(),s("div",{class:"mx-5",key:u.id},[p("div",{class:T((h===0?"mt-5":"mt-36")+" flex mb-5")},[y((t(),s("h3",re,[U(S(u.name),1)])),[[l]])],2),v.value.length>0?(t(),s("ul",ue,[(t(!0),s(_,null,x(w(u.id),k=>(t(),s("li",{key:k.id},[q(se,{basemap:k,tileSchema:u,class:"block relative overflow-hidden"},null,8,["basemap","tileSchema"])]))),128))])):Q("",!0)]))),128))])],8,ie)),[[c],[o,{trigger:"manual",placement:"top-end",touch:!1,maxWidth:190}]])]),_:1},8,["panel"])}}});export{me as default};
