const O=[["(",")"],[")","("],["<",">"],[">","<"],["[","]"],["]","["],["{","}"],["}","{"],["«","»"],["»","«"],["‹","›"],["›","‹"],["⁽","⁾"],["⁾","⁽"],["₍","₎"],["₎","₍"],["≤","≥"],["≥","≤"],["〈","〉"],["〉","〈"],["﹙","﹚"],["﹚","﹙"],["﹛","﹜"],["﹜","﹛"],["﹝","﹞"],["﹞","﹝"],["﹤","﹥"],["﹥","﹤"]],N=["آ","أ","إ","ا"],X=["ﻵ","ﻷ","ﻹ","ﻻ"],uu=["ﻶ","ﻸ","ﻺ","ﻼ"],W=["ا","ب","ت","ث","ج","ح","خ","د","ذ","ر","ز","س","ش","ص","ض","ط","ظ","ع","غ","ف","ق","ك","ل","م","ن","ه","و","ي","إ","أ","آ","ة","ى","ل","م","ن","ه","و","ي","إ","أ","آ","ة","ى","ی","ئ","ؤ"],tu=["ﺍ","ﺏ","ﺕ","ﺙ","ﺝ","ﺡ","ﺥ","ﺩ","ﺫ","ﺭ","ﺯ","ﺱ","ﺵ","ﺹ","ﺽ","ﻁ","ﻅ","ﻉ","ﻍ","ﻑ","ﻕ","ﻙ","ﻝ","ﻡ","ﻥ","ﻩ","ﻭ","ﻱ","ﺇ","ﺃ","ﺁ","ﺓ","ﻯ","ﯼ","ﺉ","ﺅ","ﹰ","ﹲ","ﹴ","ﹶ","ﹸ","ﹺ","ﹼ","ﹾ","ﺀ","ﺉ","ﺅ"],ru=["ﺎ","ﺐ","ﺖ","ﺚ","ﺞ","ﺢ","ﺦ","ﺪ","ﺬ","ﺮ","ﺰ","ﺲ","ﺶ","ﺺ","ﺾ","ﻂ","ﻆ","ﻊ","ﻎ","ﻒ","ﻖ","ﻚ","ﻞ","ﻢ","ﻦ","ﻪ","ﻮ","ﻲ","ﺈ","ﺄ","ﺂ","ﺔ","ﻰ","ﯽ","ﺊ","ﺆ","ﹰ","ﹲ","ﹴ","ﹶ","ﹸ","ﹺ","ﹼ","ﹾ","ﺀ","ﺊ","ﺆ"],Fu=["ﺎ","ﺒ","ﺘ","ﺜ","ﺠ","ﺤ","ﺨ","ﺪ","ﺬ","ﺮ","ﺰ","ﺴ","ﺸ","ﺼ","ﻀ","ﻄ","ﻈ","ﻌ","ﻐ","ﻔ","ﻘ","ﻜ","ﻠ","ﻤ","ﻨ","ﻬ","ﻮ","ﻴ","ﺈ","ﺄ","ﺂ","ﺔ","ﻰ","ﯿ","ﺌ","ﺆ","ﹱ","ﹲ","ﹴ","ﹷ","ﹹ","ﹻ","ﹽ","ﹿ","ﺀ","ﺌ","ﺆ"],eu=["ﺍ","ﺑ","ﺗ","ﺛ","ﺟ","ﺣ","ﺧ","ﺩ","ﺫ","ﺭ","ﺯ","ﺳ","ﺷ","ﺻ","ﺿ","ﻃ","ﻇ","ﻋ","ﻏ","ﻓ","ﻗ","ﻛ","ﻟ","ﻣ","ﻧ","ﻫ","ﻭ","ﻳ","ﺇ","ﺃ","ﺁ","ﺓ","ﻯ","ﯾ","ﺋ","ﺅ","ﹰ","ﹲ","ﹴ","ﹶ","ﹸ","ﹺ","ﹼ","ﹾ","ﺀ","ﺋ","ﺅ"],z=["ء","آ","أ","ؤ","إ","ا","ة","د","ذ","ر","ز","و","ى"],Eu=["ً","ً","ٌ","؟","ٍ","؟","َ","َ","ُ","ُ","ِ","ِ","ّ","ّ","ْ","ْ","ء","آ","آ","أ","أ","ؤ","ؤ","إ","إ","ئ","ئ","ئ","ئ","ا","ا","ب","ب","ب","ب","ة","ة","ت","ت","ت","ت","ث","ث","ث","ث","ج","ج","ج","ج","ح","ح","ح","ح","خ","خ","خ","خ","د","د","ذ","ذ","ر","ر","ز","ز","س","س","س","س","ش","ش","ش","ش","ص","ص","ص","ص","ض","ض","ض","ض","ط","ط","ط","ط","ظ","ظ","ظ","ظ","ع","ع","ع","ع","غ","غ","غ","غ","ف","ف","ف","ف","ق","ق","ق","ق","ك","ك","ك","ك","ل","ل","ل","ل","م","م","م","م","ن","ن","ن","ن","ه","ه","ه","ه","و","و","ى","ى","ي","ي","ي","ي","ﻵ","ﻶ","ﻷ","ﻸ","ﻹ","ﻺ","ﻻ","ﻼ","؟","؟","؟"],Z=["ء","ف"],nu=["غ","ي"],au=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],fu=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],r=0,n=1,s=2,L=3,u=4,D=5,I=6,t=7,d=8,U=9,m=10,o=11,F=12,lu=13,iu=14,Au=15,su=16,ou=17,A=18,hu=["UBAT_L","UBAT_R","UBAT_EN","UBAT_AN","UBAT_ON","UBAT_B","UBAT_S","UBAT_AL","UBAT_WS","UBAT_CS","UBAT_ES","UBAT_ET","UBAT_NSM","UBAT_LRE","UBAT_RLE","UBAT_PDF","UBAT_LRO","UBAT_RLO","UBAT_BN"],R=100,Bu=[R+0,r,r,r,r,R+1,R+2,R+3,n,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,R+4,u,u,u,r,u,r,u,r,u,u,u,r,r,u,u,r,r,r,r,r,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,r,r,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,r,r,r,r,r,r,r,r,r,r,r,r,r,r,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,r,r,u,u,r,r,u,u,r,r,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,r,r,r,R+5,t,t,R+6,R+7],cu=[[A,A,A,A,A,A,A,A,A,I,D,I,d,D,A,A,A,A,A,A,A,A,A,A,A,A,A,A,D,D,D,I,d,u,u,o,o,o,u,u,u,u,u,m,U,m,U,U,s,s,s,s,s,s,s,s,s,s,U,u,u,u,u,u,u,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,u,u,u,u,u,u,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,u,u,u,u,A,A,A,A,A,A,D,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,U,u,o,o,o,o,u,u,u,u,r,u,u,A,u,u,o,o,s,s,u,r,u,u,u,s,r,u,u,u,u,u,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,u,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,u,r,r,r,r,r,r,r,r],[r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,u,u,u,u,u,u,u,u,u,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,u,u,r,r,r,r,r,r,r,u,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,u,r,u,u,u,u,u,u,u,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,n,F,n,F,F,n,F,F,n,F,u,u,u,u,u,u,u,u,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,u,u,u,u,u,n,n,n,n,n,u,u,u,u,u,u,u,u,u,u,u],[L,L,L,L,u,u,u,u,t,o,o,t,U,t,u,u,F,F,F,F,F,F,F,F,F,F,F,t,u,u,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,L,L,L,L,L,L,L,L,L,L,o,L,L,t,t,t,F,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,F,F,F,F,F,F,F,L,u,F,F,F,F,F,F,t,t,F,F,u,F,F,F,F,t,t,s,s,s,s,s,s,s,s,s,s,t,t,t,t,t,t],[t,t,t,t,t,t,t,t,t,t,t,t,t,t,u,t,t,F,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,u,u,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,F,F,F,F,F,F,F,F,F,F,F,t,u,u,u,u,u,u,u,u,u,u,u,u,u,u,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,F,F,F,F,F,F,F,F,F,n,n,u,u,u,u,n,u,u,u,u,u],[d,d,d,d,d,d,d,d,d,d,d,A,A,A,r,n,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,d,D,lu,iu,Au,su,ou,U,o,o,o,o,o,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,U,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,d,A,A,A,A,A,u,u,u,u,u,A,A,A,A,A,A,s,r,u,u,s,s,s,s,s,s,m,m,u,u,u,r,s,s,s,s,s,s,s,s,s,s,m,m,u,u,u,u,r,r,r,r,r,r,r,r,r,r,r,r,r,u,u,u,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u],[r,r,r,r,r,r,r,u,u,u,u,u,u,u,u,u,u,u,u,r,r,r,r,r,u,u,u,u,u,n,F,n,n,n,n,n,n,n,n,n,n,m,n,n,n,n,n,n,n,n,n,n,n,n,n,u,n,n,n,n,n,u,n,u,n,n,u,n,n,u,n,n,n,n,n,n,n,n,n,n,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t],[F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,F,F,F,F,F,F,F,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,U,u,U,u,u,U,u,u,u,u,u,u,u,u,u,o,u,u,m,m,u,u,u,u,u,o,o,u,u,u,u,u,t,t,t,t,t,u,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,u,u,A],[u,u,u,o,o,o,u,u,u,u,u,m,U,m,U,U,s,s,s,s,s,s,s,s,s,s,U,u,u,u,u,u,u,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,u,u,u,u,u,u,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,u,u,u,u,u,u,u,u,u,u,u,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,u,u,u,r,r,r,r,r,r,u,u,r,r,r,r,r,r,u,u,r,r,r,r,r,r,u,u,r,r,r,u,u,u,o,o,u,u,u,o,o,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u]];class ku{constructor(){this.inputFormat="ILYNN",this.outputFormat="VLNNN",this.sourceToTarget=[],this.targetToSource=[],this.levels=[]}bidiTransform(e,a,f){if(this.sourceToTarget=[],this.targetToSource=[],!e)return"";if(Vu(this.sourceToTarget,this.targetToSource,e.length),!this.checkParameters(a,f))return e;a=this.inputFormat,f=this.outputFormat;let l=e;const i=Ou,B=G(a.charAt(1)),h=G(f.charAt(1)),c=(a.startsWith("I")?"L":a.charAt(0))+B,T=(f.startsWith("I")?"L":f.charAt(0))+h,C=a.charAt(2)+f.charAt(2);i.defInFormat=c,i.defOutFormat=T,i.defSwap=C;const p=v(e,c,T,C,i);let S=!1;return f.charAt(1)==="R"?S=!0:f.charAt(1)!=="C"&&f.charAt(1)!=="D"||(S=this.checkContextual(p)==="rtl"),this.sourceToTarget=g,this.targetToSource=xu(this.sourceToTarget),k=this.targetToSource,l=a.charAt(3)===f.charAt(3)?p:f.charAt(3)==="S"?Lu(S,p):Uu(p,S,!0),this.sourceToTarget=g,this.targetToSource=k,this.levels=y,l}_inputFormatSetter(e){if(!H.test(e))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.inputFormat=e}_outputFormatSetter(e){if(!H.test(e))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.outputFormat=e}checkParameters(e,a){return e?this._inputFormatSetter(e):e=this.inputFormat,a?this._outputFormatSetter(a):a=this.outputFormat,e!==a}checkContextual(e){let a=j(e);if(a!=="ltr"&&a!=="rtl"){try{a=document.dir.toLowerCase()}catch{}a!=="ltr"&&a!=="rtl"&&(a="ltr")}return a}hasBidiChar(e){return ju.test(e)}}function v(E,e,a,f,l){const i=Tu(E,{inFormat:e,outFormat:a,swap:f},l);if(i.inFormat===i.outFormat)return E;e=i.inFormat,a=i.outFormat,f=i.swap;const B=e.slice(0,1),h=e.slice(1,4),c=a.slice(0,1),T=a.slice(1,4);if(l.inFormat=e,l.outFormat=a,l.swap=f,B==="L"&&a==="VLTR"){if(h==="LTR")return l.dir=w,_(E,l);if(h==="RTL")return l.dir=V,_(E,l)}if(B==="V"&&c==="V")return l.dir=h==="RTL"?V:w,Y(E,l);if(B==="L"&&a==="VRTL")return h==="LTR"?(l.dir=w,E=_(E,l)):(l.dir=V,E=_(E,l)),Y(E);if(e==="VLTR"&&a==="LLTR")return l.dir=w,_(E,l);if(B==="V"&&c==="L"&&h!==T)return E=Y(E),h==="RTL"?v(E,"LLTR","VLTR",f,l):v(E,"LRTL","VRTL",f,l);if(e==="VRTL"&&a==="LRTL")return v(E,"LRTL","VRTL",f,l);if(B==="L"&&c==="L"){const C=l.swap;return l.swap=C.slice(0,1)+"N",h==="RTL"?(l.dir=V,E=_(E,l),l.swap="N"+C.slice(1,3),l.dir=w,E=_(E,l)):(l.dir=w,E=_(E,l),l.swap="N"+C.slice(1,3),E=v(E,"VLTR","LRTL",l.swap,l)),E}return E}function Tu(E,e,a){if(e.inFormat===void 0&&(e.inFormat=a.defInFormat),e.outFormat===void 0&&(e.outFormat=a.defOutFormat),e.swap===void 0&&(e.swap=a.defSwap),e.inFormat===e.outFormat)return e;const f=e.inFormat.slice(0,1),l=e.outFormat.slice(0,1);let i,B=e.inFormat.slice(1,4),h=e.outFormat.slice(1,4);return B.startsWith("C")&&(i=j(E),B=i==="ltr"||i==="rtl"?i.toUpperCase():e.inFormat.charAt(2)==="L"?"LTR":"RTL",e.inFormat=f+B),h.startsWith("C")&&(i=j(E),i==="rtl"?h="RTL":i==="ltr"?(i=du(E),h=i.toUpperCase()):h=e.outFormat.charAt(2)==="L"?"LTR":"RTL",e.outFormat=l+h),e}function Lu(E,e,a){if(e.length===0)return"";E===void 0&&(E=!0);const f=(e=String(e)).split("");let l=0,i=1,B=f.length;E||(l=f.length-1,i=-1,B=1);const h=Cu(f,l,i,B);let c="";for(let T=0;T<f.length;T++)Du(h,h.length,T)>-1?(Q(k,T,!E,-1),g.splice(T,1)):c+=f[T];return c}function Cu(E,e,a,f,l){let i=0;const B=[];let h=0;for(let c=e;c*a<f;c+=a)if(K(E[c])||x(E[c])){if(E[c]==="ل"&&_u(E,c+a,a,f)){E[c]=vu(E[c+a],i===0?X:uu),c+=a,Nu(E,c,a,f),B[h]=c,h++,i=0;continue}const T=E[c];i===1?E[c]=$(E,c+a,a,f)?wu(E[c]):M(E[c],ru):$(E,c+a,a,f)===!0?E[c]=M(E[c],eu):E[c]=M(E[c],tu),x(T)||(i=1),bu(T)===!0&&(i=0)}else i=0;return B}function j(E){const e=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(E);return e?e[0]<="z"?"ltr":"rtl":""}function du(E){const e=E.split("");return e.reverse(),j(e.join(""))}function Uu(E,e,a){if(E.length===0)return"";e===void 0&&(e=!0);let f="";const l=(E=String(E)).split("");for(let i=0;i<E.length;i++){let B=!1;if(l[i]>="ﹰ"&&l[i]<"\uFEFF"){const h=E.charCodeAt(i);l[i]>="ﻵ"&&l[i]<="ﻼ"?(e?(i>0&&a&&l[i-1]===" "?f=f.slice(0,-1)+"ل":(f+="ل",B=!0),f+=N[(h-65269)/2]):(f+=N[(h-65269)/2],f+="ل",i+1<E.length&&a&&l[i+1]===" "?i++:B=!0),B&&(Q(k,i,!0,1),g.splice(i,0,g[i]))):f+=Eu[h-65136]}else f+=l[i]}return f}function _(E,e){const a=E.split(""),f=[];return J(a,f,e),mu(a,f,e),q(2,a,f,e),q(1,a,f,e),y=f,a.join("")}function J(E,e,a){const f=E.length,l=a.dir?fu:au;let i=0,B=-1;const h=[],c=[];a.hiLevel=a.dir,a.lastArabic=!1,a.hasUbatAl=!1,a.hasUbatB=!1,a.hasUbatS=!1;for(let T=0;T<f;T++)h[T]=Ru(E[T]);for(let T=0;T<f;T++){const C=i,p=pu(E,h,c,T,a);c[T]=p,i=l[C][p];const S=240&i;i&=15;const P=l[i][Iu];if(e[T]=P,S>0)if(S===16){for(let b=B;b<T;b++)e[b]=1;B=-1}else B=-1;if(l[i][Wu])B===-1&&(B=T);else if(B>-1){for(let b=B;b<T;b++)e[b]=P;B=-1}h[T]===D&&(e[T]=0),a.hiLevel|=P}a.hasUbatS&&gu(h,e,f,a)}function gu(E,e,a,f){for(let l=0;l<a;l++)if(E[l]===I){e[l]=f.dir;for(let i=l-1;i>=0&&E[i]===d;i--)e[i]=f.dir}}function mu(E,e,a){if(a.hiLevel!==0&&a.swap[0]!==a.swap[1])for(let f=0;f<E.length;f++)e[f]===1&&(E[f]=Su(E[f]))}function Ru(E){const e=E.charCodeAt(0),a=Bu[e>>8];return a<R?a:cu[a-R][255&e]}function Y(E,e){const a=E.split("");if(e){const f=[];J(a,f,e),y=f}return a.reverse(),g.reverse(),a.join("")}function Du(E,e,a){for(let f=0;f<e;f++)if(E[f]===a)return f;return-1}function K(E){for(let e=0;e<Z.length;e++)if(E>=Z[e]&&E<=nu[e])return!0;return!1}function $(E,e,a,f){for(;e*a<f&&x(E[e]);)e+=a;return!!(e*a<f&&K(E[e]))}function _u(E,e,a,f){for(;e*a<f&&x(E[e]);)e+=a;let l=" ";if(!(e*a<f))return!1;l=E[e];for(let i=0;i<N.length;i++)if(N[i]===l)return!0;return!1}function q(E,e,a,f){if(f.hiLevel<E)return;if(E===1&&f.dir===V&&!f.hasUbatB)return e.reverse(),void g.reverse();const l=e.length;let i,B,h,c,T,C=0;for(;C<l;){if(a[C]>=E){for(i=C+1;i<l&&a[i]>=E;)i++;for(B=C,h=i-1;B<h;B++,h--)c=e[B],e[B]=e[h],e[h]=c,T=g[B],g[B]=g[h],g[h]=T;C=i}C++}}function pu(E,e,a,f,l){const i=e[f];return{UBAT_L:()=>(l.lastArabic=!1,r),UBAT_R:()=>(l.lastArabic=!1,n),UBAT_ON:()=>u,UBAT_AN:()=>L,UBAT_EN:()=>l.lastArabic?L:s,UBAT_AL:()=>(l.lastArabic=!0,l.hasUbatAl=!0,n),UBAT_WS:()=>u,UBAT_CS:()=>{let B,h;return f<1||f+1>=e.length||(B=a[f-1])!==s&&B!==L||(h=e[f+1])!==s&&h!==L?u:(l.lastArabic&&(h=L),h===B?h:u)},UBAT_ES:()=>(f>0?a[f-1]:D)===s&&f+1<e.length&&e[f+1]===s?s:u,UBAT_ET:()=>{if(f>0&&a[f-1]===s)return s;if(l.lastArabic)return u;let B=f+1;const h=e.length;for(;B<h&&e[B]===o;)B++;return B<h&&e[B]===s?s:u},UBAT_NSM:()=>{if(l.inFormat==="VLTR"){const B=e.length;let h=f+1;for(;h<B&&e[h]===F;)h++;if(h<B){const c=E[f].charCodeAt(0),T=c>=1425&&c<=2303||c===64286,C=e[h];if(T&&(C===n||C===t))return n}}return f<1||e[f-1]===D?u:a[f-1]},UBAT_B:()=>(l.lastArabic=!0,l.hasUbatB=!0,l.dir),UBAT_S:()=>(l.hasUbatS=!0,u),UBAT_LRE:()=>(l.lastArabic=!1,u),UBAT_RLE:()=>(l.lastArabic=!1,u),UBAT_LRO:()=>(l.lastArabic=!1,u),UBAT_RLO:()=>(l.lastArabic=!1,u),UBAT_PDF:()=>(l.lastArabic=!1,u),UBAT_BN:()=>u}[hu[i]]()}function Su(E){let e,a=0,f=O.length-1;for(;a<=f;)if(e=Math.floor((a+f)/2),E<O[e][0])f=e-1;else{if(!(E>O[e][0]))return O[e][1];a=e+1}return E}function bu(E){for(let e=0;e<z.length;e++)if(z[e]===E)return!0;return!1}function wu(E){for(let e=0;e<W.length;e++)if(E===W[e])return Fu[e];return E}function M(E,e){for(let a=0;a<W.length;a++)if(E===W[a])return e[a];return E}function x(E){return E>="ً"&&E<="ٕ"}function G(E){return E==="L"?"LTR":E==="R"?"RTL":E==="C"?"CLR":E==="D"?"CRL":""}function Nu(E,e,a,f){for(;e*a<f&&x(E[e]);)e+=a;return e*a<f&&(E[e]=" ",!0)}function vu(E,e){for(let a=0;a<N.length;a++)if(E===N[a])return e[a];return E}function Vu(E,e,a){g=[],y=[];for(let f=0;f<a;f++)E[f]=f,e[f]=f,g[f]=f}function xu(E){const e=new Array(E.length);for(let a=0;a<E.length;a++)e[E[a]]=a;return e}function Q(E,e,a,f){for(let l=0;l<E.length;l++)(E[l]>e||!a&&E[l]===e)&&(E[l]+=f)}let g=[],k=[],y=[];const Ou={dir:0,defInFormat:"LLTR",defSwap:"YN",inFormat:"LLTR",outFormat:"VLTR",swap:"YN",hiLevel:0,lastArabic:!1,hasUbatAl:!1,defOutFormat:""},Iu=5,Wu=6,w=0,V=1,H=/^[(I|V)][(L|RCD)][(Y|N)][(S|N)]N$/,ju=/[\u0591-\u06ff\ufb1d-\ufefc]/;export{ku as d};
