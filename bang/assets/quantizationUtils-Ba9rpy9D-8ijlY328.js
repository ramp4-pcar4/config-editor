import"./index-BeTPrQ6f.js";function O(t){return t?{originPosition:t.originPosition==="upper-left"?"upperLeft":t.originPosition==="lower-left"?"lowerLeft":t.originPosition,scale:t.tolerance?[t.tolerance,t.tolerance,1,1]:[1,1,1,1],translate:t.extent!=null?[t.extent.xmin,t.extent.ymax,t.extent.zmin??0,t.extent.mmin??0]:[0,0,0,0]}:null}function q(t){return t.originPosition==="lowerLeft"&&t.scale.length===4&&t.translate.length===4}function w(t){if(q(t))return t;const{originPosition:r,scale:n,translate:l}=t,s=n[0]??1,o=n[1]??1;return{originPosition:"lowerLeft",scale:[s,r==="lowerLeft"?o:-o,n[2]??1,n[3]??1],translate:[l[0]??0,l[1]??0,l[2]??0,l[3]??0]}}function p({scale:t,translate:r},n){return Math.round((n-r[0])/t[0])}function M({scale:t,translate:r},n){return Math.round((n-r[1])/t[1])}function m({scale:t,translate:r},n){return Math.round(((n??0)-r[2])/t[2])}function Z({scale:t,translate:r},n){return n?Math.round((n-r[3])/t[3]):0}function j(t,r){return t&&r?D:t&&!r?B:!t&&r?C:v}const v=(t,r)=>{const n=[];if(!r.length)return null;const l=r[0];let s=p(t,l[0]),o=M(t,l[1]);n.push([s,o]);for(let e=1;e<r.length;e++){const[u,i]=r[e],c=p(t,u),a=M(t,i);c===s&&a===o||n.push([c-s,a-o]),s=c,o=a}return n},B=(t,r)=>{const n=[];if(!r.length)return null;const l=r[0];let s=p(t,l[0]),o=M(t,l[1]),e=m(t,l[2]);n.push([s,o,e]);for(let u=1;u<r.length;u++){const[i,c,a]=r[u],h=p(t,i),f=M(t,c),g=m(t,a);h===s&&f===o&&g===e||n.push([h-s,f-o,g]),s=h,o=f,e=g}return n},C=(t,r)=>{const n=[];if(!r.length)return null;const l=r[0];let s=p(t,l[0]),o=M(t,l[1]),e=Z(t,l[2]);n.push([s,o,e]);for(let u=1;u<r.length;u++){const[i,c,a]=r[u],h=p(t,i),f=M(t,c),g=Z(t,a);h===s&&f===o&&g===e||n.push([h-s,f-o,g]),s=h,o=f,e=g}return n},D=(t,r)=>{const n=[];if(!r.length)return null;const l=r[0];let s=p(t,l[0]),o=M(t,l[1]),e=m(t,l[2]),u=Z(t,l[3]);n.push([s,o,e,u]);for(let i=1;i<r.length;i++){const[c,a,h,f]=r[i],g=p(t,c),x=M(t,a),A=m(t,h),d=Z(t,f);g===s&&x===o&&A===e&&d===u||n.push([g-s,x-o,A,d]),s=g,o=x,e=A,u=d}return n};function E(t,r,n,l){const s=[],o=j(n,l);for(let e=0;e<r.length;e++){const u=o(t,r[e]);u&&u.length>=3&&s.push(u)}return s.length?s:null}function G(t,r,n,l){const s=[],o=j(n,l);for(let e=0;e<r.length;e++){const u=o(t,r[e]);u&&u.length>=2&&s.push(u)}return s.length?s:null}function L({scale:t,translate:r},n){return n*t[0]+r[0]}function z({scale:t,translate:r},n){return n*t[1]+r[1]}function P({scale:t,translate:r},n){return(n??0)*t[2]+r[2]}function y({scale:t,translate:r},n){return n?n*t[3]+r[3]:0}function b(t,r){return t&&r?K:t&&!r?I:!t&&r?J:H}const H=(t,r)=>{const n=new Array(r.length);if(!r.length)return n;const l=r[0];let s=L(t,l[0]),o=z(t,l[1]);n[0]=[s,o];const{scale:e,originPosition:u}=t,i=e[0],c=u==="lowerLeft"?e[1]:-e[1];for(let a=1;a<r.length;a++){const[h,f]=r[a];s+=i*h,o+=c*f,n[a]=[s,o]}return n},I=(t,r)=>{const n=new Array(r.length);if(!r.length)return n;const l=r[0];let s=L(t,l[0]),o=z(t,l[1]);n[0]=[s,o,P(t,l[2])];const{scale:e,originPosition:u}=t,i=e[0],c=u==="lowerLeft"?e[1]:-e[1];for(let a=1;a<r.length;a++){const[h,f,g]=r[a];s+=i*h,o+=c*f,n[a]=[s,o,P(t,g)]}return n},J=(t,r)=>{const n=new Array(r.length);if(!r.length)return n;const l=r[0];let s=L(t,l[0]),o=z(t,l[1]);n[0]=[s,o,y(t,l[2])];const{scale:e,originPosition:u}=t,i=e[0],c=u==="lowerLeft"?e[1]:-e[1];for(let a=1;a<r.length;a++){const[h,f,g]=r[a];s+=i*h,o+=c*f,n[a]=[s,o,y(t,g)]}return n},K=(t,r)=>{const n=new Array(r.length);if(!r.length)return n;const l=r[0];let s=L(t,l[0]),o=z(t,l[1]);n[0]=[s,o,P(t,l[2]),y(t,l[3])];const{scale:e,originPosition:u}=t,i=e[0],c=u==="lowerLeft"?e[1]:-e[1];for(let a=1;a<r.length;a++){const[h,f,g,x]=r[a];s+=i*h,o+=c*f,n[a]=[s,o,P(t,g),y(t,x)]}return n};function k(t,r,n){const l=new Array(n.length);for(let s=0;s<n.length;s++)l[s]=r(t,n[s]);return l}function Q(t,r,n){const l=w(t);return r.x=p(l,n.x),r.y=M(l,n.y),n.z!=null&&(r.z=m(l,n.z)),n.m!=null&&(r.m=Z(l,n.m)),r}function R(t,r,n){const l=E(w(t),n.rings,n.hasZ,n.hasM);return l?(r.rings=l,r.hasZ=n.hasZ??!1,r.hasM=n.hasM??!1,r):null}function S(t,r,n){const l=G(w(t),n.paths,n.hasZ,n.hasM);return l?(r.paths=l,r.hasZ=n.hasZ??!1,r.hasM=n.hasM??!1,r):null}function T(t,r,n,l=(n==null?void 0:n.hasZ)??!1,s=(n==null?void 0:n.hasM)??!1){if(n!=null){const o=w(t);r.points=b(l,s)(o,n.points),r.hasZ=l,r.hasM=s}return r}function U(t,r,n,l=(n==null?void 0:n.z)!=null,s=(n==null?void 0:n.m)!=null){if(n==null)return r;const o=w(t);return r.x=L(o,n.x),r.y=z(o,n.y),l&&(r.z=P(o,n.z)),s&&(r.m=y(o,n.m)),r}function V(t,r,n,l=(n==null?void 0:n.hasZ)??!1,s=(n==null?void 0:n.hasM)??!1){if(n!=null){const o=w(t);r.rings=k(o,b(l,s),n.rings),r.hasZ=l,r.hasM=s}return r}function F(t,r,n,l=(n==null?void 0:n.hasZ)??!1,s=(n==null?void 0:n.hasM)??!1){if(n!=null){const o=w(t);r.paths=k(o,b(l,s),n.paths),r.hasZ=l,r.hasM=s}return r}export{O as C,M,Q as N,R as O,S as Q,T as R,U as S,V as T,F as V,p,w};
