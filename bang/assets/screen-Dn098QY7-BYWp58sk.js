import{gS as _,hk as A,iD as B,gZ as E,gY as T,gX as g,g$ as V,hn as I,j6 as Q,h1 as U,hl as X,hb as R,h7 as h,hg as j,hm as s,h6 as x,hc as H,h5 as $,j4 as Z,hj as p,j8 as D,j9 as F,js as K,hr as k,ha as W,hf as Y,h9 as G,iA as J,h4 as N,h8 as P,hd as ee,hh as ne,jt as ae}from"./index-BeTPrQ6f.js";import{u as S}from"./marked.esm-DgqJBp_S-Ch7brdN_.js";const te={key:0},le=["content"],se={class:"text-lg text-left flex-grow"},re=["innerHTML"],oe=_({__name:"section",props:{helpSection:{type:Object,required:!0}},setup(o){const{t:w}=E();return(b,r)=>{const c=N("tippy");return o.helpSection.drawn?(h(),x("div",te,[s("div",null,[$((h(),x("button",{type:"button",class:"help-section-header flex items-center py-15 px-25 hover:bg-gray-200 cursor-pointer select-none w-full",onClick:r[0]||(r[0]=i=>b.$emit("expand")),content:p(w)(o.helpSection.expanded?"help.section.collapse":"help.section.expand")},[s("span",se,k(o.helpSection.header),1),s("div",{class:ee(["dropdown-icon",{"transform -rotate-180":o.helpSection.expanded}])},r[1]||(r[1]=[s("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},[s("path",{d:"M0 0h24v24H0V0z",fill:"none"}),s("path",{d:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"})],-1)]),2)],8,le)),[[c,{placement:"top-end",hideOnClick:!1}]]),P(ae,{name:"help-item",mode:"out-in"},{default:j(()=>[$(s("div",{innerHTML:o.helpSection.info,class:"ramp-markdown section-body px-20 pt-5 ml-10 overflow-hidden"},null,8,re),[[ne,o.helpSection.expanded]])]),_:1})])])):H("",!0)}}}),pe=Y(oe,[["__scopeId","data-v-7dc61532"]]),ie={class:"h-26 mb-8 mx-8"},de=["placeholder","aria-label"],he={key:0},fe=_({__name:"screen",props:{panel:{type:Object,required:!0}},setup(o){const w=A("iApi"),b=B(),{t:r}=E(),c=T(()=>b.location),i=g([]),y=g([]),C=g([]),L=g(!1);let u,f;function O(e,t){const n=t.info.split(/(<[^>]*>)/);for(const[a,l]of n.entries())if(a%2===0&&l.toLowerCase().indexOf(e.toLowerCase())>-1)return!0;return!1}function M(e,t){const n=y.value[t].split(/(<[^>]*>)/);let a="";for(const[l,d]of n.entries())l%2===0?a+=d.replace(new RegExp(e,"gi"),m=>`<mark>${m}</mark>`):a+=d;i.value[t].info=a}function q(e,t){u=0,t.forEach((n,a)=>{n.info=y.value[a],n.drawn=O(e,n)||n.header.toLowerCase().indexOf(e.toLowerCase())>-1,u=n.drawn?u+1:u,n.expanded=n.drawn&&e.length>2,n.drawn&&e.length>2&&M(e,a)}),L.value=u===0}function z(e){e.expanded=!e.expanded}return V(()=>{C.value.push(I(()=>w.language,(e,t)=>{if(e===t)return;const n=new S.Renderer,a=c.value.slice(-1)==="/"?c.value:`${c.value}/`;n.image=(l,d,m)=>(l.indexOf("http")===-1&&(l=`${a}images/`+l),`<img src="${l}" alt="${m}">`),Q.get(`${a}${e}.md`).then(l=>{const d=/^#\s(.*)\n{2}(?:.+|\n(?!\n{2,}))*/gm,m=l.data.replace(new RegExp("\r","g"),"");i.value=[];let v;for(;v=d.exec(m);)i.value.push({header:v[1],info:S(v[0].split(`
`).splice(2).join(`
`),{renderer:n}),drawn:!0,expanded:!1}),y.value.push(S(v[0].split(`
`).splice(2).join(`
`),{renderer:n}))})},{immediate:!0}))}),U(()=>{C.value.forEach(e=>e())}),(e,t)=>{const n=X("panel-screen");return h(),R(n,{panel:o.panel},{header:j(()=>[J(k(p(r)("help.title")),1)]),content:j(()=>[s("div",ie,[$(s("input",{type:"search",class:"rv-help-search-bar border-b w-full text-base py-8 outline-none focus:shadow-outline border-gray-600 h-full min-w-0",placeholder:p(r)("help.search"),"onUpdate:modelValue":t[0]||(t[0]=a=>K(f)?f.value=a:f=a),"aria-label":p(r)("help.search"),onInput:t[1]||(t[1]=a=>q(p(f),i.value)),onKeypress:t[2]||(t[2]=D(F(()=>{},["prevent"]),["enter"])),enterkeyhint:"done"},null,40,de),[[Z,p(f)]])]),L.value?(h(),x("div",he,[s("p",null,k(p(r)("help.noResults")),1)])):H("",!0),(h(!0),x(G,null,W(i.value,(a,l)=>(h(),R(pe,{helpSection:a,key:l,onExpand:d=>z(a)},null,8,["helpSection","onExpand"]))),128))]),_:1},8,["panel"])}}});export{fe as default};
