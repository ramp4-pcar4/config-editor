const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./previewWebStyleSymbol-LOClnWtV-BQLbn_Zy.js","./index-BeTPrQ6f.js","./index-BlWAJbpo.css","./webStyleAcceptedFormats-DsfCZOwz-CG7ZQ6BV.js","./previewSymbol3D-CuHhqs-Y-CqdJl1Ic.js","./colorUtils-DlmOacVt-BnN0T6wa.js","./vec42-DHp-FUwt-Br7hmYJs.js","./vec4f64-DD-nkcCV-CSNWKRqG.js","./utils-DvP1Tc7W-CK5sH9q2.js","./asyncUtils-Cu__bxqs-ecCTUaGV.js","./jsonUtils-Bl9MVnOR-Be8hf0yA.js","./parser-CXoJuqeV-C7irlk5U.js","./mat4f32-BdRMyjXW-CWt6U0BP.js","./mat4-R0VY9B_E-DoEP887i.js","./cimSymbolUtils-BJ01Nooc-BfOR3Irv.js","./utils-CIm5uQvO-CtKf129F.js","./defaultCIMValues-BWu-APou-XI-Li77m.js","./LRUCache-CvGiiws0-B3io5Jp4.js","./MemCache-TG-MhOJy-BkjKRNR7.js","./previewUtils-1NSa4tp5-BqMe2dmc.js","./webStyleSymbolUtils-CyolzL_F-CG3O75V3.js","./devEnvironmentUtils-CxrVv3RG-ktR0Kqgv.js","./styleUtils-DoTsJ8ze-DHY40A2q.js","./jsxFactory-DN-m49_5-CUFCpKPo.js","./intl-DRhjUnwt-Dihhq8dq.js","./messages-DQ10DjvF-6kk0dzjG.js","./uuid-CFz2qBzH-cIdlpVG-.js","./sanitizerUtils-CrdmaILo-DztC6Qnx.js","./mat2df32-fg3OHsAI-BF2V2zqo.js","./mat2d-Cf4xHr3Z-u09Kv-lR.js","./previewSymbol2D-BvKeodrp-CM1_iFgH.js","./fontUtils-bOFLFKCC-gLU2ItK2.js","./quantizationUtils-Ba9rpy9D-8ijlY328.js","./densifyCurvedGeometry-C7Lb_tRx-Bjv2vU9s.js","./previewCIMSymbol-j5qwe-g6-BHMY0IFz.js","./CIMSymbolHelper-C-M9oL19-BYnF76mM.js","./BidiEngine-DXDmu_WZ-DxL95DSc.js","./labelPoint-DTWBMY-Z-DoXEvKTt.js","./OptimizedGeometry-BYxlP_oK-DvAqrgO1.js","./memoryEstimations-C_GUL8g_-JniNFd5l.js","./GeometryUtils-C8-DjR3I-DcNL1Jc6.js","./rasterizingUtils-Cf1zdzIw-BfJyHaiy.js","./definitions-DVO21zOC-BwakNu1s.js","./vec2f32-hTAvipMV-C0AQcwEv.js","./Rect-DD6XS68q-D_hsV3ag.js","./BoundingBox-DlCd_wcU-DBB4UfPl.js","./CIMSymbolRasterizer-BqBQ5vb8-uiaE78vH.js","./CIMResourceManager-CcSrCojH-Bt2v7OJu.js","./imageUtils-DITyjHV4-jEv5aA2D.js","./OverrideHelper-RCCoK8tw-ysetE5jH.js","./FieldsIndex-Ds4D9xP7-BiTuE5Z3.js","./UnknownTimeZone-DzO8gKMe-d6rtFXqm.js","./timeZoneUtils-CdK7eU4Y-fyhJ3EFx.js","./ArcadeExpression-BGPPS6z--7N6gsB31.js","./TimeOnly-BFfVS_ja-C4MPGwCM.js","./enum-D3e-PyKo-Bl5V5br5.js","./callExpressionWithFeature-C8T2jtcK-BKO8mxzd.js","./visualVariableUtils-DzY4BXXy-D_1S-x1B.js","./lengthUtils-CopeXEyE-DjCEitlq.js"])))=>i.map(i=>d[i]);
import{cE as ht,_ as I,ci as ft,gj as H,fF as J,ao as z,bp as G,ah as D,G as ut,v as dt,l as pt}from"./index-BeTPrQ6f.js";import{_ as C,l as yt,s as gt,p as mt,j as xt}from"./utils-DvP1Tc7W-CK5sH9q2.js";import{C as K,f as wt}from"./colorUtils-DlmOacVt-BnN0T6wa.js";import{o as bt,V as m}from"./jsxFactory-DN-m49_5-CUFCpKPo.js";import{u as B}from"./mat2df32-fg3OHsAI-BF2V2zqo.js";import{p as R,g as kt,x as N,q as vt,_ as St}from"./mat2d-Cf4xHr3Z-u09Kv-lR.js";import"./vec42-DHp-FUwt-Br7hmYJs.js";import"./vec4f64-DD-nkcCV-CSNWKRqG.js";let $t=0;function Mt(){return $t++}let _t=0;function Et(){return _t++}let At=0;function Rt(){return At++}const It="http://www.w3.org/2000/svg",P=D("android"),Ft=D("chrome")||P&&P>=4?"auto":"optimizeLegibility",Lt={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},jt=/([A-DF-Za-df-z])|([-+]?\d*\.?\d+(?:[eE][-+]?\d+)?)/g;let w={},g={};const Vt=Math.PI;function _(e,t){const i=e*(Vt/180);return Math.abs(t*Math.sin(i))+Math.abs(t*Math.cos(i))}function X(e){return e.map(t=>`${t.command} ${t.values.join(" ")}`).join(" ").trim()}function tt(e,t,i,r,n){if(e){if(e.type==="circle")return m("circle",{cx:e.cx,cy:e.cy,fill:t,"fill-rule":"evenodd",r:e.r,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-dashoffset":i.dashOffset,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width});if(e.type==="ellipse")return m("ellipse",{cx:e.cx,cy:e.cy,fill:t,"fill-rule":"evenodd",rx:e.rx,ry:e.ry,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width});if(e.type==="rect")return m("rect",{fill:t,"fill-rule":"evenodd",height:e.height,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width,width:e.width,x:e.x,y:e.y});if(e.type==="image")return m("image",{alt:n||"image",height:e.height,href:e.src,preserveAspectRatio:"none",width:e.width,x:e.x,y:e.y});if(e.type==="path"){const o=typeof e.path!="string"?X(e.path):e.path;return m("path",{d:o,fill:t,"fill-rule":"evenodd",stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width})}if(e.type==="text")return z(r),m("text",{"dominant-baseline":r.dominantBaseline,fill:t,"fill-rule":"evenodd","font-family":r.font.family,"font-size":r.font.size,"font-style":r.font.style,"font-variant":r.font.variant,"font-weight":r.font.weight,kerning:r.kerning,rotate:r.rotate,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width,"text-anchor":r.align,"text-decoration":r.decoration,"text-rendering":Ft,x:e.x,y:e.y},e.text)}return null}function et(e){if(!e)return{fill:"none",pattern:null,linearGradient:null};if(!("type"in e))return{fill:new G(e).toString(),pattern:null,linearGradient:null};if(e.type==="pattern"){const i=`patternId-${Mt()}`;return{fill:`url(#${i})`,pattern:{id:i,x:e.x,y:e.y,width:e.width,height:e.height,image:{x:0,y:0,width:e.width,height:e.height,href:e.src}},linearGradient:null}}const t=`linearGradientId-${Et()}`;return{fill:`url(#${t})`,pattern:null,linearGradient:{id:t,x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,stops:e.colors.map(i=>({offset:i.offset,color:i.color&&new G(i.color).toString()}))}}}function it(e){const t={color:"none",width:1,cap:"butt",join:"4",dashArray:"none",dashOffset:"0"};return e&&(e.width!=null&&(t.width=e.width),e.cap&&(t.cap=e.cap),e.join&&(t.join=e.join.toString()),e.color&&(t.color=new G(e.color).toString()),e.dashArray&&(t.dashArray=e.dashArray),e.dashoffset&&(t.dashOffset=e.dashoffset),e.style&&!e.dashArray&&(t.dashArray=xt(e).join(",")||"none")),t}function rt(e,t){const i={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};if(e){const r=e.alignBaseline,n=r==="baseline"?"auto":r==="top"?"text-top":r==="bottom"?"hanging":r;i.align=e.align,i.dominantBaseline=n,i.decoration=e.decoration,i.kerning=e.kerning?"auto":"0",i.rotate=e.rotated?"90":"0",z(t),i.font.style=t.style||"normal",i.font.variant=t.variant||"normal",i.font.weight=t.weight||"normal",i.font.size=t.size&&t.size.toString()||"10pt",i.font.family=t.family||"serif"}return i}function Ct(e){const{pattern:t,linearGradient:i}=e;if(t)return m("pattern",{height:t.height,id:t.id,patternUnits:"userSpaceOnUse",width:t.width,x:t.x,y:t.y},m("image",{height:t.image.height,href:t.image.href,width:t.image.width,x:t.image.x,y:t.image.y}));if(i){const r=i.stops.map((n,o)=>m("stop",{key:`${o}-stop`,offset:n.offset,"stop-color":n.color}));return m("linearGradient",{gradientUnits:"userSpaceOnUse",id:i.id,x1:i.x1,x2:i.x2,y1:i.y1,y2:i.y2},r)}return null}function Gt(e,t){if(!e||e.length===0)return null;const i=[];for(const r of e){const{shape:n,fill:o,stroke:a,font:s}=r,c=et(o),f=it(a),p=n.type==="text"?rt(n,s):null,h=tt(n,c.fill,f,p);h&&i.push(h)}return m("mask",{id:t,maskUnits:"userSpaceOnUse"},m("g",null,i))}function T(e,t,i){return vt(e,N(e),[t,i])}function U(e,t,i,r,n){return kt(e,N(e),[t,i]),e[4]=e[4]*t-r*t+r,e[5]=e[5]*i-n*i+n,e}function zt(e,t,i,r){const n=t%360*Math.PI/180;St(e,N(e),n);const o=Math.cos(n),a=Math.sin(n),s=e[4],c=e[5];return e[4]=s*o-c*a+r*a-i*o+i,e[5]=c*o+s*a-i*a-r*o+r,e}function S(e,t){w&&"left"in w?(w.left!=null&&w.left>e&&(w.left=e),(w.right==null||w.right<e)&&(w.right=e),(w.top==null||w.top>t)&&(w.top=t),(w.bottom==null||w.bottom<t)&&(w.bottom=t)):w={left:e,bottom:t,right:e,top:t}}function q(e){const t=e.args,i=t.length;let r;switch(e.action){case"M":case"L":case"C":case"S":case"Q":case"T":for(r=0;r<i;r+=2)S(t[r],t[r+1]);g.x=t[i-2],g.y=t[i-1];break;case"H":for(r=0;r<i;++r)S(t[r],g.y);g.x=t[i-1];break;case"V":for(r=0;r<i;++r)S(g.x,t[r]);g.y=t[i-1];break;case"m":{let n=0;for(("x"in g)||(S(g.x=t[0],g.y=t[1]),n=2),r=n;r<i;r+=2)S(g.x+=t[r],g.y+=t[r+1]);break}case"l":case"t":for(r=0;r<i;r+=2)S(g.x+=t[r],g.y+=t[r+1]);break;case"h":for(r=0;r<i;++r)S(g.x+=t[r],g.y);break;case"v":for(r=0;r<i;++r)S(g.x,g.y+=t[r]);break;case"c":for(r=0;r<i;r+=6)S(g.x+t[r],g.y+t[r+1]),S(g.x+t[r+2],g.y+t[r+3]),S(g.x+=t[r+4],g.y+=t[r+5]);break;case"s":case"q":for(r=0;r<i;r+=4)S(g.x+t[r],g.y+t[r+1]),S(g.x+=t[r+2],g.y+=t[r+3]);break;case"A":for(r=0;r<i;r+=7)S(t[r+5],t[r+6]);g.x=t[i-2],g.y=t[i-1];break;case"a":for(r=0;r<i;r+=7)S(g.x+=t[r+5],g.y+=t[r+6])}}function W(e,t,i){const r=Lt[e.toLowerCase()];let n;typeof r=="number"&&(r?t.length>=r&&(n={action:e,args:t.slice(0,t.length-t.length%r)},i.push(n),q(n)):(n={action:e,args:[]},i.push(n),q(n)))}function Dt(e){const t=(typeof e.path!="string"?X(e.path):e.path).match(jt),i=[];if(w={},g={},!t)return null;let r="",n=[];const o=t.length;for(let s=0;s<o;++s){const c=t[s],f=parseFloat(c);isNaN(f)?(r&&W(r,n,i),n=[],r=c):n.push(f)}W(r,n,i);const a={x:0,y:0,width:0,height:0};return w&&"left"in w&&(a.x=w.left,a.y=w.top,a.width=w.right-w.left,a.height=w.bottom-w.top),a}function Nt(e){const t={x:0,y:0,width:0,height:0};if(e.type==="circle")t.x=e.cx-e.r,t.y=e.cy-e.r,t.width=2*e.r,t.height=2*e.r;else if(e.type==="ellipse")t.x=e.cx-e.rx,t.y=e.cy-e.ry,t.width=2*e.rx,t.height=2*e.ry;else if(e.type==="image"||e.type==="rect")t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height;else if(e.type==="path"){const i=Dt(e);t.x=i.x,t.y=i.y,t.width=i.width,t.height=i.height}return t}function Ot(e){const t={x:0,y:0,width:0,height:0};let i=null,r=Number.NEGATIVE_INFINITY,n=Number.NEGATIVE_INFINITY;for(const o of e)i?(i.x=Math.min(i.x,o.x),i.y=Math.min(i.y,o.y),r=Math.max(r,o.x+o.width),n=Math.max(n,o.y+o.height)):(i=t,i.x=o.x,i.y=o.y,r=o.x+o.width,n=o.y+o.height);return i&&(i.width=r-i.x,i.height=n-i.y),i}function Bt(e,t,i,r,n,o,a,s,c){let f=(a&&o?_(o,t):t)/2,p=(a&&o?_(o,i):i)/2;if(c){const k=c[0],b=c[1];f=(a&&o?_(o,k):k)/2,p=(a&&o?_(o,b):b)/2}const h=e.width+r,u=e.height+r,d=B(),l=B();let y=!1;if(n&&h!==0&&u!==0){const k=t!==i?t/i:h/u,b=t>i?t:i;let M=1,x=1;isNaN(b)||(k>1?(M=b/h,x=b/k/u):(x=b/u,M=b*k/h)),R(l,l,U(d,M,x,f,p)),y=!0}const v=e.x+(h-r)/2,$=e.y+(u-r)/2;if(R(l,l,T(d,f-v,p-$)),!y&&(h>t||u>i)){const k=h/t>u/i,b=(k?t:i)/(k?h:u);R(l,l,U(d,b,b,v,$))}return s&&R(l,l,T(d,s[0],s[1])),o&&R(l,l,zt(d,o,v,$)),`matrix(${l[0]},${l[1]},${l[2]},${l[3]},${l[4]},${l[5]})`}function ot(e){const t=e==null?void 0:e.match(/bloom\(\s*([^\s]+)\s+([^\s]+)\s+([^\s]+)\s*\)/i);if(!t)return null;const[,i,r,n]=t;return{strength:Number(i),radius:H(J(r)),threshold:Number(n)}}function Pt(e,t,i){const r=ot(e);if(!r)return null;const{strength:n,radius:o}=r,a=n>0?o:0,s=(n+a)*t,c=4*n+1;return m("filter",{filterUnits:"userSpaceOnUse",height:"300%",id:`bloom${i}`,width:"300%",x:"-100%",y:"-100%"},m("feMorphology",{in:"SourceGraphic",operator:"dilate",radius:(n+.5*a)*(5**(t/100)*(.4+t/100)),result:"dilate"}),m("feGaussianBlur",{in:"dilate",result:"blur",stdDeviation:s/25}),m("feGaussianBlur",{in:"blur",result:"intensityBlur",stdDeviation:s/50}),m("feComponentTransfer",{in:"SourceGraphic",result:"intensityBrightness"},m("feFuncR",{slope:c,type:"linear"}),m("feFuncG",{slope:c,type:"linear"}),m("feFuncB",{slope:c,type:"linear"})),m("feMerge",null,m("feMergeNode",{in:"intensityBlur"}),m("feMergeNode",{in:"intensityBrightness"}),m("feGaussianBlur",{stdDeviation:n/10})))}function Tt(e,t,i,r={}){var h,u;const n=[],o=[],a=Rt(),s=Pt(r.cssEffectFilter,t,a);let c=null;if(s){const d=ot(r.cssEffectFilter),l=r.clipBloomEffect||!(d!=null&&d.strength)?0:(d.strength+d.radius/2)/3,y=t+t*l,v=i+i*l;c=[Math.max(y,10),Math.max(v,10)]}let f=t,p=i;if(r.useRotationSize)for(let d=0;d<e.length;d++){const l=((h=r.rotations)==null?void 0:h[d])??0;f=Math.max(_(l,t),f),p=Math.max(_(l,i),p)}for(let d=0;d<e.length;d++){const l=e[d],y=[],v=[];let $=0,k=0,b=0;for(const F of l){const{shape:E,fill:at,stroke:L,font:lt,offset:V}=F;r.ignoreStrokeWidth||E.type==="text"||($+=(L==null?void 0:L.width)||0);const O=et(at),st=it(L),ct=E.type==="text"?rt(E,lt):null;n.push(Ct(O)),y.push(tt(E,O.fill,st,ct,r.ariaLabel)),v.push(Nt(E)),V&&(k+=V[0],b+=V[1])}const M=((u=r.rotations)==null?void 0:u[d])??0;r.useRotationSize&&(k+=(f-_(M,t))/2,b+=(p-_(M,i))/2);const x=Bt(Ot(v),t,i,$,r.scale??!1,M,r.useRotationSize??!1,[k,b],c);let j=null;if(r.masking){const F=`mask-${d}`,E=r.masking[d];n.push(Gt(E,F)),j=`url(#${F})`}o.push(j?m("g",{mask:j},m("g",{transform:x},y)):m("g",{transform:x},y))}return s&&(z(c),f=c[0],p=c[1]),m("svg",{"aria-label":r.ariaLabel,focusable:!1,height:p,role:"img",style:"display: block;",width:f,xmlns:It},s,m("defs",null,n),s?m("g",{filter:`url(#bloom${a})`},o):o)}const Y=bt();function Ut(e,t){Y.append(e,t),Y.detach(t)}function qt(e,t,i){const r=Math.ceil(t[0]),n=Math.ceil(t[1]);if(!e.some(a=>!!a.length))return null;const o=(i==null?void 0:i.node)||document.createElement("div");return i.opacity!=null&&(o.style.opacity=i.opacity.toString()),i.cssEffectFilter!=null&&(o.style.filter=i.cssEffectFilter),Ut(o,()=>Tt(e,r,n,i)),o}function Wt(e,t){e=Math.ceil(e),t=Math.ceil(t);const i=document.createElement("canvas");i.width=e,i.height=t,i.style.width=e+"px",i.style.height=t+"px";const r=i.getContext("2d");return r.clearRect(0,0,e,t),r}function Yt(e,t,i){return e?dt(e,{responseType:"image"}).then(r=>{const n=r.data,o=n.width,a=n.height,s=o/a;let c=t;if(i){const f=Math.max(o,a);c=Math.min(c,f)}return{image:n,width:s<=1?Math.ceil(c*s):c,height:s<=1?c:Math.ceil(c/s)}}):Promise.reject(new pt("renderUtils: imageDataSize","href not provided."))}function Qt(e,t){return!(!e||t==="ignore")&&(t!=="multiply"||e.r!==255||e.g!==255||e.b!==255||e.a!==1)}function Zt(e,t,i,r,n){switch(n){case"multiply":e[t]*=i[0],e[t+1]*=i[1],e[t+2]*=i[2],e[t+3]*=i[3];break;default:{const o=K({r:e[t],g:e[t+1],b:e[t+2]});o.h=r.h,o.s=r.s,o.v=o.v/100*r.v;const a=wt(o);e[t]=a.r,e[t+1]=a.g,e[t+2]=a.b,e[t+3]*=i[3];break}}}function ce(e,t,i,r,n){return Yt(e,t,n).then(o=>{var c;const a=o.width??t,s=o.height??t;if(o.image&&Qt(i,r)){let f=o.image.width,p=o.image.height;D("edge")&&/\.svg$/i.test(e)&&(f-=1,p-=1);const h=Wt(a,s);h.drawImage(o.image,0,0,f,p,0,0,a,s);const u=h.getImageData(0,0,a,s),d=[i.r/255,i.g/255,i.b/255,i.a],l=K(i);for(let y=0;y<u.data.length;y+=4)Zt(u.data,y,d,l,r);h.putImageData(u,0,0),e=h.canvas.toDataURL("image/png")}else{const f=(c=ut)==null?void 0:c.findCredential(e);if(f!=null&&f.token){const p=e.includes("?")?"&":"?";e=`${e}${p}token=${f.token}`}}return{url:e,width:a,height:s}}).catch(()=>({url:e,width:t,height:t}))}let A=null;const Q=[255,255,255];function Z(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function he(e,t,i){const{backgroundColor:r,outline:n,dotSize:o}=e,a=22,s=.8,c=Math.round(a*a/Math.max(o,.5)**2*s),f=window.devicePixelRatio,p=document.createElement("canvas"),h=a*f;p.width=h,p.height=h,p.style.width=p.width/f+"px",p.style.height=p.height/f+"px";const u=p.getContext("2d");if(r&&(u.fillStyle=r.toCss(!0),u.fillRect(0,0,h,h),u.fill()),u.fillStyle=(t==null?void 0:t.toCss(!0))??"",A&&A.length/2===c)for(let l=0;l<2*c;l+=2){const y=A[l],v=A[l+1];u.fillRect(y,v,o*f,o*f),u.fill()}else{A=[];for(let l=0;l<2*c;l+=2){const y=Z(0,h),v=Z(0,h);A.push(y,v),u.fillRect(y,v,o*f,o*f),u.fill()}}n&&(n.color&&(u.strokeStyle=n.color.toCss(!0)),u.lineWidth=n.width,u.strokeRect(0,0,h,h));const d=new Image(a,a);return d.src=p.toDataURL(),d.ariaLabel=null,d.alt="",d}function fe(e,t={}){const i=t.radius||40,r=2*Math.PI*i,n=e.length,o=r/n,a=[],s=mt(t.outline);(s==null?void 0:s.width)!=null&&(s.width*=2),(s||t.backgroundColor)&&a.push({shape:{type:"circle",cx:i,cy:i,r:i},fill:t.backgroundColor,stroke:s,offset:[0,0]});const c=t.values,f=c&&c.length===n&&c.reduce((l,y)=>l+y,0)===100,p=[0];for(let l=0;l<n;l++){let y=null;f&&(y=c[l]*r/100,p.push(y+p[l])),a.push({shape:{type:"circle",cx:i,cy:i,r:i/2},fill:[0,0,0,0],stroke:{width:i,dashArray:`${(y??o)/2} ${r}`,dashoffset:"-"+(f?p[l]/2:l*(o/2)),color:e[l]},offset:[0,0]})}let h=null;const u=2*i+((s==null?void 0:s.width)||0),d=t.holePercentage;if(d){s&&a.push({shape:{type:"circle",cx:i,cy:i,r:i*d},fill:null,stroke:s,offset:[0,0]});const l=u/2;h=[[{shape:{type:"circle",cx:l,cy:l,r:l},fill:Q,stroke:s?{...s,color:Q}:null,offset:[0,0]},{shape:{type:"circle",cx:l,cy:l,r:i*d},fill:[0,0,0],stroke:null,offset:[0,0]}]]}return qt([a],[u,u],{cssEffectFilter:t.cssEffectFilter,ignoreStrokeWidth:!0,masking:h,rotations:[-90],ariaLabel:t.ariaLabel})}function ue(e,t={}){const i=t.align==="horizontal",r=i?75:24,n=i?24:75,o=t.width??r,a=t.height??n,s=t.gradient??!0,c=window.devicePixelRatio,f=o*c,p=a*c,h=document.createElement("canvas");h.width=f,h.height=p,h.ariaLabel=t.ariaLabel??null,h.style.width=`${o}px`,h.style.height=`${a}px`;const u=h.getContext("2d"),d=i?f:0,l=i?0:p;if(s){const v=u.createLinearGradient(0,0,d,l),$=e.length,k=$===1?0:1/($-1);e.forEach((b,M)=>v.addColorStop(M*k,b.toString())),u.fillStyle=v,u.fillRect(0,0,f,p)}else{const v=i?f/e.length:f,$=i?p:p/e.length;let k=0,b=0;for(const M of e)u.fillStyle=M.toString(),u.fillRect(k,b,v,$),k=i?k+v:0,b=i?0:b+$}const y=document.createElement("div");return y.style.width=`${o}px`,y.style.height=`${a}px`,Jt(y,t==null?void 0:t.cssEffectFilter),y.appendChild(h),y}function Ht(e){const t=e.match(/drop-shadow\(\s*([^\s]+)\s+[^\s]+\s+[^\s]+\s+.+?\)/);return t?t[1]:null}function Jt(e,t){if(!t)return;e.style.filter=t;const i=Ht(t);if(i){const r=H(J(i));r<0?e.style.marginLeft=`${Math.abs(r)}px`:e.style.marginRight=`${r}px`}}async function Kt(e,t){switch(e.type){case"web-style":{const{previewWebStyleSymbol:i}=await I(()=>import("./previewWebStyleSymbol-LOClnWtV-BQLbn_Zy.js"),__vite__mapDeps([0,1,2,3]),import.meta.url);return i(e,Kt,t)}case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":{const{previewSymbol3D:i}=await I(()=>import("./previewSymbol3D-CuHhqs-Y-CqdJl1Ic.js"),__vite__mapDeps([4,1,2,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,3,23,24,25,26,27,28,29]),import.meta.url);return i(e,t)}case"simple-marker":case"simple-line":case"simple-fill":case"picture-marker":case"picture-fill":case"text":{const{previewSymbol2D:i}=await I(()=>import("./previewSymbol2D-BvKeodrp-CM1_iFgH.js"),__vite__mapDeps([30,1,2,5,6,7,31,32,33,8,9,10,11,12,13,14,15,16,17,18,19,23,24,25,26,27,28,29]),import.meta.url);return i(e,t)}case"cim":{const{previewCIMSymbol:i}=await I(()=>import("./previewCIMSymbol-j5qwe-g6-BHMY0IFz.js"),__vite__mapDeps([34,1,2,35,36,37,38,39,40,15,16,31,41,42,29,28,43,44,45,46,47,48,49,5,6,7,50,51,52,53,54,55,56,32,8,9,10,11,12,13,14,17,18,23,24,25,26,27]),import.meta.url);return i(e,t)}default:return}}function nt(e){return e&&e.opacity!==void 0?e.opacity*("parent"in e?nt(e.parent):1):1}async function de(e,t){var M;if(!e)return;const i=e.sourceLayer,r=(t!=null&&t.useSourceLayer?i:e.layer)??i,n=t!=null&&t.ignoreOpacity?1:nt(r);if(e.symbol!=null&&(t==null||t.ignoreGraphicSymbol!==!0)){const x=e.symbol.type==="web-style"?await e.symbol.fetchSymbol({...t,acceptedFormats:t==null?void 0:t.webStyleAcceptedFormats,cache:t==null?void 0:t.webStyleCache}):e.symbol.clone();return C(x,null,{add:n}),x}const o=(t==null?void 0:t.renderer)??te(r);let a=o&&"getSymbolAsync"in o?await o.getSymbolAsync(e,t):null;if(!a)return;if(a=a.type==="web-style"?await a.fetchSymbol({...t,acceptedFormats:t==null?void 0:t.webStyleAcceptedFormats,cache:t==null?void 0:t.webStyleCache}):a.clone(),!(o&&"visualVariables"in o&&((M=o.visualVariables)!=null&&M.length)&&Xt(a)))return C(a,null,{add:n}),a;if("arcadeRequiredForVisualVariables"in o&&o.arcadeRequiredForVisualVariables&&(t==null?void 0:t.arcade)==null){const x={...t};x.arcade=await ht(),t=x}const{getColor:s,getOpacity:c,getAllSizes:f,getRotationAngle:p}=await I(()=>import("./visualVariableUtils-DzY4BXXy-D_1S-x1B.js"),__vite__mapDeps([57,1,2,58]),import.meta.url).then(x=>x.v),h=[],u=[],d=[],l=[];for(const x of o.visualVariables)switch(x.type){case"color":h.push(x);break;case"opacity":u.push(x);break;case"rotation":l.push(x);break;case"size":x.target||d.push(x)}const y=!!h.length&&h[h.length-1],v=y?s(y,e,t):null,$=!!(t!=null&&t.ignoreOpacity),k=!!u.length&&u[u.length-1],b=k?c(k,e,t):null;if(C(a,v,$?void 0:{override:b,add:n}),d.length&&(t==null?void 0:t.ignoreSizeVariables)!==!0){const x=f(d,e,t);await yt(a,x)}if((t==null?void 0:t.ignoreRotationVariables)!==!0)for(const x of l)gt(a,p(x,e,t),x.axis);return a}function Xt(e){var t;return!ft(e)||((t=e.symbolLayers.at(0))==null?void 0:t.type)!=="water"}function te(e){if(e)return"renderer"in e?e.renderer:void 0}export{et as B,tt as G,ue as J,he as Q,it as V,Nt as X,Ct as Y,fe as Z,Ot as a,ce as b,Bt as e,qt as o,Tt as r,Kt as s,de as t};
