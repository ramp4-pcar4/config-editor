import{o as A,t as R}from"./defaultCIMValues-BWu-APou-XI-Li77m.js";function _(t){return typeof t=="function"}function Q(t,e,r,n){return _(t)?t(e,r,n):t}function Z(t){return[t.r,t.g,t.b,t.a]}const j=` /-,
`;function T(t){let e=t.length;for(;e--;)if(!j.includes(t.charAt(e)))return!1;return!0}function tt(t,e){const r=[];let n=0,l=-1;do if(l=t.indexOf("[",n),l>=n){if(l>n){const o=t.slice(n,l);r.push([o,null,T(o)])}if(n=l+1,l=t.indexOf("]",n),l>=n){if(l>n){const o=e[t.slice(n,l)];o&&r.push([null,o,!1])}n=l+1}}while(l!==-1);if(n<t.length){const o=t.slice(n);r.push([o,null,T(o)])}return r}function et(t,e,r){let n="",l=null;for(const o of e){const[i,s,u]=o;if(i!=null&&i!=="")u?l=i:(l!=null&&(n+=l,l=null),n+=i);else{const a=t.readAttribute(s);a!=null&&a!==""&&(l!==null&&(n+=l,l=null),n+=a)}}return D(n,r)}function rt(t,e,r,n){let l="",o=null;for(const i of e){const[s,u,a]=i;if(s!=null&&s!=="")a?o=s:(o!=null&&(l+=o,o=null),l+=s);else{let m=u;r!=null&&(m=U(u,r));const c=t.attributes[m];c!=null&&c!==""&&(o!=null&&(l+=o,o=null),l+=c)}}return D(l,n)}function D(t,e){switch(typeof t!="string"&&(t=String(t)),e){case"LowerCase":return t.toLowerCase();case"Allcaps":return t.toUpperCase();default:return t}}function nt(t,e,r,n,l,o,i=!0){const s=e/l,u=r/o,a=Math.ceil(s/2),m=Math.ceil(u/2);for(let c=0;c<o;c++)for(let f=0;f<l;f++){const p=4*(f+(i?o-c-1:c)*l);let M=0,h=0,b=0,d=0,S=0,P=0,k=0;const L=(c+.5)*u;for(let I=Math.floor(c*u);I<(c+1)*u;I++){const N=Math.abs(L-(I+.5))/m,q=(f+.5)*s,E=N*N;for(let g=Math.floor(f*s);g<(f+1)*s;g++){let y=Math.abs(q-(g+.5))/a;const C=Math.sqrt(E+y*y);C>=-1&&C<=1&&(M=2*C*C*C-3*C*C+1,M>0&&(y=4*(g+I*e),k+=M*t[y+3],b+=M,t[y+3]<255&&(M=M*t[y+3]/250),d+=M*t[y],S+=M*t[y+1],P+=M*t[y+2],h+=M))}}n[p]=d/h,n[p+1]=S/h,n[p+2]=P/h,n[p+3]=k/b}}function B(t){return t?[t[0],t[1],t[2],t[3]/255]:[0,0,0,0]}function ot(t){var e;return((e=t.data)==null?void 0:e.symbol)??null}function lt(t){return t.type==="CIMVectorMarker"||t.type==="CIMPictureMarker"||t.type==="CIMBarChartMarker"||t.type==="CIMCharacterMarker"||t.type==="CIMPieChartMarker"||t.type==="CIMStackedBarChartMarker"}function st(t){return t.type==="CIMGradientStroke"||t.type==="CIMPictureStroke"||t.type==="CIMSolidStroke"}function it(t){return t!=null&&(t.type==="CIMGradientFill"||t.type==="CIMHatchFill"||t.type==="CIMPictureFill"||t.type==="CIMSolidFill"||t.type==="CIMWaterFill")}function $(t){return t!=null&&(t.type==="CIMMarkerPlacementAlongLineRandomSize"||t.type==="CIMMarkerPlacementAlongLineSameSize"||t.type==="CIMMarkerPlacementAlongLineVariableSize"||t.type==="CIMMarkerPlacementAtExtremities"||t.type==="CIMMarkerPlacementAtMeasuredUnits"||t.type==="CIMMarkerPlacementAtRatioPositions"||t.type==="CIMMarkerPlacementOnLine"||t.type==="CIMMarkerPlacementOnVertices")}const at=(t,e=0)=>t==null||isNaN(t)?e:t,ct=(t,e)=>t??e,ut=(t,e)=>t??e,ft=t=>t.tintColor?B(t.tintColor):[255,255,255,1];class H{constructor(e){this._import=e}getImportPromise(){return this._promise==null&&(this._promise=this._import().then(e=>this.module=e)),this._promise}}function Mt(t){return new H(t)}function yt(t){if(!t)return"normal";switch(t.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function mt(t){if(!t)return"normal";switch(t.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function Ct(t){let e="normal",r="normal";if(t){const n=t.toLowerCase();n.includes("italic")?e="italic":n.includes("oblique")&&(e="oblique"),n.includes("bold")?r="bold":n.includes("light")&&(r="lighter")}return{style:e,weight:r}}function pt(t){return t.underline?"underline":t.strikethrough?"line-through":"none"}function x(t){if(!t)return null;switch(t.type){case"CIMPolygonSymbol":if(t.symbolLayers)for(const e of t.symbolLayers){const r=x(e);if(r!=null)return r}break;case"CIMTextSymbol":return x(t.symbol);case"CIMSolidFill":return t.color}return null}function v(t){if(t)switch(t.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const e=t.symbolLayers;if(e)for(const r of e){const n=v(r);if(n!=null)return n}break}case"CIMTextSymbol":return v(t.symbol);case"CIMSolidStroke":return t.color}}function ht(t){for(const e of t)if(e.enable)switch(e.type){case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return!0}return!1}function F(t){if(t)switch(t.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(t.symbolLayers)for(const e of t.symbolLayers){const r=F(e);if(r!==void 0)return r}break;case"CIMTextSymbol":return F(t.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return t.width}}function It(t){switch(t){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function bt(t){switch(t){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function dt(t){return(t?Object.keys(t):[]).map(e=>({name:e,alias:e,type:typeof t[e]=="string"?"esriFieldTypeString":"esriFieldTypeDouble"}))}const kt=t=>t.includes("data:image/svg+xml");function St(t){if(!t)return null;switch(t.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function w(t){return t&&t.charAt(0).toLowerCase()+t.slice(1)}function Pt(t,e,r,n,l,o,i=!0){const{infos:s}=o;let u=1,a=0,m=0,c=0,f=1;for(const{absoluteAnchorPoint:h,offsetX:b,offsetY:d,rotation:S,size:P,frameHeight:k,rotateClockWise:L,scaleSymbolsProportionally:I}of s)f=h?1:u,m=G(b,d,a,f,m),c=z(b,d,a,f,c),k&&(I||i)&&(u*=P/k),a=O(S,L,a);const p=G(n,l,a,f,m),M=z(n,l,a,f,c);return{size:t*u,rotation:O(e,r,a),offsetX:p,offsetY:M}}function W(t){if(t==null)return!1;if(Array.isArray(t))return t.every(e=>W(e));switch(typeof t){case"string":return!!t;case"number":return!isNaN(t)}}function X(t,e){if(e==="color"||e==="outlinecolor"||e==="backgroundcolor"||e==="borderlinecolor"||e==="tintcolor")return[...R[e]];const r=A[t];if(!r)throw new Error(`InternalError: default value for type ${t}.`);return r[e]}function Y(t){return t.split(" ").map(e=>Number(e))}function J(t){return typeof t=="string"?Y(t):t}function gt(t){return t!=null&&t.dashTemplate&&(t.dashTemplate=J(t.dashTemplate)),t}function V(t){if(t==null)return"Normal";switch(t.type){case"CIMTextSymbol":return t.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const e=t.symbolLayers;if(!e)return"Normal";for(const r of e)if(r.type==="CIMVectorMarker")return V(r)}break;case"CIMVectorMarker":{const e=t.markerGraphics;if(!e)return"Normal";for(const r of e)if(r.symbol)return V(r.symbol)}}return"Normal"}function wt(t){if(t)switch(t.type){case"CIMTextSymbol":return t.height;case"CIMPointSymbol":{let e=0;if(t.symbolLayers){for(const r of t.symbolLayers)if(r)switch(r.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{const n=r.size??A.CIMVectorMarker.size;n>e&&(e=n);break}}}return e}case"CIMLineSymbol":case"CIMPolygonSymbol":{let e=0;if(t.symbolLayers){for(const r of t.symbolLayers)if(r)switch(r.type){case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const n=r.width;n!=null&&n>e&&(e=n);break}case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":if(r.markerPlacement&&$(r.markerPlacement)){const n=r.size??A.CIMVectorMarker.size;n>e&&(e=n)}break;case"CIMPictureFill":{const n=r.height;n!=null&&n>e&&(e=n)}}}return e}}}function U(t,e){if(e!==null){const r=e.get(t);return r?r.name:t}return t}function Lt(t){return t.map(e=>({...e,propertyName:w(e.propertyName)}))}function At(t){const e={};for(const r in t){const n=t[r];e[w(r)]=n}return e}function z(t,e,r,n,l){const o=r*Math.PI/180;if(o){const i=Math.cos(o);return(Math.sin(o)*t+i*e)*n+l}return e*n+l}function G(t,e,r,n,l){const o=r*Math.PI/180;return o?(Math.cos(o)*t-Math.sin(o)*e)*n+l:t*n+l}function O(t,e,r){return e?r-t:r+t}function Nt(t,e,r){const n=r==="Color"||r==="TintColor"||r==="ToColor",l=r==="Rotation"||r==="Angle"||r==="ToRotation";let o=e[w(r)];if(o!=null&&(n?o=[o[0]/255,o[1]/255,o[2]/255,o[3]/255]:l&&(o*=Math.PI/180)),o==null&&(o=X(e.type,r.toLowerCase()),o!=null&&(n?o=[o[0]/255,o[1]/255,o[2]/255,o[3]]:l&&(o*=Math.PI/180))),e.primitiveName!=null){const i=t[e.primitiveName];if(i!=null){const s=i[r];s==null||(typeof s=="string"||typeof s=="number"||Array.isArray(s)?(o=s,o!=null&&(n?o=[o[0]/255,o[1]/255,o[2]/255,o[3]/255]:l&&(o*=Math.PI/180))):(o={valueExpressionInfo:s,defaultValue:o},o!=null&&(n?o={type:"Process",op:"ArcadeColor",value:o}:l&&(o={type:"Process",op:"Divide",left:o,right:180/Math.PI}))))}}if(o==null)throw new Error(`Failed to derive a value or an expression for "${r}".`);return o}function Tt(t,e,r){if(e[w(r)]!=null)return!0;if(e.primitiveName!=null){const n=t[e.primitiveName];if(n!=null&&n[r]!=null)return!0}return!1}function xt(t,e){return Math.max(Math.min((t??e)/100,1),0)}export{Nt as A,It as C,W as D,J as E,B as G,kt as I,tt as J,nt as K,At as L,Ct as M,xt as N,$ as O,wt as P,et as Q,gt as S,x as T,Z as W,Q as Y,rt as Z,v as a,w as b,Mt as c,Pt as d,ot as e,mt as f,Tt as g,ct as h,dt as i,St as j,ft as l,ht as m,it as n,at as o,bt as p,X as q,lt as r,ut as s,st as t,yt as u,V as v,Lt as w,F as x,pt as y};
