const c=Symbol("meshContext");function l(e){return e&&typeof e=="object"&&c in e?e[c]:void 0}function x(e,n){const r=l(e);return{...e,[c]:{...r,...n}}}const f=Symbol("meshMaterialContext");function p(e){return e&&typeof e=="object"&&f in e?e[f]:void 0}function d(e){var r;if((r=p(e))!=null&&r.materialMap)return e;const n={materialMap:new Map};return{...e,[f]:n}}const a=Symbol("meshTextureContext");function m(e){return e&&typeof e=="object"&&a in e?e[a]:void 0}function g(e){var r;if((r=m(e))!=null&&r.textureMap)return e;const n={textureMap:new Map};return{...e,[a]:n}}function u(e,n,r,i){const{loggerTag:o,stride:t}=n;return e.length%t!==0?(i.error(o,`Invalid array length, expected a multiple of ${t}`),new r([])):e}function b(e,n,r,i,o){if(!e)return e;if(e instanceof n)return u(e,i,n,o);for(const t of r)if(e instanceof t)return u(new n(e),i,n,o);if(Array.isArray(e))return u(new n(e),i,n,o);{const t=r.map(s=>`'${s.name}'`);return o.error(`Failed to set property, expected one of ${t}, but got ${e.constructor.name}`),new n([])}}function h(e,n,r){n[r]=y(e)}function y(e){const n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=e[r];return n}export{h as b,d,l as f,b as g,p as l,m as p,g as x,x as y};
