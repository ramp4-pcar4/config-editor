const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Popup-GoljqFxv-DQfaTUdv.js","./index-BeTPrQ6f.js","./index-BlWAJbpo.css","./intl-DRhjUnwt-Dihhq8dq.js","./messages-DQ10DjvF-6kk0dzjG.js","./throttle-CMh51-SQ-Cn71HPca.js","./signal-DHxLvooI-Bin-tnuW.js","./jsxFactory-DN-m49_5-CUFCpKPo.js","./uuid-CFz2qBzH-cIdlpVG-.js","./sanitizerUtils-CrdmaILo-DztC6Qnx.js","./substitute-Cl1SJAIb-D0XLv0xK.js","./unitFormatUtils-BbVpiips-i7yyYN--.js","./Cyclical-Bzwh_QaL-CXh-hbnA.js","./quantityUtils-v7kjLywD-Cq6IoGLM.js","./AttachmentInfo-DVdiZMh6-Bn8Eo_Wz.js","./RelationshipQuery-Cf-_aN1Z-mThKQ0J2.js","./Query-DKLDaFaA-I4zhlfzt.js","./Field-Dn1Bgq7n-CJCGLoNR.js","./fieldType-DvW5hpfa-DYUbIy_X.js","./featureUtils-BGz-Vwcn-CAqgwffc.js","./utils-B2aAE6RS-DpuzYE1J.js","./mat4f32-BdRMyjXW-CWt6U0BP.js","./mat4-R0VY9B_E-DoEP887i.js","./timeZoneUtils-CdK7eU4Y-fyhJ3EFx.js","./utils-DqlCEhl6-DBO0-7VG.js","./Queue-CK6TduSr-C-T211SM.js","./Version-DSJSGSLA-Cg87msWM.js","./heatmapRampUtils-B1JSnJ7D-BgqzByPC.js","./typeUtils-BTAsL08--B1VjqkPN.js","./ClassBreaksRenderer-AH_lBYRG-CIe34emV.js","./commonProperties-CYpRbAZr-PcmW9U_y.js","./colorRamps-C5pnMn-A-BSSJ2zvJ.js","./ColorStop-CBXZUZ6o-_LZdJKea.js","./visualVariableUtils-DzY4BXXy-D_1S-x1B.js","./lengthUtils-CopeXEyE-DjCEitlq.js","./RendererLegendOptions-_ue7FeM0-ROeRce-g.js","./LRUCache-CvGiiws0-B3io5Jp4.js","./MemCache-TG-MhOJy-BkjKRNR7.js","./DictionaryScriptEvaluator-DrG0wIBl-D15kCKMK.js","./FieldsIndex-Ds4D9xP7-BiTuE5Z3.js","./UnknownTimeZone-DzO8gKMe-d6rtFXqm.js","./ArcadeExpression-BGPPS6z--7N6gsB31.js","./TimeOnly-BFfVS_ja-C4MPGwCM.js","./enum-D3e-PyKo-Bl5V5br5.js","./utils-CIm5uQvO-CtKf129F.js","./defaultCIMValues-BWu-APou-XI-Li77m.js","./heatmapUtils-Bf2yRyEN-BAQJ1IRB.js","./vec42-DHp-FUwt-Br7hmYJs.js","./vec4f64-DD-nkcCV-CSNWKRqG.js","./SimpleRenderer-DSyBXxyY-CGNZcXII.js","./UniqueValueRenderer-4zUMozui-C0Y5GPGV.js","./diffUtils-D3O4EfgX-CznKxD4n.js","./styleUtils-DoTsJ8ze-DHY40A2q.js","./widget-Yo6nzRYu-BBI8jxq5.js","./a11yUtils-tU3tY6-a-CmHbThdR.js","./utils-DvP1Tc7W-CK5sH9q2.js","./asyncUtils-Cu__bxqs-ecCTUaGV.js","./jsonUtils-Bl9MVnOR-Be8hf0yA.js","./parser-CXoJuqeV-C7irlk5U.js","./cimSymbolUtils-BJ01Nooc-BfOR3Irv.js","./executeQueryJSON-CB62-HPg-BYZFd1td.js","./utils-CRANtbnc-C6zyufvL.js","./query-DALknG0A-COo-2vjI.js","./normalizeUtils-DK5542Ty-DtqBcgc2.js","./normalizeUtilsCommon-5DjefBp7-CQyUDMQp.js","./utils-t279O251-BBk6rV0U.js","./pbfQueryUtils-DYXcN4x1-BpgjQRlR.js","./pbf-42TrGguk-Dw0lh_Mv.js","./memoryEstimations-C_GUL8g_-JniNFd5l.js","./OptimizedGeometry-BYxlP_oK-DvAqrgO1.js","./OptimizedFeature-C33SioFK-sn7DeAq-.js","./OptimizedFeatureSet-Dz5hF8Qm-CgsRgxJh.js","./queryZScale-B66ZWsfS-D7Zc2_Zh.js","./zscale-PLuFqpaL-BIEnWBsg.js","./FeatureSet-BIUKCqNW-D9YRl-VE.js","./modeUtils-V6BDu_YT-Dq8o_RJK.js","./shared-DXZ65waB-BM-XH3jC.js","./isImageryGraphicOrigin-n8VFIUI8-CbU9XN-1.js","./isImageryTileGraphicOrigin-BighNA3j-BRiE9tYw.js","./FeatureLayer-CCD4d2TK-D-vTdTyl.js","./MultiOriginJSONSupport-DNNJhlNT-Bm4fcG4m.js","./layerContainerType-CJrPp4UB-BIF7XAYP.js","./FormTemplate-VNQ04sPR-DwlQPeuM.js","./GraphicOrigin-BZpgptRb-BMZxic91.js","./workers-CixlqDQM-CMoJ1YZN.js","./editsZScale-DcYeqiDn-O8ivdk-A.js","./APIKeyMixin-DYy2zfLn-D3z7LonQ.js","./ArcGISService-CytDmkiZ-emNrPdED.js","./BlendLayer-D8oJmNCO-A0sTzbOF.js","./CustomParametersMixin-CqtpZgix-ZCd9Um94.js","./DisplayFilteredLayer-Ce0lf91Z-D_UnOF-a.js","./scaleUtils-Ckma21r5-DhwWQymd.js","./displayFilterUtils-BCW-UeaE-CnjPWjFU.js","./EditBusLayer-B5fJK8S9-BfKLF1l7.js","./FeatureEffectLayer-Bw8pqFtl-COIpRlV8.js","./FeatureEffect-xxDa5IRG-DfQBGcCi.js","./FeatureFilter-D0iZ4sKI-BBZH0Xo9.js","./FeatureLayerBase-Ca6xrS5x-bGdb6Ysq.js","./HeightModelInfo-Cjals-AI-DMpn5Tsh.js","./OperationalLayer-Ds0FQSCg-DEUbTcjK.js","./ElevationInfo-tlrAM5SV-D86C1F9d.js","./labelingInfo-jIy5P_vY-D8rEl7NY.js","./NormalizationBinParametersMixin-DuEmpnQx-abBJwXnQ.js","./labelUtils-BLNYRrPe-Cv1ZZjAO.js","./LayerFloorInfo-krwL5pHA-C-NgvUlX.js","./multiLayerServiceUtils-DET2KhOE-Bw336UOx.js","./Relationship-YLK2X_M_-G1AF1PCW.js","./serviceCapabilitiesUtils-Cm1_ZgDe-BkUSvtE4.js","./infoFor3D-BeWnZejW-CnXQECJx.js","./portalItemUtils-C12I5owR-Iiaf4oEu.js","./projectionUtils-CsX1UTBu-DsZaU4xz.js","./projectBuffer-CMNsPBq1-CMpE7Jo3.js","./FeatureReductionLayer-fRVzjp_G-BAykrsM3.js","./FeatureReductionSelection-BYDlwJ5u-CQfZ-i0-.js","./jsonUtils-5anAqpiW-BnpEYfRl.js","./MD5-CXHDUqXT-CMrYdOi6.js","./OrderedLayer-BpzV2gVo-B7bag0TS.js","./OrderByInfo-D0eImi6z-Dv2CatL0.js","./PortalLayer-B52AUJ7S-DLZhjKpz.js","./PortalItem-BrQqKoE_-zs2bKsCH.js","./RefreshableLayer-BEBm0YMm-CEdeDwog.js","./ScaleRangeLayer-DkZwCH6_-C95kTMqN.js","./TemporalLayer-D43PzGI2-BVfMl_Wx.js","./TimeInfo-BoebCPJB-ubr6IA4W.js","./TrackableLayer-B6TLWZyJ-CFqD-uca.js","./FeatureTemplate-DN-lMS1p-caqKKpFl.js","./FeatureType-BaXpcfS--CXOAiC-Q.js","./fieldProperties-B4tOVJmv-DQSPMAAi.js","./TitleCreator-BrV1DW5U-CU3Ke3Vx.js","./versionUtils-DTdDMzVZ-DiRjVmBE.js","./styleUtils-BQqoMgIA-U43o5V_5.js","./popupUtils-D0h6TFFF-Bch8GtRu.js","./streamLayerUtils-CcwO9-27-DFlbJ4P1.js","./ReactiveMap-cp6PWICM-990o5_5b.js","./NetworkElement-Dj3I3Jn3-9bqqwBZw.js","./ReactiveSet-DP8oFB7N-DSfeDz8k.js","./symbolUtils-BWODOwTq-BEtrWlLF.js","./colorUtils-DlmOacVt-BnN0T6wa.js","./mat2df32-fg3OHsAI-BF2V2zqo.js","./mat2d-Cf4xHr3Z-u09Kv-lR.js","./layerViewUtils-BBTk5dU--BemaIlLi.js","./Texture-DLw7oaIg-fTsxdRzn.js","./enums-DDJfd4_p-D3z9tmVA.js","./CollectionFlattener-DfZaIx8a-ADmwanro.js","./GraphicsCollection-CT-y6p3H-4XYPvC_j.js","./TileInfo-BmHJ3kZT-BCenfvrA.js","./TileKey-1TQKLvpf-ByD6Ad6n.js","./UpdatingHandles-XotKWqvb-CyHJIoZx.js","./Map-BgzFtTfu-BMsKSgj7.js","./Basemap-Dv-hYkd3-V8XC6wCN.js","./loadAll-B16dgL0--5EDWWWLE.js","./isBasemap-CJN7v_Jq-Dgi2bMj-.js","./writeUtils-DKeM2R6Z-BUUAIn2U.js","./persistable-vgejqKb5-CBqfEqX1.js","./multiOriginJSONSupportUtils-DGETddQl-BrWaY9_8.js","./resourceExtension-Boq2U56c-rXLaGMsr.js","./PolygonCollection-BEPfGuUm-Bu1vpYsn.js","./editableLayers-BTZOOiKD-ByJ-Oydo.js","./TablesMixin-Cv7gcoNw-OtczYJk-.js","./projectionUtils-BXtVkW1R-Dp6FsH61.js","./vec2f64-CkowXrDb-3zFQ3LNH.js","./mat2df64-VxtldH1S-CqyKAV7h.js","./vec2f32-hTAvipMV-C0AQcwEv.js","./Scheduler-D_tOhFWn-SFGb1GBz.js","./debugFlags-vZXEBr68-Bc51Oe-E.js","./vec32-CI1xtKog-DFVYRcgb.js","./unitBezier-DhyPAQO8-B9kUb8N6.js","./Tile-BNoJIjzH-DZ-xZWMb.js","./TileKey-BZu7Ia24-BiyRHU0x.js","./arcadeUtils-BkvNBhzm-KzAaTYHA.js","./quickselect-DHTstthl-Ds_Aj0x5.js","./definitions-DVO21zOC-BwakNu1s.js","./imageUtils-DITyjHV4-jEv5aA2D.js","./capabilities-BaKzUyhi-B84We26i.js","./ColorBackground-C0DZs7p1-CENExjrO.js","./webglDeps-p0I075J4-CIV8dRVb.js","./BufferObject-RHe5uojV-C-IINTcZ.js","./FramebufferObject-CjoCv_5U-BOVEwWIe.js","./ProgramTemplate-BqCbl7jA-D5ymqDWS.js","./VertexArrayObject-BAcBN849-N8lUr7x7.js","./VertexAttributeLocations-DBgVVQz--D3wovAvC.js","./mapViewDeps-B6GxsDpZ-BamXKa6c.js","./fontUtils-bOFLFKCC-gLU2ItK2.js","./FeatureCommandQueue-BbPzhYCk-D7LazOd5.js","./CIMSymbolHelper-C-M9oL19-BYnF76mM.js","./BidiEngine-DXDmu_WZ-DxL95DSc.js","./labelPoint-DTWBMY-Z-DoXEvKTt.js","./GeometryUtils-C8-DjR3I-DcNL1Jc6.js","./rasterizingUtils-Cf1zdzIw-BfJyHaiy.js","./Rect-DD6XS68q-D_hsV3ag.js","./BoundingBox-DlCd_wcU-DBB4UfPl.js","./GraphShaderModule-2-Wwh4Ie-CB1gcQ9C.js","./ShaderBuilder-ufvKEDd5-DMnPqr6U.js","./UpdateTracking2D-CIKx7GWt-CEE8vGb9.js","./utils-CVxMaYM5-vm0ifvbR.js","./constants-CWFGCPkc-B_3x8_48.js","./VertexBuffer-7GCTDD7e-CbRHEILO.js","./VertexElementDescriptor-DLvjNrmQ-Cuvx5w94.js","./WGLContainer-CV7lovie-XGZSmlU_.js","./Utils-CYY0kXyb-BZKnUtTY.js","./vec3f32-GX_cKsFD-UJPpzdNc.js","./Container-CO1X8bpa-BR9OVw9m.js","./EffectView-kLXORhA_-D7bXwfxF.js","./config-C6w0VpIP-CfPhyZfw.js","./earcut-C6NeZYSh-P2HUZ781.js","./featureConversionUtils-CZmIxyv5-DHwRSztU.js","./QueueProcessor-Bne-Dlbg-BSQ_6P13.js","./SDFHelper-y0wAsOD_-D5veGcjF.js","./TexturedLineMeshWriter-BCl73Ao0-B8_pfMVJ.js","./TurboLine-CvWJ2xTB-C5q-5bd9.js","./OverrideHelper-RCCoK8tw-ysetE5jH.js","./callExpressionWithFeature-C8T2jtcK-BKO8mxzd.js","./quantizationUtils-Ba9rpy9D-8ijlY328.js","./GridShader-B40aibxA-DFQsB6UM.js","./CircularArray-DaQg3PQl-BXS52LZy.js","./testSVGPremultipliedAlpha-CBm-g_aP-C0JKKSWz.js","./SymbolFader-Bp4Rc0g4-CvpmxMcz.js","./constants-t42rMCzy-Dlzs1Z4p.js","./RenderingContext-Dd65Wpyx-CPiyyupB.js","./renderState-CsafAKLy-B8R8ns_l.js","./glsl-CfY1Aoj6-DPHSeNd9.js","./CIMResourceManager-CcSrCojH-Bt2v7OJu.js","./AttributeStore-DvLAcaW_-yhKHITeD.js","./FeatureStoreQueryAdapter-Bcw-trC6-Qchy735n.js","./queryUtils-BwthgOFW-CkUF_Za8.js","./timeSupport-BnWHpO95-DqCdiJEC.js","./utils-BKt6dDcv-LR6pmor1.js","./grouping-CrNPfBhl-Dqv5TxZv.js","./utils-CS2SzBG--DDjZAYSk.js","./MeshWriterRegistry-CamYT-0m-D6_K887u.js","./projectOperator-Ck1qoxA7-C8j49U3P.js","./operatorProject-DXddukrY-D4o1pyBi.js","./SimpleGeometryCursor-DSF_YyIm-TAMgMsbK.js","./GraphicsView2D-s8uCM1cW-mfaIgonq.js","./FeatureMetadata-BbCAi0tA-_ZTatr4-.js","./normalizeUtilsSync-LSqldPGx-BPVTtjjQ.js","./densifyCurvedGeometry-C7Lb_tRx-Bjv2vU9s.js","./dehydratedFeatures-Ck57tKcB-BDo0po7B.js","./GraphicContainer-Db3U58dc-ClwpoSp-.js","./AGraphicContainer-Dkp0Fcwi-B-MS61ME.js","./TechniqueInstance-DewtzAj1-Bk3vEzF0.js","./TileContainer-BIM43zRp-7nWripvu.js","./requestImageUtils-CrIBaPUj-khjAqpU7.js","./gridUtils-DpRsTzHe-j68kmuS2.js","./geodesicUtils-DHDMXkUY-CP5HeHA5.js","./TileLayerView2D-wVUnrLCk-DnwN4pOJ.js","./imageUtils-Bynmhhhx-DfXPf40I.js","./BitmapTechnique-BhFKaUl9-DD4q1hpj.js","./bitmapUtils-C-2yIopZ-CIvksmSr.js","./LayerView2D-D_-BpxcP-BHff6Xwh.js","./utils-C0LvbFCo-RMQaTNpt.js","./HighlightGraphicContainer-Brjng0Bz-Cr5HM-xO.js","./LayerView-DBq501tj-9r8g88Ff.js","./RefreshableLayerView-BoQ2vcWz-CCPPBuQI.js","./MapServiceLayerViewHelper-CzQKY7tH-WbDjqDCL.js","./floorFilterUtils-4r-vVdzs-u-jw2p7F.js","./drapedUtils-D9z307XM-CQXlJXY2.js","./sublayerUtils-4P0fN3TU-D5NLvnmv.js","./popupUtils-0qrvMVFA-DW3AaJvU.js","./highlightOptionsUtils-D6RCaXjG-zpB2TL72.js","./FeatureLayerView2D-CPRvrYca-CiASMjJ1.js","./timeSupport-CH70S3w_-DdC7tV9M.js","./AttributeBinsFeatureSet-DnObQnDw-BXW4BoEx.js","./AttributeBinsQuery-DAANgUPd-DDdVeBeY.js","./FixedIntervalBinParameters-Bn9Pye3B-_d3f8Yp4.js","./featureReductionUtils-CT3zJdMo-COEl9dk_.js","./FeatureIdInfo-9kzkNbmy-C9uD4nJf.js","./constants-DVYXs0Da-SxxbBSOD.js","./parquetUtils-efARFe0s-tuTN4jBU.js","./locationUtils-sOTPEtiz-Bwo0TKFc.js","./parquet-BKuoy8EM-tvadAp3d.js","./BaseDynamicLayerView2D-C9JZudmI-6Ycfqk8z.js","./BitmapContainer-BfjMMCRM-UhDnGRUM.js","./ExportStrategy-Tr4qPygC-J3jNGYkv.js","./CatalogLayerView2D-Dxxh5a9r-DdcKJ6-E.js","./CatalogDynamicGroupLayerView2D-NrR8mmeQ-Dl-rEEMZ.js","./CatalogFootprintLayerView2D-ClrSz-v_-BYVKf9EM.js","./GeoRSSLayerView2D-Cqyu9rTD-NeqeItNl.js","./GraphicsLayerView2D-Cx4N44IG-EA5CYsYk.js","./GroupLayerView2D-DHsZDiNt-CpF6bhbR.js","./ImageryLayerView2D-dFQBu0l2-CrGucz0L.js","./RasterVFDisplayObject-C7pJeq00-Dp7OM3wS.js","./dataUtils-Dmw3coU_-BChqYnqi.js","./vectorFieldUtils-BL5wnf_H-VvdatiJz.js","./PixelBlock-DwvqalBN-B5no8ogH.js","./pixelRangeUtils-DcEknavd-BIL6Doop.js","./rasterProjectionHelper-DNfZ9Hwc-CptrPCWf.js","./rasterFieldUtils-D8TPlBIr-DReIywIW.js","./ImageryTileLayerView2D-C22Q5bbN-DJYlDwot.js","./datasetUtils-CoevgV-1-DBvxeW7j.js","./clipUtils-BtWPrYe--B7EVDZv3.js","./rasterUtils-X7Yuu3FH-BuJN3jOe.js","./RawBlockCache-BpKctfOs-CqPAG2bh.js","./KMLLayerView2D-BeeYuImA-r6RspI3O.js","./kmlUtils-Z-yC8PKw-DdV5roe9.js","./KnowledgeGraphLayerView2D-BCyhoZrM-C31sjexH.js","./MapImageLayerView2D-CpTj_--R--oAIUFJq.js","./ExportImageParameters-BGZXJ_p1-D2SXQ2bD.js","./MapNotesLayerView2D-dcpIwdmd-6BceiVsm.js","./MediaLayerView2D-wSR52uYZ-UIAfnuit.js","./MediaElementView-Inm09Luv-D98HIOU5.js","./OverlayContainer-DtJUA-Qf-ZgjXVTlS.js","./OGCFeatureLayerView2D-CgWnmaK2-mlxkJO9_.js","./RouteLayerView2D-C3xd3U9j-DQMPLJy0.js","./Stop-BitpKBav-BB13ifE3.js","./networkEnums-pU3LwrHA-Cj_1j_s1.js","./StreamLayerView2D-CdtHSknv-BDK8zY00.js","./SubtypeGroupLayerView2D-B-iHIO3Q-Dmcjlmd0.js","./VectorTileLayerView2D-CeXtu0Ei-CyuLhYJY.js","./PooledRBush-CJtyGgW1-FNinHJNO.js","./SourceLayerData-Bj7ibB9F-B3LOrUgP.js","./StyleRepository-BkGEVTu--C5HgoPSx.js","./VideoLayerView2D-B3-zgsBG-DSEpBp0c.js","./GraphicsLayer-DPoztXf7-DWF8RDJT.js","./videoUtils-DqUNsfRO-CKPvz1th.js","./ControlPoint-D9S0zBhW-6A8HZdYr.js","./WMSLayerView2D-BRzMW6NF-B4V5tH48.js","./ExportWMSImageParameters-dd536H71-DTrGHDNl.js","./WMTSLayerView2D-Cdgf4JIc-BOJEzTDM.js","./ElevationProfileAnalysisView2D-BGZexWJe-Cank-tMS.js","./createUtils-QoBeynM5-wXx8RLRA.js","./distanceOperator-C3n_j88h-CjjOO0Zj.js","./Point2D-BVUQyGsf-qih0ZuJV.js","./Distance2DCalculator-CXhBP-8I-CW7HDKXX-kSux2duE.js","./ProjectionTransformation-BXUROh_s-kKBZ5FDB.js","./Envelope2D-2iYexKQo-BCKocNS7.js","./Transformation2D-CZCvoz9N-B-IhcWnl.js","./OperatorDefinitions-DJdq_wrt-DP7_WWTp.js","./apiConverter-Djde5pBD-Dr3vspB4.js","./jsonConverter-CiKBkr5U-C590VlCu.js","./simplifyOperator-CK8t6p1S-COLMjdqn.js","./operatorSimplify-BRKLCaj2-DisWK8Yh.js","./quat-B6H0knG8-DtO1-hlf.js","./quatf64-C16JxGFv-BKWK1F8U.js","./mapCollectionUtils-DHlvEs72-DKXw-TcU.js","./elevationInfoUtils-DFX5QvG8-DWLx2t7K.js","./getDefaultUnitForView-CEAuCsu_-B1vEtX96.js","./GeometryDescriptor-CGSMioST-BjTCNFpW.js","./SketchViewModel-BCVIeloG-Cwmt4M0t.js","./projectVectorToVector-OCoJKalB-CQIDHzSm.js","./projectPointToVector-BHS0gJJf-DOVZH8Fn.js","./plane-wUwHaY3K-ZwGBF7HQ.js","./vectorStacks-B2ngxq6F-myhPBoPk.js","./sphere-CIGsF4vz-C3zVQu9y.js","./geodeticLengthOperator-CMi-Z1ZN-WUImro4E.js","./geodeticCurveType-D_etKnbP-CirnHLSB.js","./triangle-DA_o7I-u-CHbj6sRJ.js","./lineSegment-D8lwRkdT-CnWWOaLb.js","./spatialReferenceEllipsoidUtils-Ty3j4VoE-BUAsRqCF.js","./index-DPXhoKdb-BRi0pKCq.js","./index-B5UpFGZX-BY7UCsxA.js","./guid-Dls486Er-CBh637k4.js","./useT9n-DLD4Ns9x-BMNOgwpk.js","./index-CZRmpYJQ-B_ZQ2kaU.js","./dom-cV1JHjxC-ECa-LXIB.js","./observers-CAhVhbXT-D_oY9tJ5.js","./static-I-rbCIK8-CmBWZ6Bh.js","./form-D03n6FLW-C_W96jbq.js","./interactive-CoTGpEoh-DzPnGf4B.js","./label-C3m_eiKP-DS3cqnkb.js","./useSetFocus-BJqFX1-H-ChkfMq9o.js"])))=>i.map(i=>d[i]);
import{a2 as N,a3 as Si,a4 as mo,a5 as $a,a6 as go,Y as fo,a7 as E,a8 as yo,a9 as xt,aa as vo,ab as rn,ac as Yn,ad as Ga,ae as ja,af as Qn,ag as Ua,ah as q,ai as st,aj as S,ak as Ba,al as Ka,I as _o,m as r,E as l,n as v,am as ln,P,an as wo,ao as Ya,ap as Qa,aq as Ee,ar as nt,C as bo,l as k,as as w,at as tt,au as Xa,V as Te,av as ve,aw as Mo,ax as et,ay as ui,i as hn,A as cn,_ as T,g as Ja,az as tr,aA as er,aB as Re,aC as xo,aD as In,aE as ir,B as F,aF as fe,aG as Ie,aH as G,aI as Ze,aJ as Dn,N as Ot,aK as nr,aL as sr,c as Le,aM as qe,aN as Xn,aO as ki,aP as K,aQ as To,aR as So,aS as or,aT as Bt,aU as Jn,aV as ar,aW as Pi,aX as On,F as Kt,aY as rr,aZ as lr,a_ as ts,a$ as hr,b0 as cr,b1 as pr,b2 as J,b3 as ur,b4 as We,b5 as ko,b6 as ze,b7 as Po,b8 as dr,b9 as mr,ba as gr,bb as fr,bc as Ci,bd as Hi,be as di,j as Co,bf as yr,bg as vr,bh as es,bi as _r,bj as wr,bk as br,bl as Vi,bm as is,bn as Mr,bo as xr,bp as Gt,bq as Tr,br as Vo,bs as ns,bt as Sr,bu as kr,bv as Pr,bw as Cr,bx as Vr,by as ne,x as Er,bz as ss,bA as Rr,bB as os,bC as Ir,bD as pn,bE as $e,bF as Dr,bG as Or,bH as Ar,Q as Lr}from"./index-BeTPrQ6f.js";import{$ as zr,w as Fr,u as Nr}from"./Texture-DLw7oaIg-fTsxdRzn.js";import{e as Eo}from"./CollectionFlattener-DfZaIx8a-ADmwanro.js";import{Q as Hr}from"./workers-CixlqDQM-CMoJ1YZN.js";import{s as Zr,n as Ro,f as un}from"./GraphicsCollection-CT-y6p3H-4XYPvC_j.js";import{b as qr,W as Ei,G as Io,J as Do,L as Oo}from"./projectionUtils-CsX1UTBu-DsZaU4xz.js";import{p as Wr,n as $r}from"./TileInfo-BmHJ3kZT-BCenfvrA.js";import{Q as Ao,G as as,o as rs,U as Ri,C as An,V as Y,B as Gr,F as jr,q as Ii,M as Ur}from"./jsxFactory-DN-m49_5-CUFCpKPo.js";import{i as Di}from"./UpdatingHandles-XotKWqvb-CyHJIoZx.js";import{g as Oi,k as Br}from"./asyncUtils-Cu__bxqs-ecCTUaGV.js";import{b as Kr,d as Lo,r as Yr,o as Qr,a as Xr,h as Jr,l as tl,c as el,m as Zi,s as zo,n as Fo,_ as De,e as il,T as nl,v as H,g as ut,I as gt,f as sl,u as ol}from"./utils-DqlCEhl6-DBO0-7VG.js";import{L as al}from"./Map-BgzFtTfu-BMsKSgj7.js";import{i as rl}from"./HeightModelInfo-Cjals-AI-DMpn5Tsh.js";import{g as ll}from"./timeZoneUtils-CdK7eU4Y-fyhJ3EFx.js";import{o as dn}from"./ReactiveMap-cp6PWICM-990o5_5b.js";import{b as ls}from"./Query-DKLDaFaA-I4zhlfzt.js";import{f as hl,C as cl,v as pl}from"./projectionUtils-BXtVkW1R-Dp6FsH61.js";import{L as Ge}from"./TablesMixin-Cv7gcoNw-OtczYJk-.js";import{o as A,r as ul}from"./vec2f64-CkowXrDb-3zFQ3LNH.js";import{j as dl,g as Ln,x as ml,_ as Ai,q as Oe,S as No,A as Ho,v as gl}from"./mat2d-Cf4xHr3Z-u09Kv-lR.js";import{n as At}from"./mat2df64-VxtldH1S-CqyKAV7h.js";import{u as zn,f as fl}from"./normalizeUtils-DK5542Ty-DtqBcgc2.js";import{u as yl}from"./mat2df32-fg3OHsAI-BF2V2zqo.js";import{r as hs}from"./vec2f32-hTAvipMV-C0AQcwEv.js";import{X as vl}from"./Scheduler-D_tOhFWn-SFGb1GBz.js";import{r as _l}from"./a11yUtils-tU3tY6-a-CmHbThdR.js";import{E as wl}from"./vec32-CI1xtKog-DFVYRcgb.js";import{r as je}from"./unitBezier-DhyPAQO8-B9kUb8N6.js";import{m as bl,E as cs,B as Ml}from"./Tile-BNoJIjzH-DZ-xZWMb.js";import{s as xl}from"./TileKey-BZu7Ia24-BiyRHU0x.js";import{p as Tl}from"./arcadeUtils-BkvNBhzm-KzAaTYHA.js";import{o as Ue,a as ps,m as Sl,v as kl}from"./definitions-DVO21zOC-BwakNu1s.js";import{y as Pl}from"./imageUtils-DITyjHV4-jEv5aA2D.js";import{s as Cl}from"./capabilities-BaKzUyhi-B84We26i.js";import"./intl-DRhjUnwt-Dihhq8dq.js";import{u as Vl}from"./modeUtils-V6BDu_YT-Dq8o_RJK.js";import El from"./ColorBackground-C0DZs7p1-CENExjrO.js";import"./Cyclical-Bzwh_QaL-CXh-hbnA.js";import"./enums-DDJfd4_p-D3z9tmVA.js";import"./Queue-CK6TduSr-C-T211SM.js";import"./projectBuffer-CMNsPBq1-CMpE7Jo3.js";import"./zscale-PLuFqpaL-BIEnWBsg.js";import"./TileKey-1TQKLvpf-ByD6Ad6n.js";import"./uuid-CFz2qBzH-cIdlpVG-.js";import"./sanitizerUtils-CrdmaILo-DztC6Qnx.js";import"./messages-DQ10DjvF-6kk0dzjG.js";import"./signal-DHxLvooI-Bin-tnuW.js";import"./Version-DSJSGSLA-Cg87msWM.js";import"./Basemap-Dv-hYkd3-V8XC6wCN.js";import"./loadAll-B16dgL0--5EDWWWLE.js";import"./PortalItem-BrQqKoE_-zs2bKsCH.js";import"./isBasemap-CJN7v_Jq-Dgi2bMj-.js";import"./writeUtils-DKeM2R6Z-BUUAIn2U.js";import"./persistable-vgejqKb5-CBqfEqX1.js";import"./MD5-CXHDUqXT-CMrYdOi6.js";import"./multiOriginJSONSupportUtils-DGETddQl-BrWaY9_8.js";import"./resourceExtension-Boq2U56c-rXLaGMsr.js";import"./PolygonCollection-BEPfGuUm-Bu1vpYsn.js";import"./editableLayers-BTZOOiKD-ByJ-Oydo.js";import"./mat4f32-BdRMyjXW-CWt6U0BP.js";import"./mat4-R0VY9B_E-DoEP887i.js";import"./Field-Dn1Bgq7n-CJCGLoNR.js";import"./fieldType-DvW5hpfa-DYUbIy_X.js";import"./normalizeUtilsCommon-5DjefBp7-CQyUDMQp.js";import"./utils-CRANtbnc-C6zyufvL.js";import"./utils-t279O251-BBk6rV0U.js";import"./debugFlags-vZXEBr68-Bc51Oe-E.js";import"./quickselect-DHTstthl-Ds_Aj0x5.js";var mn;let Ct=mn=class extends fo{constructor(t){super(t),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(t){return(t%=360)<0&&(t+=360),t}clone(){return new mn({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry!=null?this.targetGeometry.clone():null,camera:this.camera!=null?this.camera.clone():null})}};r([l({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:qi}}}}})],Ct.prototype,"rotation",void 0),r([Vi("rotation")],Ct.prototype,"castRotation",null),r([l({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:qi}}}}})],Ct.prototype,"scale",void 0),r([l({types:Mr,json:{read:is,write:!0,origins:{"web-scene":{read:is,write:{overridePolicy:qi}}}}})],Ct.prototype,"targetGeometry",void 0),r([l({type:Nr,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}})],Ct.prototype,"camera",void 0),Ct=mn=r([v("esri.Viewpoint")],Ct);const ot=Ct;function qi(){return{enabled:!this.camera}}let ye=class extends Zr{constructor(t){super(t),this.addHandles(this.on("before-add",e=>{e.item!=null&&e.item.parent===this.owner&&(P.getLogger(this).warn("Analysis inside the collection must be unique. Not adding this element again."),e.preventDefault())}))}_own(t){t.parent=this.owner}_release(t){t.parent=null}};ye=r([v("esri.support.AnalysesCollection")],ye);const ii={widthBreakpoint:{getValue(t){const e=t.viewSize[0],i=t.breakpoints,n=this.values;return e<=i.xsmall?n.xsmall:e<=i.small?n.small:e<=i.medium?n.medium:e<=i.large?n.large:n.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(t){const e=t.viewSize[1],i=t.breakpoints,n=this.values;return e<=i.xsmall?n.xsmall:e<=i.small?n.small:e<=i.medium?n.medium:e<=i.large?n.large:n.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(t){const e=t.viewSize,i=e[0],n=e[1],s=this.values;return n>=i?s.portrait:s.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},Wi={xsmall:544,small:768,medium:992,large:1200};function Rl(t){const e=t;return e&&e.xsmall<e.small&&e.small<e.medium&&e.medium<e.large}function $i(t,e){return e?ii[t].valueToClassName[e].split(" "):[]}const Il=t=>{const e=t;let i=class extends e{constructor(...n){super(...n),this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=Wi}initialize(){this.addHandles(w(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),G))}destroy(){this.destroyed||this._removeActiveClassNames()}set breakpoints(n){if(n!==this._get("breakpoints")){if(!Rl(n)){const s=JSON.stringify(Wi,null,2);console.warn("provided breakpoints are not valid, using defaults:"+s),n=Wi}this._set("breakpoints",{...n})}}_updateClassNames(){if(!this.container)return;const n=Ze.acquire(),s=Ze.acquire();let o,a=!1;for(o in ii){const h=this[o],c=ii[o].getValue({viewSize:this.size,breakpoints:this.breakpoints});h!==c&&(a=!0,this[o]=c,$i(o,h).forEach(p=>s.push(p)),$i(o,c).forEach(p=>n.push(p)))}a&&(this._applyClassNameChanges(n,s),Ze.release(n),Ze.release(s))}_applyClassNameChanges(n,s){const o=this.container;o&&(s.forEach(a=>o.classList.remove(a)),n.forEach(a=>o.classList.add(a)))}_removeActiveClassNames(){const n=this.container;if(!n)return;let s;for(s in ii)$i(s,this[s]).forEach(o=>n.classList.remove(o))}};return r([l()],i.prototype,"breakpoints",null),r([l()],i.prototype,"orientation",void 0),r([l()],i.prototype,"widthBreakpoint",void 0),r([l()],i.prototype,"heightBreakpoint",void 0),i=r([v("esri.views.BreakpointsOwner")],i),i};let Vt=class extends S{constructor(){super(...arguments),this.items=new E,this._watchUpdatingTracking=new Di,this._callbacks=new Map,this._projector=rs(),this._hiddenProjector=rs()}get needsRender(){return this.items.length>0}get updating(){var t;return((t=this._watchUpdatingTracking)==null?void 0:t.updating)??!1}initialize(){const t=document.createElement("div");t.className="esri-overlay-surface",this._set("surface",t),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),t.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,e=>{for(const i of e.added){const n=()=>i.render();this._callbacks.set(i,n),this._projector.append(this.surface,n)}for(const i of e.removed){const n=this._projector.detach(this._callbacks.get(i));this.surface.removeChild(n.domNode),this._callbacks.delete(i)}})}addItem(t){this.items.add(t)}removeItem(t){this.items.remove(t)}destroy(){this.items.removeAll(),this._callbacks.forEach(t=>this._projector.detach(t)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(t){const e=this._hiddenSurface,i=this._hiddenProjector;let n;const s=()=>(n=t.render(),n);i.append(e,s),i.renderNow();const o={left:0,top:0,right:0,bottom:0};if(n!=null&&n.domNode){const a=n.domNode.getBoundingClientRect();o.left=a.left,o.top=a.top,o.right=a.right,o.bottom=a.bottom}for(i.detach(s);e.firstChild;)e.removeChild(e.firstChild);return o}overlaps(t,e){const i=this.computeBoundingRect(t),n=this.computeBoundingRect(e);return Math.max(i.left,n.left)<=Math.min(i.right,n.right)&&Math.max(i.top,n.top)<=Math.min(i.bottom,n.bottom)}get hasVisibleItems(){return this.items.some(t=>t.visible)}async prepare(){await document.fonts.load(this._fontString()).catch(()=>{})}renderCanvas(t,e){const i=!!(e!=null&&e.disableDecorations);if(!this.items.some(s=>s.visible&&!(i&&s.isDecoration)))return;const n=t.getContext("2d");n.save(),n.font=this._fontString(),this.items.forEach(s=>{i&&s.isDecoration||(n.save(),s.renderCanvas(n),n.restore())}),n.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};r([l({readOnly:!0})],Vt.prototype,"surface",void 0),r([l({readOnly:!0})],Vt.prototype,"items",void 0),r([l({readOnly:!0})],Vt.prototype,"needsRender",null),r([l({readOnly:!0})],Vt.prototype,"_watchUpdatingTracking",void 0),r([l({readOnly:!0})],Vt.prototype,"updating",null),Vt=r([v("esri.views.overlay.ViewOverlay")],Vt);const us=Vt,Gi=[0,0];function Dl(t){const e=(t.ownerDocument||window.document).defaultView,i=t.getBoundingClientRect();return Gi[0]=i.left+((e==null?void 0:e.pageXOffset)??0),Gi[1]=i.top+((e==null?void 0:e.pageYOffset)??0),Gi}function ds(t){t&&(t.textContent="",t.parentNode&&t.parentNode.removeChild(t))}function Ol(t){const e=document.createElement("div");return t.appendChild(e),e}const Xt=16,we=750,Al=512,Ll=2,zl=t=>{const e=t;let i=class extends e{constructor(...n){super(...n),this._freqInfo={freq:Xt,time:we},this._overlayRenderTaskHandle=null,this.aria={},this.height=0,this.messagesCommon=null,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.addHandles([w(()=>this.cursor,s=>{const{surface:o}=this;o&&o.setAttribute("data-cursor",s)}),w(()=>this.navigating,s=>{const{surface:o}=this;o&&o.setAttribute("data-navigating",s.toString())}),w(()=>[this.aria,this.surface],()=>this._updateAria(),{initial:!0})])}initialize(){const n=this;this.addHandles([w(()=>this.ui,(s,o)=>this._handleUIChange(s,o),G),n.on("focus",()=>this.notifyChange("focused")),n.on("blur",()=>this.notifyChange("focused"))])}destroy(){var n;this.destroyed||((n=this.ui)==null||n.destroy(),this.container=null)}get container(){return this._get("container")??null}set container(n){const s=this._get("container"),o=Ao(n);if(o||typeof n!="string"||P.getLogger(this).error("#container",`element with id '${n}' not found`),s===o)return;if(this._stopMeasuring(),s&&(s.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(ds(this.root),this._set("root",null)),this.userContent&&(as(this.userContent,s),ds(this.userContent),this._set("userContent",null))),!o)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);o.classList.add("esri-view");const a=document.createElement("div");a.className="esri-view-user-storage",as(o,a),o.appendChild(a),this._set("userContent",a);const h=document.createElement("div");h.className="esri-view-root",o.insertBefore(h,o.firstChild),this._set("root",h);const c=document.createElement("div");c.className="esri-view-surface",c.setAttribute("role","application"),c.tabIndex=0,h.appendChild(c),this._set("surface",c);const p=new us;h.appendChild(p.surface),this._set("overlay",p),this.addHandles(w(()=>p.needsRender,u=>{u&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=fe({render:()=>{var d;return(d=this.overlay)==null?void 0:d.render()}}):this._overlayRenderTaskHandle=et(this._overlayRenderTaskHandle)})),this.forceDOMReadyCycle(),this._set("container",o),this._startMeasuring()}get focused(){const n=document.activeElement===this.surface;return document.hasFocus()&&n}get size(){return[this.width,this.height]}set ui(n){const s=this._get("ui");s!==n&&(s==null||s.destroy()),this._set("ui",n)}blur(){var n;(n=this.surface)==null||n.blur()}focus(){var n;(n=this.surface)==null||n.focus()}pageToContainer(n,s,o){const a=this.position;return n-=a?a[0]:0,s-=a?a[1]:0,o?(o[0]=n,o[1]=s):o=[n,s],o}containerToPage(n,s,o){const a=this.position;return n+=a?a[0]:0,s+=a?a[1]:0,o?(o[0]=n,o[1]=s):o=[n,s],o}_updateAria(){const{surface:n,aria:s}=this;n&&(n.ariaLabelledByElements=(s==null?void 0:s.labelledByElements)??null,n.ariaDescribedByElements=(s==null?void 0:s.describedByElements)??null,n.ariaLabel=(s==null?void 0:s.label)??null,n.ariaDescription=(s==null?void 0:s.description)??null)}_handleUIChange(n,s){this.removeHandles("ui"),s&&s!==n&&s.destroy(),n&&(n.view=this,this.addHandles(w(()=>this.root,o=>{n.container=o?Ol(o):null},G),"ui")),this._set("ui",n)}_stopMeasuring(){this.removeHandles("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const n=this._freqInfo;n.freq=Xt,n.time=we;const s=fe({prepare:h=>{const c=this._measure(),p=this._freqInfo;if(p.time+=h.deltaTime,c&&(p.freq=Xt,this._get("resizing")||this._set("resizing",!0)),p.time<p.freq)return;p.time=0;const u=this._position();p.freq=u||c?Xt:Math.min(we,p.freq*Ll),!c&&p.freq>=Al&&(s.pause(),this._get("resizing")&&this._set("resizing",!1))}}),o=new ResizeObserver(h=>{n.freq=Xt,n.time=we,s.resume()});this.container!=null&&o.observe(this.container);const a=ve(()=>o.disconnect());this.addHandles([_o(window,"resize",()=>{n.freq=Xt,n.time=we,s.resume()}),a,s],"measuring"),this._measure(),this._position()}_measure(){const n=this.container,s=n?n.clientWidth:0,o=n?n.clientHeight:0;if(s===0||o===0)return this.suspended||this._set("suspended",!0),!1;const a=this.width,h=this.height;return s===a&&o===h?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",s),this._set("height",o),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:a,oldHeight:h,width:s,height:o}),!0)}_position(){const n=this.container,s=this.position,o=n&&Dl(n);return!!o&&(!s||o[0]!==s[0]||o[1]!==s[1])&&(this._set("position",[o[0],o[1]]),!0)}forceDOMReadyCycle(){}};return r([l()],i.prototype,"aria",void 0),r([l()],i.prototype,"container",null),r([l({readOnly:!0})],i.prototype,"focused",null),r([l({readOnly:!0})],i.prototype,"height",void 0),r([l()],i.prototype,"messagesCommon",void 0),r([l({type:us})],i.prototype,"overlay",void 0),r([l({readOnly:!0})],i.prototype,"position",void 0),r([l({readOnly:!0})],i.prototype,"resizing",void 0),r([l({readOnly:!0})],i.prototype,"root",void 0),r([l({value:null,readOnly:!0})],i.prototype,"size",null),r([l({readOnly:!0})],i.prototype,"surface",void 0),r([l({readOnly:!0})],i.prototype,"suspended",void 0),r([l({nonNullable:!0})],i.prototype,"ui",null),r([l({readOnly:!0})],i.prototype,"userContent",void 0),r([l({readOnly:!0})],i.prototype,"width",void 0),r([l()],i.prototype,"widthBreakpoint",void 0),i=r([v("esri.views.DOMContainer")],i),i},Be="popup",ms="manual";function dt(t){return t!=null&&"open"in t&&"declaredClass"in t}function St(t){return!!t&&t.tagName.toLowerCase()==="arcgis-popup"&&"open"in t}function Fl(t,e,i){const[n,s,o]=e;if(i){const[a,h,c]=i;a&&dt(h)&&(h.view=null,a.remove(h,Be),h!==s&&s&&h.destroy()),a&&c&&St(c)&&(c.view=null,a.remove(c,Be),c!==o&&o&&c.remove())}n&&dt(s)&&(s.view=t,n.add(s,{key:Be,position:ms,internal:!0})),n&&o&&St(o)&&(o.view=t,n.add(o,{key:Be,position:ms,internal:!0}))}async function Nl(t,e){const{popup:i,popupElement:n}=t;dt(i)?await Ke(i,null,e):n&&St(n)?await Ke(null,n,e):e==null||e.defer(async()=>{await t.setupPopup();const{popup:s,popupElement:o}=t;dt(s)&&!t.destroyed&&t.ready&&t.popupEnabled?await Ke(s,null,e):o&&St(o)&&await Ke(null,o,e)})}function Hl(t,e){const{popup:i,popupElement:n}=t;if(dt(i))return i.open(e);n&&St(n)&&n.open(e)}function Zl(t,e){dt(t)&&t.close(),e&&St(e)&&(e.visible=!1)}async function Ke(t,e,i){var n,s;if(dt(t)){const o=await t.viewModel.handleViewClick(i);return void((n=o==null?void 0:o.promises)!=null&&n.length?t.open(o):t.visible&&t.close())}if(e&&St(e)){const o=await e.handleViewClick(i);(s=o==null?void 0:o.promises)!=null&&s.length?e.open(o):e.visible&&(e.visible=!1)}}const ql=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this._popupSetupTask=null,this.popup={},this.popupEnabled=!0}initialize(){this.addHandles([w(()=>[this.ui,this.popup,this.popupElement],([n,s,o],a)=>{const[h,c,p]=a??[];Fl(this,[n,s,o],[h,c,p])},tt),this.on("click",n=>{this.popup&&this.popupEnabled&&(n.pointerType!=="mouse"||n.button===0)&&Nl(this,n)},De.WIDGET)]),Dn(()=>this.ready&&this.popupEnabled&&!this.updating).then(()=>T(()=>import("./Popup-GoljqFxv-DQfaTUdv.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174]),import.meta.url).then(n=>n.P))}destroy(){this.destroyed||this.closePopup()}async openPopup(n){if(dt(this.popup))return this.popup.open(n);if(this.popupElement&&St(this.popupElement))this.popupElement.open(n).catch(()=>{});else try{if(await this.setupPopup(),!this.popup)return void P.getLogger(this).error(new k("view:null-popup","Popup is null and can't be opened"));Hl(this,n)}catch{}}closePopup(){var n;(n=this._popupSetupTask)==null||n.abort(),Zl(this.popup,this.popupElement)}async fetchPopupFeatures(n,s){return await this.when(),this._popupHitsToFeatures(await this._getPopupHits(n,s),s)}async setupPopup(){var n;if((n=this._popupSetupTask)==null||n.abort(),this.popup&&!dt(this.popup))return this._popupSetupTask=Oi(async s=>{if(!this.popupEnabled||!St(this.popupElement))if(this.dependencies.popup&&typeof this.dependencies.popup=="function")await this.dependencies.popup(),Ot(s),customElements.get("arcgis-popup")||P.getLogger(this).error(new k("view:undefined-popup-element","`arcgis-popup` custom element is undefined and can't be opened")),this.popupElement=document.createElement("arcgis-popup");else{const{default:o}=await T(()=>import("./Popup-GoljqFxv-DQfaTUdv.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174]),import.meta.url).then(h=>h.P);if(Ot(s),!this.popup||dt(this.popup))return;const a=this.popup;if("open"in a||"close"in a){const{open:h,close:c,...p}=a;this.popup=new o({...p})}else this.popup=new o(a)}}),this._popupSetupTask.promise}async _popupHitsToFeatures({location:n,hits:s},o){const a=[],h=[];let c=!1;const p=nr(o,q("popup-view-fetch-timeout")??$l),u=g=>{const f=new Wl(g);return h.push(f),a.push(f.promise),f},d=g=>{const f=h.at(-1);return f&&f.layerView===g&&!c?f:u(g)};for(const g of s)"graphic"in g?(d(g.layerView).graphics.push(g.graphic),c=!1):(a.push(g.layerView.fetchPopupFeaturesAtLocation(g.mapPoint,p)),c=!0);h.forEach(g=>g.resolve(p));const m=sr(a).then(g=>g.filter(f=>!!f).flat());return{pendingFeatures:a,allGraphicsPromise:m,location:n}}async _getPopupHits(n,s){const{hits:o,location:a}=await this.popupHitTest(n);Ot(s);const h=[];for(const c of o)if("graphic"in c){if(this._isValidPopupGraphic(c.graphic,s)){const p=this._isValidPopupGraphicsLayerView(c.layerView)?c.layerView:void 0;h.push({graphic:c.graphic,layerView:p})}}else this._isValidPopupLocationLayerView(c.layerView)&&h.push({mapPoint:c.mapPoint,layerView:c.layerView});return{hits:h,location:a}}_isValidPopupGraphic(n,s){return n&&!!n.getEffectivePopupTemplate(s==null?void 0:s.defaultPopupTemplateEnabled)}_isValidPopupGraphicsLayerView(n){return!n||(!("layer"in n)||!n.suspended)&&"fetchPopupFeaturesFromGraphics"in n}_isValidPopupLocationLayerView(n){return(!("layer"in n)||!n.suspended)&&"fetchPopupFeaturesAtLocation"in n}};return r([l()],i.prototype,"popup",void 0),r([l()],i.prototype,"popupElement",void 0),r([l()],i.prototype,"popupEnabled",void 0),i=r([v("esri.views.PopupView")],i),i};let Wl=class{constructor(t){this.layerView=t,this._resolver=Le(),this.graphics=[]}get promise(){return this._resolver.promise}resolve(t){const{layerView:e,graphics:i,_resolver:n}=this;if(!e)return n.resolve(i),n.promise;let s;return e.fetchPopupFeaturesFromGraphics(i,t).catch(o=>(s=o,null)).then(o=>{o?n.resolve(o):n.reject(s)}),n.promise}};const $l=5e3;let vt=class extends S{constructor(t){super(t),this.view=null,this.baseLayerViews=new E,this.groundLayerViews=new E,this.referenceLayerViews=new E,this._loadingHandle=w(()=>{var e,i;return(i=(e=this.view)==null?void 0:e.map)==null?void 0:i.basemap},e=>{e&&e.load().catch(()=>{})},G)}destroy(){this._set("view",null),this._loadingHandle=et(this._loadingHandle),this.baseLayerViews.destroyAll(),this.groundLayerViews.destroyAll(),this.referenceLayerViews.destroyAll()}get suspended(){var t;return((t=this.view)==null?void 0:t.suspended)??!0}get updating(){var t,e,i,n;return(t=this.view)!=null&&t.suspended?!1:!!((n=(i=(e=this.view)==null?void 0:e.map)==null?void 0:i.basemap)!=null&&n.loaded)&&(this.baseLayerViews.some(s=>s.updating)||this.groundLayerViews.some(s=>s.updating)||this.referenceLayerViews.some(s=>s.updating))}};r([l({constructOnly:!0})],vt.prototype,"view",void 0),r([l({readOnly:!0})],vt.prototype,"baseLayerViews",void 0),r([l({readOnly:!0})],vt.prototype,"groundLayerViews",void 0),r([l({readOnly:!0})],vt.prototype,"referenceLayerViews",void 0),r([l({readOnly:!0})],vt.prototype,"suspended",null),r([l({type:Boolean,readOnly:!0})],vt.prototype,"updating",null),vt=r([v("esri.views.BasemapView")],vt);const Gl=vt;let Q=class extends S{constructor(t){super(t),this.factor=1.5,this.offset=K(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};r([l({type:Number})],Q.prototype,"factor",void 0),r([l({nonNullable:!0})],Q.prototype,"offset",void 0),r([l()],Q.prototype,"position",void 0),r([l({type:Number,range:{min:0}})],Q.prototype,"size",void 0),r([l()],Q.prototype,"maskUrl",void 0),r([l()],Q.prototype,"maskEnabled",void 0),r([l()],Q.prototype,"overlayUrl",void 0),r([l()],Q.prototype,"overlayEnabled",void 0),r([l({readOnly:!0})],Q.prototype,"version",null),r([l({type:Boolean})],Q.prototype,"visible",void 0),Q=r([v("esri.views.Magnifier")],Q);const Zo=Q;function Pt(t){return!(t==null||typeof t!="object"||!("createQuery"in t)||!t.createQuery)}let it=class extends Co{constructor(t){super(t),this._selectionMap=new dn,this._sources=new E,this._trashCan=[],this._layerEditHandles=new E,this._vizTaskId=0,this.view=null,this.showHighlight=!0,this.highlightName="default"}initialize(){this.addHandles([w(()=>[this.view,this.showHighlight],()=>this._refreshVisualization()),w(()=>this.view,t=>{t==null||t.when().then(()=>this.syncSources())},G),Ci(()=>this.sources,"change",t=>{var n;const e=this._selectionMap,i=[];for(const s of t.removed){const o=e.get(s);o&&(e.delete(s),(n=o.highlightHandle)==null||n.remove(),i.push({layer:s,selection:[],added:[],removed:[...o.selection]}))}this._refreshListeners(),i.length&&this._onSelectionChange(i)},{onListenerAdd:()=>this._refreshListeners()})])}destroy(){this.clear(),this._layerEditHandles.drain(et)}get selections(){return Array.from(this._selectionMap.entries()).map(t=>{const[e,i]=t;return{layer:e,selection:[...i.selection]}})}get count(){let t=0;for(const e of this._selectionMap.values())t+=e.selection.length;return t}get hasSelection(){return this.count>0}get sources(){return this._sources}set sources(t){Vo(t,this._sources)}syncSources(){var n;const t=new Set,e=(n=this.view)==null?void 0:n.map;if(!e)return;const i=s=>{var o,a,h,c,p;Or(s)?((o=s.layers)==null||o.forEach(i),(a=s.tables)==null||a.forEach(i)):Ar(s)?((h=s.sublayers)==null||h.forEach(i),(c=s.subtables)==null||c.forEach(i)):os(s)?(p=s.sublayers)==null||p.forEach(i):Pt(s)&&t.add(s)};e.allLayers.forEach(i),e.allTables.forEach(i),this.sources=[...t]}async getSelectedFeatures(t,e={},i="layerView"){const{view:n,selections:s}=this;if(!n&&i==="layerView")return P.getLogger(this).warn("Cannot query layer views without a view."),[];const o=(t!=null&&t.length?s.filter(a=>t.includes(a.layer)):s).map(async a=>{const{layer:h,selection:c}=a;if(!c.length)return;const p=ne(h)?h.parent:h;if(p!=null){if(n&&i==="layerView"&&!gs(p)&&fs(p)){const u=await n.whenLayerView(p).catch(()=>null);if(u)return ys(u,c,e)}return ys(p,c,e)}}).filter(Re);return(await Promise.all(o)).filter(Re)}updateSelection(t){const e=new Map;for(const[s,o]of this._selectionMap)e.set(s,[...o.selection]);let i=!1;const n=t.current.concat(t.added);for(const s of n){const o=s.sourceLayer,a=s.getObjectId();if(this.sources.includes(o)&&(Pt(o)||ne(o))&&a!==null){const h=Er(e,o,()=>[]);h.includes(a)||(h.push(a),i=!0)}}for(const s of t.removed){const o=s.sourceLayer,a=s.getObjectId();if(this.sources.includes(o)&&(Pt(o)||ne(o))&&a!==null){const h=e.get(o),c=h==null?void 0:h.indexOf(a);c!==void 0&&c>=0&&(h==null||h.splice(c,1),i=!0)}}if(i){const{_selectionMap:s,_trashCan:o}=this,a=[];for(const[h,c]of e){const p=s.get(h);p!==void 0&&o.push(p),s.set(h,{selection:c}),a.push({layer:h,selection:c,...ss(p!==void 0?p.selection:[],c)})}this._onSelectionChange(a)}}setSelection(t,e){this._setSelection(t,e)}getSelection(t){var e;return(e=this._selectionMap.get(t))==null?void 0:e.selection}appendToSelection(t,e){const i=this._selectionMap.get(t),n=i!==void 0?[...i.selection]:[];for(const s of e)n.includes(s)||n.push(s);this._setSelection(t,n)}removeFromSelection(t,e){const i=this._selectionMap.get(t);if(!i)return;const n=[];for(const s of i.selection)e.includes(s)||n.push(s);this._setSelection(t,n)}toggleInSelection(t,e){const i=this._selectionMap.get(t);if(!i||i.selection.length===0)return void this._setSelection(t,e);const n=new Set(i.selection),s=new Set(e),o=Rr(n,s);this._setSelection(t,Array.from(o))}clear(){const t=this._selectionMap.values();this._trashCan.push(...t);const e=[];for(const[i,n]of this._selectionMap.entries())e.push({layer:i,added:[],removed:[...n.selection],selection:[]});this._selectionMap.clear(),this._onSelectionChange(e)}_onSelectionChange(t){this._refreshVisualization(),this.emit("selection-change",{view:this.view,changes:t})}_refreshVisualization(){var o,a;for(this._vizTaskId++;this._trashCan.length>0;)(a=(o=this._trashCan.pop())==null?void 0:o.highlightHandle)==null||a.remove();if(this.view==null)return;const{sources:t,view:e,_selectionMap:i,showHighlight:n}=this,s=this._vizTaskId;for(const h of t){const c=i.get(h),p=ne(h)?h.parent:h;if(p!=null&&fs(p)){if(gs(p))continue;e.whenLayerView(p).then(u=>{var d;(d=c==null?void 0:c.highlightHandle)==null||d.remove(),c!=null&&n&&s===this._vizTaskId&&"highlight"in u&&typeof u.highlight=="function"&&c.selection.length>0&&(c.highlightHandle=u.highlight(c.selection,this.highlightName))}).catch(()=>{var u;(u=c==null?void 0:c.highlightHandle)==null||u.remove()})}}}_refreshListeners(){this._layerEditHandles.drain(et);const t=new Set(this.sources.map(e=>ne(e)?e.parent:e));for(const e of t)Pt(e)&&"on"in e&&e.on&&this._layerEditHandles.push(e.on("edits",i=>this._onLayerEdit(i,e)))}_onLayerEdit(t,e){if(os(e))this._onParentLayerEdit(t,e);else if(t.deletedFeatures.length&&this._selectionMap.has(e)){const i=[];t.deletedFeatures.forEach(({error:n,objectId:s})=>{s!=null&&n==null&&i.push(s)}),this.removeFromSelection(e,i)}}_onParentLayerEdit(t,e){var o;const{deletedFeatures:i,edits:n,updatedFeatures:s}=t;if((o=n==null?void 0:n.updateFeatures)==null||o.forEach(a=>{var u;const h=a.getObjectId()??a.attributes[e.objectIdField];if(h==null||(u=s.find(d=>d.objectId===h))!=null&&u.error)return;const c=e.findSublayerForFeature(a);if(!Pt(c))return;const p=e.sublayers.find(d=>{var m;return!(!Pt(d)||!((m=this.getSelection(d))!=null&&m.includes(h)))});Pt(p)&&p!==c&&(this.removeFromSelection(p,[h]),this.appendToSelection(c,[h]))}),i.length){const a=[];i.forEach(({error:h,objectId:c})=>{c!=null&&h==null&&a.push(c)}),e.sublayers.forEach(h=>{Pt(h)&&this._selectionMap.has(h)&&this.removeFromSelection(h,a)})}}_setSelection(t,e){if(!this.sources.includes(t))throw new Error(`Cannot set selection on layer ${t.title} because it is not in 'sources'`);const i=this._selectionMap.get(t);if(i===void 0||!Ul(i,{selection:e})){i!==void 0&&this._trashCan.push(i),this._selectionMap.set(t,{selection:[...e]});const n={layer:t,selection:[...e],...ss(i!==void 0?i.selection:[],e)};this._onSelectionChange([n])}}};r([l()],it.prototype,"_selectionMap",void 0),r([l()],it.prototype,"_sources",void 0),r([l({readOnly:!0,nonNullable:!0})],it.prototype,"selections",null),r([l({readOnly:!0,nonNullable:!0})],it.prototype,"count",null),r([l()],it.prototype,"view",void 0),r([l({readOnly:!0,nonNullable:!0})],it.prototype,"hasSelection",null),r([l()],it.prototype,"showHighlight",void 0),r([l()],it.prototype,"sources",null),r([l()],it.prototype,"highlightName",void 0),it=r([v("esri.views.SelectionManager")],it);const gs=t=>{var e;return ne(t)?((e=t.parent)==null?void 0:e.isTable)===!0:t.isTable},jl=t=>t.layer!==void 0,fs=t=>(t==null?void 0:t.when)!==void 0,Ul=(t,e)=>{if(t==null&&e==null)return!0;if(t!=null&&e==null||t==null&&e!=null)return!1;if(t!=null&&e!=null&&t.selection!=null&&e.selection!=null){const i=[...t.selection],n=[...e.selection];if(i.length!==n.length)return!1;i.sort(),n.sort();for(let s=0;s<i.length;s++)if(i[s]!==n[s])return!1}return!0},ys=async(t,e,i={})=>{let n;if(jl(t)){const s=t;n=s===void 0?null:await s.queryFeatures(new ls({...i,objectIds:e})).then(o=>({data:o,layer:t.layer}))}else{const s=t;n=s===void 0?null:await s.queryFeatures(new ls({...i,objectIds:e})).then(o=>({data:o,layer:s}))}return n},Bl=it;let Se=class extends xr(S){constructor(t){super(t),this.accentColor=new Gt([255,127,0]),this.textColor=new Gt([255,255,255])}};r([l({type:Gt,nonNullable:!0})],Se.prototype,"accentColor",void 0),r([l({type:Gt,nonNullable:!0})],Se.prototype,"textColor",void 0),Se=r([v("esri.views.Theme")],Se);const gn=Se,qo=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],Wo={};function $o(t){return!!Wo[t]}function Kl(t){for(const e of t)if(!$o(e))return!1;return!0}qo.forEach(t=>{Wo[t]=!0});let Go=class{constructor(t){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=t,this.inputManager=null}connect(t){t&&this.disconnect(),this.inputManager=t,this._handlers.forEach(({handler:e,priority:i},n)=>{var s;return(s=this.inputManager)==null?void 0:s.installHandlers(n,[e],i)})}disconnect(){this.inputManager&&this._handlers.forEach((t,e)=>{var i;return(i=this.inputManager)==null?void 0:i.uninstallHandlers(e)}),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(t,e,i,n){const s=Array.isArray(t)?t:t.split(",");if(!Kl(s))return s.some($o)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let o,a;Array.isArray(e)?a=e:(o=e,a=[]),typeof i=="function"?o=i:n=i,n=n??De.DEFAULT;const h=this._createUniqueGroupName(),c=new Yl(this.view,s,a,o);this._handlers.set(h,{handler:c,priority:n});for(const p of s){const u=this._handlerCounts.get(p)||0;this._handlerCounts.set(p,u+1)}return this.inputManager&&this.inputManager.installHandlers(h,[c],n),ve(()=>this._removeHandler(h,s))}hasHandler(t){return!!this._handlerCounts.get(t)}_removeHandler(t,e){if(this._handlers.has(t)){this._handlers.delete(t);for(const i of e){const n=this._handlerCounts.get(i);n===void 0||(n===1?this._handlerCounts.delete(i):this._handlerCounts.set(i,n-1))}}this.inputManager&&this.inputManager.uninstallHandlers(t)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}},Yl=class extends H{constructor(t,e,i,n){super(!0),this._latestDragStart=void 0,this.view=t;for(const s of e)switch(s){case"click":this.registerIncoming("click",i,o=>n(Jl(t,o)));break;case"double-click":this.registerIncoming("double-click",i,o=>n(th(t,o)));break;case"immediate-click":this.registerIncoming("immediate-click",i,o=>n(eh(t,o)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",i,o=>n(ih(t,o)));break;case"hold":this.registerIncoming("hold",i,o=>n(nh(t,o)));break;case"drag":this.registerIncoming("drag",i,o=>{const a=this._wrapDrag(o);a&&n(a)});break;case"key-down":this.registerIncoming("key-down",i,o=>n(sh(o)));break;case"key-up":this.registerIncoming("key-up",i,o=>n(oh(o)));break;case"pointer-down":this.registerIncoming("pointer-down",i,o=>n(be(o,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",i,o=>n(be(o,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",i,o=>n(be(o,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",i,o=>n(ah(o)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",i,o=>n(rh(o)));break;case"pointer-enter":this.registerIncoming("pointer-enter",i,o=>n(be(o,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",i,o=>n(be(o,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",i,o=>{n(lh(o))});break;case"focus":this.registerIncoming("focus",i,o=>{n(Ql(o))});break;case"blur":this.registerIncoming("blur",i,o=>{n(Xl(o))})}}_wrapDrag(t){const e=t.data,{x:i,y:n}=e.center,{action:s,pointerType:o,button:a}=e;if(s==="start"&&(this._latestDragStart=e),!this._latestDragStart)return;const h=e.pointer.native,c=e.buttons,{cancelable:p,timestamp:u}=t,d={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return s==="end"&&(this._latestDragStart=void 0),{type:"drag",action:s,x:i,y:n,origin:d,pointerType:o,button:a,buttons:c,radius:e.radius,angle:dr(e.angle),native:h,timestamp:u,cancelable:p,stopPropagation:()=>t.stopPropagation(),defer:m=>t.defer(m),preventDefault:()=>t.preventDefault()}}};function Ql(t){return{type:"focus",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),defer:e=>t.defer(e),preventDefault:()=>t.preventDefault()}}function Xl(t){return{type:"blur",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),defer:e=>t.defer(e),preventDefault:()=>t.preventDefault()}}function Jl(t,e){const{pointerType:i,button:n,buttons:s,x:o,y:a,native:h,eventId:c}=e.data,{cancelable:p,timestamp:u}=e;return{type:"click",pointerType:i,button:n,buttons:s,x:o,y:a,native:h,timestamp:u,screenPoint:K(o,a),mapPoint:Fe(t,o,a),eventId:c,cancelable:p,stopPropagation:()=>e.stopPropagation(),defer:d=>e.defer(d),preventDefault:()=>e.preventDefault()}}function th(t,e){const{pointerType:i,button:n,buttons:s,x:o,y:a,native:h,eventId:c}=e.data,{cancelable:p,timestamp:u}=e;return{type:"double-click",pointerType:i,button:n,buttons:s,x:o,y:a,native:h,timestamp:u,mapPoint:Fe(t,o,a),eventId:c,cancelable:p,stopPropagation:()=>e.stopPropagation(),defer:d=>e.defer(d),preventDefault:()=>e.preventDefault()}}function eh(t,e){const{pointerType:i,button:n,buttons:s,x:o,y:a,native:h,eventId:c}=e.data,p=h.pointerId,{cancelable:u,timestamp:d}=e;return{type:"immediate-click",pointerId:p,pointerType:i,button:n,buttons:s,x:o,y:a,native:h,timestamp:d,mapPoint:Fe(t,o,a),eventId:c,cancelable:u,stopPropagation:()=>e.stopPropagation(),defer:m=>e.defer(m),preventDefault:()=>e.preventDefault()}}function ih(t,e){const{pointerType:i,button:n,buttons:s,x:o,y:a,native:h,eventId:c}=e.data,p=h.pointerId,{cancelable:u,timestamp:d}=e;return{type:"immediate-double-click",pointerId:p,pointerType:i,button:n,buttons:s,x:o,y:a,native:h,timestamp:d,mapPoint:Fe(t,o,a),eventId:c,cancelable:u,stopPropagation:()=>e.stopPropagation(),defer:m=>e.defer(m),preventDefault:()=>e.preventDefault()}}function nh(t,e){const{pointerType:i,button:n,buttons:s,x:o,y:a,native:h}=e.data,{cancelable:c,timestamp:p}=e;return{type:"hold",pointerType:i,button:n,buttons:s,x:o,y:a,native:h,timestamp:p,mapPoint:Fe(t,o,a),cancelable:c,stopPropagation:()=>e.stopPropagation(),defer:u=>e.defer(u),preventDefault:()=>e.preventDefault()}}function Fe(t,e,i){return t.toMap(K(e,i),{exclude:[]})}function sh(t){const{key:e,repeat:i,native:n}=t.data,{cancelable:s,timestamp:o}=t;return{type:"key-down",key:e,repeat:i,native:n,timestamp:o,cancelable:s,stopPropagation:()=>t.stopPropagation(),defer:a=>t.defer(a),preventDefault:()=>t.preventDefault()}}function oh(t){const{key:e,native:i}=t.data,{cancelable:n,timestamp:s}=t;return{type:"key-up",key:e,native:i,timestamp:s,cancelable:n,stopPropagation:()=>t.stopPropagation(),defer:o=>t.defer(o),preventDefault:()=>t.preventDefault()}}function be(t,e){const{x:i,y:n,button:s,buttons:o,native:a,eventId:h}=t.data,c=a.pointerId,p=a.pointerType,{cancelable:u,timestamp:d}=t;return{type:e,x:i,y:n,pointerId:c,pointerType:p,button:s,buttons:o,native:a,timestamp:d,eventId:h,cancelable:u,stopPropagation:()=>t.stopPropagation(),defer:m=>t.defer(m),preventDefault:()=>t.preventDefault()}}function ah(t){const{x:e,y:i,buttons:n,native:s,eventId:o}=t.data.currentEvent,{button:a}=t.data.startEvent,h=t.data.startEvent.native.pointerId,c=t.data.startEvent.native.pointerType,p=t.data.action,u={x:t.data.startEvent.x,y:t.data.startEvent.y},{cancelable:d,timestamp:m}=t;return{type:"pointer-drag",x:e,y:i,pointerId:h,pointerType:c,button:a,buttons:n,action:p,origin:u,native:s,timestamp:m,eventId:o,cancelable:d,stopPropagation:()=>t.stopPropagation(),defer:g=>t.defer(g),preventDefault:()=>t.preventDefault()}}function rh(t){const{cancelable:e,data:i,timestamp:n}=t,{x:s,y:o,deltaY:a,native:h}=i;return{type:"mouse-wheel",x:s,y:o,deltaY:a,native:h,timestamp:n,cancelable:e,stopPropagation:()=>t.stopPropagation(),defer:c=>t.defer(c),preventDefault:()=>t.preventDefault()}}function lh(t){const{action:e,state:i,device:n}=t.data,{cancelable:s,timestamp:o}=t,{buttons:a,axes:h}=i;return{type:"gamepad",device:n,timestamp:o,action:e,buttons:a,axes:h,cancelable:s,stopPropagation:()=>t.stopPropagation(),defer:c=>t.defer(c),preventDefault:()=>t.preventDefault()}}function hh(t){return[t.on("before-add",e=>{const i=e.item;if(i==null||t.includes(i))return P.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void e.preventDefault();i.onAdd()}),t.on("after-remove",e=>{const i=e.item;i.active&&(i.view.activeTool=null),i.destroy()})]}function fn(t){return t.visible&&t.getEditableFlag!=null&&t.getEditableFlag(0)&&t.getEditableFlag(1)}function ch(t){return t.type==="key-down"&&t.key===Kr.cancel}let ni=class extends S{constructor(){super(...arguments),this._pointerLocations=new Map,this._hoveredManipulators=new dn,this._grabbedManipulators=new dn,this._draggedManipulators=new Map,this._stopDrag=!1,this._externallyDragging=!1,this._revertToNullActiveTool=!1}get cursor(){return this._cursorFromMap(this._grabbedManipulators,"grabbing")??this._cursorFromMap(this._hoveredManipulators,"pointer")}get hasFocusedManipulators(){return this._grabbedManipulators.size>0||this._draggedManipulators.size>0}handleInputEvent(t,e){const i=()=>t.stopPropagation();switch(t.type){case"pointer-move":vs(t.pointerType)&&this._pointerLocations.set(t.pointerId,{x:t.x,y:t.y,pointerType:t.pointerType});break;case"drag":this._grabbedManipulators.size>0?this._stopDrag=!0:t.action==="start"?this._externallyDragging=!0:t.action==="end"&&(this._externallyDragging=!1),this._stopDrag&&(i(),t.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!_s(t))break;const n=gt(t),s=Jt(n,t.pointerType,e.tools);if(s==null)break;const o=s.manipulator,a=s.tool;o==null||a==null||!o.interactive||o.grabbable&&o.grabbableForEvent(t)||!o.grabbing||o.dragging||this._releaseManipulatorBeforeDragging(o,t,e),o!=null&&a!=null&&o.interactive&&o.grabbable&&o.grabbableForEvent(t)&&!o.grabbing&&(this._grabbedManipulators.set(t.pointerId,{manipulator:o,tool:a,start:n,pointerType:t.pointerType}),this._grabbedManipulators.size===1&&e.activeTool==null&&(this._revertToNullActiveTool=!0,e.setActiveTool(s.tool)),o.grabbing=!0,o.events.emit("grab-changed",{action:"start",pointerType:t.pointerType,screenPoint:n}),i());break}case"pointer-up":this._draggedManipulators.has(t.pointerId)||this._handlePointerEnd(t,e);break;case"pointer-drag":{if(!_s(t))break;const n=this._grabbedManipulators.get(t.pointerId),s=n==null?void 0:n.manipulator,o=n==null?void 0:n.tool;if(s==null||o==null)break;const a=gt(t);a.x=ln(a.x,0,e.view.width),a.y=ln(a.y,0,e.view.height);const h=n.start,c=this._draggedManipulators.get(t.pointerId);switch(t.action){case"start":case"update":t.action!=="update"&&this._grabbedManipulators.size!==1||(s.dragging=!0,c?s.events.emit("drag",{action:"update",start:h,screenPoint:a}):s.events.emit("drag",{action:"start",start:h,screenPoint:a,pointerType:t.pointerType}),this._draggedManipulators.set(t.pointerId,{tool:o,manipulator:s,start:h}));break;case"end":s.dragging=!1,c&&s.events.emit("drag",{action:"end",start:h,screenPoint:a}),this._draggedManipulators.delete(t.pointerId),this._handlePointerEnd(t,e)}i();break}case"immediate-click":{const n=gt(t),s=Jt(n,t.pointerType,e.tools);if(!ph(t)){for(const c of e.tools)if((s==null||s.tool!==c||c.automaticManipulatorSelection)&&c.manipulators){let p=!1;c.manipulators.forEach(({manipulator:u})=>{u.selected&&(u.selected=!1,p=!0)}),p&&c.onManipulatorSelectionChanged&&c.onManipulatorSelectionChanged()}}if(s==null)break;const{manipulator:o,tool:a}=s;if(!o.interactive)break;o.selectable&&a.automaticManipulatorSelection&&(o.selected=!o.selected,a.onManipulatorSelectionChanged&&a.onManipulatorSelectionChanged());const h=t.native.shiftKey;o.events.emit("immediate-click",{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:h,stopPropagation:i}),ji(o,i);break}case"click":{const n=gt(t),s=Jt(n,t.pointerType,e.tools),o=s==null?void 0:s.manipulator;if(o==null||!o.interactive)break;const a=t.native.shiftKey;o.events.emit(t.type,{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:a}),i();break}case"double-click":{const n=gt(t),s=Jt(n,t.pointerType,e.tools),o=s!=null?s.manipulator:null;if(o==null||!o.interactive)break;const a=t.native.shiftKey;o.events.emit("double-click",{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:a,stopPropagation:i}),ji(o,i);break}case"immediate-double-click":{const n=gt(t),s=Jt(n,t.pointerType,e.tools),o=s!=null?s.manipulator:null;if(o==null||!o.interactive)break;const a=t.native.shiftKey;o.events.emit("immediate-double-click",{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:a,stopPropagation:i}),t.pointerType==="mouse"&&ji(o,i);break}}this._onFocusChange(e.tools)}_releaseManipulatorBeforeDragging(t,e,i){t.grabbing=!1,t.events.emit("grab-changed",{action:"end",pointerType:e.pointerType,screenPoint:gt(e)}),this._grabbedManipulators.forEach(({manipulator:n},s)=>{n===t&&this._grabbedManipulators.delete(s)}),this._afterManipulatorRelease(i.setActiveTool)}_handlePointerEnd(t,e){var n;const i=(n=this._grabbedManipulators.get(t.pointerId))==null?void 0:n.manipulator;i!=null&&i.grabbing&&(i.grabbing=!1,i.events.emit("grab-changed",{action:"end",pointerType:t.pointerType,screenPoint:gt(t)}),this._grabbedManipulators.delete(t.pointerId),this._afterManipulatorRelease(e.setActiveTool))}_onFocusChange(t){this._updateFocusedManipulatorTools(t)}_updateFocusedManipulatorTools(t){const e=new Set,i=new Set;this._grabbedManipulators.forEach(({tool:n})=>e.add(n)),this._hoveredManipulators.forEach(({tool:n})=>i.add(n));for(const n of t){n.hasGrabbedManipulators=e.has(n),n.hasHoveredManipulators=i.has(n);const s=this._grabbedManipulators.values(),o=Ir(s,({tool:a})=>a===n);n.firstGrabbedManipulator=o!=null?o.manipulator:null}}clearPointers(t,{tools:e,setActiveTool:i},n=!0,s){const o=(a,h)=>a===t&&(s==null||s===h);this._grabbedManipulators.forEach(({tool:a,manipulator:h,pointerType:c},p)=>{o(a,h)&&(this._grabbedManipulators.delete(p),h.grabbing=!1,h.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:c}))}),this._draggedManipulators.forEach(({tool:a,manipulator:h},c)=>{o(a,h)&&(this._draggedManipulators.delete(c),h.dragging=!1,h.events.emit("drag",{action:"cancel"}))}),n&&this._hoveredManipulators.forEach(({tool:a,manipulator:h},c)=>{o(a,h)&&(this._hoveredManipulators.delete(c),h.hovering=!1)}),this._afterManipulatorRelease(i),this._onFocusChange(e)}updateHoveredStateFromKnownPointers(t){this._pointerLocations.forEach((e,i)=>{this._updateHoveredStateForPointerAtScreenPosition(K(e.x,e.y),i,e.pointerType,t)})}handleHoverEvent(t,e){const i=t.type;i!=="pointer-up"&&i!=="immediate-click"&&i!=="pointer-move"||!vs(t.pointerType)||(i!=="pointer-up"&&this._externallyDragging?this._clearHoveredManipulatorStates(t.pointerId):this._updateHoveredStateForPointerAtScreenPosition(gt(t),t.pointerId,t.pointerType,e))}_updateHoveredStateForPointerAtScreenPosition(t,e,i,n){var a;let s=Jt(t,i,n);const o=(a=this._hoveredManipulators.get(e))==null?void 0:a.manipulator;s==null||s.manipulator.interactive||(s=null),s!=null&&o===s.manipulator||(o!=null&&(o.hovering=!1),s!=null?(s.manipulator.hovering=!0,this._hoveredManipulators.set(e,s)):this._hoveredManipulators.delete(e),this._onFocusChange(n))}_afterManipulatorRelease(t){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(t(null),this._revertToNullActiveTool=!1)}_clearHoveredManipulatorStates(t){this._hoveredManipulators.forEach(({manipulator:e},i)=>{t===i&&(this._hoveredManipulators.delete(t),e.hovering=!1)})}_cursorFromMap(t,e){if(!(t!=null&&t.size))return null;for(const{manipulator:i}of t.values())if(i!=null&&i.interactive){if(i.grabbing&&i.grabCursor)return i.grabCursor;if(i.cursor)return i.cursor}return e}};function Jt(t,e,i){for(const n of i){if(n.manipulators==null||!fn(n))continue;const s=n.manipulators.intersect(t,e);if(s!=null)return{tool:n,manipulator:s}}return null}function vs(t){return t==="mouse"}function _s(t){return t.pointerType!=="mouse"||t.button===0}function ph(t){return!!t.native.shiftKey}function ji(t,e){t!=null&&t.consumesClicks&&e()}r([l()],ni.prototype,"cursor",null),ni=r([v("esri.views.interactive.ToolViewManagerManipulatorState")],ni);const ws="attached",Ui="tools",uh=1e3;let ct=class extends S{constructor(t){super(t),this._updatingHandles=new Di,this._clock=ze,this._manipulatorState=new ni,this.tools=new E,this._interacting=!1,this._interactingTimeout=uh,this._interactingTimeoutHandle=null}initialize(){this.addHandles([this.view.on(qo,t=>{this._handleInputEvent(t)},De.TOOL),...hh(this.tools),this.tools.on("before-add",({item:t})=>{this._updateToolEditableFlag(t)}),this.tools.on("before-remove",({item:t})=>{this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs)}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.activeTool=null,this.tools.drain(t=>t.destroy()),this._clearInteractingTimeout(),this._interacting=!1,this._updatingHandles.destroy(),this._manipulatorState.destroy()}get _manipulatorStateEventArgs(){return{tools:this.tools,activeTool:this.activeTool,setActiveTool:t=>{this.activeTool=t},view:this.view}}set activeTool(t){if(t!=null&&!this.view.ready)return void P.getLogger(this).error("Cannot set active tool while view is not ready.");if(t===this.activeTool)return;const e=this.activeTool;this._set("activeTool",t),e==null||e.deactivate(),t==null||t.activate(),this._removeIncompleteTools(t);for(const i of this.tools){this._updateToolEditableFlag(i);const n=fn(i);this.activeTool!=null&&n||this._manipulatorState.clearPointers(i,this._manipulatorStateEventArgs,!n)}}get cursor(){const t=this._manipulatorState.cursor;if(t!=null)return t;for(const e of this.tools)if(e.visible&&e.cursor!=null)return e.cursor;return null}get updating(){return this._updatingHandles.updating||this.tools.some(t=>t.updating)}get interacting(){return this._interacting}_clearInteractingTimeout(){this._interactingTimeoutHandle=et(this._interactingTimeoutHandle)}_startInteractingTimeout(){this._clearInteractingTimeout(),this._interactingTimeoutHandle=this._clock.setTimeout(()=>this._interacting=!1,this._interactingTimeout)}attach(){this.view.type==="3d"?this.addHandles([w(()=>{const{state:t}=this.view;return"camera"in t&&t.camera},()=>this._forEachManipulator(t=>t.onViewChange())),this.view.elevationProvider.on("elevation-change",t=>this._forEachManipulator(e=>e.onElevationChange(t)))],ws):this.addHandles(w(()=>this.view.extent,()=>this._forEachManipulator(t=>t.onViewChange())))}detach(){this.activeTool=null,this.tools.removeAll(),this.removeHandles(ws),this._clearInteractingTimeout(),this._interacting=!1}_forEachManipulator(t){for(const e of this.tools)e.manipulators&&e.manipulators.forEach(({manipulator:i})=>t(i,e))}_handleInputEvent(t){let e=!1;const i={...t,stopPropagation:()=>{e=!0,t.stopPropagation()}};if(this.activeTool!=null)this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(i);else for(const n of this.tools)!e&&n.visible&&n.handleInputEvent(i);!e&&ch(t)&&this.activeTool&&(t.stopPropagation(),t.preventDefault(),this.activeTool.cancel(),this.activeTool=null),this._manipulatorState.handleInputEvent(i,this._manipulatorStateEventArgs),e||this.activeTool==null||this.activeTool.handleInputEventAfter(i),this._manipulatorState.handleHoverEvent(i,this.tools),t.type==="pointer-move"&&(this._manipulatorState.hasFocusedManipulators||this.activeTool)&&(this._interacting=!0,this._startInteractingTimeout())}_refreshToolWatchers(){this.removeHandles(Ui);for(const t of this.tools){if(t instanceof S){const e=w(()=>[t.cursor,t.visible,t.editable],()=>{fn(t)||this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs)});this.addHandles(e,Ui)}t.manipulators&&this.addHandles([t.manipulators.on("after-remove",e=>{this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs,!0,e.item.manipulator)}),t.manipulators.on("change",()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this.tools)})],Ui)}this._manipulatorState.updateHoveredStateFromKnownPointers(this.tools)}_updateToolEditableFlag(t){var e;(e=t.setEditableFlag)==null||e.call(t,1,this.activeTool==null||t===this.activeTool)}_removeIncompleteTools(t){this.tools.filter(e=>(t==null||e!==t)&&!e.created&&e.removeIncompleteOnCancel).forEach(e=>{this.tools.remove(e)})}get test(){}};r([l({constructOnly:!0,nonNullable:!0})],ct.prototype,"view",void 0),r([l({value:null})],ct.prototype,"activeTool",null),r([l({readOnly:!0,type:E})],ct.prototype,"tools",void 0),r([l()],ct.prototype,"cursor",null),r([l({readOnly:!0})],ct.prototype,"updating",null),r([l()],ct.prototype,"_interacting",void 0),r([l({readOnly:!0})],ct.prototype,"interacting",null),ct=r([v("esri.views.ToolViewManager")],ct);var yn;let X=yn=class extends S{constructor(t){super(t),this.name=Lo,this.color=Yr.clone(),this.haloColor=null,this.haloOpacity=Qr,this.fillOpacity=Xr,this.shadowColor=Jr.clone(),this.shadowOpacity=tl,this.shadowDifference=el,this.haloWidth=2.1,this.haloBlur=.8/this.haloWidth}equals(t){return this.color.equals(t.color)&&(this.haloColor||this.color).equals(t.haloColor||t.color)&&this.haloOpacity===t.haloOpacity&&this.fillOpacity===t.fillOpacity&&this.haloWidth===t.haloWidth&&this.haloBlur===t.haloBlur&&this.shadowColor.equals(t.shadowColor)&&this.shadowOpacity===t.shadowOpacity&&this.shadowDifference===t.shadowDifference}clone(){var t,e;return new yn({...this,color:this.color.clone(),haloColor:(t=this.haloColor)==null?void 0:t.clone(),shadowColor:(e=this.shadowColor)==null?void 0:e.clone()})}assignFrom(t){var e;this.color=t.color.clone(),this.haloColor=(e=t.haloColor)==null?void 0:e.clone(),this.haloOpacity=t.haloOpacity,this.fillOpacity=t.fillOpacity,this.shadowColor=t.shadowColor.clone(),this.shadowDifference=t.shadowDifference,this.shadowOpacity=t.shadowOpacity,this.haloBlur=t.haloBlur,this.haloWidth=t.haloWidth}};r([l({type:String,constructOnly:!0,nonNullable:!0})],X.prototype,"name",void 0),r([l({type:Gt,nonNullable:!0})],X.prototype,"color",void 0),r([l({type:Gt})],X.prototype,"haloColor",void 0),r([l({nonNullable:!0})],X.prototype,"haloOpacity",void 0),r([l({nonNullable:!0})],X.prototype,"fillOpacity",void 0),r([l({type:Gt,nonNullable:!0})],X.prototype,"shadowColor",void 0),r([l({nonNullable:!0})],X.prototype,"shadowOpacity",void 0),r([l({nonNullable:!0})],X.prototype,"shadowDifference",void 0),r([l({nonNullable:!0})],X.prototype,"haloWidth",void 0),r([l({nonNullable:!0})],X.prototype,"haloBlur",void 0),X=yn=r([v("esri.views.support.HighlightOptions")],X);const Lt=X;function dh(){return new(E.ofType(Lt))([new Lt({name:Lo}),new Lt({name:ol,color:sl})])}let se=class extends S{constructor(t){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",t.mapping==="standard"?this._detectedDeviceType="standard":mh.test(t.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=t.index}get native(){const t=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<t.length?t[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return gh[this.deviceType]}};r([l({nonNullable:!0,readOnly:!0})],se.prototype,"nativeIndex",void 0),r([l({type:String,readOnly:!0})],se.prototype,"deviceType",null),r([l({type:Number,readOnly:!0})],se.prototype,"axisThreshold",null),se=r([v("esri.views.input.gamepad.GamepadInputDevice")],se);const Fn=se,mh=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),gh={standard:.15,spacemouse:.025,unknown:0};let ke=class extends S{constructor(t){super(t),this.devices=new E,this.enabledFocusMode="document"}};r([l({type:E.ofType(Fn),readOnly:!0})],ke.prototype,"devices",void 0),r([l({type:["document","view","none"]})],ke.prototype,"enabledFocusMode",void 0),ke=r([v("esri.views.input.gamepad.GamepadSettings")],ke);const fh=ke;let si=class extends S{constructor(){super(...arguments),this.gamepad=new fh}};r([l({readOnly:!0})],si.prototype,"gamepad",void 0),si=r([v("esri.views.input.Input")],si);const yh=si,Bi=()=>l({type:["pan","rotate","zoom","none"],nonNullable:!0});let Ht=class extends S{constructor(t){super(t),this.dragPrimary="pan",this.dragSecondary="rotate",this.dragTertiary="zoom",this.mouseWheel="zoom"}};r([Bi()],Ht.prototype,"dragPrimary",void 0),r([Bi()],Ht.prototype,"dragSecondary",void 0),r([Bi()],Ht.prototype,"dragTertiary",void 0),r([l({type:["zoom","none"],nonNullable:!0})],Ht.prototype,"mouseWheel",void 0),Ht=r([v("esri.views.navigation.NavigationActionMap")],Ht);const Nn=Ht;let Et=class extends S{constructor(t){super(t),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};r([l({type:Boolean,nonNullable:!0})],Et.prototype,"enabled",void 0),r([l({type:Fn})],Et.prototype,"device",void 0),r([l({type:["pan","zoom"],nonNullable:!0})],Et.prototype,"mode",void 0),r([l({type:["forward-down","forward-up"],nonNullable:!0})],Et.prototype,"tiltDirection",void 0),r([l({type:Number,nonNullable:!0})],Et.prototype,"velocityFactor",void 0),Et=r([v("esri.views.navigation.gamepad.GamepadSettings")],Et);const jo=Et;let Rt=class extends S{constructor(t){super(t),this.actionMap=new Nn,this.browserTouchPanEnabled=!0,this.gamepad=new jo,this.momentumEnabled=!0}get mouseWheelZoomEnabled(){return this.actionMap.mouseWheel==="zoom"}set mouseWheelZoomEnabled(t){Xa(P.getLogger(this),"mouseWheelZoomEnabled",{replacement:"actionMap.mouseWheel",version:"4.32",warnOnce:!0}),this.actionMap.mouseWheel=t?"zoom":"none"}};r([l({type:Nn,nonNullable:!0})],Rt.prototype,"actionMap",void 0),r([l({type:Boolean})],Rt.prototype,"browserTouchPanEnabled",void 0),r([l({type:jo,nonNullable:!0})],Rt.prototype,"gamepad",void 0),r([l({type:Boolean})],Rt.prototype,"momentumEnabled",void 0),r([l({type:Boolean})],Rt.prototype,"mouseWheelZoomEnabled",null),Rt=r([v("esri.views.navigation.Navigation")],Rt);const Li=Rt;let V=class extends S{constructor(t){super(t),this.required={extent:!1,heightModelInfo:!1,tileInfo:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=ui(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return this.userSpatialReference??this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return this.userSpatialReference==null||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){var i,n,s,o,a;const t=(i=this.map)==null?void 0:i.call(this),e=[];return this.priorityCollection!=null&&e.push(this.priorityCollection),e.push({parent:t==null?void 0:t.basemap,layers:(n=t==null?void 0:t.basemap)==null?void 0:n.baseLayers},{parent:t==null?void 0:t.basemap,layers:(s=t==null?void 0:t.basemap)==null?void 0:s.groundLayers},{layers:t==null?void 0:t.layers},{parent:t==null?void 0:t.ground,layers:(o=t==null?void 0:t.ground)==null?void 0:o.layers},{parent:t==null?void 0:t.basemap,layers:(a=t==null?void 0:t.basemap)==null?void 0:a.referenceLayers}),e}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};let t;if(this._collectLayers(this.mapCollections,i=>{const n=this._getSupportedSpatialReferences(i);if(n.length>0){const s=this._narrowDownSpatialReferenceCandidates(t,n);s!=null&&(t=s)}return(t==null?void 0:t.length)===1})&&(t==null?void 0:t.length)!==1)return{updating:!0};const e=this._pickSpatialReferenceCandidate(t);return{spatialReference:(e==null?void 0:e.spatialReference)??null,viewingMode:(e==null?void 0:e.viewingMode)??null,updating:!1}}get _tileInfoTask(){var s,o,a;if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};const t=(s=this.map)==null?void 0:s.call(this),e=this.spatialReference;if(!e)return{updating:this._spatialReferenceTask.updating};let i;const n=this._collectLayers([{parent:t==null?void 0:t.basemap,layers:(o=t==null?void 0:t.basemap)==null?void 0:o.baseLayers},{parent:t==null?void 0:t.basemap,layers:(a=t==null?void 0:t.basemap)==null?void 0:a.groundLayers},{layers:t==null?void 0:t.layers}],h=>{var c;return!(!("tileInfo"in h)||!((c=h.tileInfo)!=null&&c.spatialReference.equals(e)))&&(i=h,!0)},h=>"tileInfo"in h);return i?{tileInfo:i.tileInfo,updating:!1}:{updating:n}}get _heightModelInfoTask(){var i;if(!this.required.heightModelInfo||this.suspended&&((i=this._get("_heightModelInfoTask"))!=null&&i.heightModelInfo))return this._get("_heightModelInfoTask")??{updating:!1};let t={};const e=this._collectLayers(this.mapCollections,n=>{var o,a;const s=hl(n);return!!s&&(t={heightModelInfo:s,vcsWkid:(o=n.spatialReference)==null?void 0:o.vcsWkid,latestVcsWkid:(a=n.spatialReference)==null?void 0:a.latestVcsWkid},!0)},n=>cl(n));return{...t,updating:e}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const t=[],e=this._collectLayers(this.mapCollections,i=>{const n="fullExtents"in i&&i.fullExtents||(i.fullExtent!=null?[i.fullExtent]:[]),s=this.requiresExtentInSpatialReference?null:n[0],o=n.find(a=>a.spatialReference.equals(this.spatialReference))??s;if(o)return t.push({extent:o,layer:i}),!0;if(this._getSupportedSpatialReferences(i).length>0)for(const a of n)t.push({extent:a,layer:i});return!1});return{candidates:t,updating:e}}get _extentTask(){const{candidates:t,updating:e}=this._extentCandidatesTask;if(e)return{updating:e};if(t==null||t.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const i=this._pickExtentCandidate(t),n=this.spatialReference;return i.extent.equals(this._projectExtentTask.input)&&n.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:this._projectExtentTask.task!=null&&!this._projectExtentTask.task.finished}:(this._projectExtentTask.task!=null&&(this._projectExtentTask.task=ui(this._projectExtentTask.task)),this._projectExtentTask={input:i.extent.clone(),output:null,spatialReference:n.clone(),task:Oi(async s=>{try{const o=await pl(i.extent,n,"portalItem"in i.layer?i.layer.portalItem:void 0,s);this._projectExtentTask={...this._projectExtentTask,task:null,output:o}}catch{if(hn(s))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(t,e){if(t==null)return e;const i=new Array;for(const n of t)for(const s of e){if(!n.spatialReference.equals(s.spatialReference))continue;const o=_h(n.viewingMode,s.viewingMode);if(o!==!1){i.push({spatialReference:n.spatialReference,viewingMode:o});break}}return i.length>0?i:null}_pickSpatialReferenceCandidate(t){const e=this.defaultSpatialReference;return t==null||t.length<1?e?{spatialReference:e,viewingMode:null}:null:(e!=null&&t.length>1&&t.some(({spatialReference:i})=>i.equals(e))&&(t=t.filter(({spatialReference:i})=>i.equals(e))),t.length>1&&t.some(({viewingMode:i})=>i!==2)&&(t=t.filter(({viewingMode:i})=>i!==2)),t[0])}_getSupportedSpatialReferences(t){const e="supportedSpatialReferences"in t&&t.supportedSpatialReferences||(t.spatialReference?[t.spatialReference]:[]);if(e.length===0)return[];const i=[];for(const n of e){const s=this.getSpatialReferenceSupport(n,t);if(s!=null){const o=s.constraints??[{spatialReference:n,viewingMode:null}];for(const{spatialReference:a,viewingMode:h}of o)this.requiresExtentInSpatialReference&&this.userSpatialReference!=null&&!a.equals(this.userSpatialReference)||i.push({spatialReference:a,viewingMode:h})}}return i}_pickExtentCandidate(t){const e=this.spatialReference;return t.find(({extent:i})=>e.equals(i.spatialReference))||t[0]}_collectLayers(t,e,i=()=>!0){var s;switch(this._loadMaybe((s=this.map)==null?void 0:s.call(this))){case"loading":return!0;case"failed":return!1}const n=new vh(i,e);for(const o of t)if(this._collectCollection(o,n),n.done||n.preloading===this.sourcePreloadCount)break;return n.updating}_collectCollection(t,e){if(t.layers){switch(this._loadMaybe(t.parent)){case"loading":return e.updating=!0,void++e.preloading;case"failed":return}for(const i of t.layers)if((i.type!=="graphics"||!i.internal)&&e.layerFilter(i)){switch(this._loadMaybe(i)){case"failed":continue;case"loading":e.updating=!0,++e.preloading;break;case"loaded":if(e.updating||(e.done=e.pushLayer(i)),e.done||e.preloading===this.sourcePreloadCount)break;"layers"in i&&this._collectCollection({layers:i.layers},e)}if(e.done||e.preloading===this.sourcePreloadCount)break}}}_loadMaybe(t){return t&&"loadStatus"in t&&t.loadStatus!=null?t.loadStatus==="not-loaded"?(t.load().catch(e=>{pn(e)}),"loading"):t.loadStatus:"loaded"}};r([l()],V.prototype,"required",void 0),r([l({constructOnly:!0})],V.prototype,"map",void 0),r([l({constructOnly:!0})],V.prototype,"getSpatialReferenceSupport",void 0),r([l()],V.prototype,"defaultSpatialReference",void 0),r([l()],V.prototype,"userSpatialReference",void 0),r([l()],V.prototype,"sourcePreloadCount",void 0),r([l()],V.prototype,"priorityCollection",void 0),r([l()],V.prototype,"requiresExtentInSpatialReference",void 0),r([l()],V.prototype,"suspended",void 0),r([l({readOnly:!0})],V.prototype,"ready",null),r([l({readOnly:!0})],V.prototype,"heightModelInfoReady",null),r([l({readOnly:!0})],V.prototype,"spatialReference",null),r([l({readOnly:!0})],V.prototype,"extent",null),r([l({readOnly:!0})],V.prototype,"heightModelInfo",null),r([l({readOnly:!0})],V.prototype,"vcsWkid",null),r([l({readOnly:!0})],V.prototype,"latestVcsWkid",null),r([l({readOnly:!0})],V.prototype,"viewingMode",null),r([l({readOnly:!0})],V.prototype,"tileInfo",null),r([l({readOnly:!0})],V.prototype,"mapCollections",null),r([l({readOnly:!0})],V.prototype,"_spatialReferenceTask",null),r([l({readOnly:!0})],V.prototype,"_tileInfoTask",null),r([l({readOnly:!0})],V.prototype,"_heightModelInfoTask",null),r([l({readOnly:!0})],V.prototype,"_extentCandidatesTask",null),r([l()],V.prototype,"_extentTask",null),r([l()],V.prototype,"_projectExtentTask",void 0),V=r([v("esri.views.support.DefaultsFromMap")],V);let vh=class{constructor(t,e){this.layerFilter=t,this.pushLayer=e,this.preloading=-1,this.updating=!1,this.done=!1}};function _h(t,e){return t!=null?e!=null?t===e&&t:t:e}function wh(t){return"tryRecycleWith"in t}let bh=class{constructor(t,e,i){this.layer=t,this.view=e,this.layerViewImporter=i,this._controller=new AbortController,this._started=!1,this.done=!1,this._deferred=Le(),this.promise=this._deferred.promise,cn(this._controller.signal,()=>{var s,o;(s=this._recycleController)==null||s.abort();const n=new k("cancelled:layerview-create","layerview creation cancelled",{layer:t});(o=this._deferred)==null||o.reject(n)})}tryRecycle(t){var n;if(!this.done||!this.layerView||!wh(this.layerView))return null;(n=this._recycleController)==null||n.abort(),this._recycleController=new AbortController;const e=this.layer.type,i=this._recycleController.signal;for(let s=0;s<t.length;s++){const o=t[s];if(o.type!==e)continue;const a=this.layerView.tryRecycleWith(o,{signal:i});if(a){t.splice(s,1),this.layer=o;const h=this.layerView,c=h.view;return this.promise=a.then(()=>(Ot(i),o.emit("layerview-destroy",{view:c,layerView:h}),c.emit("layerview-destroy",{view:c,layerView:h}),o.emit("layerview-create",{view:c,layerView:h}),c.emit("layerview-create",{view:c,layerView:h}),h)),this.promise}}return null}destroy(){this._controller.abort();const{layerView:t}=this;if(t){const{layer:e,view:i}=this;e.emit("layerview-destroy",{view:i,layerView:t}),i.emit("layerview-destroy",{layer:e,layerView:t})}this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null,this._map=null,this.promise=null,this._deferred=null}async start(){var n,s,o,a,h;const{view:t}=this;if(this._started||!t.map)return;this._started=!0;const{_controller:{signal:e},layer:i}=this;this._map=t.map;try{let c,p;if(await i.load({signal:e}),i.prefetchResources&&await i.prefetchResources({signal:e}),Mh(i))c=await i.createLayerView(t,{signal:e});else{if(!this.layerViewImporter.hasLayerViewModule(i))throw new k("layer:view-not-supported","No layerview implementation was found");const d=await this.layerViewImporter.importLayerView(i);Ot(e),c="default"in d?new d.default({layer:i,view:t}):new d({layer:i,view:t})}const u=()=>{p=et(p),c.destroyed||c.destroy(),this.done=!0};p=cn(e,u),Ot(e);try{await c.when()}catch(d){throw u(),d}if(!((s=(n=this._map)==null?void 0:n.allLayers)!=null&&s.includes(i)))return u(),void((o=this._deferred)==null?void 0:o.reject(new k("view:no-layerview-for-layer","The layer has been removed from the map",{layer:i})));this.layerView=c,i.emit("layerview-create",{view:t,layerView:c}),t.emit("layerview-create",{layer:i,layerView:c}),this.done=!0,(a=this._deferred)==null||a.resolve(c)}catch(c){i.emit("layerview-create-error",{view:t,error:c}),t.emit("layerview-create-error",{layer:i,error:c}),this.done=!0,(h=this._deferred)==null||h.reject(new k("layerview:create-error","layerview creation failed",{layer:i,error:c}))}}};function Mh(t){return t.createLayerView!==Lr.prototype.createLayerView}function xh(t){return t!=null&&typeof t=="object"&&"layerViews"in t}let U=class extends S{constructor(t){super(t),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new Di,this.supportsGround=!0,this._preloadLayerViewModules=()=>{var i,n;const e=(i=this.view.map)==null?void 0:i.allLayers;if(e)for(const s of e)((n=this.layerViewFilter)==null?void 0:n.call(this,s))!==!1&&this.layerViewImporter.hasLayerViewModule(s)&&this.layerViewImporter.importLayerView(s)},this._reschedule=()=>this.destroyed?Promise.reject():(this._workPromise==null&&(this._workPromise=Le(),this._workPromise.promise.catch(()=>{})),this.removeHandles("reschedule"),this.addHandles(Mo(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{var p,u,d,m;if(this.destroyed)return;const{map:e}=this.view;if(!e)return void this.clear();if(this._map!==e&&(this.clear(),this._map=e),this._workPromise==null)return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const i=new Set,n=[],s=this.view.ready,o=g=>{var f;if(g!=null){for(const _ of g)if(_){if(((f=this.layerViewFilter)==null?void 0:f.call(this,_))===!1)continue;i.add(_);const C=this._layerLayerViewInfoMap.get(_);C&&s?C.start():C||this._recyclingInfoMap.has(_)||n.push(_),"layers"in _&&_.layers&&o(_.layers)}}};for(const g of this._rootCollectionNames)o($e(this,g));const a=new Array,h=g=>{const f=g.tryRecycle(n);f?(this._recyclingInfoMap.set(g.layer,g),this.notifyChange("updating"),f.then(()=>{this._recyclingInfoMap.delete(g.layer),this._layerLayerViewInfoMap.set(g.layer,g),this._reschedule(),this.notifyChange("updating")}).catch(_=>{pn(_)||(this._recyclingInfoMap.delete(g.layer),g.destroy(),this._reschedule(),this.notifyChange("updating"))})):a.push(g)};for(const g of this._layerLayerViewInfoMap.values())i.has(g.layer)||(this._layerLayerViewInfoMap.delete(g.layer),h(g));for(const g of this._recyclingInfoMap.values())i.has(g.layer)||(this._recyclingInfoMap.delete(g.layer),h(g));for(const g of n)this._createLayerView(g);this._refreshCollections(),a.forEach(g=>g.destroy());const c=[(p=e==null?void 0:e.ground)==null?void 0:p.layers,(u=e==null?void 0:e.basemap)==null?void 0:u.baseLayers,(d=e==null?void 0:e.basemap)==null?void 0:d.groundLayers,(m=e==null?void 0:e.basemap)==null?void 0:m.referenceLayers,e==null?void 0:e.layers].filter(g=>!!g);i.forEach(g=>"layers"in g&&c.push(g.layers)),this.addHandles(c.map(g=>this._watchUpdatingTracking.addOnCollectionChange(()=>g,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null},this._layersToLayerViews=new Map(t.layerviewMapping)}initialize(){this.addHandles([Ci(()=>{var t,e;return(e=(t=this.view)==null?void 0:t.map)==null?void 0:e.allLayers},"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),w(()=>{const t=this.view,e=t==null?void 0:t.map;return[e==null?void 0:e.basemap,e==null?void 0:e.ground,e==null?void 0:e.layers,t==null?void 0:t.ready]},()=>this._reschedule(),tt)]),this._preloadLayerViewModules(),this._reschedule()}clearHandles(){this._watchUpdatingTracking.removeAll()}destroy(){this.clear(),Ge(this._recyclingInfoMap),Ge(this._layerLayerViewInfoMap),this._watchUpdatingTracking.destroy(),this._map=null,this._workPromise!=null&&(this._workPromise.reject(Te()),this._workPromise=null)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return this._workPromise!=null||this._watchUpdatingTracking.updating||Dr(this._layerLayerViewInfoMap,t=>!t.done)||this._recyclingInfoMap.size>0}get updatingRemaining(){let t=0;for(const e of this._layerLayerViewInfoMap.values())e.done||++t;return t}clear(){this.destroyed||(this._clearCollections(),Ge(this._layerLayerViewInfoMap),Ge(this._recyclingInfoMap))}async whenLayerView(t){var i,n;await this._reschedule();const e=(i=this._layerLayerViewInfoMap.get(t))==null?void 0:i.promise;if(!e){const s=(n=this._recyclingInfoMap.get(t))==null?void 0:n.promise;if(!s)throw new k("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:t});return s}return e}isCreatingLayerViewsForLayer(t,e){var s;this.commitProperty("updatingRemaining");const i=this._layerLayerViewInfoMap.get(t);if(!(i!=null&&i.done))return!0;const n=i.layerView;return!(!n||!e||n.parent===e)||!!(i.done&&n&&"layers"in t&&((s=t.layers)!=null&&s.length))&&t.layers.some(o=>this.isCreatingLayerViewsForLayer(o,n))}_refreshCollections(){for(const[t,e]of this._layersToLayerViews)this._populateLayerViewsOwners($e(this,t),$e(this,e),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_clearCollections(){var t;for(const e of this._layersToLayerViews.values())(t=$e(this,e))==null||t.removeAll()}_populateLayerViewsOwners(t,e,i){if(!t||!e)return void(e==null?void 0:e.removeAll());let n=0;for(const s of t){const o=this._layerLayerViewInfoMap.get(s);if(!(o!=null&&o.layerView))continue;const{layerView:a}=o;a.layer=s,a.parent=i,e.at(n)!==a&&e.splice(n,0,a),"layers"in s&&xh(a)&&this._populateLayerViewsOwners(s.layers,a.layerViews,a),++n}n<e.length&&e.splice(n)}_createLayerView(t){var i;t.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(t)&&this.layerViewImporter.importLayerView(t);const e=new bh(t,this.view,this.layerViewImporter);(i=e.promise)==null||i.then(()=>this._refreshCollections(),n=>{n&&(pn(n)||n.name==="cancelled:layerview-create")||P.getLogger(this).error(`Failed to create layerview for layer title:'${t.title??"no title"}', id:'${t.id??"no id"}' of type '${t.type}'.`,{layer:t,error:n}),this.destroyed||this._refreshCollections()}),this._layerLayerViewInfoMap.set(t,e),this.view.ready&&e.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};r([l()],U.prototype,"_workPromise",void 0),r([l({readOnly:!0})],U.prototype,"_watchUpdatingTracking",void 0),r([l({readOnly:!0})],U.prototype,"_layersToLayerViews",void 0),r([l({constructOnly:!0})],U.prototype,"layerviewMapping",void 0),r([l({readOnly:!0})],U.prototype,"_rootCollectionNames",null),r([l({constructOnly:!0})],U.prototype,"layerViewFilter",void 0),r([l()],U.prototype,"layerViewImporter",void 0),r([l()],U.prototype,"supportsGround",void 0),r([l({readOnly:!0})],U.prototype,"updating",null),r([l({readOnly:!0})],U.prototype,"updatingRemaining",null),r([l({constructOnly:!0})],U.prototype,"view",void 0),U=r([v("esri.views.support.LayerViewManager")],U);const Th=U;let oe=class extends S{constructor(t){super(t),this.featureTitleFields=!1,this.utilityNetworkFields=!1,this.globalIdField=!1}};r([l()],oe.prototype,"featureTitleFields",void 0),r([l()],oe.prototype,"utilityNetworkFields",void 0),r([l()],oe.prototype,"globalIdField",void 0),oe=r([v("esri.views.support.RequiredFieldsOptions")],oe);const Sh=oe;var ae,zt;let y=(zt=class extends Tr(To){constructor(e){super(e),this._userSpatialReference=null,this.handles=new Po,this.updatingHandles=new Di,this.allLayerViews=new Eo({getCollections:()=>this.layerviewCollections,getChildrenFunction:Ph}),this.analyses=new ye,this.basemapView=null,this.dependencies={popup:void 0},this.displayFilterEnabled=!0,this.fatalError=null,this.graphics=new Ro,this.typeSpecificPreconditionsReady=!0,this.layerViews=new E,this.magnifier=new Zo,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this._readyStateWaitingTask=null,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this._lowPriorityCursorHandles=new E,this._highPriorityCursorHandles=new E,this.input=new yh,this.navigation=new Li,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new Go(this),this.persistableViewModels=new E,this.requiredFieldsOptions=new Sh,this._isValid=!1,this._readyCycleForced=!1,this._lockedSpatialReference=null,this._userTimeZone=null,this._lockedTimeZone=null,this._userTimeExtent=null,this._lockedTimeExtent=null,this.theme=null,this.handles.add(w(()=>this.preconditionsReady,i=>{var s,o,a,h;const n=this.ready;if(i?(this._lockedSpatialReference=this.spatialReference,this._lockedTimeZone=this.timeZone,this._lockedTimeExtent=this.timeExtent,ae.views.add(this)):(this._lockedSpatialReference=null,ae.views.remove(this)),this.notifyChange("spatialReference"),!i&&n)(s=this.toolViewManager)==null||s.detach(),(o=this.analysisViewManager)==null||o.detach(),(a=this.layerViewManager)==null||a.clear(),this._teardown();else if(i&&!n){try{this._startup()}catch(c){return void queueMicrotask(()=>{this.fatalError=new k("view:startup-error","View._startup failed",c)})}(h=this.analysisViewManager)==null||h.attach(),this.toolViewManager.attach()}},Ie))}initialize(){this.addResolvingPromise(Promise.all([this.loadAsyncDependencies(),this._validateWithErrorDisplay()]).then(()=>(this._isValid=!0,Dn(()=>this.ready)))),this.basemapView=new Gl({view:this}),this.layerViewManager=new Th({view:this,layerViewFilter:e=>{var i;return((i=this.layerViewFilter)==null?void 0:i.call(this,e))??!0},layerViewImporter:{importLayerView:e=>this.importLayerView(e),hasLayerViewModule:e=>this.hasLayerViewModule(e)},layerviewMapping:this._layerToLayerviewMapping}),this.toolViewManager=new ct({view:this}),this.selectionManager=new Bl({view:this}),this.addHandles([Bt(()=>this.readyState==="map-content-error"&&!this.spatialReference,()=>{P.getLogger(this).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),w(()=>this.initialExtentRequired,e=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:e},tt),w(()=>this.ready,e=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=e,this.defaultsFromMap.userSpatialReference=e?this.spatialReference:this._userSpatialReference)},Ie),w(()=>this._userSpatialReference,e=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=e)},tt)])}get _layerToLayerviewMapping(){return ae._layerToLayerview}destroy(){var e;this.destroyed||(ae.views.remove(this),this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=nt(this.graphics),this.analyses=nt(this.analyses),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),this.analysisViewManager=nt(this.analysisViewManager),this.toolViewManager=nt(this.toolViewManager),this.layerViewManager=nt(this.layerViewManager),this.selectionManager=nt(this.selectionManager),this.basemapView=nt(this.basemapView),(e=this.layerViews)==null||e.forEach(i=>i.destroy()),this.layerViews.length=0,this.invalidate(),this.handles.destroy(),this.map=nt(this.map),this.updatingHandles.destroy())}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return P.getLogger(this).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){var e;return(e=this.toolViewManager)==null?void 0:e.activeTool}set activeTool(e){this.toolViewManager&&(this.toolViewManager.activeTool=e)}get layerviewCollections(){var e,i,n;return[(e=this.basemapView)==null?void 0:e.baseLayerViews,(i=this.basemapView)==null?void 0:i.groundLayerViews,this.layerViews,(n=this.basemapView)==null?void 0:n.referenceLayerViews]}get animation(){return this._get("animation")}set animation(e){this._set("animation",e)}get center(){return null}get defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new V({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:(e,i)=>this.getSpatialReferenceSupport(e,i),...this.defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(e){this._set("extent",e)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get highlights(){return this._get("highlights")??dh()}set highlights(e){this._set("highlights",Vo(e,this._get("highlights"),E.ofType(Lt)))}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){var e;return!this.destroying&&!this.destroyed&&!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||ns(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._lockedSpatialReference&&!((e=this.defaultsFromMap)!=null&&e.ready)||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(e){e!==this._get("map")&&(e!=null&&e.destroyed&&(P.getLogger(this).warn("#map","The provided map is already destroyed",{map:e}),e=null),ns(e)&&e.load().catch(()=>{}),this.constructed&&!this.destroyed&&(this.forceReadyCycle(),this._lockedSpatialReference=null),this._set("map",e))}get readyState(){var e,i,n,s;if(this.destroyed)return this._get("readyState");if(!this.map)return"missing-map";if("container"in this&&!this.container)return"missing-container";if(this.fatalError)return"rendering-error";if((((e=this.defaultsFromMap)==null?void 0:e.ready)??!1)&&!this.spatialReference){const o=!("loaded"in this.map)||this.map.loaded,a=this.map.ground.loaded,h=((i=this.map.basemap)==null?void 0:i.loaded)??!0;return o&&h&&a&&!((n=this.map)!=null&&n.allLayers.length)?"empty-map":(this._readyStateWaitingTask||(this._readyStateWaitingTask=Oi(c=>Sr(q("view-readyState-waiting-delay"),null,c)),this.addHandles(this._readyStateWaitingTask),this.addHandles(this._readyStateWaitingTask,"ready-state-task")),(s=this._readyStateWaitingTask)!=null&&s.finished?"map-content-error":"loading")}return this._readyStateWaitingTask=ui(this._readyStateWaitingTask),this.removeHandles("ready-state-task"),this.ready?"ready":"loading"}get spatialReference(){var i,n;const e=this._userSpatialReference||this._lockedSpatialReference||this.getDefaultSpatialReference()||null;if(e&&((n=(i=this.defaultsFromMap)==null?void 0:i.required)!=null&&n.heightModelInfo)){const s=e.clone();return s.vcsWkid=this.defaultsFromMap.vcsWkid,s.latestVcsWkid=this.defaultsFromMap.latestVcsWkid,s}return e}set spatialReference(e){const i=!Pi(e,this._get("spatialReference"));this._set("_userSpatialReference",e),i&&(this._set("spatialReference",e),this._spatialReferenceChanged(e))}_spatialReferenceChanged(e){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get timeExtent(){return this._userTimeExtent??this._lockedTimeExtent??this.getDefaultTimeExtent()??null}set timeExtent(e){this._userTimeExtent=e}get timeZone(){return this._userTimeZone??this._lockedTimeZone??this.getDefaultTimeZone()??kr}set timeZone(e){this._userTimeZone=e,ll(e)||P.getLogger(this).warn("#timeZone",`the parsed value '${e}' may not be a valid IANA time zone`)}get tools(){var e;return(e=this.toolViewManager)==null?void 0:e.tools}get initialExtent(){var e;return(e=this.defaultsFromMap)==null?void 0:e.extent}get cursor(){var e,i,n;return((e=this.toolViewManager)==null?void 0:e.cursor)??((i=this._highPriorityCursorHandles.at(-1))==null?void 0:i.cursor)??((n=this._lowPriorityCursorHandles.at(-1))==null?void 0:n.cursor)??"default"}acquireCursor(e,i="low"){const n=i==="high"?this._highPriorityCursorHandles:this._lowPriorityCursorHandles,s={cursor:e},o=ve(()=>n.remove(s));return n.add(s),this.addHandles(o),o}get size(){return[this.width,this.height]}get effectiveTheme(){return this.theme??new gn}whenLayerView(e){var i;return((i=this.layerViewManager)==null?void 0:i.whenLayerView(e))??Promise.reject()}getDefaultSpatialReference(){var e;return(e=this.defaultsFromMap)==null?void 0:e.spatialReference}getDefaultHeightModelInfo(){var e;return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??((e=this.defaultsFromMap)==null?void 0:e.heightModelInfo)??null}getDefaultTimeZone(){return null}getDefaultTimeExtent(){return null}getSurface(){return null}importLayerView(e){throw new k("view:importLayerView-missing","importLayerView() not implemented")}hasLayerViewModule(e){return!1}async validate(){}async loadAsyncDependencies(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(e){return this.getSpatialReferenceSupport(e)!=null}when(e,i){return this.isResolved()&&!this.ready&&P.getLogger(this).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(e,i)}forceReadyCycle(){this.ready&&(Bt(()=>this.destroyed||this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}on(e,i){return super.on(e,i)}addAndActivateTool(e){this.toolViewManager.tools.add(e),this.activeTool=e}tryFatalErrorRecovery(){this.fatalError=null}async _validateWithErrorDisplay(){try{await this.validate()}catch(e){const i=document.createElement("div");i.setAttribute("style","display: flex; flex-direction: column; gap: 8px; padding: 20px; height: 100%; justify-content: center; color: black; background: white; font-family: sans-serif;");const n=document.createElement("div");n.innerHTML="Unable to display map. WebGL2 support is required.",n.setAttribute("style","font-size: 24px; font-weight: bold;");const s=document.createElement("div");s.innerHTML="Ensure that your browser and hardware meet the minimum requirements.",s.setAttribute("style","font-size: 18px;");const o=document.createElement("a");o.innerHTML="https://esriurl.com/webgl-faq",o.target="_blank",o.setAttribute("style","font-size: 18px;"),o.href="https://esriurl.com/webgl-faq",i.appendChild(n),i.appendChild(s),i.appendChild(o);const a=this.getSurface();throw a&&a.appendChild(i),e}}},ae=zt,zt._layerToLayerview=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.basemap.groundLayers","view.basemapView.groundLayerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"],["view.map.layers","view.layerViews"]],zt.views=new E,zt);r([l()],y.prototype,"_userSpatialReference",void 0),r([l()],y.prototype,"activeTool",null),r([l({readOnly:!0})],y.prototype,"allLayerViews",void 0),r([l({readOnly:!0})],y.prototype,"layerviewCollections",null),r([l(un(ye,"analyses"))],y.prototype,"analyses",void 0),r([l()],y.prototype,"animation",null),r([l()],y.prototype,"basemapView",void 0),r([l()],y.prototype,"center",null),r([l()],y.prototype,"defaultsFromMapSettings",null),r([l()],y.prototype,"defaultsFromMap",null),r([l()],y.prototype,"dependencies",void 0),r([l()],y.prototype,"displayFilterEnabled",void 0),r([l({type:Kt})],y.prototype,"extent",null),r([l()],y.prototype,"fatalError",void 0),r([l(un(Ro,"graphics"))],y.prototype,"graphics",void 0),r([l({readOnly:!0,type:rl})],y.prototype,"heightModelInfo",null),r([l({type:E.ofType(Lt)})],y.prototype,"highlights",null),r([l({readOnly:!0})],y.prototype,"interacting",null),r([l({constructOnly:!0})],y.prototype,"layerViewFilter",void 0),r([l({readOnly:!0})],y.prototype,"navigating",null),r([l({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_lockedSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],y.prototype,"preconditionsReady",null),r([l({readOnly:!0})],y.prototype,"typeSpecificPreconditionsReady",void 0),r([l({type:E,readOnly:!0})],y.prototype,"layerViews",void 0),r([l()],y.prototype,"resolution",null),r([l({type:Zo})],y.prototype,"magnifier",void 0),r([l({value:null,type:al})],y.prototype,"map",null),r([l()],y.prototype,"padding",void 0),r([l({readOnly:!0})],y.prototype,"ready",void 0),r([l()],y.prototype,"_readyStateWaitingTask",void 0),r([l({readOnly:!0})],y.prototype,"readyState",null),r([l({type:di})],y.prototype,"spatialReference",null),r([l()],y.prototype,"stationary",null),r([l({type:Pr})],y.prototype,"timeExtent",null),r([l({type:String,nonNullable:!0})],y.prototype,"timeZone",null),r([l()],y.prototype,"tools",null),r([l()],y.prototype,"toolViewManager",void 0),r([l({readOnly:!0})],y.prototype,"type",void 0),r([l({type:Number})],y.prototype,"scale",void 0),r([l({readOnly:!0})],y.prototype,"updating",void 0),r([l({readOnly:!0})],y.prototype,"initialExtentRequired",void 0),r([l({readOnly:!0})],y.prototype,"initialExtent",null),r([l()],y.prototype,"cursor",null),r([l({readOnly:!0})],y.prototype,"input",void 0),r([l({type:Li,nonNullable:!0})],y.prototype,"navigation",void 0),r([l()],y.prototype,"layerViewManager",void 0),r([l()],y.prototype,"analysisViewManager",void 0),r([l()],y.prototype,"selectionManager",void 0),r([l()],y.prototype,"width",void 0),r([l()],y.prototype,"height",void 0),r([l({readOnly:!0})],y.prototype,"resizing",void 0),r([l({value:null,readOnly:!0})],y.prototype,"size",null),r([l({readOnly:!0})],y.prototype,"suspended",void 0),r([l({readOnly:!0})],y.prototype,"viewEvents",void 0),r([l({readOnly:!0})],y.prototype,"persistableViewModels",void 0),r([l()],y.prototype,"_isValid",void 0),r([l()],y.prototype,"_readyCycleForced",void 0),r([l()],y.prototype,"_lockedSpatialReference",void 0),r([l()],y.prototype,"_userTimeZone",void 0),r([l()],y.prototype,"_lockedTimeZone",void 0),r([l()],y.prototype,"_userTimeExtent",void 0),r([l()],y.prototype,"_lockedTimeExtent",void 0),r([l({type:gn})],y.prototype,"theme",void 0),r([l({readOnly:!0,type:gn})],y.prototype,"effectiveTheme",null),y=ae=r([v("esri.views.View")],y);const Ki=globalThis.$arcgis;Ki&&!Ki.views&&Object.defineProperty(Ki,"views",{configurable:!1,enumerable:!0,writable:!1,value:y.views});const kh=y;function Ph(t){return t.layerViews}const Uo=96,Bo=39.37,Ch=180/Math.PI;function Ko(t){return t.wkid?t:t.spatialReference||di.WGS84}function Hn(t,e){return e.type?N(t,e.x,e.y):Ee(t,e)}function Yo(t){return mo(t)}function zi(t,e,i=0){let n=t.width,s=t.height;if(i!==0){const h=ki(i),c=Math.abs(Math.cos(h)),p=Math.abs(Math.sin(h));n=t.width*c+t.height*p,s=t.width*p+t.height*c}const o=Math.max(1,e[0]),a=Math.max(1,e[1]);return Math.max(n/o,s/a)*Lh(t.spatialReference)}async function Pe(t,e,i,n){var h,c,p,u;let s,o;if(!t||Array.isArray(t)&&!t.length)return null;if(E.isCollection(t)&&(t=t.toArray()),Array.isArray(t)&&t.length&&typeof t[0]=="object"){const d=t.every(f=>"attributes"in f),m=t.some(f=>!f.geometry);let g=t;if(d&&m&&e&&e.allLayerViews){const f=new Map;for(const O of t){const M=O.layer,x=f.get(M)||[],D=O.attributes[M.objectIdField];D!=null&&x.push(D),f.set(M,x)}const _=[];f.forEach((O,M)=>{var D;const x=(D=e.allLayerViews)==null?void 0:D.find(L=>L.layer.id===M.id);if(x&&"queryFeatures"in x){const L=M.createQuery();L.objectIds=O,L.returnGeometry=!0,_.push(x.queryFeatures(L))}});const C=await Promise.all(_),z=[];for(const O of C)if(O&&O.features&&O.features.length)for(const M of O.features)M.geometry!=null&&z.push(M.geometry);g=z}for(const f of g)n=await Pe(f,e,i,n);return n}if(Array.isArray(t)&&t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number")s=new F(t);else if(t instanceof ko)s=t;else if("geometry"in t){if(t.geometry)s=t.geometry;else if(t.layer){const d=t.layer,m=(h=e.allLayerViews)==null?void 0:h.find(g=>g.layer.id===d.id);if(m&&"queryFeatures"in m){const g=d.createQuery();g.objectIds=[t.attributes[d.objectIdField]],g.returnGeometry=!0,s=(u=(p=(c=await m.queryFeatures(g))==null?void 0:c.features)==null?void 0:p[0])==null?void 0:u.geometry}}}if(s==null)return null;switch(s.type){case"point":o=new Kt({xmin:s.x,ymin:s.y,xmax:s.x,ymax:s.y,spatialReference:s.spatialReference});break;case"extent":case"multipoint":case"polygon":case"polyline":o=fl(s);break;default:o=s.extent}if(!o)return null;Io()||Do(o.spatialReference,i)||await Oo();const a=Ei(o,i);if(!a)return null;if(n){const d=a.center,m=d.clone();m.x=zn(d.x,n.center.x,i),m.x!==d.x&&a.centerAt(m),n=n.union(a)}else n=a;return n}function Vh(t){var e;if(t&&(!Array.isArray(t)||typeof t[0]!="number")&&(typeof t=="object"||Array.isArray(t)&&typeof t[0]=="object")){if("layer"in t&&((e=t.layer)==null?void 0:e.minScale)!=null&&t.layer.maxScale!=null){const i=t.layer;return{min:i.minScale,max:i.maxScale}}if(Array.isArray(t)&&t.length&&t.every(i=>"layer"in i)){let i=0,n=0;for(const s of t){const o=s.layer;o!=null&&o.minScale&&o.maxScale&&(i=o.minScale<i?o.minScale:i,n=o.maxScale>n?o.maxScale:n)}return i&&n?{min:i,max:n}:null}}}function bs(t,e){const i=Ko(t);return Pi(i,e)||i.imageCoordinateSystem||e.imageCoordinateSystem?t:Ei(t,e)}async function Eh(t,e){var C;if(!t||!e)return new ot({targetGeometry:new F,scale:0,rotation:0});let i=e.spatialReference;const{constraints:n,padding:s,viewpoint:o,size:a}=e,h=[s?a[0]-s.left-s.right:a[0],s?a[1]-s.top-s.bottom:a[1]];let c=null;t instanceof ot?c=t:t.viewpoint?c=t.viewpoint:t.target&&t.target.declaredClass==="esri.Viewpoint"&&(c=t.target);let p=null;c!=null&&c.targetGeometry?p=c.targetGeometry:t instanceof Kt?p=t:t instanceof ko?p=await Pe(t,e,i):t&&(p=await Pe(t.center,e,i)||await Pe(t.target,e,i)||await Pe(t,e,i)),!p&&(o!=null&&o.targetGeometry)?p=o.targetGeometry:!p&&e.extent&&(p=e.extent),i||(i=Ko(e.spatialReference||e.extent||p)),Io()||Pi(p.spatialReference,i)||Do(p.spatialReference,i)||await Oo();const u=bs(p,i),d="center"in u?u.center:u;e.pickClosestTarget!==!1&&d.type==="point"&&((C=o.targetGeometry)==null?void 0:C.type)==="point"&&(d.x=zn(d.x,o.targetGeometry.x,d.spatialReference));let m=0;c?m=c.rotation:t.hasOwnProperty("rotation")?m=t.rotation:o&&(m=o.rotation);let g=0;g=(c==null?void 0:c.targetGeometry)!=null&&c.targetGeometry.type==="point"?c.scale:"scale"in t&&t.scale?t.scale:"zoom"in t&&t.zoom!==-1&&n&&n.effectiveLODs?n.zoomToScale(t.zoom):Array.isArray(p)||p.type==="point"||p.type==="extent"&&p.width===0&&p.height===0?o.scale:zi(bs(p.extent,i),h,m);const f=Vh(t.target??t);f&&(f.min&&f.min<g?g=f.min:f.max&&f.max>g&&(g=f.max));let _=new ot({targetGeometry:d,scale:g,rotation:m});return n&&(_=n.fit(_),n.constrainByGeometry(_),n.rotationEnabled||(_.rotation=o.rotation)),_}function W(t,e){const i=t.targetGeometry,n=e.targetGeometry;return i.x=n.x,i.y=n.y,i.spatialReference=n.spatialReference,t.scale=e.scale,t.rotation=e.rotation,t}function Rh(t,e,i){return i?N(t,.5*(e[0]-i.right+i.left),.5*(e[1]-i.bottom+i.top)):Si(t,e,.5)}const Ih=function(){const t=A();return function(e,i,n){const s=i.targetGeometry;Hn(t,s);const o=.5*_e(i);return e.xmin=t[0]-o*n[0],e.ymin=t[1]-o*n[1],e.xmax=t[0]+o*n[0],e.ymax=t[1]+o*n[1],e.spatialReference=s.spatialReference,e}}();function Dh(t,e,i,n,s){var o;return vn(t,e,i.center),t.scale=zi(i,n),(o=s==null?void 0:s.constraints)==null||o.constrain(t),t}function Oh(t,e,i,n){return Wn(t,e,i,n),No(t,t)}const Qo=function(){const t=A();return function(e,i,n){return yo(e,zh(e,i),Rh(t,i,n))}}(),Ah=function(){const t=At(),e=A();return function(i,n,s,o){const a=_e(n),h=Zn(n);return N(e,a,a),gl(t,e),Ai(t,t,h),Oe(t,t,Qo(e,s,o)),Oe(t,t,[0,o.top-o.bottom]),N(i,t[4],t[5])}}();function _e(t){var e;return t.scale*Xo((e=t.targetGeometry)==null?void 0:e.spatialReference)}function Xo(t){return go(t)?1/(Yo(t)*Bo*Uo):1}function Zn(t){return wo(t.rotation)||0}function Lh(t){return go(t)?Yo(t)*Bo*Uo:1}function zh(t,e){return Si(t,e,.5)}const qn=function(){const t=A(),e=A(),i=A();return function(n,s,o,a,h,c){return Qa(t,s),Si(e,o,.5*c),N(i,1/a*c,-1/a*c),Ho(n,e),h&&Ai(n,n,h),Ln(n,n,i),Oe(n,n,t),n}}(),Wn=function(){const t=A();return function(e,i,n,s){const o=_e(i),a=Zn(i);return Hn(t,i.targetGeometry),qn(e,t,n,o,a,s)}}(),Fh=function(){const t=A();return function(e,i,n,s){const o=_e(i);return Hn(t,i.targetGeometry),qn(e,t,n,o,0,s)}}();function Jo(t){const e=vo(t);return e?e.valid[1]-e.valid[0]:0}function Nh(t,e){return Math.round(Jo(t)/e)}const Hh=function(){const t=A(),e=A(),i=[0,0,0];return function(n,s,o){rn(t,n,s),Yn(t,t),rn(e,n,o),Yn(e,e),Ga(i,t,e);let a=Math.acos(ja(t,e)/(Qn(t)*Qn(e)))*Ch;return i[2]<0&&(a=-a),isNaN(a)&&(a=0),a}}(),Zh=function(){const t=A();return function(e,i,n,s){const o=e.targetGeometry;return W(e,i),Ah(t,i,n,s),o.x+=t[0],o.y+=t[1],e}}(),vn=function(t,e,i){W(t,e);const n=t.targetGeometry;return n.x=i.x,n.y=i.y,n.spatialReference=i.spatialReference,t},qh=function(){const t=A();return function(e,i,n,s,o){o||(o="center"),yo(t,n,s),Si(t,t,.5);const a=t[0],h=t[1];switch(o){case"center":N(t,0,0);break;case"left":N(t,-a,0);break;case"top":N(t,0,h);break;case"right":N(t,a,0);break;case"bottom":N(t,0,-h);break;case"top-left":N(t,-a,h);break;case"bottom-left":N(t,-a,-h);break;case"top-right":N(t,a,h);break;case"bottom-right":N(t,a,-h)}return Fi(e,i,t),e}}();function $d(t,e,i){return W(t,e),t.rotation+=i,t}function Wh(t,e,i){return W(t,e),t.rotation=i,t}const $h=function(){const t=A();return function(e,i,n,s,o){return W(e,i),isNaN(n)||n===0||(ea(t,s,i,o),e.scale=i.scale*n,ia(t,t,e,o),Fi(e,e,N(t,t[0]-s[0],s[1]-t[1]))),e}}();function Ms(t,e,i){return W(t,e),t.scale=i,t}const ta=function(){const t=A();return function(e,i,n,s,o,a){return W(e,i),isNaN(n)||n===0||(ea(t,o,i,a),e.scale=i.scale*n,e.rotation+=s,ia(t,t,e,a),Fi(e,e,N(t,t[0]-o[0],o[1]-t[1]))),e}}(),Gd=function(){const t=A(),e=A();return function(i,n,s,o,a,h,c){return Qo(e,h,c),$a(t,a,e),o?ta(i,n,s,o,t,h):$h(i,n,s,t,h)}}(),ea=function(){const t=At();return function(e,i,n,s){return xt(e,i,Oh(t,n,s,1))}}(),ia=function(){const t=At();return function(e,i,n,s){return xt(e,i,Wn(t,n,s,1))}}(),Fi=function(){const t=A(),e=At();return function(i,n,s){W(i,n);const o=_e(n),a=i.targetGeometry;return dl(e,Zn(n)),Ln(e,e,ul(o,o)),xt(t,s,e),a.x+=t[0],a.y+=t[1],i}}();function oi(){const t=new Float32Array(9);return t[0]=1,t[4]=1,t[8]=1,t}function Gh(t){const e=new Float32Array(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function jh(t,e,i,n,s,o,a,h,c){const p=new Float32Array(9);return p[0]=t,p[1]=e,p[2]=i,p[3]=n,p[4]=s,p[5]=o,p[6]=a,p[7]=h,p[8]=c,p}Object.freeze(Object.defineProperty({__proto__:null,clone:Gh,create:oi,fromValues:jh},Symbol.toStringTag,{value:"Module"}));function Uh(t){return t instanceof Float32Array&&t.length>=2}function Bh(t){return Array.isArray(t)&&t.length>=2}function Yi(t){return Uh(t)||Bh(t)}var _n;const ft=[0,0];let _t=_n=class extends fo{constructor(t){super(t),this._viewpoint2D={center:A(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new Kt,this.id=0,this.inverseTransform=At(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=At(),this.transformNoRotation=At(),this.displayMat3=oi(),this.displayViewMat3=oi(),this.viewMat3=oi(),this.viewMat2d=yl(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(t){this._set("pixelRatio",t),this._update()}set size(t){this._set("size",t),this._update()}set viewpoint(t){if(t){const e=this._viewpoint2D,i=t.targetGeometry;e.center[0]=i.x,e.center[1]=i.y,e.rotation=t.rotation,e.scale=t.scale,e.spatialReference=i.spatialReference}this._update()}get visibleArea(){const[t,e]=this.size;return[this.toMap([0,0],0,0),this.toMap([0,0],0,e),this.toMap([0,0],t,e),this.toMap([0,0],t,0)]}copy(t){const e=this.size,i=this.viewpoint;return i&&e?(this.viewpoint=W(i,t.viewpoint),this._set("size",Ee(e,t.size))):(this.viewpoint=t.viewpoint.clone(),this._set("size",[t.size[0],t.size[1]])),this._set("pixelRatio",t.pixelRatio),this}clone(){return new _n({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(t,e,i){return Yi(e)?xt(t,e,this.inverseTransform):(ft[0]=e,ft[1]=i,xt(t,ft,this.inverseTransform))}toScreen(t,e,i){return Yi(e)?xt(t,e,this.transform):(ft[0]=e,ft[1]=i,xt(t,ft,this.transform))}toScreenNoRotation(t,e,i){return Yi(e)?xt(t,e,this.transformNoRotation):(ft[0]=e,ft[1]=i,xt(t,ft,this.transformNoRotation))}wrapMapCoordinate(t,e){Ee(t,e);const[i]=e,[n]=this.center,{extent:s,spatialReference:o}=this;let{xmin:a,xmax:h}=s;if(o.isWrappable){const c=Jo(o)/2;a=Math.max(a,n-c),h=Math.min(h,n+c)}return(i<a||i>h)&&(t[0]=zn(i,n,o)),t}getScreenTransform(t,e){const{center:i}=this._viewpoint2D,n=this._get("pixelRatio")||1,s=this._get("size");return qn(t,i,s,e,0,n),t}_update(){const{center:t,spatialReference:e,scale:i,rotation:n}=this._viewpoint2D,s=this._get("pixelRatio")||1,o=this._get("size"),a=new ot({targetGeometry:new F(t[0],t[1],e),scale:i,rotation:n});if(this._set("viewpoint",a),!o||!e||!i)return;this.resolution=_e(a),this.rotation=n,this.scale=i,this.spatialReference=e,Ee(this.center,t);const h=o[0]!==0?2/o[0]:0,c=o[1]!==0?-2/o[1]:0;rr(this.displayMat3,h,0,0,0,c,0,-1,1,1);const p=lr(this.viewMat3),u=hs(o[0]/2,o[1]/2),d=hs(-o[0]/2,-o[1]/2),m=wo(n);ts(p,p,u),hr(p,p,m),ts(p,p,d),cr(this.displayViewMat3,this.displayMat3,p);const g=Ho(this.viewMat2d,u);return Ai(g,g,m),Oe(g,g,d),Ih(this.extent,a,o),Wn(this.transform,a,o,s),No(this.inverseTransform,this.transform),Fh(this.transformNoRotation,a,o,s),this.worldScreenWidth=Nh(this.spatialReference,this.resolution),this._set("id",this.id+1),this.notifyChange("visibleArea"),this}};r([l({readOnly:!0})],_t.prototype,"id",void 0),r([l({value:1,json:{write:!0}})],_t.prototype,"pixelRatio",null),r([l({json:{write:!0}})],_t.prototype,"size",null),r([l()],_t.prototype,"spatialReference",void 0),r([l({type:ot,json:{write:!0}})],_t.prototype,"viewpoint",null),r([l({readOnly:!0})],_t.prototype,"visibleArea",null),_t=_n=r([v("esri.views.2d.ViewState")],_t);const xs=_t;var wn,bn;let Tt=wn=class extends S{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new wn({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};r([l()],Tt.prototype,"left",void 0),r([l()],Tt.prototype,"top",void 0),r([l()],Tt.prototype,"right",void 0),r([l()],Tt.prototype,"bottom",void 0),Tt=wn=r([v("esri.views.2d.PaddedViewState.Padding")],Tt);let re=bn=class extends xs{constructor(...t){super(...t),this.paddedViewState=new xs,this._updateContent=(()=>{const e=A();return()=>{const i=this._get("size"),n=this._get("padding");if(!i||!n)return;const s=this.paddedViewState;N(e,n.left+n.right,n.top+n.bottom),rn(e,i,e),Ee(s.size,e);const o=s.viewpoint;o&&(this.viewpoint=o)}})(),this.addHandles(w(()=>[this.size,this.padding],()=>this._updateContent(),Ie)),this.padding=new Tt,this.size=[0,0]}set padding(t){this._set("padding",t||new Tt)}set viewpoint(t){if(t){this.paddedViewState.viewpoint=t;let e=t;const i=this._get("padding");i&&(e=Zh(t.clone(),t,this._get("size"),i));const{targetGeometry:n,rotation:s,scale:o}=e,{x:a,y:h,spatialReference:c}=n,p=this._viewpoint2D;p.center[0]=a,p.center[1]=h,p.rotation=s,p.scale=o,p.spatialReference=c,this._update()}}clone(){return new bn({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};r([l()],re.prototype,"paddedViewState",void 0),r([l({type:Tt})],re.prototype,"padding",null),r([l()],re.prototype,"viewpoint",null),re=bn=r([v("esri.views.2d.PaddedViewState")],re);const $n=re;let Kh=class{constructor(t){this.view=t,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this._scheduler=vl(),this._schedulerHandle=Bt(()=>this._scheduler.updating,()=>this.requestFrame()),this.stationary=!0,this.prepare=()=>{var e;this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions,this._updateParameters.targetState.copy(this.view.state),((e=this.view.animation)==null?void 0:e.target)==null||So(this.view.animation.target)||(this._updateParameters.targetState.viewpoint=this.view.animation.target))},this.update=e=>{var a,h,c;if(this._updateRequested=!1,(a=this.view)==null?void 0:a.destroyed)return;const{allLayerViews:i,graphicsView:n,labelManager:s,state:{id:o}}=this.view;i==null||i.forEach(this._updateLayerView,this),s!=null&&(s.lastUpdateId!==o&&(s.viewChange(),s.lastUpdateId=o),s.updateRequested&&s.processUpdate(this._updateParameters)),n!=null&&(n.lastUpdateId!==o&&(n.viewChange(),n.lastUpdateId=o),n.updateRequested&&n.processUpdate(this._updateParameters)),(h=this.view.graphicsTileStore)==null||h.setViewState(this._updateParameters.state),this.view.animation?this._scheduler.state=0:this.view.interacting?this._scheduler.state=1:this._scheduler.state=2,this._scheduler.frame(e)||this._updateRequested||this._scheduler.state!==2||((c=this._frameTaskHandle)==null||c.pause())}}destroy(){this.stop(),this._schedulerHandle.remove(),this._scheduler.destroy()}get scheduler(){return this._scheduler}start(){if(this._frameTaskHandle)return;const t=this.view;this.stationary=t.stationary,this._updateParameters={state:t.state,targetState:new $n,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:t.renderingOptions},this._stationaryHandle=w(()=>t.stationary,e=>{this.stationary=e,this.requestFrame()}),this._frameTaskHandle=fe(this),this.requestUpdate()}stop(){var t;this._frameTaskHandle&&(this._updateRequested=!1,(t=this._stationaryHandle)==null||t.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(t){var n;if(!t.attached)return void this.requestUpdate();const e=this.view.state,i=t.lastUpdateId;i!=null&&(this.stationary||t.moving)||(t.moving=!0),i!==e.id&&t.viewChange(),this.stationary&&t.moving&&(t.moving=!1,t.moveEnd()),t.lastUpdateId=e.id,t.updateRequested&&t.processUpdate(this._updateParameters),"layerViews"in t&&((n=t.layerViews)==null||n.forEach(this._updateLayerView,this))}};function Yh(t,e){const{spatialReference:i}=e,n=[e.x,e.y];let s,o,a,h;const c=[0,0],p=Qh(t);for(let m=0;m<p.length;m++){const g=p[m];for(let f=0;f<g.length-1;f++){mr(c,n,g,f);const _=gr(n,c);(s==null||_<s)&&(s=_,o=[...c],a=m,h=f)}}if(s==null||!o||a==null||h==null)throw new k("nearest-coordinate:failed","Failed to find the nearest coordinate");const[u,d]=o;return{coordinate:new F({x:u,y:d,spatialReference:i}),distance:s}}function Qh(t){switch(t.type){case"extent":return[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]];case"polygon":return t.rings;case"polyline":return t.paths}}var Mn;let $t=Mn=class extends On(S){constructor(t){super(t),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(this.geometry==null||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return Ei(this.geometry,this.spatialReference)}catch(t){return P.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:t}),null}return this.geometry}constrain(t,e){if(this.normalizedGeometry==null)return t;const i=t.targetGeometry;if(this.normalizedGeometry.type==="extent"?In(this.normalizedGeometry,i):xo(this.normalizedGeometry,i))return t;const{coordinate:n}=Yh(this.normalizedGeometry,i);return n&&(t.targetGeometry=n),t}clone(){var t,e;return new Mn({geometry:(t=this.geometry)==null?void 0:t.clone(),spatialReference:(e=this.spatialReference)==null?void 0:e.clone()})}};r([l({constructOnly:!0})],$t.prototype,"geometry",void 0),r([l({readOnly:!0})],$t.prototype,"normalizedGeometry",null),r([l({constructOnly:!0})],$t.prototype,"spatialReference",void 0),$t=Mn=r([v("esri.views.2d.constraints.GeometryConstraint")],$t);var xn;let Ce=xn=class extends On(S){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(t,e){return this.enabled&&e&&(this.rotationEnabled||(t.rotation=e.rotation)),t}clone(){return new xn({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};r([l()],Ce.prototype,"enabled",void 0),r([l()],Ce.prototype,"rotationEnabled",void 0),Ce=xn=r([v("esri.views.2d.constraints.RotationConstraint")],Ce);const na=Ce;var Tn;let B=Tn=class extends On(S){constructor(t){super(t),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let t,{lods:e,minScale:i,maxScale:n,minZoom:s,maxZoom:o}=this,a=-1,h=-1,c=!1,p=!1;if(i!==0&&n!==0&&i<n&&([i,n]=[n,i]),!(e!=null&&e.length))return this._set("effectiveMinScale",i),void this._set("effectiveMaxScale",n);e=e.map(u=>u.clone()),e.sort((u,d)=>d.scale-u.scale),e.forEach((u,d)=>u.level=d);for(const u of e)!c&&i>0&&i>=u.scale&&(a=u.level,c=!0),!p&&n>0&&n>=u.scale&&(h=t?t.level:-1,p=!0),t=u;s===-1&&(s=i===0?0:a),o===-1&&(o=n===0?e.length-1:h),s=Math.max(s,0),s=Math.min(s,e.length-1),o=Math.max(o,0),o=Math.min(o,e.length-1),s>o&&([s,o]=[o,s]),i=e[s].scale,n=e[o].scale,e.splice(0,s),e.splice(o-s+1),e.forEach((u,d)=>{this._lodByScale[u.scale]=u,this._scales[d]=u.scale}),this._set("effectiveLODs",e),this._set("effectiveMinZoom",s),this._set("effectiveMaxZoom",o),this._set("effectiveMinScale",i),this._set("effectiveMaxScale",n)}constrain(t,e){if(e&&t.scale===e.scale)return t;const i=this.effectiveMinScale,n=this.effectiveMaxScale,s=t.targetGeometry,o=e&&e.targetGeometry,a=n!==0&&t.scale<n,h=i!==0&&t.scale>i;if(a||h){const c=h?i:n;if(e&&o){const p=(c-e.scale)/(t.scale-e.scale);s.x=o.x+(s.x-o.x)*p,s.y=o.y+(s.y-o.y)*p}t.scale=c}return this.snapToZoom&&this.effectiveLODs&&(t.scale=this._getClosestScale(t.scale)),t}fit(t){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(t,null);const e=this.scaleToZoom(t.scale),i=Math.abs(e-Math.floor(e));return t.scale=this.zoomToScale(i>.99?Math.round(e):Math.floor(e)),t}zoomToScale(t){if(!this.effectiveLODs)return 0;t-=this.effectiveMinZoom,t=Math.max(0,t);const e=this._scales;if(t<=0)return e[0];if(t>=e.length)return e[e.length-1];const i=Math.floor(t),n=Math.ceil(t);return e[i]+(t-i)*(e[n]-e[i])}scaleToZoom(t){if(!this.effectiveLODs)return-1;const e=this._scales;let i,n;if(t>=e[0])return this.effectiveMinZoom;if(t<=e[e.length-1])return this.effectiveMaxZoom;for(let s=0;s<e.length-1;s++){if(i=e[s],n=e[s+1],n===t)return s+this.effectiveMinZoom+1;if(i>t&&n<t)return s+this.effectiveMinZoom+1-(t-n)/(i-n)}return-1}snapToClosestScale(t){if(!this.effectiveLODs)return t;const e=this.scaleToZoom(t);return this.zoomToScale(Math.round(e))}snapToNextScale(t,e=.5){if(!this.effectiveLODs)return t*e;const i=Math.round(this.scaleToZoom(t));return this.zoomToScale(i+1)}snapToPreviousScale(t,e=2){if(!this.effectiveLODs)return t*e;const i=Math.round(this.scaleToZoom(t));return this.zoomToScale(i-1)}clone(){return new Tn({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(t){return this._lodByScale[t]||(t=this._scales.reduce((e,i)=>Math.abs(i-t)<=Math.abs(e-t)?i:e,this._scales[0])),this._lodByScale[t].scale}};r([l({readOnly:!0})],B.prototype,"effectiveLODs",void 0),r([l({readOnly:!0})],B.prototype,"effectiveMinZoom",void 0),r([l({readOnly:!0})],B.prototype,"effectiveMaxZoom",void 0),r([l({readOnly:!0})],B.prototype,"effectiveMinScale",void 0),r([l({readOnly:!0})],B.prototype,"effectiveMaxScale",void 0),r([l()],B.prototype,"lods",void 0),r([l()],B.prototype,"minZoom",void 0),r([l()],B.prototype,"maxZoom",void 0),r([l()],B.prototype,"minScale",void 0),r([l()],B.prototype,"maxScale",void 0),r([l()],B.prototype,"snapToZoom",void 0),B=Tn=r([v("esri.views.2d.constraints.ZoomConstraint")],B);const sa=B,Xh={base:null,key:"type",typeMap:{extent:Kt,polygon:bo}};let I=class extends S{constructor(t){super(t),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0,this.customConstraints=new E}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(t){t?this._set("geometry",t):this._set("geometry",null)}get version(){var t,e,i;return`${(t=this._zoom)==null?void 0:t.uid}/${(e=this._rotation)==null?void 0:e.uid}/${(i=this._geometry)==null?void 0:i.uid}`}get _geometry(){var e,i;const t=this._get("_geometry");return t&&this.geometry===t.geometry&&((e=this.view)==null?void 0:e.constraintsInfo.spatialReference)===t.spatialReference?t:new $t({geometry:this.geometry,spatialReference:(i=this.view)==null?void 0:i.constraintsInfo.spatialReference})}get _rotation(){return new na({rotationEnabled:this.rotationEnabled})}get _zoom(){var h;const t=this._get("_zoom"),e=this.lods||((h=this.view)==null?void 0:h.constraintsInfo.lods),i=this.minZoom,n=this.maxZoom,s=this.minScale,o=this.maxScale,a=this.snapToZoom;return t&&t.lods===e&&t.minZoom===i&&t.maxZoom===n&&t.minScale===s&&t.maxScale===o&&t.snapToZoom===a?t:new sa({lods:e,minZoom:i,maxZoom:n,minScale:s,maxScale:o,snapToZoom:a})}canZoomInTo(t){const e=this.effectiveMaxScale;return e===0||t>=e}canZoomOutTo(t){const e=this.effectiveMinScale;return e===0||t<=e}constrain(t,e){return this._zoom.constrain(t,e),this._rotation.constrain(t,e),this._geometry.constrain(t,e),this.customConstraints.forEach(i=>i.constrain(t,e)),t}constrainByGeometry(t){return this._geometry.constrain(t),this.customConstraints.forEach(e=>{var i;return(i=e.applyPanConstraint)==null?void 0:i.call(e,t)}),t}fit(t){return this._zoom.fit(t)}zoomToScale(t){return this._zoom.zoomToScale(t)}scaleToZoom(t){return this._zoom.scaleToZoom(t)}snapScale(t){return this._zoom.snapToClosestScale(t)}snapToNextScale(t){return this._zoom.snapToNextScale(t)}snapToPreviousScale(t){return this._zoom.snapToPreviousScale(t)}};r([l({readOnly:!0})],I.prototype,"effectiveLODs",null),r([l({readOnly:!0})],I.prototype,"effectiveMinScale",null),r([l({readOnly:!0})],I.prototype,"effectiveMaxScale",null),r([l({readOnly:!0})],I.prototype,"effectiveMinZoom",null),r([l({readOnly:!0})],I.prototype,"effectiveMaxZoom",null),r([l({types:Xh,value:null})],I.prototype,"geometry",null),r([l({type:[$r]})],I.prototype,"lods",void 0),r([l()],I.prototype,"minScale",void 0),r([l()],I.prototype,"maxScale",void 0),r([l()],I.prototype,"minZoom",void 0),r([l()],I.prototype,"maxZoom",void 0),r([l()],I.prototype,"rotationEnabled",void 0),r([l()],I.prototype,"snapToZoom",void 0),r([l({type:E})],I.prototype,"customConstraints",void 0),r([l()],I.prototype,"view",void 0),r([l({readOnly:!0})],I.prototype,"version",null),r([l({type:$t,readOnly:!0})],I.prototype,"_geometry",null),r([l({type:na})],I.prototype,"_rotation",null),r([l({readOnly:!0,type:sa})],I.prototype,"_zoom",null),I=r([v("esri.views.2d.MapViewConstraints")],I);const Ts=I;let Z=class extends S{constructor(t){super(t),this.constraints=null,this.ready=!1,this.resizeAlign="center",this.addHandles([w(()=>{var e;return(e=this.constraints)==null?void 0:e.version},e=>{this.constraints&&e&&this.ready&&(this.state.viewpoint=this.constraints.fit(this.state.paddedViewState.viewpoint))},Ie)])}get center(){if(!this.ready)return this._get("center");const{center:t,spatialReference:e}=this.state.paddedViewState;return this.state.commitProperty("id"),new F({x:t[0],y:t[1],spatialReference:e})}set center(t){if(t==null)return;if(!this.ready)return void this._set("center",t);let e;try{e=this._project(t,this.state.spatialReference)}catch(n){return void P.getLogger(this).error(new k("mapview:invalid-center","could not project the value in the view's spatial reference",{input:t,error:n}))}const i=this.viewpoint;vn(i,i,e),this.viewpoint=i}get extent(){return this.ready?(this.state.commitProperty("id"),this.state.paddedViewState.extent.clone()):this._get("extent")}set extent(t){if(t==null)return;if(!t.width||!t.height)return void P.getLogger(this).error(new k("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",t),this._set("center",void 0),this._set("viewpoint",void 0),this._set("scale",void 0),void this._set("zoom",void 0);let e;try{e=this._project(t,this.state.spatialReference)}catch(n){return void P.getLogger(this).error(new k("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:n}))}const i=this.viewpoint;Dh(i,i,e,this.state.size,{constraints:this.constraints}),this.viewpoint=i}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(t){this.ready?(this.state.padding=t,this._set("padding",this.state.padding)):this._set("padding",t)}get resolution(){return this.ready?(this.state.commitProperty("id"),this.state.resolution):0}get rotation(){return this.ready?(this.state.commitProperty("id"),this.state.rotation):this._get("rotation")}set rotation(t){if(isNaN(t))return;if(!this.ready)return void this._set("rotation",t);const e=this.viewpoint;Wh(e,e,t),this.viewpoint=e}get scale(){return this.ready?(this.state.commitProperty("id"),this.state.scale):this._get("scale")}set scale(t){if(!t||isNaN(t))return;if(!this.ready){this._set("scale",t),this._set("zoom",void 0);const i=this._get("extent");return void(i&&(this._set("extent",void 0),this._set("center",i.center)))}const e=this.viewpoint;Ms(e,e,t),this.viewpoint=e}get viewpoint(){return this.ready?this.state.paddedViewState.viewpoint.clone():this._get("viewpoint")}set viewpoint(t){var s;if(t==null)return;if(!this.ready)return this._set("viewpoint",t),this._set("extent",void 0),this._set("center",void 0),this._set("zoom",void 0),void this._set("scale",void 0);let e,i;try{e=this._project(t,this.state.spatialReference),!t.scale||isNaN(t.scale)?i=new k("mapview:invalid-viewpoint",`invalid scale value of ${t.scale}`):t.targetGeometry==null&&(i=new k("mapview:invalid-viewpoint","geometry not defined"))}catch(o){i=new k("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:o})}if(i)return void P.getLogger(this).error(i);this._scaleBeforeChangingSpatialReference=null;const n=new ot({targetGeometry:new F,scale:0,rotation:0});W(n,e),(s=this.constraints)==null||s.constrain(n,this.state.paddedViewState.viewpoint),this.state.viewpoint=n,this._set("viewpoint",n)}get visibleArea(){return this.ready?this.state.visibleArea:null}get zoom(){var t;return this.ready?((t=this.constraints)==null?void 0:t.scaleToZoom(this.scale))??-1:this._get("zoom")}set zoom(t){var n,s;if(!(t>=0))return;if(!this.ready){this._set("zoom",t),this._set("scale",void 0);const o=this._get("extent");return void(o&&(this._set("extent",void 0),this._set("center",o.center)))}const e=((n=this.constraints)==null?void 0:n.zoomToScale(t))??0;if(!e)return void this._set("zoom",-1);const i=this.viewpoint;Ms(i,i,e),this.viewpoint=i,this._set("zoom",((s=this.constraints)==null?void 0:s.scaleToZoom(this.scale))??-1)}getUserStartupOptions(t){if(!t[0]&&!t[1])return{center:void 0,rotation:void 0,scale:void 0};const{padding:e,constraints:i}=this,n=this._get("center"),s=this._get("extent"),o=this._get("scale"),a=this._get("rotation"),h=this._get("viewpoint"),c=this._get("zoom"),p=c!=null&&i!=null&&i.zoomToScale(c)||void 0;let u,d,m;const g=h==null?void 0:h.rotation,f=h==null?void 0:h.targetGeometry;(f==null?void 0:f.type)==="extent"?u=f:(f==null?void 0:f.type)==="point"&&(d=f,m=h==null?void 0:h.scale);const _=s??u;return{center:n??d??(_==null?void 0:_.center),rotation:a??g,scale:(o??p??m??(_&&zi(_,[t[0]-e.left-e.right,t[1]-e.top-e.bottom])))||void 0}}startup(t,e,i,n){var o;const s=t.targetGeometry;try{this._project(t,i)}catch(a){P.getLogger(this).warn(new Jn("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:s.toJSON(),spatialReference:i,error:a})),t.targetGeometry=n||new F({x:0,y:0,spatialReference:i})}(o=this.constraints)==null||o.fit(t),this._set("state",new $n({padding:this.padding,size:e,viewpoint:t})),this._set("ready",!0)}teardown(){this._set("ready",!1);const{center:[t,e],spatialReference:i,rotation:n,scale:s}=this.state.paddedViewState,o=new F({x:t,y:e,spatialReference:i});this._set("viewpoint",null),this._set("extent",null),this._set("center",o),this._set("zoom",-1),this._set("rotation",n),this._set("scale",s),this._set("state",null)}changeSpatialReference(t){var h;const e=this.state.paddedViewState.clone();if(this._scaleBeforeChangingSpatialReference==null)this._scaleBeforeChangingSpatialReference=e.scale;else{const c=e.viewpoint.clone();c.scale=this._scaleBeforeChangingSpatialReference,e.viewpoint=c}const i=e.clone(),[n,s]=e.center;let o=null;try{o=this._project(new F({x:n,y:s,spatialReference:e.spatialReference}),t)}catch(c){ar()||P.getLogger(this).warn(new Jn("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:o==null?void 0:o.toJSON(),spatialReference:t,error:c}))}o||(o=new F({x:0,y:0,spatialReference:t}));const a=vn(new ot({targetGeometry:new F,scale:0,rotation:0}),e.viewpoint,o);i.viewpoint=a;try{const c=[e.size[0]/2,e.size[1]/2],p=[c[0]+20,c[1]],u=e.toMap([0,0],p),{x:d,y:m}=this._project(new F({x:u[0],y:u[1],spatialReference:e.spatialReference}),t);u[0]=d,u[1]=m,i.toScreen(u,u);const g=Hh(c,u,p),f=Math.hypot(u[0]-c[0],u[1]-c[1])/20;!Number.isFinite(f)||Math.abs(f)>4?(a.rotation=0,a.targetGeometry=new F({x:0,y:0,spatialReference:t})):(a.scale*=f,a.scale>q("mapview-srswitch-adjust-rotation-scale-threshold")?a.rotation=0:a.rotation+=Number.isFinite(g)?g:0)}catch{}(h=this._get("constraints"))==null||h.constrain(a,void 0),this._get("state").viewpoint=a}resize(t,e){var o;if(!this.ready)return;const i=this.state;let n=this.state.paddedViewState.viewpoint;const s=this.state.paddedViewState.size.slice();i.size=[t,e],qh(n,n,s,this.state.paddedViewState.size,this.resizeAlign),n=((o=this.constraints)==null?void 0:o.constrain(n,void 0))??n,this.state.viewpoint=n}toMap(t){if(!this.ready)return null;const e=[0,0],[i,n]=this.state.toMap(e,[t.x,t.y]),s=this.state.spatialReference;return new F({x:i,y:n,spatialReference:s})}toScreen(t,e){if(!this.ready)return null;const i=this._project(t,this.state.spatialReference),n=[i.x,i.y];return(e==null?void 0:e.pickClosestTarget)===!1||this.state.paddedViewState.wrapMapCoordinate(n,n),this.state.toScreen(n,n),K(n[0],n[1])}_project(t,e){var s;const i=(t==null?void 0:t.targetGeometry)||t;if(!e)return t;if(!i)return null;if(e.imageCoordinateSystem||(s=i.spatialReference)!=null&&s.imageCoordinateSystem||Pi(e,i.spatialReference))return t;const n=Ei(i,e);if(!n)throw new k("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:i,spatialReference:e});return Jh(t)?(t.targetGeometry=n,t):n}};function Jh(t){return(t==null?void 0:t.declaredClass)==="esri.Viewpoint"}r([l({type:F})],Z.prototype,"center",null),r([l()],Z.prototype,"constraints",void 0),r([l({type:Kt})],Z.prototype,"extent",null),r([l({value:{top:0,right:0,bottom:0,left:0},cast:t=>({top:0,right:0,bottom:0,left:0,...t})})],Z.prototype,"padding",null),r([l()],Z.prototype,"ready",void 0),r([l()],Z.prototype,"resizeAlign",void 0),r([l({readOnly:!0})],Z.prototype,"resolution",null),r([l({type:Number})],Z.prototype,"rotation",null),r([l({type:Number})],Z.prototype,"scale",null),r([l({readOnly:!0})],Z.prototype,"state",void 0),r([l({type:ot})],Z.prototype,"viewpoint",null),r([l({readOnly:!0})],Z.prototype,"visibleArea",null),r([l()],Z.prototype,"zoom",null),Z=r([v("esri.views.2d.ViewStateManager")],Z);const Ss=160;let Ve=class extends S{constructor(){super(...arguments),this._timer=void 0}get stationary(){return!this._timer}flip(){this._timestamp=performance.now(),this._timer==null&&(this._timer=setInterval(()=>{performance.now()-this._timestamp>=Ss&&this.clear()},Ss))}clear(){this._timer&&(clearInterval(this._timer),this._timer=void 0)}};r([l()],Ve.prototype,"_timer",void 0),r([l()],Ve.prototype,"stationary",null),Ve=r([v("esri.views.2d.support.StationaryManager")],Ve);const tc=t=>{const e=t;let i=class extends e{constructor(...n){super(...n),this.fullOpacity=1,this.stateManager=new Z({constraints:new Ts({view:this})}),this.stationaryManager=new Ve,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!1,labelsAnimationTime:0,labelCollisionsEnabled:!1},this.frameTask=new Kh(this),this.viewEvents=new Go(this),this.padding={top:0,right:0,bottom:0,left:0},this.addHandles([w(()=>this.viewpoint,()=>this.stationaryManager.flip(),Ie)])}get constraintsInfo(){return{lods:null,spatialReference:null}}get extent(){var n;return((n=this.stateManager)==null?void 0:n.extent)??null}set extent(n){this.stateManager.extent=n}get state(){return this.stateManager.state}get interacting(){return!1}get stationary(){return!this.animation&&this.stationaryManager.stationary}set animation(n){const s=this._get("animation");if(n===s)return;if(s&&s.stop(),n!==this.animationManager.animation&&this.animationManager.stop(),!n||n.isFulfilled())return void this._set("animation",null);this._set("animation",n);const o=()=>{var a;this.destroyed||n===this._get("animation")&&(this._set("animation",null),(a=this.frameTask)==null||a.requestFrame())};n.when(o,o)}get constraints(){var n;return(n=this.stateManager)==null?void 0:n.constraints}set constraints(n){n.view=this;const s=this.stateManager.constraints;this.stateManager.constraints=n,s==null||s.destroy()}get padding(){var n;return(n=this.stateManager)==null?void 0:n.padding}set padding(n){this.stateManager&&(this.stateManager.padding=n)}get resizeAlign(){return this.stateManager.resizeAlign}set resizeAlign(n){this.stateManager.resizeAlign=n}get rotation(){return this.stateManager.rotation??0}set rotation(n){const{rotationEnabled:s}=this.constraints;this.constraints.rotationEnabled=!0,this.stateManager.rotation=n,this.constraints.rotationEnabled=s}get viewpoint(){return this.stateManager.viewpoint??null}set viewpoint(n){this.stateManager.viewpoint=n,this.frameTask.requestFrame()}};return r([l({readOnly:!0})],i.prototype,"animationManager",void 0),r([l({readOnly:!0})],i.prototype,"fullOpacity",void 0),r([l()],i.prototype,"stateManager",void 0),r([l()],i.prototype,"constraintsInfo",null),r([l()],i.prototype,"extent",null),r([l({readOnly:!0})],i.prototype,"state",null),r([l({readOnly:!0})],i.prototype,"mapViewNavigation",void 0),r([l()],i.prototype,"renderingOptions",void 0),r([l({readOnly:!0})],i.prototype,"interacting",null),r([l()],i.prototype,"stationary",null),r([l()],i.prototype,"animation",null),r([l({type:Ts})],i.prototype,"constraints",null),r([l()],i.prototype,"padding",null),r([l()],i.prototype,"resizeAlign",null),r([l()],i.prototype,"rotation",null),r([l({readOnly:!0})],i.prototype,"viewEvents",void 0),r([l({type:ot})],i.prototype,"viewpoint",null),i=r([v("esri.views.Viewport2DBaseMixin")],i),i};var me;let le=(me=class extends To{constructor(e){super(e),this.state="running",this.target=null,this._resolver=null}initialize(){this._resolver=Le(),this.addResolvingPromise(this._resolver.promise)}get done(){return this.state==="finished"||this.state==="stopped"}stop(){var e;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),(e=this._resolver)==null||e.reject(new k("view:animation-stopped","ViewAnimation stopped")))}finish(){var e;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),(e=this._resolver)==null||e.resolve())}update(e,i){i||(i=So(e)?"waiting-for-target":"running"),this._set("target",e),this._set("state",i)}},me.state={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"},me);r([l({readOnly:!0})],le.prototype,"done",null),r([l({readOnly:!0,type:String})],le.prototype,"state",void 0),r([l()],le.prototype,"target",void 0),le=r([v("esri.views.ViewAnimation")],le);const Sn=le;let ai=class extends S{constructor(t){super(t),this._gotoTask=null}destroy(){this._gotoTask=null}async goTo(t,e){if(!t)return void P.getLogger(this).error("#goTo()","target cannot be null or undefined");const i=new Sn;this.view.animation=i,await Dn(()=>this.view.ready,e);const n={...e,animate:(e==null?void 0:e.animate)??(!_l()&&this.view.animationsEnabled),animationMode:(e==null?void 0:e.animationMode)??"auto"},{extent:s,spatialReference:o,size:a,viewpoint:h,constraints:c,padding:p,allLayerViews:u}=this.view,d=Eh(t,{extent:s,spatialReference:o,size:a,viewpoint:h,constraints:c,padding:p,allLayerViews:u,pickClosestTarget:(e==null?void 0:e.pickClosestTarget)??!0});return i==null||i.update(d),this._gotoTask={},n.animate?this._gotoAnimated(d,n):this._gotoImmediate(d,n)}_gotoImmediate(t,e){const i=this._gotoTask,n=this.view.animation,s=t.then(o=>{if(Ot(e),i!==this._gotoTask)throw new k("view:goto-interrupted","Goto was interrupted");this.view.viewpoint=n.target=o,n.finish()});return this._cancellableGoTo(i,n,s,e)}_gotoAnimated(t,e){const i=this._gotoTask,n=this.view.animation;if(!n)return Promise.resolve();const s=t.then(o=>{if(Ot(e),i!==this._gotoTask)throw new k("view:goto-interrupted","Goto was interrupted");return n.update(o),this.view.animationManager.animate(n,this.view.viewpoint,e),n.when().then(()=>{},()=>{})});return this._cancellableGoTo(i,n,s,e)}_cancellableGoTo(t,e,i,n){const s=()=>t===this._gotoTask;return or(i,n).finally(()=>{s()&&(e.done||e.stop())})}};r([l({constructOnly:!0})],ai.prototype,"view",void 0),ai=r([v("esri.views.2d.GoToManager")],ai);function oa(t,e){switch(e){case"primary":return t.pointerType==="touch"||t.button===0;case"secondary":return t.pointerType!=="touch"&&t.button===2;case"tertiary":return t.pointerType!=="touch"&&t.button===1}}function aa(t,e){return e.some(i=>oa(t,i))}function ks(t,{dragPrimary:e,dragSecondary:i,dragTertiary:n}){return[{key:"primary",value:e},{key:"secondary",value:i},{key:"tertiary",value:n}].filter(s=>s.value===t).map(s=>s.key)}let Ps=class extends H{constructor(t,e){super(!0),this._view=t,this.registerIncoming("double-click",e,i=>this._handleDoubleClick(i,e))}_handleDoubleClick(t,e){oa(t.data,"primary")&&(t.stopPropagation(),e?this._view.mapViewNavigation.zoomOut([t.data.x,t.data.y]):this._view.mapViewNavigation.zoomIn([t.data.x,t.data.y]))}},ec=class extends H{constructor(t,e,i){super(!0),this.view=t,this.pointerType=e,this.registerIncoming("double-tap-drag",i,n=>this._handleDoubleTapDrag(n))}_handleDoubleTapDrag(t){const{data:e}=t,{pointerType:i}=e;if(i!==this.pointerType)return;t.stopPropagation();const{action:n,delta:s}=e,{view:o}=this,{mapViewNavigation:a}=o;switch(n){case"begin":{const{scale:h}=o;this._startScale=h,this._currentScale=h,this._previousDelta=s,a.begin();break}case"update":{if(this._previousDelta.y===s.y)return;this._previousDelta=s;const h=1.015**s.y,c=this._startScale*h,p=c/this._currentScale;a.setViewpointImmediate(p),this._currentScale=c;break}case"end":{const{constraints:h}=o,{effectiveLODs:c,snapToZoom:p}=h;if(!p||!c)return void a.end();const u=h.snapScale(this._currentScale),d=(s.y>0?Math.max(u,h.snapToPreviousScale(this._startScale)):Math.min(u,h.snapToNextScale(this._startScale)))/this._currentScale;a.zoom(d).then(()=>{a.end()});break}}}},Ni=class{constructor(t){this._callbacks=t,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(t){const e=t.data,i=e.pointers.size;switch(e.action){case"start":this._currentCount=i,this._emitStart(t);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=i,this._emitStart(t);break;case"update":this._emitUpdate(t);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=i,this._emitStart(t);break;case"end":this._emitEnd(t),this._currentCount=0}this._previousEvent=t}_emitStart(t){var e,i;this._startEvent=t,(i=(e=this._callbacks).condition)!=null&&i.call(e,this._currentCount,t)&&this._callbacks.start(this._currentCount,t,this._startEvent)}_emitUpdate(t){var e,i;(i=(e=this._callbacks).condition)!=null&&i.call(e,this._currentCount,t)&&this._callbacks.update(this._currentCount,t,this._startEvent)}_emitEnd(t){var e,i;(i=(e=this._callbacks).condition)!=null&&i.call(e,this._currentCount,t)&&this._callbacks.end(this._currentCount,t,this._startEvent),this._startEvent=null}},ic=class extends H{constructor(t,e,i){super(!0),this.view=t,this.pointerActions=e,this.registerIncoming("drag",i,n=>this._handleDrag(n)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(t){super.onInstall(t),this._dragEventSeparator=new Ni({start:(e,i)=>{this.view.mapViewNavigation.pan.begin(this.view,i.data),i.stopPropagation()},update:(e,i)=>{this.view.mapViewNavigation.pan.update(this.view,i.data),i.stopPropagation()},end:(e,i)=>{this.view.mapViewNavigation.pan.end(this.view,i.data),i.stopPropagation()},condition:(e,i)=>e===1&&aa(i.data,this.pointerActions)})}_handleDrag(t){const e=this.view.mapViewNavigation;e.pinch.zoomMomentum||e.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(t)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}},nc=class extends H{constructor(t,e,i){super(!0),this._view=t,this.pointerActions=e;const n=this._view.mapViewNavigation;this._dragEventSeparator=new Ni({start:(s,o)=>{n.rotate.begin(this._view,o.data),o.stopPropagation()},update:(s,o)=>{n.rotate.update(this._view,o.data),o.stopPropagation()},end:(s,o)=>{n.rotate.end(),o.stopPropagation()},condition:(s,o)=>s===1&&aa(o.data,this.pointerActions)}),this.registerIncoming("drag",i,s=>this._dragEventSeparator.handle(s))}};function lt(t){let e=t*t;return t<0&&(e*=-1),e}function sc(t){return t.translation[0]=0,t.translation[1]=0,t.translation[2]=0,t.heading=0,t.tilt=0,t}function oc(t,e,i){const n=i,s=t.state,o=t.device,a=e.tiltDirection==="forward-down"?1:-1,h=1;return o.deviceType==="standard"?(n.translation[0]=lt(s.axes[0]),n.translation[1]=lt(s.axes[1]),n.translation[2]=lt(s.buttons[7])-lt(s.buttons[6]),n.heading=lt(s.axes[2]),n.tilt=lt(s.axes[3])):o.deviceType==="spacemouse"&&(n.translation[0]=1.2*lt(s.axes[0]),n.translation[1]=1.2*lt(s.axes[1]),n.translation[2]=2*-lt(s.axes[2]),n.heading=1.2*lt(s.axes[5]),n.tilt=1.2*lt(s.axes[3])),n.tilt*=a,wl(n.translation,n.translation,h),n}function ac(t){return t.translation[0]===0&&t.translation[1]===0&&t.translation[2]===0&&t.heading===0&&t.tilt===0&&t.zoom===0}let rc=class extends H{constructor(t){super(!0),this._view=t,this._frameTask=null,this._watchHandles=new Po,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",e=>this._handleGamePadEvent(e)),this._handle.pause()}onInstall(t){super.onInstall(t),this._watchHandles.add([w(()=>{var e;return(e=this._view.navigation.gamepad)==null?void 0:e.enabled},e=>{e?(this._handle.resume(),this._frameTask||(this._frameTask=fe({update:i=>this._frameUpdate(i.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},G)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(t){var i;const e=this._view.navigation.gamepad.device;e&&t.data.device!==e||this._currentDevice&&this._currentDevice!==t.data.device||(t.data.action==="end"?(this._currentDevice=null,sc(this._transformation)):(this._currentDevice=t.data.device,oc(t.data,this._view.navigation.gamepad,this._transformation)),(i=this._frameTask)==null||i.resume())}_frameUpdate(t){var u;const e=this._transformation;if(ac(e))return void((u=this._frameTask)==null?void 0:u.pause());const i=this._view.viewpoint.clone(),n=this._view.navigation.gamepad.velocityFactor,s=hc*n*t;Fi(i,i,[e.translation[0]*s,-e.translation[1]*s]);const o=1+e.translation[2]*cc*t,a=this._view.constraints.rotationEnabled?-e.heading*lc*t:0,h=this._view.size,c=[h[0]/2,h[1]];ta(i,i,o,a,c,h);const p=this._view.constraints.constrain(i,this._view.viewpoint);this._view.viewpoint=p}};const lc=.06,hc=.7,cc=6e-4;function ra(t){const e=()=>t(document.visibilityState==="visible");return document.addEventListener("visibilitychange",e),ve(()=>document.removeEventListener("visibilitychange",e))}let pc=class extends H{constructor(t,e,i){super(!0),this.view=t,this.keys=e,this._isSticky=!1,this._pressedKeys=new Set,this._timeout=void 0,this._currentDirection=void 0,this._stickyKeyDuration=200,this._handleKey=n=>{const s=this._keyMap[n.data.key];if(n.modifiers.has("Meta")||n.modifiers.has("Control"))return void this._stopMovement();if(s==null)return;n.stopPropagation(),n.preventDefault();const o=n.type==="key-down";if(this._pressedKeys[o?"add":"delete"](s),o){if(this._direction===s)return;this._direction=s,this._isSticky=!1,this._setTimeout(()=>{this._isSticky&&this._handlePopKey()})}else{const a=this._timeout===void 0,h=this._pressedKeys.size>0;a||h?this._handlePopKey():this._isSticky=!0}},this._handlePopKey=()=>{this._direction=Array.from(this._pressedKeys).pop(),this._direction==null&&this._stopMovement()},this._stopMovement=()=>{this._isSticky=!1,this._direction=void 0,this._pressedKeys.clear(),this._setTimeout(void 0)},this._keyMap={[e.left]:"left",[e.right]:"right",[e.up]:"up",[e.down]:"down"},this.registerIncoming("key-down",i,this._handleKey),this.registerIncoming("key-up",i,this._handleKey),this.registerIncoming("blur",i,this._stopMovement),this._visibilityHandle=ra(n=>n?null:this._stopMovement())}onUninstall(){var t;this._stopMovement(),(t=this._visibilityHandle)==null||t.remove()}get _direction(){return this._currentDirection}set _direction(t){const e=this._currentDirection!=null;if(t!=null){if(e||this.view.mapViewNavigation.begin(),this._currentDirection!==t)switch(t){case"left":this.view.mapViewNavigation.continuousPanLeft();break;case"right":this.view.mapViewNavigation.continuousPanRight();break;case"up":this.view.mapViewNavigation.continuousPanUp();break;case"down":this.view.mapViewNavigation.continuousPanDown()}}else e&&this.view.mapViewNavigation.stop();this._currentDirection=t}_setTimeout(t){clearTimeout(this._timeout),this._timeout=t===void 0?void 0:setTimeout(()=>{this._timeout=void 0,t()},this._stickyKeyDuration)}},uc=class extends H{constructor(t,e,i){super(!0),this.view=t,this.keys=e,this._keyToDirection=new Map,this._pressed=!1,this._addKeysMapping(e),this.registerIncoming("key-down",i,n=>this._handleKeyDown(n)),this.registerIncoming("key-up",i,n=>this._handleKeyUp(n)),this.registerIncoming("blur",i,()=>this._handleStop()),this._visibilityHandle=ra(n=>n?null:this._handleStop())}onUninstall(){var t;(t=this._visibilityHandle)==null||t.remove(),this._handleStop()}_addKeysMapping(t){this._addKeyMapping(t.clockwise,"clockwise"),this._addKeyMapping(t.counterClockwise,"counterClockwise"),this._addKeyMapping(t.reset,"reset")}_addKeyMapping(t,e){for(const i of t)this._keyToDirection.set(i,e)}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleStop(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,e){const i=t.modifiers;if(i.size>0&&!i.has("Shift")||!this.view.constraints.rotationEnabled)return;const n=this._keyToDirection.get(t.data.key);if(this._pressed=n!=null,this._pressed){if(t.preventDefault(),e)switch(this.view.mapViewNavigation.begin(),n){case"clockwise":this.view.mapViewNavigation.continuousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continuousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}},dc=class extends H{constructor(t,e,i){super(!0),this.view=t,this.keys=e,this._keysToZoomAction={},this.registerIncoming("key-down",i,n=>this._handleKeyDown(n)),e.zoomIn.forEach(n=>this._keysToZoomAction[n]=0),e.zoomOut.forEach(n=>this._keysToZoomAction[n]=1)}_handleKeyDown(t){this._handleKey(t)}_handleKey(t){const e=t.modifiers;if(e.size>0&&!e.has("Shift"))return;const{key:i}=t.data;if(!(i in this._keysToZoomAction))return;const n=this._keysToZoomAction[i],{mapViewNavigation:s}=this.view;let o=null;switch(n){case 0:o=s.zoomIn();break;case 1:o=s.zoomOut();break;default:return}s.begin(),o.then(()=>s.end()),t.stopPropagation()}};const mc=.6;let gc=class extends H{constructor(t,e){super(!0),this._view=t,this._canZoom=!0,this.registerIncoming("mouse-wheel",e,i=>this._handleMouseWheel(i))}_handleMouseWheel(t){if(this._view.navigation.actionMap.mouseWheel!=="zoom"||(t.preventDefault(),t.stopPropagation(),!this._canZoom))return;const e=this._view.mapViewNavigation,{x:i,y:n,deltaY:s}=t.data,o=1/mc**(1/60*s),a=e.zoom(o,[i,n]);this._canZoom=!1,a.catch(()=>{}).then(()=>{this._canZoom=!0,e.end()})}},fc=class extends H{constructor(t){super(!0),this.view=t,this.registerIncoming("drag",i=>this._handleDrag(i)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const e=this.view.mapViewNavigation;this._dragEventSeparator=new Ni({start:(i,n)=>{e.pinch.begin(this.view,n.data),n.stopPropagation()},update:(i,n)=>{e.pinch.update(this.view,n.data),n.stopPropagation()},end:(i,n)=>{e.pinch.end(this.view),n.stopPropagation()},condition:i=>i>=2})}_handleDrag(t){this._dragEventSeparator.handle(t)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}};function Cs(t){const e=t.native;return e?{buttons:e.buttons.map(i=>i.pressed?i.value||1:0),axes:e.axes.map(i=>_c(i,t.axisThreshold))}:{buttons:[],axes:[]}}function yc(t,e){if(t.axes.length!==e.axes.length||t.buttons.length!==e.buttons.length)return!1;for(let i=0;i<t.axes.length;i++)if(t.axes[i]!==e.axes[i])return!1;for(let i=0;i<t.buttons.length;i++)if(t.buttons[i]!==e.buttons[i])return!1;return!0}function vc(t){for(let e=0;e<t.axes.length;e++)if(t.axes[e]!==0)return!1;for(let e=0;e<t.buttons.length;e++)if(t.buttons[e]!==0)return!1;return!0}function _c(t,e){const i=Math.abs(t);return i<e?0:Math.sign(t)*(i-e)/(1-e)}let wc=class{constructor(t,e){this._element=t,this._input=e,this._hasEventListeners=!1,this._onConnectGamepad=s=>{this._connectGamepad(s.gamepad)},this._onDisconnectGamepad=s=>{const o=s.gamepad,a=o.index,h=this._inputDevices[a];h&&(this._emitGamepadEvent(o,Cs(h),!1),this._inputDevices.splice(a,1),this._latestUpdate.splice(a,1),this._input.gamepad.devices.remove(h),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const i="getGamepads"in window.navigator,n=window.isSecureContext;this.supported=i&&n,this.supported&&(Vs(s=>this._connectGamepad(s)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(t){this._hasEventListeners!==t&&(this._hasEventListeners=t,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(t){this._callback=t}_connectGamepad(t){const e=new Fn(t);e.deviceType!=="unknown"&&(this._inputDevices[t.index]=e,this._input.gamepad.devices.add(e)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=fe({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const t=document.hasFocus(),e=this._element.contains(document.activeElement),i=this._input.gamepad.enabledFocusMode==="document"&&!t||this._input.gamepad.enabledFocusMode==="view"&&!e;Vs(n=>{const s=this._inputDevices[n.index];if(!s)return;const o=this._latestUpdate[n.index],a=Cs(s),h=i||vc(a);o&&(o.timestamp===n.timestamp||!o.active&&h||yc(o.state,a))||this._emitGamepadEvent(n,a,!h)})}_emitGamepadEvent(t,e,i){const n=this._latestUpdate[t.index],s=n&&n.active;if(!s&&!i)return;const o=!s&&i?"start":s&&i?"update":"end";this._latestUpdate[t.index]={timestamp:t.timestamp,state:e,active:i},this._callback&&this._callback({device:this._inputDevices[t.index],state:e,action:o})}};function bc(t){if(!t||!t.connected)return!1;for(let e=0;e<t.axes.length;e++)if(isNaN(t.axes[e]))return!1;return!0}function Vs(t){for(const e of navigator.getGamepads())bc(e)&&t(e)}const Es=q("edge"),Mc=q("chrome"),xc=q("ff"),Tc=q("safari"),Rs="esri-view-surface",te={touchNone:`${Rs}--touch-none`,touchPan:`${Rs}--touch-pan`};var Ut;let Sc=(Ut=class{constructor(e,i){this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=e,e.getAttribute("tabindex")||e.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new wc(e,i),this._gamepadSource.onEvent=n=>this._callback("gamepad",n)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach(e=>this._releasePointerCaptureSafe(e)),this._activePointerCaptures.clear(),this._gamepadSource=nt(this._gamepadSource),this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(e){this._browserTouchPanningEnabled=e,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(e){this._callback=e}set activeEvents(e){for(const i in this._active)if(!e||!e.has(i)){const n=this._active[i];this._element.removeEventListener(Qi[i],n),delete this._active[i]}e&&e.forEach(i=>{if(!this._active[i]&&Qi[i]){const n=(this._eventHandlers[i]||this._handleDefault).bind(this,i);this._element.addEventListener(Qi[i],n),this._active[i]=n}}),this._gamepadSource&&(this._gamepadSource.hasEventListeners=(e==null?void 0:e.has("gamepad"))??!1)}setPointerCapture(e,i){i?this._setPointerCaptureSafe(e.pointerId):(this._releasePointerCaptureSafe(e.pointerId),this._activePointerCaptures.delete(e.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?te.touchNone:te.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?te.touchPan:te.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(te.touchNone),this._element.classList.remove(te.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_setPointerCaptureSafe(e){try{this._element.setPointerCapture(e),this._activePointerCaptures.add(e)}catch{}}_releasePointerCaptureSafe(e){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(e))return;this._element.releasePointerCapture(e)}catch{}}_updateNormalizedPointerLikeEvent(e,i){const n=nl(this._element,e);return Ut.test.disableSubpixelCoordinates&&(n.x=Math.round(n.x),n.y=Math.round(n.y)),i.x=n.x,i.y=n.y,i}_handleKey(e,i){const{key:n}=i;n&&e==="key-up"&&this._keyDownState.delete(n);const s={native:i,key:n,repeat:!!n&&this._keyDownState.has(n)};n&&e==="key-down"&&this._keyDownState.add(s.key),this._callback(e,s)}_handlePointer(e,i){const n=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});this._callback(e,n)}_handlePointerPreventDefault(e,i){const n=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});i.preventDefault(),this._callback(e,n)}_getDeltaFromTrackpadOrMouseWheel(e){return e.shiftKey&&q("mac")&&e.deltaY===0?e.deltaX:e.deltaY}_handleMouseWheel(e,i){let n=this._getDeltaFromTrackpadOrMouseWheel(i);switch(i.deltaMode){case 0:Es&&(n=n/document.documentElement.clientHeight*600);break;case 1:n*=30;break;case 2:n*=900}Es?n*=.7:Mc||Tc?n*=.6:xc&&(n*=1.375);const s=100,o=Math.abs(n);o>s&&(n=n/o*200/(1+Math.exp(-.02*(o-s))));const a=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,deltaY:n});this._callback(e,a)}_handlePointerCaptureLost(e,i){this._activePointerCaptures.delete(i.pointerId),this._handleDefault(e,i)}_handleDefault(e,i){const n={native:i};i.preventDefault(),this._callback(e,n)}_preventAltKeyDefault(e){e.key==="Alt"&&e.preventDefault()}_preventMultiTouchPanning(e){e.touches.length>1&&e.preventDefault()}},Ut.test={disableSubpixelCoordinates:!1},Ut);const Qi={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};let kc=class extends H{constructor(){super(!0),this.registerIncoming("context-menu",t=>t.data.native.preventDefault())}};const la=()=>({maximumClickDelay:300}),Pc=(t={})=>({...la(),movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500,...t}),Gn=(t={})=>({...la(),maximumDoubleClickDistance:10,maximumDoubleTouchDistance:35,maximumDoubleClickDelay:250,maximumDoubleTouchDelay:350,...t});function mi(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)}function Cc(t,e){const i=e.x-t.x,n=e.y-t.y;return Math.sqrt(i*i+n*n)}function Vc(t,e){if(e?(e.radius=0,e.center.x=0,e.center.y=0):e={radius:0,center:K()},t.length===0)return e;if(t.length===1)return e.center.x=t[0].x,e.center.y=t[0].y,e;if(t.length===2){const[M,x]=t,[D,L]=[x.x-M.x,x.y-M.y];return e.radius=Math.sqrt(D*D+L*L)/2,e.center.x=(M.x+x.x)/2,e.center.y=(M.y+x.y)/2,e}let i=0,n=0;for(let M=0;M<t.length;M++)i+=t[M].x,n+=t[M].y;i/=t.length,n/=t.length;const s=t.map(M=>M.x-i),o=t.map(M=>M.y-n);let a=0,h=0,c=0,p=0,u=0,d=0,m=0;for(let M=0;M<s.length;M++){const x=s[M],D=o[M],L=x*x,mt=D*D;a+=L,h+=mt,c+=x*D,p+=L*x,u+=mt*D,d+=x*mt,m+=D*L}const g=.5*(p+d),f=.5*(u+m),_=a*h-c*c,C=(g*h-f*c)/_,z=(a*f-c*g)/_,O=K(C+i,z+n);return{radius:Math.sqrt(C*C+z*z+(a+h)/t.length),center:O}}function jt(t){const{native:e}=t,{pointerId:i,button:n,pointerType:s}=e;return s==="mouse"?`${i}:${n}`:`${s}`}let Ec=class extends H{constructor(t={},e=ze){super(!1),this._clock=e,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=K(0,0),this._pointerState=new Map,this._parameters=Gn(t),this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new Ni({start:(i,n)=>this._dragStart(i,n),update:(i,n)=>this._dragUpdate(n),end:(i,n)=>this._dragEnd(n)}),this.registerIncoming("drag",i=>this._dragEventSeparator.handle(i)),this.registerIncoming("pointer-down",i=>this._handlePointerDown(i)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(t=>{t.doubleTapTimeout=et(t.doubleTapTimeout)})}get hasPendingInputs(){for(const t of this._pointerState.values())if(t.doubleTapTimeout!=null)return!0;return!1}_clearPointerDown(t){const e=this._pointerState.get(t);e&&(e.doubleTapTimeout=et(e.doubleTapTimeout),this._pointerState.delete(t),this.refreshHasPendingInputs())}_dragStart(t,e){if(!this._doubleTapDragReady||t!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:i,modifiers:n}=e,{center:s}=i;this._dragStartCenter=s;const o=Xi("begin",K(0,0),i);this._doubleTapDrag.emit(o,void 0,n),e.stopPropagation()}_dragUpdate(t){if(!this._doubleTapDragActive)return;const{data:e,modifiers:i}=t,{center:n}=e,s=Xi("update",K(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),e);this._doubleTapDrag.emit(s,void 0,i),t.stopPropagation()}_dragEnd(t){if(!this._doubleTapDragActive)return;const{data:e,modifiers:i}=t,{center:n}=e,s=Xi("end",K(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),e);this._doubleTapDrag.emit(s,void 0,i),this._doubleTapDragActive=!1,t.stopPropagation()}_handlePointerDown(t){const{data:e}=t,i=jt(e),n=this._pointerState.get(i),{pointerType:s}=e.native;if(n){const o=s==="touch"?this._parameters.maximumDoubleTouchDistance:this._parameters.maximumDoubleClickDistance;this._clearPointerDown(i),mi(n.event.data,e)>o?this._storePointerDown(t):this._doubleTapDragReady=!0}else this._storePointerDown(t)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(t){const{data:e}=t,{pointerType:i}=e.native,n=jt(e),s=i==="touch"?this._parameters.maximumDoubleTouchDelay:this._parameters.maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._clearPointerDown(n),s);this._pointerState.set(n,{event:t,doubleTapTimeout:o}),this.refreshHasPendingInputs()}};function Xi(t,e,i){const{button:n,buttons:s,pointer:o,pointers:a,pointerType:h,timestamp:c}=i;return{action:t,delta:e,button:n,buttons:s,pointer:o,pointers:a,pointerType:h,timestamp:c}}let Rc=class extends H{constructor(t){super(!1),this._navigationTouch=t,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(t,e,i,n){return{action:t,pointerType:this._pointerType,button:this._mouseButton,buttons:e.buttons,timestamp:n,pointers:Ic(this._activePointerMap),pointer:e,angle:i.angle,radius:i.radius,center:i.center}}_addPointer(t){const e=t.native.pointerId,i=Ye(this._activePointerMap).angle,n={event:t,initialAngle:0,lastAngle:0};this._activePointerMap.set(e,n);const s=ri(n,ha(this._activePointerMap));n.initialAngle=s,n.lastAngle=s,this._updatePointerAngles(i)}_updatePointer(t){if(t&&t.x==null&&t.y==null)return;const e=t.native.pointerId,i=this._activePointerMap.get(e);i?i.event=t:this._addPointer(t)}_removePointer(t){const e=Ye(this._activePointerMap).angle;this._activePointerMap.delete(t),this._updatePointerAngles(e)}_updatePointerAngles(t){const e=Ye(this._activePointerMap);this._activePointerMap.forEach(i=>{i.initialAngle=ri(i,e)-t,i.lastAngle=ri(i,e)-t})}_emitEvent(t,e,i){const n=Ye(this._activePointerMap);this._drag.emit(this._createPayload(t,e,n,i),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(t){const e=t.data.native.pointerId,i=st(t.timestamp);this._activePointerMap.get(e)&&(this._activePointerMap.size===1?(this._updatePointer(t.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",t.data,i),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(e)):(this._removePointer(e),this._emitEvent("removed",t.data,st(t.timestamp))))}_handlePointerDrag(t){const e=t.data,i=e.currentEvent,n=st(t.timestamp);switch(e.action){case"start":case"update":this._isDragging?this._activePointerMap.has(i.native.pointerId)?(this._updatePointer(i),!this._isCurrentDragSuppressed&&this._emitEvent("update",i,n)):(this._addPointer(i),this._emitEvent("added",i,n),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(i),this._pointerType=t.data.startEvent.pointerType,this._mouseButton=t.data.startEvent.button,this._startStateModifiers=t.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",i,n))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}};function ha(t){const e=[];return t.forEach(i=>{e.push(K(i.event.x,i.event.y))}),Vc(e)}function Ye(t){const e=ha(t);let i=0;return t.forEach(n=>{let s=ri(n,e),o=s-n.lastAngle;for(;o>Math.PI;)o-=2*Math.PI;for(;o<-Math.PI;)o+=2*Math.PI;s=n.lastAngle+o,n.lastAngle=s;const a=s-n.initialAngle;i+=a}),i/=t.size||1,{angle:i,radius:e.radius,center:e.center}}function Ic(t){const e=new Map;return t.forEach((i,n)=>e.set(n,i.event)),e}function ri(t,e){const i=t.event,n=i.x-e.center.x,s=i.y-e.center.y;return Math.atan2(s,n)}let Dc=class extends H{constructor(t={},e=ze){super(!1),this._clock=e,this._pointerState=new Map,this._parameters=Gn(t),this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(t=>{t.immediateDoubleClick&&t.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(t){const e=t.data,i=jt(e);if(!this._pointerState.has(i)){const n={downButton:e.native.button,x:e.x,y:e.y,immediateDoubleClick:null};this._pointerState.set(i,n),this.startCapturingPointer(e.native)}}_handlePointerUp(t){const e=t.data,i=jt(e),n=this._pointerState.get(i);if(n&&n.downButton===e.native.button){const s=n.immediateDoubleClick,o=t.data.native.pointerType==="touch"?this._parameters.maximumDoubleTouchDistance:this._parameters.maximumDoubleClickDistance;s?(s.timeoutHandle.remove(),mi(s,t.data)>o?this._startImmediateDoubleClick(t,n):(this._immediateDoubleClick.emit(t.data,void 0,s.modifiers),this._removeState(e))):mi(n,t.data)>o?this._removeState(e):this._startImmediateDoubleClick(t,n)}}_startImmediateDoubleClick(t,e){const i=t.data.native.pointerType==="touch"?this._parameters.maximumDoubleTouchDelay:this._parameters.maximumDoubleClickDelay;e.immediateDoubleClick={x:t.data.x,y:t.data.y,modifiers:t.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(t.data),i)}}_removeState(t){const e=jt(t);this._pointerState.delete(e),this.stopCapturingPointer(t.native),this.refreshHasPendingInputs()}},Oc=class extends H{constructor(t={},e=ze){super(!1),this._clock=e,this._pointerState=new Map,this._parameters=Pc(t),this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",i=>this._handlePointerDown(i)),this.registerIncoming("pointer-up",i=>this._handlePointerLoss(i,"pointer-up")),this.registerIncoming("pointer-capture-lost",i=>this._handlePointerLoss(i,"pointer-capture-lost")),this.registerIncoming("pointer-cancel",i=>this._handlePointerLoss(i,"pointer-cancel")),this._moveHandle=this.registerIncoming("pointer-move",i=>this._handlePointerMove(i)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(t=>{t.holdTimeout=et(t.holdTimeout)}),super.onUninstall()}_handlePointerDown(t){const e=t.data,i=e.native.pointerId;let n=null;this._pointerState.size===0&&(n=this._clock.setTimeout(()=>{const o=this._pointerState.get(i);if(o){if(!o.isDragging){const a=o.previousEvent;this._pointerHold.emit(a,void 0,t.modifiers),o.holdEmitted=!0}o.holdTimeout=null}},this._parameters.holdDelay));const s={startEvent:e,previousEvent:e,startTimestamp:t.timestamp,isDragging:!1,downButton:e.native.button,holdTimeout:n,modifiers:new Set};this._pointerState.set(i,s),this.startCapturingPointer(e.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(t)}_handlePointerMove(t){const e=t.data,i=e.native.pointerId,n=this._pointerState.get(i);n&&(n.isDragging?this._pointerDrag.emit(Qe("update",n,e),void 0,n.modifiers):Cc(e,n.startEvent)>this._getDragThreshold(e.native.pointerType)&&this._startDragging(t),n.previousEvent=e)}_getDragThreshold(t){switch(t){case"touch":return this._parameters.movementUntilTouchDrag;case"pen":return this._parameters.movementUntilPenDrag;default:return this._parameters.movementUntilMouseDrag}}_startDragging(t){const e=t.data,i=e.native.pointerId;this._pointerState.forEach(n=>{n.holdTimeout!=null&&(n.holdTimeout.remove(),n.holdTimeout=null),n.isDragging||(n.modifiers=t.modifiers,n.isDragging=!0,i===n.startEvent.native.pointerId?this._pointerDrag.emit(Qe("start",n,e)):this._pointerDrag.emit(Qe("start",n,n.previousEvent),t.timestamp))})}_handlePointerLoss(t,e){const i=t.data,n=i.native.pointerId,s=this._pointerState.get(n);s&&(s.holdTimeout!=null&&(s.holdTimeout.remove(),s.holdTimeout=null),s.isDragging?this._pointerDrag.emit(Qe("end",s,e==="pointer-up"?i:s.previousEvent),void 0,s.modifiers):e==="pointer-up"&&s.downButton===i.native.button&&t.timestamp-s.startTimestamp<=this._parameters.maximumClickDelay&&!s.holdEmitted&&this._immediateClick.emit(i),this._pointerState.delete(n),this.stopCapturingPointer(i.native),this._pointerState.size===0&&this._moveHandle.pause())}};function Qe(t,e,i){return{action:t,startEvent:e.startEvent,previousEvent:e.previousEvent,currentEvent:i}}let Ac=class extends H{constructor(t={},e=ze){super(!1),this._clock=e,this._pointerState=new Map,this._parameters=Gn(t),this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",i=>this._handleImmediateClick(i)),this.registerIncoming("pointer-down",i=>this._handlePointerDown(i))}onUninstall(){this._pointerState.forEach(t=>t.doubleClickTimer=et(t.doubleClickTimer))}get hasPendingInputs(){for(const t of this._pointerState.values())if(t.doubleClickTimer!=null)return!0;return!1}_clearDoubleClickTimer(t,e){const i=this._pointerState.get(t);i&&(i.doubleClickTimer=et(i.doubleClickTimer),e&&this._click.emit(i.event.data,void 0,i.event.modifiers),this._pointerState.delete(t),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(t){const e=this._pointerState.get(t);e.pointerDownCount===1&&this._click.emit(e.event.data,void 0,e.event.modifiers),e.doubleClickTimer=null,this._pointerState.delete(t),this.refreshHasPendingInputs()}_handleImmediateClick(t){const e=t.data,{pointerType:i}=e.native,n=Lc(e);if(!this._pointerState.has(n))return void this._startClick(t);const s=this._pointerState.get(n),{data:o,modifiers:a}=s.event,h=i==="touch"?this._parameters.maximumDoubleTouchDistance:this._parameters.maximumDoubleClickDistance;mi(o,e)>h?(this._clearDoubleClickTimer(n,!0),this._startClick(t)):(this._clearDoubleClickTimer(n,!1),s.pointerDownCount===2&&this._doubleClick.emit(o,void 0,a))}_handlePointerDown(t){const e=jt(t.data),i=this._pointerState.get(e);i&&(i.pointerDownCount+=1)}_startClick(t){const{data:e}=t,{native:{pointerType:i}}=e,n=jt(e),s=i==="touch"?this._parameters.maximumDoubleTouchDelay:this._parameters.maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(n),s);this._pointerState.set(n,{event:t,doubleClickTimer:o,pointerDownCount:1}),this.refreshHasPendingInputs()}};function Lc(t){const{pointerId:e,pointerType:i,button:n}=t.native;return i==="mouse"?`${e}:${n}`:`${i}`}const Xe={counter:"Control",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwise:["a","A"],counterClockwise:["d","D"],reset:["n","N"]}},Is=Symbol("handles");let he=class extends S{initialize(){const t=()=>{var e;return(e=this.view)==null?void 0:e.ready};this.addHandles([Bt(()=>!t(),()=>this._disconnect()),Bt(t,()=>this._connect())])}destroy(){this._disconnect()}get latestPointerInfo(){var t;return(t=this._inputManager)==null?void 0:t.latestPointerInfo}get multiTouchActive(){var t;return((t=this._inputManager)==null?void 0:t.multiTouchActive)??!1}isModifierKeyDown(t){var e;return((e=this._inputManager)==null?void 0:e.isModifierKeyDown(t))??!1}_disconnect(){this.view.viewEvents.disconnect(),this.removeHandles(Is),this._inputManager=nt(this._inputManager)}_connect(){const t=this.view.surface,e=new Sc(t,this.view.input),i=[new Dc,new Oc,new Ac,new Rc(this.view.navigation),new Ec],n=new il({eventSource:e,recognizers:i}),s=new ic(this.view,["primary"]),o=new nc(this.view,["secondary"]);n.installHandlers("prevent-context-menu",[new kc],De.INTERNAL),n.installHandlers("navigation",[new fc(this.view),new rc(this.view),new gc(this.view),new Ps(this.view),new Ps(this.view,[Xe.counter]),s,new pc(this.view,Xe.pan),new dc(this.view,Xe.zoom),new uc(this.view,Xe.rotate),o,new ec(this.view,"touch")],De.INTERNAL),this.view.viewEvents.connect(n),this._source=e,this._inputManager=n,this.addHandles([w(()=>{var a,h;return(h=(a=this.view)==null?void 0:a.navigation)==null?void 0:h.browserTouchPanEnabled},a=>{this._source&&(this._source.browserTouchPanningEnabled=!a)},G),w(()=>{const{actionMap:a}=this.view.navigation;return{panActions:ks("pan",a),rotateActions:ks("rotate",a)}},({panActions:a,rotateActions:h})=>{s.pointerActions=a,o.pointerActions=h},tt)],Is)}get test(){}};r([l()],he.prototype,"view",void 0),r([l()],he.prototype,"latestPointerInfo",null),r([l()],he.prototype,"multiTouchActive",null),he=r([v("esri.views.2d.input.MapViewInputManager")],he);const zc=he,Fc=t=>{const e=t;let i=class extends e{constructor(...n){super(...n),this.goToManager=new ai({view:this}),this.animationsEnabled=!0,this.inputManager=new zc({view:this}),this.addHandles([this.on("resize",s=>this.stateManager.resize(s.width,s.height))])}get interacting(){return this.navigating}get stationary(){return!this.animation&&!this.navigating&&!this.resizing&&this.stationaryManager.stationary}on(n,s,o,a){return this.viewEvents.on(n,s,o,a)||super.on(n,s)}hasEventListener(n){return super.hasEventListener(n)||this.viewEvents.hasHandler(n)}goTo(n,s){return this.goToManager.goTo(n,s)}toMap(n){if(!this.ready)return null;const s=zo(n)?Fo(this,n):n;return this.stateManager.toMap(s)}};return r([l()],i.prototype,"goToManager",void 0),r([l({readOnly:!0})],i.prototype,"interacting",null),r([l()],i.prototype,"stationary",null),r([l()],i.prototype,"animationsEnabled",void 0),r([l({readOnly:!0})],i.prototype,"inputManager",void 0),i=r([v("esri.views.Viewport2DMixin")],i),i};let Ds=class{constructor(t){this._view=t,this.viewpoint=new ot({targetGeometry:new F,scale:0,rotation:0})}get view(){return this._view}get size(){const[t,e]=this._view.size;return Math.sqrt(t*t+e*e)}get scale(){return this.viewpoint.scale}get rotation(){return this.viewpoint.rotation}get center(){return this.viewpoint.targetGeometry}get scaleToResolutionFactor(){return Xo(this.center.spatialReference)}pixelsPerPanAtZoom(t){return 1/(t*this.scaleToResolutionFactor)}zoomAtPixelsPerPan(t){return 1/(t*this.scaleToResolutionFactor)}pixelsPerRotate(){return this.size/2}compareTo(t,e){e.pan=ur(this.center,t.center);let i=Math.abs(t.rotation-this.rotation);i=i>=180?360-i:i,e.rotate=ki(i),e.sourceZoom=this.scale,e.targetZoom=t.scale}interpolate(t,e,i){const{pan:n,rotate:s,zoom:o,zoomOffset:a}=i,{center:h}=this;h.spatialReference=t.center.spatialReference,h.x=We(t.center.x,e.center.x,n),h.y=We(t.center.y,e.center.y,n),this.viewpoint.scale=We(t.scale,e.scale+a,o);let c=t.rotation;const p=e.rotation;Math.abs(p-c)>=180&&(c+=360*(c<p?1:-1)),this.viewpoint.rotation=We(c,p,s)}copyFrom(t){W(this.viewpoint,t.viewpoint),this._view=t.view}};const Nc=t=>t,Ae=t=>t*t,gi=t=>1-Ae(1-t),Os=t=>t<.5?Ae(2*t)/2:(gi(2*(t-.5))+1)/2,fi=t=>t*t*t,kn=t=>1-fi(1-t),As=t=>t<.5?fi(2*t)/2:(kn(2*(t-.5))+1)/2,yi=t=>t*t*t*t,Pn=t=>1-yi(1-t),Ls=t=>t<.5?yi(2*t)/2:(Pn(2*(t-.5))+1)/2,vi=t=>t*t*t*t*t,Cn=t=>1-vi(1-t),zs=t=>t<.5?vi(2*t)/2:(Cn(2*(t-.5))+1)/2,_i=t=>1-Math.cos(t*Math.PI/2),Vn=t=>1-_i(1-t),Fs=t=>t<.5?_i(2*t)/2:(Vn(2*(t-.5))+1)/2,wi=t=>2**(10*(t-1)),bi=t=>1-wi(1-t),Ns=t=>t<.5?wi(2*t)/2:(bi(2*(t-.5))+1)/2,Mi=t=>-(Math.sqrt(1-t*t)-1),En=t=>1-Mi(1-t),Hs=t=>t<.5?Mi(2*t)/2:(En(2*(t-.5))+1)/2;function at(t){const e=2*(t-Math.sqrt((t-1)*t)),i=e/2/t;return n=>n<i?t*n*n:e*n-e+1}function rt(t,e){return(i,n)=>i<e?e*t(i/e,n):1-t((1-i)/(1-e),n)*(1-e)}const Zs=rt(at(1),1),qs=rt(at(1),0),xi=rt(at(1),.5),Ws=rt(at(2),1),$s=rt(at(2),0),Gs=rt(at(2),.5),js=rt(at(3),1),Us=rt(at(3),0),Bs=rt(at(3),.5),Ks=rt(at(4),1),Ys=rt(at(4),0),Qs=rt(at(4),.5),Xs={linear:Nc,"in-quad":Ae,"out-quad":gi,"in-out-quad":Os,"in-coast-quad":Zs,"out-coast-quad":qs,"in-out-coast-quad":xi,"in-cubic":fi,"out-cubic":kn,"in-out-cubic":As,"in-coast-cubic":Ws,"out-coast-cubic":$s,"in-out-coast-cubic":Gs,"in-quart":yi,"out-quart":Pn,"in-out-quart":Ls,"in-coast-quart":js,"out-coast-quart":Us,"in-out-coast-quart":Bs,"in-quint":vi,"out-quint":Cn,"in-out-quint":zs,"in-coast-quint":Ks,"out-coast-quint":Ys,"in-out-coast-quint":Qs,"in-sine":_i,"out-sine":Vn,"in-out-sine":Fs,"in-expo":wi,"out-expo":bi,"in-out-expo":Ns,"in-circ":Mi,"out-circ":En,"in-out-circ":Hs,"quad-in":Ae,"quad-out":gi,"quad-in-out":Os,"quad-in-coast":Zs,"quad-out-coast":qs,"quad-in-out-coast":xi,"cubic-in":fi,"cubic-out":kn,"cubic-in-out":As,"cubic-in-coast":Ws,"cubic-out-coast":$s,"cubic-in-out-coast":Gs,"quart-in":yi,"quart-out":Pn,"quart-in-out":Ls,"quart-in-coast":js,"quart-out-coast":Us,"quart-in-out-coast":Bs,"quint-in":vi,"quint-out":Cn,"quint-in-out":zs,"quint-in-coast":Ks,"quint-out-coast":Ys,"quint-in-out-coast":Qs,"sine-in":_i,"sine-out":Vn,"sine-in-out":Fs,"expo-in":wi,"expo-out":bi,"expo-in-out":Ns,"circ-in":Mi,"circ-out":En,"circ-in-out":Hs,ease:t=>je.ease(t),"ease-in":t=>je.easeIn(t),"ease-out":t=>je.easeOut(t),"ease-in-out":t=>je.easeInOut(t)};let Hc=class{constructor(){this.pan=0,this.rotate=0,this.fov=0,this.sourceZoom=0,this.targetZoom=0}};const Ti={desiredScreenFlow:2,minDuration:st(500),maxDuration:st(8e3)},ca={maxDuration:st(4e3)};let Zc=class pa{constructor(e){this._createCamera=e,this.compared=new Hc,this.segmentStart=0,this.segmentEnd=1,this.settings={desiredScreenFlow:Ti.desiredScreenFlow},this.source=e(),this.target=e()}clone(){const e=new pa(this._createCamera);return e.copyFrom(this),e}copyFrom(e){this.update(e.source,e.target,e.settings)}update(e,i,n){this.source!==e&&this.source.copyFrom(e),this.target!==i&&this.target.copyFrom(i),this.source.compareTo(this.target,this.compared),this.settings.desiredScreenFlow=n.desiredScreenFlow??Ti.desiredScreenFlow,this.desiredPixelFlow=this.settings.desiredScreenFlow*this.target.size,this.halfWindowSize=this.target.size/2}halfWindowPanAtZoom(e){const i=this.target.pixelsPerPanAtZoom(e);return this.halfWindowSize/i}get hasZoom(){return Math.abs(this.compared.sourceZoom-this.compared.targetZoom)>1e-5}get hasPan(){return this.compared.pan>Hi()}get hasFov(){return Math.abs(this.compared.fov)>Hi()}get hasRotate(){return this.compared.rotate>Hi()}},qc=class{constructor(){this.pan=0,this.rotate=0,this.zoom=0,this.fov=0,this.zoomOffset=0}},Wc=class{constructor(){this.segments=new Array}get time(){return this.segments.reduce((t,e)=>J(t+e.time),J(0))}interpolateComponentsAt(t,e){t=Math.min(Math.max(t,0),1),t*=this.time;let i=0,n=0;const s=this.definition,o=this.segments.reduce((a,h)=>a||h.definition.hasZoom,!1);for(let a=0;a<this.segments.length;a++){const h=this.segments[a],c=h.definition;if(t<=h.time||a===this.segments.length-1){if(this.segmentInterpolateComponentsAt(h,h.time===0?0:t/h.time,e),s.hasPan&&!isNaN(e.pan)&&isFinite(s.compared.pan)?e.pan=(i+c.compared.pan*e.pan)/s.compared.pan:e.pan=1,s.hasRotate&&!isNaN(e.rotate)&&isFinite(s.compared.rotate)?e.rotate=(n+c.compared.rotate*e.rotate)/s.compared.rotate:e.rotate=1,o&&!isNaN(e.zoom)&&isFinite(c.compared.targetZoom)){const{sourceZoom:p,targetZoom:u}=c.compared,d=e.zoom*(u-p)+p,m=this.segments[0].definition.compared.sourceZoom,g=this.segments[this.segments.length-1].definition.compared.targetZoom,f=Math.abs(u-m)>Math.abs(p-m)?u:p;e.zoomOffset=f-g,e.zoom=(d-m)/(f-m)}else e.zoom=1;return e}t-=h.time,i+=c.compared.pan,n+=c.compared.rotate}}segmentInterpolateComponentsAt(t,e,i){t.interpolateComponentsAt(e,i)}},Ji=class{get time(){return this._time}constructor(t){t&&this.update(t)}update(t){t&&(this.definition?this.definition.copyFrom(t):this.definition=t.clone()),this._updatePrecomputedVariables(),this._updatePixelFlow()}_updatePrecomputedVariables(){const t=this.definition,e=t.compared,i=e.sourceZoom,n=e.targetZoom;this._zoomSign=i>n?1:-1,this._panPixelsAtSource=e.pan*t.source.pixelsPerPanAtZoom(i);const s=(t.source.pixelsPerRotate()+t.target.pixelsPerRotate())/2;this._rotatePixels=e.rotate*s}_updatePixelFlow(){const t=this.definition.compared.sourceZoom,e=this.definition.compared.targetZoom,{hasZoom:i,hasPan:n,hasRotate:s}=this.definition;let o=0,a=0;i&&(n&&(o=(e/t-1)/(-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2*this._panPixelsAtSource)),s&&(a=this._zoomSign*(Math.log(t/e)/Math.LN2)*this.definition.halfWindowSize/this._rotatePixels)),this._zoomPixelFlow=0,this._panPixelFlow=0,this._rotatePixelFlow=0;const h=this.definition.desiredPixelFlow;if(i&&n&&s){const c=o+a+o*a;this._zoomPixelFlow=o*a/c*h,this._panPixelFlow=a/c*h,this._rotatePixelFlow=o/c*h}else if(i&&n){const c=1+o;this._zoomPixelFlow=o/c*h,this._panPixelFlow=1/c*h}else if(i&&s){const c=1+a;this._zoomPixelFlow=a/c*h,this._rotatePixelFlow=1/c*h}else if(n&&s){const c=this._panPixelsAtSource/this._rotatePixels,p=1+c;this._panPixelFlow=c/p*h,this._rotatePixelFlow=1/p*h}else n?this._panPixelFlow=h:i?this._zoomPixelFlow=h:s&&(this._rotatePixelFlow=h);if(this._time=J(Math.max(this.rotateTime,this.zoomTime,this.panTime)),this.fovTime>this._time){const c=this.fovTime/this._time;this._time=this.fovTime,this._zoomPixelFlow/=c,this._panPixelFlow/=c,this._rotatePixelFlow/=c}}get rotateTime(){return this.definition.hasRotate?J(this._rotatePixels/this._rotatePixelFlow):J(0)}get zoomTime(){return this.definition.hasZoom?J(this._zoomSign*(Math.log(this.definition.compared.sourceZoom/this.definition.compared.targetZoom)/Math.LN2)*this.definition.halfWindowSize/this._zoomPixelFlow):J(0)}get fovTime(){return this.definition.hasFov?J(Math.abs(this.definition.compared.fov)/$c):J(0)}get panTime(){if(!this.definition.hasPan)return J(0);if(this.definition.hasZoom){const t=-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2,e=t*this._panPixelsAtSource;return J(Math.log(e*(this._zoomPixelFlow/this._panPixelFlow)+1)/(t*this._zoomPixelFlow))}return J(this._panPixelsAtSource/this._panPixelFlow)}_interpolateComponentsZoom(t){if(t===0||t===1)return t;if(this.definition.hasZoom){const e=this.definition.compared.sourceZoom,i=this.definition.compared.targetZoom;return(e*(e/i)**-t-e)/(i-e)}return t}_interpolateComponentsFov(t){if(t===0)return this.definition.segmentStart;if(t===1)return this.definition.segmentEnd;if(this.definition.hasFov){const{segmentStart:e,segmentEnd:i}=this.definition;return e+t*(i-e)}return this.definition.segmentStart}_interpolateComponentsPan(t){if(t===0||t===1)return t;if(this.definition.hasPan&&this.definition.hasZoom){const e=-1/(this._zoomSign*this.definition.halfWindowSize)*this._zoomPixelFlow;return 1/this._panPixelsAtSource*(this._panPixelFlow*(2**(e*t*this._time)-1))/(e*Math.LN2)}return t}_interpolateComponentsRotate(t){return t}interpolateComponentsAt(t,e){t=Math.min(Math.max(t,0),1),e.zoom=this._interpolateComponentsZoom(t),e.pan=this._interpolateComponentsPan(t),e.rotate=this._interpolateComponentsRotate(t),e.zoomOffset=0,e.fov=this._interpolateComponentsFov(t)}};const $c=ki(45);function Gc(t,e,i){const n=e-t.compared.sourceZoom,s=t.halfWindowPanAtZoom(n);return-t.halfWindowSize*(i.ascensionFactor*Math.LN2*t.compared.pan+s)*Math.log(t.compared.sourceZoom/e)/(t.desiredPixelFlow*Math.LN2*s)}function jc(t,e,i){const n=1/e,s=Math.log(t.compared.sourceZoom*n),o=1/t.desiredPixelFlow,a=1/Math.LN2,h=e-t.compared.sourceZoom,c=1/h,p=(i.ascensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(h))/t.halfWindowPanAtZoom(1);return t.halfWindowSize*n*o*a*c*p-t.halfWindowSize*s*o*a*c+t.halfWindowSize*s*o*a*p/(h*h)}function Uc(t,e,i){const n=e-t.compared.sourceZoom,s=1/n,o=1/e,a=Math.log(t.compared.sourceZoom*o),h=(i.ascensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(n))/t.halfWindowPanAtZoom(1);return t.halfWindowSize*s*(-2*s*o*h+2*s*a+2*o-2*a*h/(n*n)-h/(e*e))/(t.desiredPixelFlow*Math.LN2)}function Bc(t,e){return-t.halfWindowSize*Math.log(t.compared.sourceZoom/e)/(t.desiredPixelFlow*Math.LN2)}function Kc(t,e){return t.halfWindowSize/(e*t.desiredPixelFlow*Math.LN2)}function Yc(t,e){return-t.halfWindowSize/(e*e*t.desiredPixelFlow*Math.LN2)}function Qc(t,e,i){return-t.compared.pan*t.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(t.desiredPixelFlow*t.halfWindowPanAtZoom(e))}function Xc(t,e,i){return t.compared.pan*t.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(t.desiredPixelFlow*t.halfWindowPanAtZoom(e*e))}function Jc(t,e,i){return-2*t.compared.pan*t.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(t.desiredPixelFlow*t.halfWindowPanAtZoom(e*e*e))}function tp(t,e,i){return t.halfWindowSize*(-t.halfWindowPanAtZoom(e)-i.descensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(t.compared.targetZoom))*Math.log(e/t.compared.targetZoom)/(t.desiredPixelFlow*Math.LN2*t.halfWindowPanAtZoom(-e+t.compared.targetZoom))}function ep(t,e,i){const n=Math.log(e/t.compared.targetZoom),s=1/t.desiredPixelFlow,o=1/Math.LN2,a=-e+t.compared.targetZoom,h=1/a,c=(-t.halfWindowPanAtZoom(e)-i.descensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(t.compared.targetZoom))/t.halfWindowPanAtZoom(1);return-t.halfWindowSize*n*s*o*h+t.halfWindowSize*n*s*o*c/(a*a)+t.halfWindowSize*s*o*h*c/e}function ip(t,e,i){const n=e-t.compared.targetZoom,s=1/n,o=1/e,a=Math.log(e/t.compared.targetZoom),h=(t.halfWindowPanAtZoom(e)+i.descensionFactor*Math.LN2*t.compared.pan-t.halfWindowPanAtZoom(t.compared.targetZoom))/t.halfWindowPanAtZoom(1);return t.halfWindowSize*s*(-2*s*o*h-2*s*a+2*o+2*a*h/(n*n)-h/(e*e))/(t.desiredPixelFlow*Math.LN2)}function np(t,e){return t.halfWindowSize*Math.log(e/t.compared.targetZoom)/(t.desiredPixelFlow*Math.LN2)}function sp(t,e){return t.halfWindowSize/(e*t.desiredPixelFlow*Math.LN2)}function op(t,e){return-t.halfWindowSize/(e*e*t.desiredPixelFlow*Math.LN2)}function ap(t){const e=t.compared.sourceZoom-t.compared.targetZoom;if(e===0)return t.compared.pan*t.halfWindowSize/(t.desiredPixelFlow*t.halfWindowPanAtZoom(t.compared.sourceZoom));const i=Math.LN2*t.compared.pan,n=e,s=t.halfWindowPanAtZoom(n),o=t.halfWindowSize*Math.log(t.compared.sourceZoom/t.compared.targetZoom)/(t.desiredPixelFlow*Math.LN2*s);return t.compared.sourceZoom<=t.compared.targetZoom?o*(i-s):o*(i+s)}function rp(t,e){let i=lp(t,e);const n={ascensionFactor:e.ascensionFactor!=null?e.ascensionFactor:.5,descensionFactor:e.descensionFactor!=null?e.descensionFactor:.5},s=n.ascensionFactor===0,o=n.descensionFactor===0,a=s?Bc:Gc,h=s?Kc:jc,c=s?Yc:Uc,p=o?np:tp,u=o?sp:ep,d=o?op:ip,m=x=>a(t,x,n)+Qc(t,x,n)+p(t,x,n),g=x=>h(t,x,n)+Xc(t,x,n)+u(t,x,n),f=x=>c(t,x,n)+Jc(t,x,n)+d(t,x,n);let _=m(i);const C=ap(t);let z;const O=e.maximumIterations||20,M=e.maximumDistance!=null?e.maximumDistance:1/0;for(z=0;z<O;z++){const x=e.desiredSlope??1e-6;let D=g(i);Math.abs(D)>x&&(D+=x);const L=D/f(i);if(isNaN(L)||i>=M&&L<0){if(!isFinite(M))return null;i=M,_=m(i);break}if(i-=L,i<=t.compared.sourceZoom||i<=t.compared.targetZoom)return null;const mt=m(i);if(Math.abs(mt-_)/_<=.005)break;_=mt}return isNaN(_)||_>C*(1-.3)||i<=t.compared.sourceZoom||i<=t.compared.targetZoom?null:i}function lp(t,e){const i=Math.max(t.compared.sourceZoom,t.compared.targetZoom),n=t.source.zoomAtPixelsPerPan(t.desiredPixelFlow/t.compared.pan)/2;return n<i?e.maximumDistance!=null?i+(e.maximumDistance-i)/2:1.5*i:e.maximumDistance?Math.min(e.maximumDistance,n):n}let hp=class extends Wc{constructor(t,e){super(),this._preallocSegments=[new Ji,new Ji,new Ji],this._ascensionSegment=null,this._descensionSegment=null,this.update(t,e)}update(t,e){if(!t)return;this.definition?this.definition.copyFrom(t):this.definition=t.clone();const i=e!=null&&e.apex?rp(t,e.apex):null;this.segments.length=0,this._ascensionSegment=null,this._descensionSegment=null,i?this._updateWithApex(i,e==null?void 0:e.apex):this._updateWithoutApex()}segmentInterpolateComponentsAt(t,e,i){t.interpolateComponentsAt(e,i),t===this._ascensionSegment?i.zoom=gi(i.zoom):t===this._descensionSegment&&(i.zoom=Ae(i.zoom))}_updateWithApex(t,e){const[i,n,s]=this._preallocSegments,o=(e==null?void 0:e.ascensionFactor)??.5,a=Math.min(1-o,(e==null?void 0:e.ascensionFactor)!=null&&e.descensionFactor!=null?e.descensionFactor:.5),h=1-o-a;i.definition?i.definition.copyFrom(this.definition):i.definition=this.definition.clone(),i.definition.compared.targetZoom=t,i.definition.compared.pan=this.definition.compared.pan*o,i.definition.compared.rotate=this.definition.compared.rotate*o,i.definition.segmentEnd=o,i.update(),this._ascensionSegment=i,this.segments.push(i),h>0&&(n.definition?n.definition.copyFrom(this.definition):n.definition=this.definition.clone(),n.definition.copyFrom(this.definition),n.definition.compared.sourceZoom=t,n.definition.compared.targetZoom=t,n.definition.compared.pan=this.definition.compared.pan*h,n.definition.compared.rotate=this.definition.compared.rotate*h,n.definition.segmentStart=i.definition.segmentEnd,n.definition.segmentEnd=i.definition.segmentEnd+h,n.update(),this.segments.push(n)),s.definition?s.definition.copyFrom(this.definition):s.definition=this.definition.clone(),s.definition.compared.sourceZoom=t,s.definition.compared.pan=this.definition.compared.pan*a,s.definition.compared.rotate=this.definition.compared.rotate*a,s.definition.segmentStart=o+h,s.update(),this._descensionSegment=s,this.segments.push(s)}_updateWithoutApex(){const[t]=this._preallocSegments;t.update(this.definition),this.segments.push(t)}};const cp=new qc;let pp=class{get time(){return this._time}get isLinear(){return this.path.segments.length===1}constructor(t){this._time=st(0),this._easing=xi,this.definition=new Zc(t),this.path=new hp}update(t,e,i){this.definition.update(t,e,i),this.path.update(this.definition,i),this._time=this._applyTimeSettings(pr(isFinite(this.path.time)?this.path.time:J(0)),i),this._easing=i.easing??(this._time>=1e3?xi:bi)}cameraAt(t,e){t=Math.min(Math.max(0,t),1),t=this._normalizedEasing(t);const i=this.path.interpolateComponentsAt(t,cp);e.interpolate(this.definition.source,this.definition.target,i)}_normalizedEasing(t){const e=this._easing(0,this._time),i=this._easing(1,this._time);return(this._easing(t,this._time)-e)/(i-e)}_applyTimeSettings(t,e){const i=e.speedFactor!=null?e.speedFactor:1,n=e.minDuration??Ti.minDuration/i,s=e.maxDuration??Ti.maxDuration/i;return t=e.duration!=null?st(e.duration):st(Math.min(Math.max(t/i,n),s))}};const up=2e3,dp=64;let mp=class{constructor(t){this._view=t,this._animation=new pp(()=>new Ds(this._view)),this._current=new Ds(this._view)}get _source(){return this._animation.definition.source}get _target(){return this._animation.definition.target}get duration(){return this._animation.time}get animation(){return this._animation}update(t,e,i={}){W(this._current.viewpoint,t),W(this._source.viewpoint,t),W(this._target.viewpoint,e),this._animation.update(this._source,this._target,i)}applyRatio(t,e){this._animation.cameraAt(e,this._current),W(t,this._current.viewpoint)}},ce=class extends S{constructor(t){super(t),this._animation=null,this._destinationViewState=new $n,this.updateFunction=null,this.easing=Xs.ease,this.viewpoint=new ot({targetGeometry:new F,scale:0,rotation:0}),this._updateTask=fe({postRender:this._postRender.bind(this)}),this._updateTask.pause(),this._transition=new mp(t.view)}destroy(){this._updateTask=et(this._updateTask)}get animation(){return this._animation}set animation(t){this._animation=t,this.view.animation=t}animate(t,e,i){this.stop();const n=this.viewpoint;W(n,e);const s=t.target;this._transition.update(this.viewpoint,s,{apex:{maximumDistance:Math.min(Math.min(e.scale,s.scale)*dp,this.view.constraints.effectiveMinScale),desiredSlope:5e-8},duration:i==null?void 0:i.duration,maxDuration:(i==null?void 0:i.animationMode)==="auto"?st(1/0):(i==null?void 0:i.maxDuration)??ca.maxDuration,speedFactor:i==null?void 0:i.speedFactor,easing:(typeof(i==null?void 0:i.easing)=="string"?Xs[i.easing]:i==null?void 0:i.easing)||this.easing}),(i==null?void 0:i.animationMode)==="auto"&&(this._destinationViewState.copy(this.view.state),this._destinationViewState.viewpoint=s,gp(this._transition.animation,i,this.view.state,this._destinationViewState)||this._transition.update(this.viewpoint,s,{duration:st(0)}));const o=()=>{this.animation===t&&this._updateTask&&(t.state==="finished"&&(this._transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return t.when(o,o),this._startTime=performance.now(),this._updateTask.resume(),this.animation=t,t}animateContinuous(t,e){this.stop(),this.updateFunction=e,this.viewpoint=t;const i=new Sn({target:t.clone()}),n=()=>{this.animation===i&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return i.when(n,n),this._startTime=performance.now(),this._updateTask.resume(),this.animation=i,i}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(t){var i,n;const e=this.animation;if(e&&e.state!==Sn.state.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,t.deltaTime),(i=this.animation)==null||i.update(this.viewpoint);else{const s=performance.now()-this._startTime,o=this._transition.duration,a=o>0?s/o:1,h=a>=1;this._transition.applyRatio(this.viewpoint,a),h&&((n=this.animation)==null||n.finish())}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};function gp(t,e,i,n){if((e==null?void 0:e.duration)!=null)return!0;const{time:s,isLinear:o}=t,a=(e==null?void 0:e.speedFactor)||1;if(s>((e==null?void 0:e.maxDuration)??ca.maxDuration/a))return!1;if(o){const h=A(),c=K(...n.toScreen(h,...i.center)),p=K(...i.toScreen(h,...n.center)),u=p!=null&&p.x>-1*i.size[0]&&p.x<(1.5+.5)*i.size[0]&&p.y>-1*i.size[1]&&p.y<(1.5+.5)*i.size[1],d=c!=null&&c.x>-1*n.size[0]&&c.x<(1.5+.5)*n.size[0]&&c.y>-1*n.size[1]&&c.y<(1.5+.5)*n.size[1];if(s>up/a&&!u&&!d)return!1}return!0}r([l()],ce.prototype,"easing",void 0),r([l()],ce.prototype,"view",void 0),r([l()],ce.prototype,"viewpoint",void 0),ce=r([v("esri.views.2d.AnimationManager")],ce);const fp=ce;function R(){return Promise.all([T(()=>import("./webglDeps-p0I075J4-CIV8dRVb.js"),__vite__mapDeps([175,176,1,2,141,12,142,177,178,179,68,180]),import.meta.url),T(()=>import("./mapViewDeps-B6GxsDpZ-BamXKa6c.js"),__vite__mapDeps([181,1,2,6,137,47,48,182,183,184,185,186,69,68,187,44,45,188,171,139,138,162,189,190,191,176,141,12,142,177,178,192,193,133,147,194,195,179,180,196,197,198,199,165,200,201,202,58,21,22,168,203,204,160,205,70,71,34,132,173,206,25,207,208,209,210,39,40,23,41,42,43,211,212,175,213,214,215,216,217,167,16,17,18,169,170,24,26,54,218,219,220,221,172,67,222,223,4,103,51,224,110,111,73,63,64,61,65,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,56,242,91,243,244,143,84,3,144,145,146,7,8,9,148,149,150,119,151,152,153,115,154,155,156,157,158,98,159,161,163,164,166,75,174]),import.meta.url)])}const Me=()=>R().then(()=>T(()=>import("./TileLayerView2D-wVUnrLCk-DnwN4pOJ.js"),__vite__mapDeps([245,1,2,144,188,45,171,184,185,186,69,68,187,44,182,139,138,162,189,190,210,137,47,48,39,40,23,41,42,43,211,212,202,58,21,22,201,198,199,142,197,178,141,12,179,180,196,176,165,200,168,203,204,160,205,70,71,213,191,177,192,194,195,214,215,216,6,217,167,25,133,16,17,18,169,170,24,26,54,67,183,193,147,34,132,173,206,208,209,219,220,233,222,223,4,103,51,224,110,111,73,63,64,61,65,225,234,235,236,237,56,246,247,248,241,249,250,140,251,239,240,252,253,254,91,255,256,257,258,259,163,164,143,84,3,145,146,7,8,9,148,149,150,119,151,152,153,115,154,155,156,157,158,98,159,161,166,172,75,174]),import.meta.url)),Ft=()=>R().then(()=>T(()=>import("./FeatureLayerView2D-CPRvrYca-CiASMjJ1.js"),__vite__mapDeps([260,1,2,147,236,202,58,21,22,205,70,68,69,71,96,16,17,18,101,56,8,49,30,31,32,33,34,50,51,35,52,15,102,103,261,24,25,6,26,74,262,263,224,110,111,73,63,12,64,61,65,264,23,249,250,201,133,140,240,171,193,199,142,190,162,197,177,176,141,241,198,178,179,180,196,138,139,165,200,168,203,204,160,183,184,185,186,187,44,45,182,188,189,191,192,194,195,132,173,206,214,167,169,170,84,3,4,265,62,66,67,72,266,92,234,39,40,117,46,47,48,207,267,268,269,270,95,57,255,258,252,253,259,143,144,145,146,7,9,148,149,150,119,151,152,153,115,154,155,156,157,158,98,159,161,163,164,54,166,172,75,174]),import.meta.url).then(t=>t.F)),Js={"base-dynamic":()=>R().then(()=>T(()=>import("./BaseDynamicLayerView2D-C9JZudmI-6Ycfqk8z.js"),__vite__mapDeps([271,1,2,272,198,199,142,171,190,162,197,178,141,12,179,68,180,196,176,138,139,165,200,201,202,58,21,22,168,203,204,160,205,70,69,71,247,191,177,192,248,249,250,133,140,273,145,146,167,25,6,16,17,18,169,170,252,147,253,143,84,3,4,144,110,111,73,7,8,9,56,24,26,148,149,150,119,151,152,153,115,154,155,156,157,158,98,23,159,161,63,64,61,65,163,164,54,166,172,173,75,174]),import.meta.url)),"base-tile":Me,"bing-maps":Me,catalog:()=>R().then(()=>T(()=>import("./CatalogLayerView2D-Dxxh5a9r-DdcKJ6-E.js"),__vite__mapDeps([274,1,2,249,250,201,202,58,21,22,133,140,252,147,141,12,142,143,84,25,3,4,144,110,111,73,145,146,7,8,9,56,24,6,26,148,149,150,119,151,152,153,115,154,155,156,157,158,98,23,16,17,18,159,160,139,161,63,64,61,65,138,162,163,164,54,165,166,167,168,169,170,171,172,173,75,174]),import.meta.url)),"catalog-dynamic-group":()=>R().then(()=>T(()=>import("./CatalogDynamicGroupLayerView2D-NrR8mmeQ-Dl-rEEMZ.js"),__vite__mapDeps([275,1,2,249,250,201,202,58,21,22,133,140,252,147,141,12,142,143,84,25,3,4,144,110,111,73,145,146,7,8,9,56,24,6,26,148,149,150,119,151,152,153,115,154,155,156,157,158,98,23,16,17,18,159,160,139,161,63,64,61,65,138,162,163,164,54,165,166,167,168,169,170,171,172,173,75,174]),import.meta.url)),"catalog-footprint":()=>R().then(()=>T(()=>import("./CatalogFootprintLayerView2D-ClrSz-v_-BYVKf9EM.js"),__vite__mapDeps([276,1,2,260,147,236,202,58,21,22,205,70,68,69,71,96,16,17,18,101,56,8,49,30,31,32,33,34,50,51,35,52,15,102,103,261,24,25,6,26,74,262,263,224,110,111,73,63,12,64,61,65,264,23,249,250,201,133,140,240,171,193,199,142,190,162,197,177,176,141,241,198,178,179,180,196,138,139,165,200,168,203,204,160,183,184,185,186,187,44,45,182,188,189,191,192,194,195,132,173,206,214,167,169,170,84,3,4,265,62,66,67,72,266,92,234,39,40,117,46,47,48,207,267,268,269,270,95,57,255,258,252,253,259,143,144,145,146,7,9,148,149,150,119,151,152,153,115,154,155,156,157,158,98,159,161,163,164,54,166,172,75,174]),import.meta.url)),csv:Ft,"geo-rss":()=>R().then(()=>T(()=>import("./GeoRSSLayerView2D-Cqyu9rTD-NeqeItNl.js"),__vite__mapDeps([277,1,2,83,49,30,31,32,33,34,114,28,29,35,36,37,38,26,39,40,23,41,42,43,44,45,46,47,48,50,51,52,74,17,18,249,250,201,202,58,21,22,133,140,238,239,240,68,171,193,147,199,142,190,162,197,177,176,141,12,241,198,178,179,180,196,138,139,165,200,168,203,204,160,205,70,69,71,183,184,185,186,187,182,188,189,191,192,194,195,132,173,206,25,6,63,64,61,65,233,210,137,211,212,222,223,4,103,224,110,111,73,225,16,234,169,170,235,236,237,252,143,84,3,144,145,146,7,8,9,56,24,148,149,150,119,151,152,153,115,154,155,156,157,158,98,159,161,163,164,54,166,167,172,75,174]),import.meta.url)),feature:Ft,geojson:Ft,parquet:Ft,graphics:()=>R().then(()=>T(()=>import("./GraphicsLayerView2D-Cx4N44IG-EA5CYsYk.js"),__vite__mapDeps([278,1,2,249,250,201,202,58,21,22,133,140,238,239,240,68,171,193,147,199,142,190,162,197,177,176,141,12,241,198,178,179,180,196,138,139,165,200,168,203,204,160,205,70,69,71,183,184,185,186,187,44,45,182,188,189,191,192,194,195,34,132,173,206,25,6,63,64,61,65,233,39,40,23,210,137,47,48,41,42,43,211,212,222,223,4,103,51,224,110,111,73,225,16,17,18,234,169,170,235,236,237,252,259,24,26,143,84,3,144,145,146,7,8,9,56,148,149,150,119,151,152,153,115,154,155,156,157,158,98,159,161,163,164,54,166,167,172,75,174]),import.meta.url)),group:()=>R().then(()=>T(()=>import("./GroupLayerView2D-DHsZDiNt-CpF6bhbR.js"),__vite__mapDeps([279,1,2,249,250,201,202,58,21,22,133,140,252,147,141,12,142,143,84,25,3,4,144,110,111,73,145,146,7,8,9,56,24,6,26,148,149,150,119,151,152,153,115,154,155,156,157,158,98,23,16,17,18,159,160,139,161,63,64,61,65,138,162,163,164,54,165,166,167,168,169,170,171,172,173,75,174]),import.meta.url)),imagery:()=>R().then(()=>T(()=>import("./ImageryLayerView2D-dFQBu0l2-CrGucz0L.js"),__vite__mapDeps([280,1,2,144,281,142,141,12,179,68,180,196,176,197,282,198,199,171,190,162,178,138,139,165,200,201,202,58,21,22,168,203,204,160,205,70,69,71,283,284,285,249,250,133,140,233,39,40,23,184,185,186,187,44,45,182,188,189,210,137,47,48,41,42,43,211,212,222,193,147,223,4,103,51,195,224,110,111,73,63,64,61,65,225,16,17,18,183,191,177,192,194,34,132,173,206,25,6,234,169,170,235,236,237,251,239,240,241,272,247,248,273,145,146,167,286,287,261,24,26,258,252,253,259,143,84,3,7,8,9,56,148,149,150,119,151,152,153,115,154,155,156,157,158,98,159,161,163,164,54,166,172,75,174]),import.meta.url)),"imagery-tile":()=>R().then(()=>T(()=>import("./ImageryTileLayerView2D-C22Q5bbN-DJYlDwot.js"),__vite__mapDeps([288,1,2,289,281,142,141,12,179,68,180,196,176,197,282,198,199,171,190,162,178,138,139,165,200,201,202,58,21,22,168,203,204,160,205,70,69,71,283,284,285,249,250,133,140,290,291,241,191,177,192,228,194,195,173,248,147,145,146,292,286,110,111,73,167,25,6,16,17,18,169,170,163,164,24,26,259,287,261,258,252,253,143,84,3,4,144,7,8,9,56,148,149,150,119,151,152,153,115,154,155,156,157,158,98,23,159,161,63,64,61,65,54,166,172,75,174]),import.meta.url)),kml:()=>R().then(()=>T(()=>import("./KMLLayerView2D-BeeYuImA-r6RspI3O.js"),__vite__mapDeps([293,1,2,110,111,73,294,114,28,29,30,31,32,33,34,35,36,37,38,26,39,40,23,41,42,43,44,45,46,47,48,49,50,51,52,74,17,18,61,144,247,162,201,202,58,21,22,142,141,12,171,191,176,177,178,192,248,272,198,199,190,197,179,68,180,196,138,139,165,200,168,203,204,160,205,70,69,71,249,250,133,140,238,239,240,193,147,241,183,184,185,186,187,182,188,189,194,195,132,173,206,25,6,63,64,65,233,210,137,211,212,222,223,4,103,224,225,16,234,169,170,235,236,237,252,230,231,232,286,218,175,219,220,215,291,143,84,3,145,146,7,8,9,56,24,148,149,150,119,151,152,153,115,154,155,156,157,158,98,159,161,163,164,54,166,167,172,75,174]),import.meta.url)),"knowledge-graph":()=>R().then(()=>T(()=>import("./KnowledgeGraphLayerView2D-BCyhoZrM-C31sjexH.js"),__vite__mapDeps([295,1,2,249,250,201,202,58,21,22,133,140,252,147,141,12,142,143,84,25,3,4,144,110,111,73,145,146,7,8,9,56,24,6,26,148,149,150,119,151,152,153,115,154,155,156,157,158,98,23,16,17,18,159,160,139,161,63,64,61,65,138,162,163,164,54,165,166,167,168,169,170,171,172,173,75,174]),import.meta.url)),"link-chart":()=>R().then(()=>T(()=>import("./KnowledgeGraphLayerView2D-BCyhoZrM-C31sjexH.js"),__vite__mapDeps([295,1,2,249,250,201,202,58,21,22,133,140,252,147,141,12,142,143,84,25,3,4,144,110,111,73,145,146,7,8,9,56,24,6,26,148,149,150,119,151,152,153,115,154,155,156,157,158,98,23,16,17,18,159,160,139,161,63,64,61,65,138,162,163,164,54,165,166,167,168,169,170,171,172,173,75,174]),import.meta.url)),"knowledge-graph-sublayer":Ft,"map-image":()=>R().then(()=>T(()=>import("./MapImageLayerView2D-CpTj_--R--oAIUFJq.js"),__vite__mapDeps([296,1,2,144,272,198,199,142,171,190,162,197,178,141,12,179,68,180,196,176,138,139,165,200,201,202,58,21,22,168,203,204,160,205,70,69,71,247,191,177,192,248,249,250,133,140,233,39,40,23,184,185,186,187,44,45,182,188,189,210,137,47,48,41,42,43,211,212,222,193,147,223,4,103,51,195,224,110,111,73,63,64,61,65,225,16,17,18,183,194,34,132,173,206,25,6,234,169,170,235,236,237,251,239,240,241,273,145,146,167,252,297,91,255,257,261,24,26,253,254,256,258,259,143,84,3,7,8,9,56,148,149,150,119,151,152,153,115,154,155,156,157,158,98,159,161,163,164,54,166,172,75,174]),import.meta.url)),"map-notes":()=>R().then(()=>T(()=>import("./MapNotesLayerView2D-dcpIwdmd-6BceiVsm.js"),__vite__mapDeps([298,1,2,249,250,201,202,58,21,22,133,140,238,239,240,68,171,193,147,199,142,190,162,197,177,176,141,12,241,198,178,179,180,196,138,139,165,200,168,203,204,160,205,70,69,71,183,184,185,186,187,44,45,182,188,189,191,192,194,195,34,132,173,206,25,6,63,64,61,65,233,39,40,23,210,137,47,48,41,42,43,211,212,222,223,4,103,51,224,110,111,73,225,16,17,18,234,169,170,235,236,237,252,259,24,26,143,84,3,144,145,146,7,8,9,56,148,149,150,119,151,152,153,115,154,155,156,157,158,98,159,161,163,164,54,166,167,172,75,174]),import.meta.url)),media:()=>R().then(()=>T(()=>import("./MediaLayerView2D-wSR52uYZ-UIAfnuit.js"),__vite__mapDeps([299,1,2,300,165,110,111,73,235,64,49,30,31,32,33,34,188,45,171,184,185,186,69,68,187,44,182,139,138,162,189,190,210,137,47,48,39,40,23,41,42,43,211,212,202,58,21,22,201,198,199,142,197,178,141,12,179,180,196,176,200,168,203,204,160,205,70,71,213,191,177,192,194,195,214,215,216,6,217,167,25,133,16,17,18,169,170,24,26,54,67,183,193,147,132,173,206,208,209,219,220,233,222,223,4,103,51,224,63,61,65,225,234,236,237,56,226,227,301,228,249,250,140,252,163,164,143,84,3,144,145,146,7,8,9,148,149,150,119,151,152,153,115,154,155,156,157,158,98,159,161,166,172,75,174]),import.meta.url)),"ogc-feature":()=>R().then(()=>T(()=>import("./OGCFeatureLayerView2D-CgWnmaK2-mlxkJO9_.js"),__vite__mapDeps([302,1,2,260,147,236,202,58,21,22,205,70,68,69,71,96,16,17,18,101,56,8,49,30,31,32,33,34,50,51,35,52,15,102,103,261,24,25,6,26,74,262,263,224,110,111,73,63,12,64,61,65,264,23,249,250,201,133,140,240,171,193,199,142,190,162,197,177,176,141,241,198,178,179,180,196,138,139,165,200,168,203,204,160,183,184,185,186,187,44,45,182,188,189,191,192,194,195,132,173,206,214,167,169,170,84,3,4,265,62,66,67,72,266,92,234,39,40,117,46,47,48,207,267,268,269,270,95,57,255,258,252,253,259,143,144,145,146,7,9,148,149,150,119,151,152,153,115,154,155,156,157,158,98,159,161,163,164,54,166,172,75,174]),import.meta.url)),"open-street-map":Me,"oriented-imagery":Ft,route:()=>R().then(()=>T(()=>import("./RouteLayerView2D-C3xd3U9j-DQMPLJy0.js"),__vite__mapDeps([303,1,2,143,304,305,249,250,201,202,58,21,22,133,140,238,239,240,68,171,193,147,199,142,190,162,197,177,176,141,12,241,198,178,179,180,196,138,139,165,200,168,203,204,160,205,70,69,71,183,184,185,186,187,44,45,182,188,189,191,192,194,195,34,132,173,206,25,6,63,64,61,65,233,39,40,23,210,137,47,48,41,42,43,211,212,222,223,4,103,51,224,110,111,73,225,16,17,18,234,169,170,235,236,237,252,259,24,26,84,3,144,145,146,7,8,9,56,148,149,150,119,151,152,153,115,154,155,156,157,158,98,159,161,163,164,54,166,167,172,75,174]),import.meta.url)),stream:()=>R().then(()=>T(()=>import("./StreamLayerView2D-CdtHSknv-BDK8zY00.js"),__vite__mapDeps([306,1,2,74,17,18,260,147,236,202,58,21,22,205,70,68,69,71,96,16,101,56,8,49,30,31,32,33,34,50,51,35,52,15,102,103,261,24,25,6,26,262,263,224,110,111,73,63,12,64,61,65,264,23,249,250,201,133,140,240,171,193,199,142,190,162,197,177,176,141,241,198,178,179,180,196,138,139,165,200,168,203,204,160,183,184,185,186,187,44,45,182,188,189,191,192,194,195,132,173,206,214,167,169,170,84,3,4,265,62,66,67,72,266,92,234,39,40,117,46,47,48,207,267,268,269,270,95,57,255,258,252,253,259,143,144,145,146,7,9,148,149,150,119,151,152,153,115,154,155,156,157,158,98,159,161,163,164,54,166,172,75,174]),import.meta.url)),"subtype-group":()=>R().then(()=>T(()=>import("./SubtypeGroupLayerView2D-B-iHIO3Q-Dmcjlmd0.js"),__vite__mapDeps([307,1,2,260,147,236,202,58,21,22,205,70,68,69,71,96,16,17,18,101,56,8,49,30,31,32,33,34,50,51,35,52,15,102,103,261,24,25,6,26,74,262,263,224,110,111,73,63,12,64,61,65,264,23,249,250,201,133,140,240,171,193,199,142,190,162,197,177,176,141,241,198,178,179,180,196,138,139,165,200,168,203,204,160,183,184,185,186,187,44,45,182,188,189,191,192,194,195,132,173,206,214,167,169,170,84,3,4,265,62,66,67,72,266,92,234,39,40,117,46,47,48,207,267,268,269,270,95,57,255,258,252,253,259,143,144,145,146,7,9,148,149,150,119,151,152,153,115,154,155,156,157,158,98,159,161,163,164,54,166,172,75,174]),import.meta.url)),tile:Me,"vector-tile":()=>R().then(()=>T(()=>import("./VectorTileLayerView2D-CeXtu0Ei-CyuLhYJY.js"),__vite__mapDeps([308,1,2,51,84,25,3,4,189,141,12,142,67,68,188,45,171,168,36,37,217,167,133,6,16,17,18,169,170,216,203,187,176,179,180,196,198,199,190,162,197,178,138,139,165,200,201,202,58,21,22,204,160,205,70,69,71,145,146,241,309,83,310,311,137,47,48,166,249,250,140,252,147,253,163,164,143,144,110,111,73,7,8,9,56,24,26,148,149,150,119,151,152,153,115,154,155,156,157,158,98,23,159,161,63,64,61,65,54,172,173,75,174]),import.meta.url)),video:()=>R().then(()=>T(()=>import("./VideoLayerView2D-B3-zgsBG-DSEpBp0c.js"),__vite__mapDeps([312,1,2,313,144,88,81,57,58,21,22,121,100,34,314,59,44,45,55,56,36,37,301,162,200,63,12,64,61,65,198,199,142,171,190,197,178,141,179,68,180,196,176,138,139,165,201,202,168,203,204,160,205,70,69,71,183,184,185,186,187,182,188,189,191,177,192,193,133,147,194,195,132,173,206,25,6,228,110,111,73,315,249,250,140,238,239,240,241,233,39,40,23,210,137,47,48,41,42,43,211,212,222,223,4,103,51,224,225,16,17,18,234,169,170,235,236,237,252,143,84,3,145,146,7,8,9,24,26,148,149,150,119,151,152,153,115,154,155,156,157,158,98,159,161,163,164,54,166,167,172,75,174]),import.meta.url)),wcs:()=>R().then(()=>T(()=>import("./ImageryTileLayerView2D-C22Q5bbN-DJYlDwot.js"),__vite__mapDeps([288,1,2,289,281,142,141,12,179,68,180,196,176,197,282,198,199,171,190,162,178,138,139,165,200,201,202,58,21,22,168,203,204,160,205,70,69,71,283,284,285,249,250,133,140,290,291,241,191,177,192,228,194,195,173,248,147,145,146,292,286,110,111,73,167,25,6,16,17,18,169,170,163,164,24,26,259,287,261,258,252,253,143,84,3,4,144,7,8,9,56,148,149,150,119,151,152,153,115,154,155,156,157,158,98,23,159,161,63,64,61,65,54,166,172,75,174]),import.meta.url)),"web-tile":Me,wfs:Ft,wms:()=>R().then(()=>T(()=>import("./WMSLayerView2D-BRzMW6NF-B4V5tH48.js"),__vite__mapDeps([316,1,2,272,198,199,142,171,190,162,197,178,141,12,179,68,180,196,176,138,139,165,200,201,202,58,21,22,168,203,204,160,205,70,69,71,247,191,177,192,248,249,250,133,140,273,145,146,167,25,6,16,17,18,169,170,252,147,253,317,261,24,26,143,84,3,4,144,110,111,73,7,8,9,56,148,149,150,119,151,152,153,115,154,155,156,157,158,98,23,159,161,63,64,61,65,163,164,54,166,172,173,75,174]),import.meta.url)),wmts:()=>R().then(()=>T(()=>import("./WMTSLayerView2D-Cdgf4JIc-BOJEzTDM.js"),__vite__mapDeps([318,1,2,246,247,162,201,202,58,21,22,142,141,12,171,191,176,177,178,192,248,198,199,190,197,179,68,180,196,138,139,165,200,168,203,204,160,205,70,69,71,241,249,250,133,140,167,25,6,16,17,18,169,170,252,147,253,163,164,143,84,3,4,144,110,111,73,145,146,7,8,9,56,24,26,148,149,150,119,151,152,153,115,154,155,156,157,158,98,23,159,161,63,64,61,65,54,166,172,173,75,174]),import.meta.url)),"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"gaussian-splat":null,"integrated-mesh-3dtiles":null,"integrated-mesh":null,"line-of-sight":null,"point-cloud":null,scene:null,unknown:null,unsupported:null,viewshed:null,voxel:null};function yp(t){const e=t.declaredClass?t.declaredClass.slice(t.declaredClass.lastIndexOf(".")+1):"Unknown",i=e.replaceAll(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new k(`${i}:view-not-supported`,`${e} is not supported in 2D`)}const to={hasLayerViewModule:t=>Js[t.type]!=null,importLayerView:t=>{const e=Js[t.type];if(e==null)throw yp(t);return e(t)}},vp={"area-measurement":null,dimension:null,"direct-line-measurement":null,"elevation-profile":()=>T(()=>import("./ElevationProfileAnalysisView2D-BGZexWJe-Cank-tMS.js"),__vite__mapDeps([319,1,2,137,47,48,5,6,313,144,88,81,57,58,21,22,121,100,34,320,165,244,111,321,322,323,324,325,326,232,327,328,329,330,331,139,161,332,333,110,73,56,36,37,334,335,336,167,168,25,133,16,17,18,169,170,163,164,148,149,150,119,4,3,151,152,143,8,153,115,154,155,156,157,158,337,147,24,26,338,339,340,160,341,342,343,13,344,345,204,346,347,348,141,12,142,84,145,146,7,9,98,23,159,63,64,61,65,138,162,54,166,171,172,173,75,174]),import.meta.url),"line-of-sight":null,slice:null,viewshed:null,"volume-measurement":null};function _p(t){const e=vp[t.type];if(!e)throw new k("analysis-view-module-import-utils:analysis-not-supported",`Analysis "${t.type}" is not supported`);return e()}let wp=class{constructor(t,e={}){this.events=new Ba,this._hasMajorPerformanceCaveat=!1,this._lastRenderFrameCounter=0,t!=null?(this._canvas=document.createElement("canvas"),this._canvas.setAttribute("style","width: 100%; height:100%; display:block; willChange:transform"),t.contains(this._canvas)||t.appendChild(this._canvas)):e.canvas!=null&&(this._canvas=e.canvas);const i={failIfMajorPerformanceCaveat:!0,alpha:!0,antialias:!1,depth:!0,stencil:!0,powerPreference:"high-performance"};let n=this._canvas.getContext("webgl2",i);n||(n=this._canvas.getContext("webgl2",{...i,failIfMajorPerformanceCaveat:!1}),this._hasMajorPerformanceCaveat=!0),this._gl=n,this._handles=Ka([_o(this._canvas,"webglcontextlost",s=>this.events.emit("webgl-context-lost",s))])}destroy(){this._canvas.remove(),this._canvas=null,this._handles.remove(),this._gl=null}get gl(){return this._gl}get canvas(){return this._canvas}render(t,e){if(this._hasMajorPerformanceCaveat||q("esri-force-performance-mode")){if(++this._lastRenderFrameCounter>=q("esri-performance-mode-frames-between-render")&&(e(),this._lastRenderViewState=t.state.clone(),this._lastRenderFrameCounter=0),this._lastRenderViewState){const[i,n,s,o,a,h]=this._computeViewTransform(this._lastRenderViewState,t.state);this._canvas.style.transform=`matrix(${i}, ${n}, ${s}, ${o}, ${a}, ${h})`}}else e()}resize(t){const e=this._canvas,i=e.style,{state:{size:n},pixelRatio:s}=t,o=n[0],a=n[1],h=Math.round(o*s),c=Math.round(a*s);e.width===h&&e.height===c||(e.width=h,e.height=c),i.width=o+"px",i.height=a+"px"}_computeViewTransform(t,e){const[i,n]=t.center,[s,o]=e.center,[a,h]=t.toScreen([0,0],s,o),[c,p]=t.toScreen([0,0],i,n),u=c-a,d=p-h,m=t.scale/e.scale,g=e.rotation-t.rotation,f=At();return ml(f),Ln(f,f,[m,m]),Ai(f,f,ki(g)),Oe(f,f,[u,d]),f}};const Nt={added:[],removed:[]},tn=new Set,bp=new xl(0,0,0,0);function Mp(t,e){const i=vo(e);if(!i)return null;const[n,s]=i.valid;return t[2]>s?[qe([t[0],t[1],s,t[3]]),qe([n,t[1],n+t[2]-s,t[3]])]:t[0]<n?[qe([n,t[1],t[2],t[3]]),qe([s-(n-t[0]),t[1],s,t[3]])]:null}let xp=class extends Ja{constructor(t){super(),this._tiles=new Map,this._index=Tl(9,q("esri-csp-restrictions")?e=>({minX:e.bounds[0],minY:e.bounds[1],maxX:e.bounds[2],maxY:e.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=t}destroy(){super.destroy(),this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(t){return this._tiles.has(t)}get(t){return this._tiles.get(t)}getIntersectingTiles(t){if(!t||tr(t)===0||er(t)===0)return[];const e=Mp(t,this.tileScheme.spatialReference);return e!=null?[...new Set([...this.boundsIntersections(e[0]),...this.boundsIntersections(e[1])])]:this.boundsIntersections(t)}boundsIntersections(t){return this._index.search({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]})}updateTiles(t){const e={added:[],removed:[]};for(const i of t.added)if(!this.has(i)){const n=new cs(this.tileScheme,i);this._tiles.set(i,n),this._index.insert(n),e.added.push(n)}for(const i of t.removed)if(this.has(i)){const n=this.get(i);this._tiles.delete(i),this._index.remove(n),e.removed.push(n)}this.tiles.length=0,this._tiles.forEach(i=>this.tiles.push(i)),(e.added.length||e.removed.length)&&this.emit("update",e)}setViewState(t){const e=this.tileScheme.getTileCoverage(t,0);if(!e)return;const{spans:i,lodInfo:n}=e,{level:s}=n;if(i.length>0)for(const{row:o,colFrom:a,colTo:h}of i)for(let c=a;c<=h;c++){const p=bp.set(s,o,n.normalizeCol(c),n.getWorldForColumn(c)).id;if(tn.add(p),!this.has(p)){const u=new cs(this.tileScheme,p);this._tiles.set(p,u),this._index.insert(u),this.tiles.push(u),Nt.added.push(u)}}for(let o=this.tiles.length-1;o>=0;o--){const a=this.tiles[o];tn.has(a.id)||(this._tiles.delete(a.id),this.tiles.splice(o,1),this._index.remove(a),Nt.removed.push(a))}(Nt.added.length||Nt.removed.length)&&this.emit("update",Nt),Ml.pool.release(e),tn.clear(),Nt.added.length=0,Nt.removed.length=0}};const Tp=1,jd=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],Ud=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],xe=256,en=()=>P.getLogger("esri.views.2d.engine.webgl.painter.highlight.HighlightGradient");function Sp(t,e){e.fillColor[0]=t.color.r/255,e.fillColor[1]=t.color.g/255,e.fillColor[2]=t.color.b/255,e.fillColor[3]=t.color.a,t.haloColor?(e.outlineColor[0]=t.haloColor.r/255,e.outlineColor[1]=t.haloColor.g/255,e.outlineColor[2]=t.haloColor.b/255,e.outlineColor[3]=t.haloColor.a):(e.outlineColor[0]=e.fillColor[0],e.outlineColor[1]=e.fillColor[1],e.outlineColor[2]=e.fillColor[2],e.outlineColor[3]=e.fillColor[3]),e.fillColor[3]*=t.fillOpacity,e.outlineColor[3]*=t.haloOpacity,e.fillColor[0]*=e.fillColor[3],e.fillColor[1]*=e.fillColor[3],e.fillColor[2]*=e.fillColor[3],e.outlineColor[0]*=e.outlineColor[3],e.outlineColor[1]*=e.outlineColor[3],e.outlineColor[2]*=e.outlineColor[3],e.outlineWidth=(1-t.haloBlur)*t.haloWidth,e.outerHaloWidth=t.haloBlur*t.haloWidth/2,e.innerHaloWidth=t.haloBlur*t.haloWidth/2,e.outlinePosition=0}const kp=[0,0,0,0];let ua=class{constructor(){this.type="single",this._highlightOptions=new Lt,this._convertedHighlightOptions={fillColor:[0,0,0,0],outlineColor:[0,0,0,0],outlinePosition:0,outlineWidth:0,innerHaloWidth:0,outerHaloWidth:0},this._optionsShadeTexKey="",this._texelData=new Uint8Array(4*xe),this._minMaxDistance=[0,0]}setHighlightOptions(t){this._highlightOptions=t}applyHighlightOptions(t,e){this._updateGradientTexture(t),t.bindTexture(this._shadeTex,Sl),e.setUniform2fv("u_minMaxDistance",this._minMaxDistance)}destroy(){var t;(t=this._shadeTex)==null||t.dispose(),this._shadeTex=null}getReasonsWithGradients(){return[{activeReasons:(1<<kl)-1,activeGradient:this}]}_updateGradientTexture(t){const e=Pp(this._highlightOptions);if(e===this._optionsShadeTexKey)return;this._optionsShadeTexKey=e,Sp(this._highlightOptions,this._convertedHighlightOptions);const i=this._convertedHighlightOptions,n=i.outlinePosition-i.outlineWidth/2-i.outerHaloWidth,s=i.outlinePosition-i.outlineWidth/2,o=i.outlinePosition+i.outlineWidth/2,a=i.outlinePosition+i.outlineWidth/2+i.innerHaloWidth,h=Math.sqrt(Math.PI/2)*Tp,c=Math.abs(n)>h?Math.round(10*(Math.abs(n)-h))/10:0,p=Math.abs(a)>h?Math.round(10*(Math.abs(a)-h))/10:0;let u;c&&!p?en().error("The outer rim of the highlight is "+c+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards positive values (inwards)."):!c&&p?en().error("The inner rim of the highlight is "+p+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards negative values (outwards)."):c&&p&&en().error("The highlight is "+Math.max(c,p)+"px away from the edge of the feature; consider reducing some width values.");const d=[void 0,void 0,void 0,void 0];function m(f,_,C){d[0]=(1-C)*f[0]+C*_[0],d[1]=(1-C)*f[1]+C*_[1],d[2]=(1-C)*f[2]+C*_[2],d[3]=(1-C)*f[3]+C*_[3]}const{_texelData:g}=this;for(let f=0;f<xe;++f)u=n+f/(xe-1)*(a-n),u<n?(d[0]=0,d[1]=0,d[2]=0,d[3]=0):u<s?m(kp,i.outlineColor,(u-n)/(s-n)):u<o?[d[0],d[1],d[2],d[3]]=i.outlineColor:u<a?m(i.outlineColor,i.fillColor,(u-o)/(a-o)):[d[0],d[1],d[2],d[3]]=i.fillColor,g[4*f]=255*d[0],g[4*f+1]=255*d[1],g[4*f+2]=255*d[2],g[4*f+3]=255*d[3];if(this._minMaxDistance[0]=n,this._minMaxDistance[1]=a,!this._shadeTex){const f=new zr(xe,1);f.wrapMode=33071,this._shadeTex=new Fr(t,f)}this._shadeTex.updateData(0,0,0,xe,1,this._texelData)}};function Pp(t){return`${t.color};${t.haloColor};${t.haloOpacity};${t.fillOpacity};${t.haloWidth};${t.haloBlur}`}let Cp=class{constructor(){this.type="multi",this.gradients=[]}setHighlightOptions(t){for(let e=0;e<t.length;e++)this.gradients[e]||(this.gradients[e]=new ua),this.gradients[e].setHighlightOptions(t[e]);for(let e=t.length+1;e<this.gradients.length;e++)this.gradients[e].destroy();this.gradients.length=t.length}destroy(){for(const t of this.gradients)t.destroy()}getReasonsWithGradients(){let t=1;const e=[];for(let i=0;i<this.gradients.length;i++){const n=this.gradients[i];e.push({activeReasons:t,activeGradient:n}),t<<=1}return e}};const da={color:{write:[!0,!0,!0,!0],blendMode:"composite"},depth:!1,stencil:{write:!1,test:{compare:514,mask:255,op:{fail:7680,zFail:7680,zPass:7681}}}},Vp={color:{write:[!0,!0,!0,!0],blendMode:"additive"},depth:!1,stencil:!1},Ep={...da,color:{write:[!0,!0,!0,!0],blendMode:"delete"}};function Rp({pixelRatio:t,state:e,displayLevel:i,requiredLevel:n},s){const o=1/2**(i-s.key.level),a=1/2**(n-s.key.level);return{displayMat3:e.displayMat3,displayViewMat3:e.displayViewMat3,displayViewScreenMat3:s.transforms.displayViewScreenMat3,viewMat3:e.viewMat3,tileMat3:s.transforms.tileMat3,displayZoomFactor:o,requiredZoomFactor:a,tileOffset:[s.x,s.y],currentScale:e.scale,currentZoom:i,metersPerSRUnit:mo(e.spatialReference),rotation:e.rotation,pixelRatio:t}}function ma(t){var e;return((e=t.passOptions)==null?void 0:e.type)==="highlight"}function ga(t){var e;return((e=t.passOptions)==null?void 0:e.type)==="hittest"}function Ip(t){if(!ga(t))return null;const{position:e,distance:i,smallSymbolDistance:n,smallSymbolSizeThreshold:s}=t.passOptions;return{position:e,distance:i,smallSymbolDistance:n,smallSymbolSizeThreshold:s}}function Dp(t){if(!ma(t))return null;const{activeReasons:e,highlightAll:i}=t.passOptions;return{activeReasons:e,highlightAll:i?1:0}}function Bd(t,e,i){const n={};for(const s in i)typeof i[s]!="function"?n[s]=i[s]:n[s]=i[s](t,e);return n}function Kd(t,e){const{attributeView:i,context:n}=t;return{storage:i.getUniforms(n),view:Rp(t,e),hittestRequest:Ip(t),highlight:Dp(t)}}function Yd(t){return{inside:t.selection===2,outside:t.selection===3}}function Op(t){return ga(t)?Vp:ma(t)&&t.passOptions.stepType==="clear"?Ep:da}function Qd(t){const{row:e,col:i}=t.key,n=i*ps,s=e*ps;return{tileOffsetFromLocalOrigin:[n%Ue,s%Ue],maxIntsToLocalOrigin:[Math.floor(n/Ue),Math.floor(s/Ue)]}}const Ap=new Ua({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch",mesh:"mesh"});function Xd(t){return Ap.toJSON(t)}function Jd(t){const{bandCount:e,attributeTable:i,colormap:n,pixelType:s}=t.raster.rasterInfo;return e===1&&(i!=null||n!=null||s==="u8"||s==="s8")}function Lp(t,e){return e==null?(t==null||t.destroy(),null):((t==null?void 0:t.type)==="single"&&Array.isArray(e)&&(t.destroy(),t=null),(t==null?void 0:t.type)!=="multi"||Array.isArray(e)||(t.destroy(),t=null),t||(t=Array.isArray(e)?new Cp:new ua),Array.isArray(e)?t.type==="multi"&&t.setHighlightOptions(e):t.type==="single"&&t.setHighlightOptions(e),t)}function tm(t,e,i,n){const{painter:s,highlightGradient:o}=t,{highlight:a}=s.effects;if(!o)return;const h=t.passOptions,c=o.getReasonsWithGradients();for(let p=0;p<c.length;p++){const u={...t,passOptions:{type:"highlight",activeGradient:c[p].activeGradient,activeReasons:c[p].activeReasons,stepType:"burn",highlightAll:e}};if(a.bind(u),i(u),p<c.length-1){let m=0;for(let g=p+1;g<c.length;g++)m|=c[g].activeReasons;i({...t,passOptions:{type:"highlight",activeGradient:c[p].activeGradient,activeReasons:m,stepType:"clear",highlightAll:e}})}const d={...t,passOptions:{type:"highlight",activeGradient:c[p].activeGradient,activeReasons:c[p].activeReasons,stepType:"draw",highlightAll:e}};s.setPipelineState(Op(t)),s.updatePipelineState(t.context),a.draw(d),a.unbind()}t.passOptions=h}const Je=t=>parseFloat(t)/100;function zp(t,e,i){const n=typeof t.left=="string"?Je(t.left)*e:t.left,s=typeof t.right=="string"?Je(t.right)*e:t.right,o=typeof t.top=="string"?Je(t.top)*i:t.top,a=typeof t.bottom=="string"?Je(t.bottom)*i:t.bottom,h=o;return{xmin:n,xmax:Math.max(e-s,n),ymin:h,ymax:Math.max(i-a,o)}}function fa(t,e,i,n){switch(e.type){case"rect":{const{width:s,height:o}=t,{xmin:a,xmax:h,ymin:c,ymax:p}=zp(e,s,o),{x:u,y:d}=i;return u>a&&u<h&&d>c&&d<p}case"path":return e.path.length===0||!Array.isArray(e.path[0][0])||ir(e.path,[i.x,i.y]);case"geometry":return e.geometry==null||(e.geometry.type==="polygon"?xo(e.geometry,n):In(e.geometry,n))}}function Fp(t){if(!t.highlights)return null;const e=t.highlights.findIndex(i=>i.name==="default");return e===-1?null:t.highlights.items[e]}function Np(t,e){if(!t.highlights){if(!e)return;t.highlights=new E([new Lt])}const i=t.highlights.findIndex(n=>n.name==="default");e?t.highlights.items[i].assignFrom(e):(t.highlights.removeAt(i),t.highlights.length===0&&(t.highlights=null))}async function Hp(t,e,i){const n=zo(e)?Fo(t,e):e;if(!t.ready||isNaN(n.x)||isNaN(n.y))return{screenPoint:n,results:[]};let s=new Set;const o=new Set;let a=!1,h=null,c=null;i!=null&&i.include?io(i.include,eo(t,m=>{s.add(m),nn(m,g=>o.add(g))},(m,g)=>{o.add(m),s.add(g)},m=>{h||(h=new Set),h.add(m)},m=>s.add(m),()=>a=!0)):(a=!0,s=new Set(t.allLayerViews),s.forEach(m=>{nn(m,g=>o.add(g))})),i!=null&&i.exclude&&io(i.exclude,eo(t,m=>{s.delete(m),nn(m,g=>o.delete(g))},m=>o.delete(m),m=>{c||(c=new Set),c.add(m)}));const p=t.toMap(n),u=t.allLayerViews.filter(m=>!m.suspended&&s.has(m)&&m.clips.every(g=>fa(t,g,n,p))).reverse();let d=[...a?t.graphicsView.hitTest(p).map(m=>({type:"graphic",graphic:m,layer:null,mapPoint:p})):[],...await Promise.all(u.map(m=>m.hitTest(p,n)).toArray())].filter(Re).flat().filter(Re);return d=d.filter(m=>{var g;return m.type!=="graphic"||((g=m.layer)==null?void 0:g.type)!=="subtype-group"||o.has(m.graphic.layer)}),h&&(d=d.filter(m=>!("graphic"in m)||!m.graphic||(h==null?void 0:h.has(Rn(m.graphic))))),c&&(d=d.filter(m=>!("graphic"in m)||!m.graphic||!(c!=null&&c.has(Rn(m.graphic))))),{screenPoint:n,results:d}}function eo(t,e,i,n,s,o){return a=>{if(a instanceof Cr){if(a.layer===t)o==null||o();else{const h=t.allLayerViews.find(c=>c.layer===a.layer);h&&(s==null||s(h))}n(Rn(a))}else if(!("layer"in a&&"element"in a))if(a.type==="subtype-sublayer"){const h=t.allLayerViews.find(c=>c.layer===a.parent);h&&i(a,h)}else{const h=t.allLayerViews.find(c=>c.layer===a);h&&e(h)}}}function io(t,e){if(t)if(Xn(t))for(const i of t)if(Xn(i))for(const n of i)e(n);else e(i);else e(t)}function Rn(t){var i,n;const e=t.getObjectId();return e?`${((i=t.layer)==null?void 0:i.uid)??((n=t.sourceLayer)==null?void 0:n.uid)??"MapView"}/${e}`:`"MapView/${t.uid}`}function nn(t,e){const i=t.layer;(i==null?void 0:i.type)==="subtype-group"&&i.sublayers.forEach(n=>{e(n)})}function ya(t,e,i){const{ctx:n,canvas:s}=_a(t,i),o=n.getImageData(0,0,t.width,t.height),a=ba(s,e);return wa(s),{dataUrl:a,data:o}}function va(t,e){const{ctx:i,canvas:n}=_a(t,e),s=i.getImageData(0,0,t.width,t.height);return wa(n),s}function _a(t,e){const i=Zp();e.premultipliedAlpha&&Gp(t),i.width=t.width,i.height=t.height;const n=i.getContext("2d",{willReadFrequently:!0});return n.putImageData(t,0,0),e.flipY&&$p(n),{ctx:n,canvas:i}}function wa(t){t.width=0,t.height=0}function Zp(){return sn==null&&(sn=document.createElement("canvas")),sn}let sn=null;function ba(t,e){const i=jp[e.format],n=e.quality/100;return t.toDataURL(i,n)}function Ma(t,e){const i=Wp(t),n=Bp[i];return{format:i,quality:ln(e??n,0,100)}}function xa(t,e){return e/Math.max(t[0],t[1])}function qp(t,e,i,n=0,s=0,o=t.width-n,a=t.height-s,h=!1){const{data:c}=t,{width:p,height:u,data:d}=e,m=o/p,g=a/u,f=Math.ceil(m/2),_=Math.ceil(g/2),C=t.width;for(let z=0;z<u;z++)for(let O=0;O<p;O++){const M=4*(O+(h?u-z-1:z)*p);let x=0,D=0,L=0,mt=0,jn=0,Un=0;const Za=(z+.5)*g;for(let Ne=Math.floor(z*g);Ne<(z+1)*g;Ne++){const Bn=Math.abs(Za-(Ne+.5))/_,qa=(O+.5)*m,Wa=Bn*Bn;for(let He=Math.floor(O*m);He<(O+1)*m;He++){const Kn=Math.abs(qa-(He+.5))/f,Yt=Math.sqrt(Wa+Kn*Kn);if(Yt>=1)continue;let kt=2*Yt*Yt*Yt-3*Yt*Yt+1;const Qt=4*(n+He+(s+Ne)*C);Un+=kt*c[Qt+3],D+=kt,!i&&c[Qt+3]<255&&(kt=kt*c[Qt+3]/255),L+=kt*c[Qt],mt+=kt*c[Qt+1],jn+=kt*c[Qt+2],x+=kt}}d[M]=L/x,d[M+1]=mt/x,d[M+2]=jn/x,d[M+3]=Un/D}return e}function Wp(t){switch(t){case"png":case"jpg":case"jpeg":return t;default:return Up}}function $p(t){t.save(),t.globalCompositeOperation="copy",t.scale(1,-1),t.translate(0,-t.canvas.height),t.drawImage(t.canvas,0,0),t.restore()}function Gp(t){const e=t.data,i=e.length;for(let n=0;n<i;n+=4){const s=e[n+3];if(s!==255&&s>0){const o=255/s;e[n]=e[n]*o,e[n+1]=e[n+1]*o,e[n+2]=e[n+2]*o}}}const jp={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},no=98,Up="png",Bp={png:100,jpg:no,jpeg:no},em=Object.freeze(Object.defineProperty({__proto__:null,createEmptyImageData:Pl,encode:ya,encodeData:va,getFormatAndQuality:Ma,getMaximumResolutionScale:xa,resampleHermite:qp,toDataUrl:ba},Symbol.toStringTag,{value:"Module"})),Ta={flipY:!0,premultipliedAlpha:!0};async function Kp(t,e){const i=await Sa(t,e),{format:n,quality:s}=Ma(e==null?void 0:e.format,e==null?void 0:e.quality);return ya(i,{format:n,quality:s},Ta)}async function Yp(t,e){const i=await Sa(t,e);return va(i,Ta)}function Sa(t,e){const i=Jp(e||{},Xp(t.stage,t.size),t.size,t.padding),n=Qp(e,t.allLayerViews);return t.stage.takeScreenshot(i,n,t.backgroundColor,e==null?void 0:e.rotation)}function Qp(t={},e){if(!t.layers)return;const i=[];return t.layers.forEach(n=>{const s=e.find(o=>o.layer.id===n.id);s!=null&&s.container&&i.push(s.container)}),i}function Xp(t,e){return Math.min(4,xa(e,Math.min(4096,t.context.parameters.maxTextureSize)))}function Jp(t,e,i,n){t.ignorePadding&&(n={left:0,right:0,top:0,bottom:0});let s=null;t.width!=null&&t.height!=null?s=[t.width,t.height]:t.width==null&&t.height!=null?s=[t.height,t.height]:t.width!=null&&t.height==null?s=[t.width,t.width]:t.width==null&&t.height==null&&(s=null);const o=i[0]-(n.left+n.right),a=i[1]-(n.top+n.bottom);let h,c,p=t.area||{x:0,y:0,width:o,height:a};if(s){const u=o/a,d=s[0]/s[1];if(d>u){const m=p.width/d;p={x:p.x,y:Math.round(p.y+(p.height-m)/2),width:p.width,height:Math.round(m)}}else{const m=p.height*d;p={x:Math.round(p.x+(p.width-m)/2),y:p.y,width:Math.round(m),height:p.height}}}else s=[p.width,p.height];return s[0]>p.width?(h=Math.min(s[0]/p.width,e),c=s[0]/p.width/h):(h=1,c=s[0]/p.width),{cropArea:{x:Math.round((p.x+n.left)*h),y:Math.round((p.y+n.top)*h),width:Math.round(p.width*h),height:Math.round(p.height*h)},outputScale:c,resolutionScale:h}}const tu=t=>t.includes("Brush");let ka=class{constructor(){this._names=new Map}begin(t){this._names.has(t)||(this._names.set(t,!1),tu(t)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${t}.Start`))}end(t){this._names.has(t)&&!this._names.get(t)&&(this._names.set(t,!0),performance.mark(`Esri.${t}.End`))}record(t){this._names.has(t)||(this._names.set(t,!0),performance.mark(`Esri.${t}`))}};const so=Symbol("analyses-owner-handles");let It=class extends S{constructor(t){super(t),this._allAnalysisViews=new E,this._creatingViewCount=0,this._attachedToViewResolver=oo(),this._items=new Map,this._moduleMap=new Map,this._scheduledUpdateHandle=null,this._emitOnView=(e,i)=>this.view.emit(e,i)}destroy(){this._disconnectOwners(),this._attachedToViewResolver.reject(Te("AnalysisViewManager was destroyed")),this._set("view",null)}attach(){this._connectOwners(),this._attachedToViewResolver.resolve()}detach(){this._disconnectOwners(),this._attachedToViewResolver.reject(Te()),this._attachedToViewResolver=oo()}get updating(){return!this.view.ready||this._creatingViewCount!==0||this._allAnalysisViews.some(t=>t.updating)}get testInfo(){}async whenAnalysisView(t){await this._attachedToViewResolver.promise;const e=this._items.get(t);if(e==null||e.state.list===1)throw new k("AnalysisViewManager:no-analysis-view-for-analysis","The analysis does not exist in view.analyses",{analysis:t});return e.createAnalysisViewTask.promise}_connectOwners(){this.addHandles(this._connectAnalysesCollection(this.view.analyses),so)}_disconnectOwners(){this.removeHandles(so),this._update(),this._creatingViewCount=0}_connectAnalysesCollection(t){for(const n of t)this._addAnalysis(n);const e=t.on("after-add",n=>this._addAnalysis(n.item)),i=t.on("after-remove",n=>this._removeAnalysis(n.item));return ve(()=>{e.remove(),i.remove();for(const n of t)this._removeAnalysis(n)})}_addAnalysis(t){const e=this._items.get(t);if(e==null){const i={state:{view:0,list:0},analysis:t,view:null,createAnalysisViewTask:null};this._items.set(t,i),i.createAnalysisViewTask=Oi(n=>this._createAnalysisViewPromise(i,n).then(s=>(this._emitOnView("analysis-view-create",{analysis:t,analysisView:s}),s),s=>{throw this._emitOnView("analysis-view-create-error",{analysis:t,error:s}),s}))}else e.state.list=0}_removeAnalysis(t){const e=this._items.get(t);e!=null?(e.state.list=1,this._scheduleUpdate()):P.getLogger(this).error("Trying to remove analysis which was not added")}_scheduleUpdate(){this._scheduledUpdateHandle==null&&(this._scheduledUpdateHandle=Mo(()=>this._update()))}_update(){this._scheduledUpdateHandle=et(this._scheduledUpdateHandle),this._items.forEach(t=>{if(t.state.list!==1)return;const{analysis:e,view:i}=t;switch(this._items.delete(e),t.state.view){case 0:t.createAnalysisViewTask=ui(t.createAnalysisViewTask);break;case 1:i!=null&&(this._allAnalysisViews.remove(i),t.view=nt(i),t.createAnalysisViewTask=null,this._emitOnView("analysis-view-destroy",{analysis:e,analysisView:i}))}})}async _createAnalysisViewPromise(t,e){const{analysis:i}=t;if(this._creatingViewCount+=1,!this._moduleMap.has(i.type))try{this._moduleMap.set(i.type,await this.importAnalysisViewModule(i))}catch{throw this._creatingViewCount-=1,new k("AnalysisViewManager:no-analysis-view-for-analysis",`Analysis of type "${i.type}" is not supported`)}if(hn(e))throw this._creatingViewCount-=1,Te("AnalysisView creation aborted");const n=new(this._moduleMap.get(i.type)).default({analysis:i,view:this.view});let s=!0;cn(e,()=>{s&&this._destroyAnalysisView(i,n)});try{await n.when()}catch(o){throw s=!1,this._destroyAnalysisView(i,n),o}if(hn(e))throw Te();return s=!1,t.view=n,t.state.view=1,this._allAnalysisViews.add(n),this._creatingViewCount-=1,n}_destroyAnalysisView(t,e){e.destroyed||(this._creatingViewCount-=1,e.destroy(),this._emitOnView("analysis-view-destroy",{analysis:t,analysisView:e}))}};r([l()],It.prototype,"updating",null),r([l({constructOnly:!0})],It.prototype,"importAnalysisViewModule",void 0),r([l({constructOnly:!0})],It.prototype,"view",void 0),r([l()],It.prototype,"_allAnalysisViews",void 0),r([l()],It.prototype,"_creatingViewCount",void 0),It=r([v("esri.views.support.AnalysisViewManager")],It);const eu=It;function oo(){const t=Le();return t.promise.catch(()=>{}),t}function iu(t){const e=Cl();return e.available?t==="3d"&&e.majorPerformanceCaveat?new k("webgl:major-performance-caveat-detected",`Your WebGL implementation (${e.unmaskedRenderer}) doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.`):e.supportsHighPrecisionFragment?e.supportsVertexShaderSamplers?null:new k("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new k("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new k("webgl:required","WebGL2 is required but not supported.",new Error().stack)}function nu(t){return t&&"nodeType"in t}function su(t){return t&&typeof t.render=="function"}const ao={component:"esri-component"};let Zt=class extends S{constructor(){super(...arguments),this.widget=null}destroy(){var t;this.node=null,(t=this.widget)==null||t.destroy()}get id(){var t,e;return this._get("id")??((t=this.widget)==null?void 0:t.id)??((e=this.node)==null?void 0:e.id)}set id(t){this._set("id",t)}set node(t){const e=this._get("node");t!==e&&(t&&t.classList.add(ao.component),e&&e.classList.remove(ao.component),this._set("node",t))}castNode(t){var e;return(e=this.widget)==null||e.destroy(),t?typeof t=="string"||nu(t)?(this._set("widget",null),Ao(t)):(su(t)&&!t.domNode&&(t.domNode=document.createElement("div")),this._set("widget",t),t.domNode):(this._set("widget",null),null)}};r([l()],Zt.prototype,"id",null),r([l()],Zt.prototype,"node",null),r([Vi("node")],Zt.prototype,"castNode",null),r([l({readOnly:!0})],Zt.prototype,"widget",void 0),Zt=r([v("esri.views.ui.Component")],Zt);const li=Zt,ou={left:0,top:0,bottom:0,right:0},Pa={bottom:30,top:15,right:15,left:15},yt="esri-ui",j={ui:yt,corner:`${yt}-corner`,innerContainer:`${yt}-inner-container`,manualContainer:`${yt}-manual-container`,cornerContainer:`${yt}-corner-container`,topLeft:`${yt}-top-left`,topRight:`${yt}-top-right`,bottomLeft:`${yt}-bottom-left`,bottomRight:`${yt}-bottom-right`};function au(t){return t&&!t._started&&typeof t.postMixInProperties=="function"&&typeof t.buildRendering=="function"&&typeof t.postCreate=="function"&&typeof t.startup=="function"}function ti(t){return t===0?"0":`${t}px`}function on(t){const e=typeof t=="object"&&t!==null&&Object.getPrototypeOf(t);return(e===null||e===Object.prototype)&&("component"in t||"index"in t||"position"in t)?t:null}function an(t,{top:e,bottom:i,left:n,right:s}){t.style.top=e,t.style.bottom=i,t.style.left=n,t.style.right=s}let pt=class extends Co{constructor(t){super(t),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentMap=new Map,this._removeWidgetHandleKey=Symbol("componentOnRemoveSymbol"),this._locale=yr(),this.view=null,this._applyViewPadding=()=>{const e=this.container;e&&an(e,this._toPixelPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const e=this._innerContainer;e&&an(e,this._toPixelPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([w(()=>{var t;return[(t=this.view)==null?void 0:t.padding,this.container]},this._applyViewPadding,G),w(()=>this.padding,this._applyUIPadding,G),w(()=>[this.container,this._locale],([t,e])=>{t&&t.setAttribute("lang",e)},G),vr(t=>{this._locale=t})])}destroy(){this.removeAllHandles(),this.container=null;for(const t of this._components)t.destroy();this._components.length=0,this._componentMap.clear(),this.view=null,this._set("view",null)}set container(t){const e=this._get("container");t!==e&&(t&&(t.classList.add(j.ui),Vl(t),this._attachContainers(t)),e&&(e.classList.remove(j.ui),an(e,{top:"",bottom:"",left:"",right:""}),e.textContent=""),this._set("container",t))}get height(){var s;const t=((s=this.view)==null?void 0:s.height)??0;if(t===0)return t;const e=this._getViewPadding(),{top:i,bottom:n}=e;return Math.max(t-i-n,0)}get padding(){return this._get("padding")}set padding(t){this._overrideIfSome("padding",t)}castPadding(t){return typeof t=="number"?{bottom:t,top:t,right:t,left:t}:{...Pa,...t}}get width(){var s;const t=((s=this.view)==null?void 0:s.width)??0;if(t===0)return t;const e=this._getViewPadding(),{left:i,right:n}=e;return Math.max(t-i-n,0)}add(t,e){let i,n,s;if(Array.isArray(t))return void t.forEach(a=>this.add(a,e));const o=on(t);o&&({index:i,position:e,component:t,key:n}=o),e&&typeof e=="object"&&({index:i,key:n,position:e,internal:s}=e),!t||e&&!this._isValidPosition(e)||this._add(t,e,i??this._getNumComponentsAtPosition(e),n,s)}remove(t,e){var n,s;if(!t)return;if(Array.isArray(t))return t.map(o=>this.remove(o,e));const i=this._find(t);if(i){const o=this._componentMap.get(i);if(!o||o.key!==e)return;const a=this._components.indexOf(i);return(n=i.node.parentNode)==null||n.removeChild(i.node),this._componentMap.delete(i),(s=i.widget)==null||s.removeHandlesReference(this._removeWidgetHandleKey),this._components.forEach(h=>{const c=this._componentMap.get(h);c&&c.position===o.position&&c.index>o.index&&c.index--}),this._components.splice(a,1)[0]}}empty(t,e={removeInternal:!1}){if(Array.isArray(t)){for(const s of t)this.empty(s,e);return}const i=this._positionNameToContainerLookup[t??"manual"],n=Array.prototype.slice.call(i.children).map(s=>this._findByNode(s)).filter(s=>{var o;return s==null?!1:!(((o=this._componentMap.get(s))==null?void 0:o.internal)??!1)||e.removeInternal});for(const s of n)this.remove(s)}move(t,e){if(Array.isArray(t)&&t.forEach(o=>this.move(o,e)),!t)return;let i;const n=on(t)||on(e);if(n&&(i=n.index,e=n.position,t=n.component||t),e&&!this._isValidPosition(e))return;const s=this.remove(t);s&&this.add(s,{position:e,index:i})}find(t){if(!t)return null;const e=this._findById(t);return e&&(e.widget||e.node)}getComponents(t,e={includeInternal:!1}){return t?Array.isArray(t)?t.flatMap(i=>this._getComponentsAtPosition(i,e)):this._getComponentsAtPosition(t,e):this._components.filter(i=>{var n;return e.includeInternal||!((n=this._componentMap.get(i))!=null&&n.internal)}).map(({widget:i,node:n})=>i??n)}getPosition(t){for(const e in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[e].contains(t))return e;return null}_add(t,e,i,n,s){t instanceof li||(t=new li({node:t}));const{widget:o}=t;o!=null&&o instanceof S&&o.addHandles(ve(()=>{queueMicrotask(()=>this.remove(t))}),this._removeWidgetHandleKey);const a=this._positionNameToContainerLookup[e];this._components.some(h=>{var u,d;const c=(u=this._componentMap.get(h))==null?void 0:u.position,p=c?this._positionNameToContainerLookup[c]:null;return a===p&&((d=this._componentMap.get(h))==null?void 0:d.index)===i})&&this._components.forEach(h=>{const c=this._componentMap.get(h),p=c==null?void 0:c.position,u=p?this._positionNameToContainerLookup[p]:null;c&&u===a&&c.index>=i&&c.index++}),this._place({component:t,position:e,index:i}),this._components.push(t),this._componentMap.set(t,{key:n,position:e,internal:s,index:i})}_find(t){return t?t instanceof li?this._findByComponent(t):typeof t=="string"?this._findById(t):"domNode"in t?this._findByNode(t.domNode):this._findByNode(t):null}_getViewPadding(){var t;return((t=this.view)==null?void 0:t.padding)??ou}_attachContainers(t){t.appendChild(this._innerContainer),t.appendChild(this._manualContainer)}_initContainers(){const t=document.createElement("div");t.classList.add(j.innerContainer,j.cornerContainer);const e=document.createElement("div");e.classList.add(j.innerContainer,j.manualContainer);const i=document.createElement("div");i.classList.add(j.topLeft,j.corner),t.appendChild(i);const n=document.createElement("div");n.classList.add(j.topRight,j.corner),t.appendChild(n);const s=document.createElement("div");s.classList.add(j.bottomLeft,j.corner),t.appendChild(s);const o=document.createElement("div");o.classList.add(j.bottomRight,j.corner),t.appendChild(o),this._innerContainer=t,this._manualContainer=e;const a=jr();this._cornerNameToContainerLookup={"top-left":i,"top-right":n,"bottom-left":s,"bottom-right":o,"top-leading":a?n:i,"top-trailing":a?i:n,"bottom-leading":a?o:s,"bottom-trailing":a?s:o},this._positionNameToContainerLookup={manual:e,...this._cornerNameToContainerLookup}}_isValidPosition(t){return!!this._positionNameToContainerLookup[t]}_place(t){var h,c;const e=t.position??"manual",{component:i,index:n}=t,s=this._positionNameToContainerLookup[e],o=n!=null&&n>-1;if(au(i.widget)&&i.widget.startup(),!o)return void s.appendChild(i.node);const a=Array.from(s.children);if(a.length!==0){for(const p of a){const u=this._findByNode(p);if(u&&n<(((h=this._componentMap.get(u))==null?void 0:h.index)??0))return void((c=p.parentNode)==null?void 0:c.insertBefore(i.node,p))}s.appendChild(i.node)}else s.appendChild(i.node)}_toPixelPosition(t){return{top:ti(t.top),left:ti(t.left),right:ti(t.right),bottom:ti(t.bottom)}}_findByComponent(t){return this._components.find(e=>e===t)??null}_findById(t){return this._components.find(({id:e})=>e===t)??null}_findByNode(t){return t?this._components.find(({node:e})=>e===t):null}_getComponentsAtPosition(t,e){const i=this._positionNameToContainerLookup[t];return Array.prototype.slice.call(i.children).map(n=>this._findByNode(n)).filter(Re).filter(n=>{var s;return e.includeInternal||!((s=this._componentMap.get(n))!=null&&s.internal)}).map(({widget:n,node:s})=>n??s)}_getNumComponentsAtPosition(t){var e;return((e=this._positionNameToContainerLookup[t])==null?void 0:e.children.length)??0}};r([l()],pt.prototype,"_locale",void 0),r([l()],pt.prototype,"container",null),r([l()],pt.prototype,"height",null),r([l({value:Pa})],pt.prototype,"padding",null),r([Vi("padding")],pt.prototype,"castPadding",null),r([l()],pt.prototype,"view",void 0),r([l()],pt.prototype,"width",null),pt=r([v("esri.views.ui.UI")],pt);const ru=pt,lu=new Map;function hu(t){return lu.get(t)}function ro(t,e){return t&&"copyright"in t&&(!e||typeof t.originOf=="function"&&t.originOf("copyright")==="user")}function cu(t,e){return t.length!==e.length||t.some((i,n)=>i.text!==e[n].text)}function ei(t,e,i){!i||!e||t.find(n=>n.layerView===e&&n.text===i)||t.push({text:i,layerView:e})}function pu(t){return t.type==="bing-maps"}const ht=[];let pe=class extends S{constructor(t){super(t),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.removeHandles("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new E,this.view=null,this._allLayerViewsChange=e=>{var n;this.removeHandles("suspension"),this.removeHandles("visible-geometry-changed");const i=(n=this.view)==null?void 0:n.allLayerViews;i&&(this.addHandles(i.map(s=>w(()=>{var o;return[s.suspended,(o=s.layer)==null?void 0:o.attributionVisible]},()=>this._updateAttributionItems())).toArray(),"suspension"),i.forEach(s=>{s.declaredClass==="esri.views.3d.layers.IntegratedMesh3DTilesLayerView3D"&&this.addHandles(s.on("visible-geometry-changed",()=>this._updateAttributionItems()),"visible-geometry-changed")})),e!=null&&e.removed&&e.removed.forEach(s=>{this._pendingAttributions.delete(s),this._fetchedAttributionData.delete(s)}),this._updateAttributionItems()},this.addHandles([Ci(()=>{var e;return(e=this.view)==null?void 0:e.allLayerViews},"change",e=>this._allLayerViewsChange(e),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),Bt(()=>{var e;return((e=this.view)==null?void 0:e.stationary)===!0},()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){var t;return(t=this.view)!=null&&t.ready?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const t=this.view,e=t==null?void 0:t.allLayerViews;ht.length=0;let i=!1,n=null;if(!t||!e)return void this._clear();e.forEach(o=>{var c,p;if(o.suspended||!((c=o.layer)!=null&&c.attributionVisible))return;const a=o.layer;if(ro(a,"user"))return void ei(ht,o,a.copyright);if(a.type==="integrated-mesh-3dtiles"&&a.hasGoogleUrl&&(i=!0,n=o),a.hasAttributionData){if(this._fetchedAttributionData.has(o)){const u=this._fetchedAttributionData.get(o);return void(u?ei(ht,o,this._getDynamicAttribution(u,t,a)):ro(a)&&ei(ht,o,a.copyright))}return void this._fetchAttributionData(o)}const h="portalItem"in a?(p=a.portalItem)==null?void 0:p.accessInformation:void 0;ei(ht,o,h||a.copyright)});const s=e.find(o=>{var a;return((a=o.layer)==null?void 0:a.type)==="integrated-mesh-3dtiles"});if(this.view&&s){const o=hu(this.view);if(o){const a=o.getAttributionText();for(let h=a.length-1;h>-1;--h)ht.unshift({text:a[h],layerView:s})}}i&&n&&ht.unshift({text:"Google Maps",layerView:n}),cu(this.items,ht)&&(this.items.removeAll(),this.items.addMany(ht)),ht.length=0,this.notifyChange("state")}async _fetchAttributionData(t){if(this._pendingAttributions.has(t))return;this._pendingAttributions.add(t);const e=await Br(t.layer.fetchAttributionData());if(this._pendingAttributions.has(t)){const i=e.ok?this._createContributionIndex(e.value,pu(t.layer)):null;this._pendingAttributions.delete(t),this._fetchedAttributionData.set(t,i)}this._updateAttributionItems()}_createContributionIndex(t,e){const i=t.contributors,n={};if(!i)return n;for(let s=0;s<i.length;s++){const o=i[s],a=o.coverageAreas;if(!a)return;for(const h of a){const c=h.bbox,p=h.zoomMin-(e&&h.zoomMin?1:0),u=h.zoomMax-(e&&h.zoomMax?1:0),d=new Kt({xmin:c[1],ymin:c[0],xmax:c[3],ymax:c[2],spatialReference:di.WGS84}),m={extent:wr(d),attribution:o.attribution||"",score:h.score!=null?h.score:100,id:s};for(let g=p;g<=u;g++)n[g]??(n[g]=[]),n[g].push(m)}}return n.maxKey=Math.max.apply(null,Object.keys(n)),n}_getDynamicAttribution(t,e,i){var p;const{extent:n,scale:s}=e;let o=((p=i.tileInfo)==null?void 0:p.scaleToZoom(s))??0;if(o=Math.min(t.maxKey??0,Math.round(o)),!n||o==null||o<=-1)return"";const a=t[o],h=br(n.center.clone().normalize(),di.WebMercator),c=new Set;return a?a.filter(u=>{const d=u.id,m=!c.has(d)&&h&&u.extent&&In(u.extent,h);return m&&c.add(d),m}).sort((u,d)=>d.score-u.score||u.objectId-d.objectId).map(u=>u.attribution).join(", "):""}};r([l({readOnly:!0,type:E})],pe.prototype,"items",void 0),r([l({readOnly:!0})],pe.prototype,"state",null),r([l()],pe.prototype,"view",void 0),pe=r([v("esri.widgets.Attribution.AttributionViewModel")],pe);const Ca=pe;function uu(){return function(t,e){if(!t[e])throw new TypeError(`Cannot auto bind undefined function '${String(e)}'`);return{value:mu(t[e])}}}function du(t){const e=t==null?void 0:t.type;return t instanceof KeyboardEvent||e==="keyup"||e==="keydown"||e==="keypress"}function mu(t){return function(e,...i){du(e)?Ur(e.key)&&(e.preventDefault(),e.stopPropagation(),e.target.click()):t.call(this,e,...i)}}const ee="esri-attribution",ie={base:ee,poweredBy:`${ee}__powered-by`,sources:`${ee}__sources`,open:`${ee}--open`,sourcesOpen:`${ee}__sources--open`,link:`${ee}__link`};let $=class extends Ri{constructor(t,e){super(t,e),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._sourcesNode=null,this._overflowRequestAnimationFrame=null,this._resizeObserver=new ResizeObserver(i=>{i.forEach(({target:n})=>{this._scheduleOverflowCheck(n)})}),this._mutationObserver=new MutationObserver(i=>{let n=!1;for(const s of i)if(s.type==="childList"||s.type==="characterData"||s.type==="attributes"){n=!0;break}n&&this._sourcesNode&&this._scheduleOverflowCheck(this._sourcesNode)}),this.itemDelimiter=" | ",this.messages=null,this.viewModel=new Ca}initialize(){this.addHandles(Ci(()=>{var t;return(t=this.viewModel)==null?void 0:t.items},"change",()=>this.scheduleRender()))}destroy(){var t,e;(t=this._resizeObserver)==null||t.disconnect(),(e=this._mutationObserver)==null||e.disconnect(),this._overflowRequestAnimationFrame!=null&&(cancelAnimationFrame(this._overflowRequestAnimationFrame),this._overflowRequestAnimationFrame=null)}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}_scheduleOverflowCheck(t){this._overflowRequestAnimationFrame==null&&(this._overflowRequestAnimationFrame=requestAnimationFrame(()=>{this._overflowRequestAnimationFrame=null,this._checkSourceTextOverflow(t)}))}get attributionText(){return this.viewModel.items.reduce((t,e)=>(t.includes(e.text)||t.push(e.text),t),[]).join(this.itemDelimiter)}get icon(){return"description"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){const t={[ie.open]:this._isOpen};return Y("div",{bind:this,class:this.classes(ie.base,ut.widget,t),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),this._renderPoweredBy())}_renderPoweredBy(){return Y("div",{class:ie.poweredBy},"Powered by"," ",Y("a",{class:ie.link,href:"https://www.esri.com/",rel:"noreferrer",target:"_blank"},"Esri"))}_renderSourcesNode(){const t=this._isOpen,e=this._isInteractive,i=e?0:void 0,{attributionText:n}=this,s={[ie.sourcesOpen]:t,[ut.interactive]:e};return Y("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(ie.sources,s),innerHTML:n,tabIndex:i})}_afterSourcesNodeCreate(t){this._prevSourceNodeHeight=t.clientWidth,this._sourcesNode=t,this._resizeObserver.observe(t),this._mutationObserver.observe(t,{subtree:!0,childList:!0,characterData:!0,attributes:!0}),this._scheduleOverflowCheck(t)}_checkSourceTextOverflow(t){let e=!1;const{clientHeight:i,clientWidth:n,scrollWidth:s}=t,o=s>n,a=this._attributionTextOverflowed!==o;if(this._attributionTextOverflowed=o,a&&(e=!0),this._isOpen){const h=i<this._prevSourceNodeHeight;this._prevSourceNodeHeight=i,h&&(this._isOpen=!1,e=!0)}e&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};r([l()],$.prototype,"_isOpen",void 0),r([l()],$.prototype,"_isInteractive",null),r([l()],$.prototype,"_attributionTextOverflowed",void 0),r([l()],$.prototype,"_prevSourceNodeHeight",void 0),r([l({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],$.prototype,"attributionText",null),r([l()],$.prototype,"icon",null),r([l()],$.prototype,"itemDelimiter",void 0),r([l()],$.prototype,"label",null),r([l(),Ii("esri/widgets/Attribution/t9n/Attribution")],$.prototype,"messages",void 0),r([l()],$.prototype,"view",null),r([l({type:Ca})],$.prototype,"viewModel",void 0),r([uu()],$.prototype,"_toggleState",null),$=r([v("esri.widgets.Attribution")],$);const gu=$;function fu(){const t=q("mapview-essential-goto-duration");return t==null?t:st(t)}function yu(t){var e,i;return((e=t==null?void 0:t.spatialReference)==null?void 0:e.isWebMercator)||((i=t==null?void 0:t.spatialReference)==null?void 0:i.isGeographic)||!1}function vu(t,e,i){return t.goTo(e,i)}const _u=t=>{const e=t;let i=class extends e{constructor(...n){super(...n),this.goToOverride=null,this.view=null}callGoTo(n){const{view:s}=this;return Ya(s),this.goToOverride?this.goToOverride(s,n):vu(s,n.target,n.options)}};return r([l()],i.prototype,"goToOverride",void 0),r([l()],i.prototype,"view",void 0),i=r([v("esri.widgets.support.GoTo")],i),i};let qt=class extends _u(S){constructor(t){super(t),this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._watchForView(G)}destroy(){this.view=null}get canShowNorth(){return yu(this.view)}get state(){var t;return!((t=this.view)!=null&&t.ready)||this.view.type==="2d"&&!this.view.constraints.rotationEnabled?"disabled":this.canShowNorth?"compass":"rotation"}reset(){var t,e;(t=this.view)!=null&&t.ready&&(((e=this.view)==null?void 0:e.type)==="2d"?this.callGoTo({target:{rotation:0},options:{animationMode:"always",duration:fu()}}):this.callGoTo({target:{heading:0}}))}_updateForRotation(t){t!=null&&this._set("orientation",{z:t})}_updateForCamera(t){if(!t)return;const e=-t.heading;this._set("orientation",{x:0,y:0,z:e})}_updateRotationWatcher(t){this.removeAllHandles(),this._watchForView(),t&&this.addHandles(t.type==="2d"?w(()=>t==null?void 0:t.rotation,this._updateForRotation,G):w(()=>t==null?void 0:t.camera,this._updateForCamera,G))}_watchForView(t){this.addHandles(w(()=>this.view,this._updateRotationWatcher,t))}};r([l({readOnly:!0})],qt.prototype,"canShowNorth",null),r([l({readOnly:!0})],qt.prototype,"orientation",void 0),r([l({readOnly:!0})],qt.prototype,"state",null),r([l()],qt.prototype,"view",void 0),qt=r([v("esri.widgets.Compass.CompassViewModel")],qt);const Va=qt,lo="esri-compass",ho={base:lo,iconContainer:`${lo}__icon-container`};let wt=class extends Ri{constructor(t,e){super(t,e),this.messages=null,this.viewModel=new Va,this._reset=()=>{this.viewModel.reset()},this._toRotationTransform=i=>({transform:`rotateZ(${i.z}deg)`})}loadDependencies(){return An({button:()=>T(()=>import("./index-DPXhoKdb-BRi0pKCq.js"),__vite__mapDeps([349,350,7,1,2,3,4,8,9,351,352,353,354,355,356,357,358,359,360]),import.meta.url),icon:()=>T(()=>import("./index-CZRmpYJQ-B_ZQ2kaU.js"),__vite__mapDeps([353,7,1,2,3,4,8,9,354,355]),import.meta.url).then(t=>t.i)})}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(t){this.viewModel.goToOverride=t}get icon(){return this.viewModel.state==="rotation"?"arrow-up":"compass-needle"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}reset(){return this.viewModel.reset()}render(){const{orientation:t,state:e}=this.viewModel,{messages:i}=this;return Y("div",{class:this.classes(ho.base,ut.widget)},Y("calcite-button",{class:ut.widgetButton,disabled:e==="disabled",kind:"neutral",label:i.reset,onclick:this._reset,round:!0,scale:"s",title:i.reset},Y("div",{"aria-hidden":"true",class:ho.iconContainer,title:i.reset},Y("calcite-icon",{icon:this.icon,styles:this._toRotationTransform(t)}))))}};r([l()],wt.prototype,"goToOverride",null),r([l()],wt.prototype,"icon",null),r([l()],wt.prototype,"label",null),r([l(),Ii("esri/widgets/Compass/t9n/Compass")],wt.prototype,"messages",void 0),r([l()],wt.prototype,"view",null),r([l({type:Va})],wt.prototype,"viewModel",void 0),wt=r([v("esri.widgets.Compass")],wt);const wu=wt,co="esri-navigation-toggle",po={base:co,isLayoutHorizontal:`${co}--horizontal`};let ue=class extends S{constructor(t){super(t),this._navigationMode="pan",this.view=null,t!=null&&t.isDefaultViewModel||_r(P.getLogger(this),"Navigation Toggle","arcgis-navigation-toggle",{version:"4.33"})}normalizeCtorArgs(t={}){const{isDefaultViewModel:e,...i}=t;return i}initialize(){this.addHandles(Bt(()=>{var t,e;return(e=(t=this.view)==null?void 0:t.navigation)==null?void 0:e.actionMap},()=>this._updateNavigationActionMap()))}destroy(){this.view=null}get state(){var t,e;return(t=this.view)!=null&&t.ready&&((e=this.view)==null?void 0:e.type)==="3d"?"ready":"disabled"}get navigationMode(){return this._navigationMode}set navigationMode(t){this._navigationMode=t,this._updateNavigationActionMap()}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate")}_updateNavigationActionMap(){var i,n;const t=(n=(i=this.view)==null?void 0:i.navigation)==null?void 0:n.actionMap;if(!t)return;const e=this._navigationMode==="pan";t.dragPrimary=e?"pan":"rotate",t.dragSecondary=e?"rotate":"pan"}};r([l({readOnly:!0})],ue.prototype,"state",null),r([l()],ue.prototype,"_navigationMode",void 0),r([l()],ue.prototype,"view",void 0),ue=r([v("esri.widgets.NavigationToggle.NavigationToggleViewModel")],ue);const Ea=ue;let bt=class extends Ri{constructor(t,e){super(t,e),this.messages=null,this.viewModel=new Ea({isDefaultViewModel:!0}),this.toggle=()=>this.viewModel.toggle(),this._panButton=null,this._rotateButton=null,this._toggle=()=>{var n;const i=((n=this.viewModel)==null?void 0:n.navigationMode)==="pan"?this._rotateButton:this._panButton;Gr(i),this.toggle()},t!=null&&t.isDefaultUI||fr(P.getLogger(this),"Navigation Toggle","arcgis-navigation-toggle",{version:"4.32"})}normalizeCtorArgs(t={}){const{isDefaultUI:e,...i}=t;return i}loadDependencies(){return An({button:()=>T(()=>import("./index-DPXhoKdb-BRi0pKCq.js"),__vite__mapDeps([349,350,7,1,2,3,4,8,9,351,352,353,354,355,356,357,358,359,360]),import.meta.url)})}get icon(){return"move"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}set layout(t){t!=="horizontal"&&(t="vertical"),this._set("layout",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){var n,s;const t=((n=this.viewModel)==null?void 0:n.state)==="disabled",e=((s=this.viewModel)==null?void 0:s.navigationMode)==="pan",i=this.messages.toggle;return Y("div",{class:this.classes(po.base,ut.widget,{[po.isLayoutHorizontal]:this.layout==="horizontal"})},Y("calcite-button",{afterCreate:o=>{this._panButton=o},appearance:e?"outline-fill":"solid",class:ut.widgetButton,disabled:t,iconStart:"move",kind:"neutral",label:i,onclick:this._toggle,tabIndex:e?void 0:-1,title:i}),Y("calcite-button",{afterCreate:o=>{this._rotateButton=o},appearance:e?"solid":"outline-fill",class:ut.widgetButton,disabled:t,iconStart:"rotate",kind:"neutral",label:i,onclick:this._toggle,tabIndex:e?-1:void 0,title:i}))}};r([l()],bt.prototype,"icon",null),r([l()],bt.prototype,"label",null),r([l({value:"vertical"})],bt.prototype,"layout",null),r([l(),Ii("esri/widgets/NavigationToggle/t9n/NavigationToggle")],bt.prototype,"messages",void 0),r([l()],bt.prototype,"view",null),r([l({type:Ea})],bt.prototype,"viewModel",void 0),bt=r([v("esri.widgets.NavigationToggle")],bt);const bu=bt;let Wt=class extends S{get canZoomIn(){var e,i,n;if(!((e=this.view)!=null&&e.ready))return!1;const t=(n=(i=this.view)==null?void 0:i.constraints)==null?void 0:n.effectiveMaxScale;return t===0||this._scale>t}get canZoomOut(){var i;const{view:t}=this;if(!(t!=null&&t.ready))return!1;const e=(i=t.constraints)==null?void 0:i.effectiveMinScale;return e===0||this._scale<e}get _scale(){var e,i,n;const t=(i=(e=this.view)==null?void 0:e.animation)==null?void 0:i.target;return(t&&"then"in t||t==null?void 0:t.scale)??((n=this.view)==null?void 0:n.scale)??0}};r([l({readOnly:!0})],Wt.prototype,"canZoomIn",null),r([l({readOnly:!0})],Wt.prototype,"canZoomOut",null),r([l()],Wt.prototype,"view",void 0),r([l()],Wt.prototype,"_scale",null),Wt=r([v("esri.widgets.Zoom.ZoomConditions2D")],Wt);const Mu=Wt;let de=class extends S{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};r([l({readOnly:!0})],de.prototype,"canZoomIn",null),r([l({readOnly:!0})],de.prototype,"canZoomOut",null),r([l()],de.prototype,"view",void 0),de=r([v("esri.widgets.Zoom.ZoomConditions3D")],de);const xu=de;let Dt=class extends S{constructor(t){super(t)}destroy(){this.view=null}get canZoomIn(){return this._zoomConditions!=null&&this._zoomConditions.canZoomIn}get canZoomOut(){var t;return this._zoomConditions!=null&&((t=this._zoomConditions)==null?void 0:t.canZoomOut)}get state(){var t;return(t=this.view)!=null&&t.ready?"ready":"disabled"}set view(t){t?t.type==="2d"?this._zoomConditions=new Mu({view:t}):t.type==="3d"&&(this._zoomConditions=new xu({view:t})):this._zoomConditions=null,this._set("view",t)}zoomIn(){const t=this.view;this.canZoomIn&&t&&(t.type==="2d"?t.mapViewNavigation.zoomIn():es(t.goTo({zoomFactor:2})))}zoomOut(){const t=this.view;this.canZoomOut&&t&&(t.type==="2d"?t.mapViewNavigation.zoomOut():es(t.goTo({zoomFactor:.5})))}};r([l()],Dt.prototype,"_zoomConditions",void 0),r([l()],Dt.prototype,"canZoomIn",null),r([l()],Dt.prototype,"canZoomOut",null),r([l({readOnly:!0})],Dt.prototype,"state",null),r([l()],Dt.prototype,"view",null),Dt=r([v("esri.widgets.Zoom.ZoomViewModel")],Dt);const Ra=Dt,uo={base:"esri-zoom",horizontalLayout:"esri-zoom--horizontal"};let Mt=class extends Ri{constructor(t,e){super(t,e),this.messages=null,this.viewModel=new Ra,this.zoomIn=()=>this.viewModel.zoomIn(),this.zoomOut=()=>this.viewModel.zoomOut()}loadDependencies(){return An({button:()=>T(()=>import("./index-DPXhoKdb-BRi0pKCq.js"),__vite__mapDeps([349,350,7,1,2,3,4,8,9,351,352,353,354,355,356,357,358,359,360]),import.meta.url)})}get icon(){return"magnifying-glass-plus"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}set layout(t){t!=="horizontal"&&(t="vertical"),this._set("layout",t)}set view(t){this.viewModel.view=t}get view(){return this.viewModel.view}render(){const t={[uo.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:e,canZoomOut:i}=this.viewModel,{zoomIn:n,zoomOut:s}=this.messages;return Y("div",{class:this.classes(uo.base,ut.widget,t)},Y("calcite-button",{class:ut.widgetButton,disabled:!e,iconStart:"plus",kind:"neutral",label:n,onclick:this.zoomIn,title:n}),Y("calcite-button",{class:ut.widgetButton,disabled:!i,iconStart:"minus",kind:"neutral",label:s,onclick:this.zoomOut,title:s}))}};r([l()],Mt.prototype,"icon",null),r([l()],Mt.prototype,"label",null),r([l({value:"vertical"})],Mt.prototype,"layout",null),r([l(),Ii("esri/widgets/Zoom/t9n/Zoom")],Mt.prototype,"messages",void 0),r([l()],Mt.prototype,"view",null),r([l({type:Ra})],Mt.prototype,"viewModel",void 0),Mt=r([v("esri.widgets.Zoom")],Mt);const Tu=Mt;function Su(t){return(t==null?void 0:t.view)!==void 0}let hi=class extends ru{constructor(t){super(t),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[],this._updateViewAwareWidgets=e=>{this.components.forEach(i=>{const n=this._find(i),s=n==null?void 0:n.widget;Su(s)&&(s.view=e)})},this._componentsWatcher=(e,i)=>{this._removeComponents(i),this._addComponents(e),this._adjustPadding(e)}}initialize(){this.addHandles([w(()=>this.components,this._componentsWatcher,G),w(()=>this.view,this._updateViewAwareWidgets,G)])}_add(t,e,i,n,s){let o=t;if(typeof t=="string"&&this._defaultPositionLookup[t]){if(this._find(t))return;o=this._createComponent(t)}super._add(o,e,i,n,s)}_removeComponents(t){t.forEach(e=>{const i=this._find(e);i&&(this.remove(i),i.destroy())})}_adjustPadding(t){if(!t.includes("attribution")&&!this._isOverridden("padding")){const{top:e}=this.padding;this.padding=e}}_addComponents(t){this.constructed&&t.forEach(e=>this.add(this._createComponent(e),this._defaultPositionLookup[e]))}_createComponent(t){const e=this._createWidget(t);return new li({id:t,node:e})}_createWidget(t){const e=this.view;switch(t){case"attribution":return new gu({view:e});case"compass":return new wu({view:e});case"navigation-toggle":return new bu({view:e,isDefaultUI:!0});case"zoom":return new Tu({view:e})}}};r([l()],hi.prototype,"components",void 0),hi=r([v("esri.views.ui.DefaultUI")],hi);const Ia=hi;let ci=class extends Ia{constructor(t){super(t),this.components=["attribution","zoom"]}};r([l()],ci.prototype,"components",void 0),ci=r([v("esri.views.ui.2d.DefaultUI2D")],ci);const Da=ci;let ku=class{constructor(t={},e={},i=8,n=1/0){this.disabledExtensions=t,this.debugWebGLExtensions=e,this.maxAnisotropy=i,this.maxPreferredTexturePixels=n}},Oa,Aa,La,za,Fa,Na,Ha;async function Pu(){const[,{GraphicsView2D:t,GraphicContainer:e,LabelManager:i,MapViewNavigation:n,MagnifierView2D:s,GridView2D:o,Stage:a}]=await Promise.all([T(()=>import("./webglDeps-p0I075J4-CIV8dRVb.js"),__vite__mapDeps([175,176,1,2,141,12,142,177,178,179,68,180]),import.meta.url),T(()=>import("./mapViewDeps-B6GxsDpZ-BamXKa6c.js"),__vite__mapDeps([181,1,2,6,137,47,48,182,183,184,185,186,69,68,187,44,45,188,171,139,138,162,189,190,191,176,141,12,142,177,178,192,193,133,147,194,195,179,180,196,197,198,199,165,200,201,202,58,21,22,168,203,204,160,205,70,71,34,132,173,206,25,207,208,209,210,39,40,23,41,42,43,211,212,175,213,214,215,216,217,167,16,17,18,169,170,24,26,54,218,219,220,221,172,67,222,223,4,103,51,224,110,111,73,63,64,61,65,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,56,242,91,243,244,143,84,3,144,145,146,7,8,9,148,149,150,119,151,152,153,115,154,155,156,157,158,98,159,161,163,164,166,75,174]),import.meta.url)]);Aa=t,La=e,za=i,Fa=n,Na=s,Ha=o,Oa=a}var ge;let b=(ge=class extends Fc(tc(Il(ql(zl(kh))))){get timeZone(){return super.timeZone}set timeZone(e){super.timeZone=e}constructor(e){super(e),this._magnifierView=null,this._gridView=null,this.stage=null,this._resolveWhenReady=[],this.rootLayerViews=new Eo({getCollections:()=>{var i,n;return[(i=this.basemapView)==null?void 0:i.baseLayerViews,this.layerViews,(n=this.basemapView)==null?void 0:n.referenceLayerViews]},getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.graphicsView=null,this.labelManager=null,this.navigation=new Li({actionMap:new Nn({dragTertiary:"none"})}),this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.supersampleScreenshotsEnabled=!0,this.analyses=new ye,this.analysisViewManager=new eu({importAnalysisViewModule:i=>_p(i),view:this}),this.floors=new E,this.grid=null,this.map=null,this.timeline=new ka,this.type="2d",this.view2dType=null,this.ui=new Da,this.animationsEnabled=!0,this.test={takeScreenshot:async i=>Yp(this._getScreenshotView(i),i)},this.padding={top:0,right:0,bottom:0,left:0},Hr()}destroy(){this.layerViewManager.clear(),this._set("preconditionsReady",!1),this.frameTask=nt(this.frameTask),this.goToManager.destroy(),this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new xp(this.featuresTilingScheme)}get constraintsInfo(){var n,s;const e=(n=this.defaultsFromMap)==null?void 0:n.tileInfo,i=this.spatialReference;return{lods:(s=e==null?void 0:e.spatialReference)!=null&&s.equals(i)?e.lods:null,spatialReference:i}}get initialExtentRequired(){var h;if(!this.stateManager)return!1;const{scale:e,constraints:i,center:n,viewpoint:s,extent:o}=this;let a=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&((h=this.map.initialViewProperties)!=null&&h.viewpoint))&&!o&&(i!=null&&i.effectiveLODs||(a=-1),(!n||e===0&&a===-1)&&((s==null?void 0:s.targetGeometry)==null||s.targetGeometry.type!=="extent"&&!s.scale))}get defaultsFromMapSettings(){return{required:{extent:!1,heightModelInfo:!1,tileInfo:!0},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get scheduler(){return this.frameTask.scheduler}get typeSpecificPreconditionsReady(){const e=this._getDefaultViewpoint();if(!e)return!1;const i=e.targetGeometry,n=this.spatialReference;return qr(i.spatialReference,n)}get background(){return Zi(this.map)?this.map.initialViewProperties.background:null}set background(e){this._override("background",e)}get center(){var e;return((e=this.stateManager)==null?void 0:e.center)??null}set center(e){this.stateManager.center=e}get constraints(){return super.constraints}set constraints(e){super.constraints=e}get highlightOptions(){return Fp(this)}set highlightOptions(e){Np(this,e)}get padding(){var e;return(e=this.stateManager)==null?void 0:e.padding}set padding(e){this.stateManager&&(this.stateManager.padding=e)}get rendering(){var e;return((e=this.stage)==null?void 0:e.renderRequested)??!1}get resizeAlign(){return super.resizeAlign}set resizeAlign(e){super.resizeAlign=e}get resolution(){return this.stateManager.resolution??0}get rotation(){return super.rotation}set rotation(e){super.rotation=e}get scale(){var e;return((e=this.stateManager)==null?void 0:e.scale)??0}set scale(e){this.stateManager&&(this.stateManager.scale=e)}get spatialReference(){return super.spatialReference}set spatialReference(e){super.spatialReference=e}get spatialReferenceLocked(){return this._get("spatialReferenceLocked")}set spatialReferenceLocked(e){this.stage&&P.getLogger(this).warn("spatialReferenceLocked cannot be changed after the view has become ready"),this._set("spatialReferenceLocked",e)}get tileInfo(){var e;return(e=this.featuresTilingScheme)==null?void 0:e.tileInfo}get updating(){var n,s,o,a;const e=!(!this.magnifier.visible||this.magnifier.position===null||!((n=this._magnifierView)!=null&&n.updatingHandles.updating)),i=!this.destroyed&&(!this.analysisViewManager||!this.layerViewManager||!this.labelManager||!this.graphicsView||this.analysisViewManager.updating===!0||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(h=>!h.destroyed&&!("layerViews"in h)&&h.updating===!0)||e);if(q("esri-2d-log-updating")){const h=this.allLayerViews.reduce((c,p)=>({...c,[`${p.layer.id}(${p.layer.type})`]:!p.destroyed&&!("layerViews"in p)&&p.updating}),{});console.log(`Updating MapView: ${i}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${(s=this.layerViewManager)==null?void 0:s.updating}
-> labelManager.updating: ${(o=this.labelManager)==null?void 0:o.updating}
-> graphicsView.updating: ${(a=this.graphicsView)==null?void 0:a.updating}
-> allLayerViews: ${JSON.stringify(h)}
-> updatingMagnifier: ${e}
`)}return i}get viewpoint(){return super.viewpoint}set viewpoint(e){super.viewpoint=e}get visibleArea(){const e=this.stateManager.visibleArea;return e&&new bo({rings:[e.map(i=>[i[0],i[1]])],spatialReference:this.spatialReference})}get zoom(){return this.stateManager.zoom??-1}set zoom(e){this.stateManager.zoom=e}get navigating(){var e;return((e=this.mapViewNavigation)==null?void 0:e.interacting)??!1}async hitTest(e,i){return Hp(this,e,i)}async takeScreenshot(e){return Kp(this._getScreenshotView(e),e)}toScreen(e,i){return this.stateManager.toScreen(e,i)}async whenAnalysisView(e){if(e.parent==null)throw new k("view:no-analysisview-for-analysis","The analysis does not exist in view.analyses",{analysis:e});return this.analysisViewManager.whenAnalysisView(e)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return new Promise(e=>{this.ready?e(this):this._resolveWhenReady.push(e)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){var e;return this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties.spatialReference||((e=this.defaultsFromMap)==null?void 0:e.spatialReference)||null}getDefaultTimeZone(){return Zi(this.map)?this.map.initialViewProperties.timeZone:null}getDefaultTimeExtent(){return Zi(this.map)?this.map.initialViewProperties.timeExtent:null}getSurface(){return this.surface}hasLayerViewModule(e){return to.hasLayerViewModule(e)}importLayerView(e){return to.importLayerView(e)}pixelSizeAt(){return this.ready?this.resolution:(P.getLogger(this).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}async popupHitTest(e){var p;const i=this.toMap(e),n=await this.hitTest(e),s=this.allLayerViews.toArray().filter(u=>u.clips.every(d=>fa(this,d,e,i))).reverse(),o=new globalThis.Map(s.map(u=>[u.layer.uid,u])),a=[];let h=0,c=0;for(;h<n.results.length||c<s.length;){const u=n.results.at(h);if(u&&u.type!=="graphic"){++h;continue}const d=o.get((p=(u==null?void 0:u.layer)??(u==null?void 0:u.graphic.layer))==null?void 0:p.uid);if((!u||d)&&c<s.length&&s.at(c)!==d){const m=s.at(c);"fetchPopupFeaturesAtLocation"in m&&a.push({mapPoint:i,layerView:m}),++c}else u&&(a.push({graphic:u.graphic,layerView:d}),++h)}return{hits:a,location:i}}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}async validate(){let e=iu(this.type);if(q("safari")&&q("safari")<9&&(e=new k("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:q("safari")})),e!=null)throw P.getLogger(this).warn("#validate()",e.message),e}loadAsyncDependencies(){return Pu()}_getDefaultViewpoint(){var C;const{constraints:e,initialExtent:i,map:n,padding:s,size:o}=this;if(!e)return null;const a=n&&"initialViewProperties"in n?n.initialViewProperties:void 0,h=this.stateManager.getUserStartupOptions(this.size),c=a==null?void 0:a.viewpoint,p=((C=c==null?void 0:c.targetGeometry)==null?void 0:C.extent)??i,u=p==null?void 0:p.center,d=(c==null?void 0:c.rotation)??0,m=(c==null?void 0:c.scale)||p&&zi(p,[o[0]-s.left-s.right,o[1]-s.top-s.bottom]),g=h.center??u,f=h.rotation??d,_=h.scale??m;return g&&_?new ot({targetGeometry:g,scale:_,rotation:f}):null}_startup(){var c;this.timeline.begin("MapView Startup");const e=this._getDefaultViewpoint();this.stateManager.startup(e,this.size,this.spatialReference,(c=this.defaultsFromMap.extent)==null?void 0:c.center),this.graphics.owner=this;const i=new wp(this.surface),n=new Oa(this.surface,{canvas:this.renderCanvas,contextOptions:new ku(this.deactivatedWebGLExtensions,this.debugWebGLExtensions),renderingOptions:this.renderingOptions,timeline:this.timeline},i);this.stage=n,this._magnifierView=new Na,this._magnifierView.magnifier=this.magnifier,this._gridView=new Ha;const s=new za({view:this});this._set("labelManager",s);const o=new fp({view:this});this._set("animationManager",o);const a=new Fa({view:this,animationManager:o});this._set("mapViewNavigation",a),this._setupSpatialReferenceDependentProperties(),this.addHandles([this.rootLayerViews.on("change",()=>this._updateStageChildren()),n.on("webgl-error",p=>this.fatalError=p.error),w(()=>this.stationary,p=>n.stationary=p,tt),w(()=>this.background,p=>{n.backgroundColor=p==null?void 0:p.color,this._magnifierView.backgroundColor=p==null?void 0:p.color},tt),w(()=>this.magnifier,p=>this._magnifierView.magnifier=p,tt),w(()=>this.grid,p=>this._gridView.grid=p,tt),w(()=>this.renderingOptions,p=>n.renderingOptions=p,tt),w(()=>this.highlights.items.map(p=>({name:p.name,options:{fillColor:p.color,haloColor:p.haloColor,fillOpacity:p.fillOpacity,haloOpacity:p.haloOpacity,haloWidth:p.haloWidth,haloBlur:p.haloBlur}})),()=>{n.highlightGradient=Lp(n.highlightGradient,this.highlights.items)},tt),w(()=>this.state.id,()=>n.state=this.state,tt),w(()=>this.animationsEnabled,p=>{this.stage.animationsEnabled=p},tt)],"map-view"),this._updateStageChildren();const h=this._resolveWhenReady;this._resolveWhenReady=[],h.forEach(p=>p(this)),this.timeline.end("MapView Startup"),this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.removeHandles("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animation=null,this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._gridView.destroy(),this.stage.destroy(),this.stage=null,this._set("graphicsView",null),this._magnifierView=null,this._gridView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask.stop(),this.stationaryManager.clear(),this._set("ready",!1),this.stateManager.teardown()}_updateStageChildren(){this.stage.removeAllChildren(),this.rootLayerViews.forEach(i=>{this.stage.addChild(i.container)});const e=this.graphicsView;this.stage.addChild(e.container),this.stage.addChild(this._magnifierView),this.stage.addChild(this._gridView)}_setupSpatialReferenceDependentProperties(){const e=new bl(Wr.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",e);const i=new Aa({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new La(e)});this._set("graphicsView",i)}_destroySpatialReferenceDependentProperties(){const e=this.graphicsView;this._set("graphicsView",null),e.destroy(),this._set("featuresTilingScheme",null)}_getScreenshotView(e){var a;const{allLayerViews:i,padding:n,size:s,stage:o}=this;return{allLayerViews:i,backgroundColor:e!=null&&e.ignoreBackground?null:(a=this.background)==null?void 0:a.color,padding:n,size:s,stage:o}}_spatialReferenceChanged(e){if(this.ready){this.frameTask.stop();for(const i of this.allLayerViews)i.processDetach();this._destroySpatialReferenceDependentProperties(),this.stateManager.changeSpatialReference(e),this.stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const i of this.allLayerViews)i.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}}},ge.type="2d",ge);r([l({constructOnly:!0})],b.prototype,"deactivatedWebGLExtensions",void 0),r([l({constructOnly:!0})],b.prototype,"debugWebGLExtensions",void 0),r([l({readOnly:!0})],b.prototype,"featuresTilingScheme",void 0),r([l({readOnly:!0})],b.prototype,"graphicsTileStore",null),r([l()],b.prototype,"graphicsView",void 0),r([l()],b.prototype,"constraintsInfo",null),r([l()],b.prototype,"initialExtentRequired",null),r([l()],b.prototype,"labelManager",void 0),r([l({type:Li,nonNullable:!0})],b.prototype,"navigation",void 0),r([l({constructOnly:!0})],b.prototype,"renderCanvas",void 0),r([l()],b.prototype,"renderingOptions",void 0),r([l({constructOnly:!0})],b.prototype,"supersampleScreenshotsEnabled",void 0),r([l()],b.prototype,"defaultsFromMapSettings",null),r([l({readOnly:!0})],b.prototype,"typeSpecificPreconditionsReady",null),r([l(un(ye,"analyses"))],b.prototype,"analyses",void 0),r([l()],b.prototype,"analysisViewManager",void 0),r([l({type:El})],b.prototype,"background",null),r([l()],b.prototype,"center",null),r([l({type:E})],b.prototype,"floors",void 0),r([l()],b.prototype,"grid",void 0),r([l({type:Lt})],b.prototype,"highlightOptions",null),r([l()],b.prototype,"map",void 0),r([l()],b.prototype,"padding",null),r([l({readOnly:!0})],b.prototype,"rendering",null),r([l({readOnly:!0})],b.prototype,"resolution",null),r([l()],b.prototype,"scale",null),r([l({type:Boolean,value:!1})],b.prototype,"spatialReferenceLocked",null),r([l({readOnly:!0})],b.prototype,"tileInfo",null),r([l({type:ka,readOnly:!0})],b.prototype,"timeline",void 0),r([l({readOnly:!0})],b.prototype,"type",void 0),r([l({readOnly:!0})],b.prototype,"updating",null),r([l({readOnly:!0})],b.prototype,"view2dType",void 0),r([l({readOnly:!0})],b.prototype,"visibleArea",null),r([l()],b.prototype,"zoom",null),r([l({readOnly:!0})],b.prototype,"navigating",null),r([l(),Vi(t=>t instanceof Ia?t:Vr(Da,t))],b.prototype,"ui",void 0),r([l()],b.prototype,"animationsEnabled",void 0),b=r([v("esri.views.View2D")],b);const Cu=b;let pi=class extends Cu{constructor(t){super(t),this.view2dType="map"}};r([l({readOnly:!0})],pi.prototype,"view2dType",void 0),pi=r([v("esri.views.MapView")],pi);const Vu=pi,im=Object.freeze(Object.defineProperty({__proto__:null,default:Vu},Symbol.toStringTag,{value:"Module"}));export{Rh as $,Jd as A,Yd as B,Qd as C,Kd as D,Bd as E,Op as F,ta as G,ma as H,Rp as I,em as J,im as M,Gd as R,ku as a,Lp as b,Gh as c,Xo as d,oi as e,ot as f,Np as g,tm as h,Qo as i,$d as j,Fi as k,ga as l,Jo as m,ch as n,zp as o,Hh as p,Xd as q,fu as r,jd as s,Fp as t,Lt as u,Ud as v,Tp as w,ka as x,wp as y,_u as z};
