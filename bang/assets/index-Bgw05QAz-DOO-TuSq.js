import{hf as p,j3 as i,gV as d,gS as h,gZ as g,hk as u,gX as v,gY as $,g_ as m,gT as f,h1 as A,h6 as E,h7 as _,hm as w,hr as b,hj as y}from"./index-BeTPrQ6f.js";const C={en:{"scrollguard.instructions":"Use ctrl + scroll to zoom the map"},fr:{"scrollguard.instructions":"Utilisez les touches Ctrl et + pour faire un zoom de la carte"}},L={class:"sg-label"},S=h({__name:"map-scrollguard",setup(o){const e=i(),{t:l}=g(),a=u("iApi"),r=v(),c=$(()=>e.enabled);m(()=>{var s;(s=a.$vApp.$el.querySelector(".inner-shell + .esri-view"))==null||s.addEventListener("wheel",n,{capture:!0}),a.event.on(f.MAP_CREATED,()=>{var t;(t=a.$vApp.$el.querySelector(".inner-shell + .esri-view"))==null||t.addEventListener("wheel",n,{capture:!0})})}),A(()=>{var s;(s=a.$vApp.$el.querySelector(".inner-shell + .esri-view"))==null||s.removeEventListener("wheel",n,{capture:!0})});const n=s=>{if(!c.value)return;const t=r.value.classList;s.ctrlKey?(t.remove("sg-active"),t.add("sg-scrolling")):(s.stopPropagation(),t.remove("sg-scrolling"),t.add("sg-active"),window.setTimeout(()=>t.remove("sg-active"),2e3))};return(s,t)=>(_(),E("div",{class:"sg",ref_key:"scrollGuard",ref:r},[w("p",L,b(y(l)("scrollguard.instructions")),1)],512))}}),q=p(S,[["__scopeId","data-v-bf6386a4"]]);class x extends d{setEnabled(e){i(this.$vApp.$pinia).enabled=e}_parseConfig(e){i(this.$vApp.$pinia).enabled=(e==null?void 0:e.enabled)||!1}get config(){return super.config}}class k extends x{added(){Object.entries(C).forEach(r=>this.$iApi.$i18n.mergeLocaleMessage(...r)),this._parseConfig(this.config);const e=this.$vApp.$watch(()=>this.config,r=>this._parseConfig(r)),{destroy:l,el:a}=this.mount(q,{app:this.$element});this.$vApp.$el.getElementsByClassName("inner-shell")[0].appendChild(a.childNodes[0]),this.removed=()=>{e(),l(),i(this.$vApp.$pinia).$reset()}}}export{k as default};
