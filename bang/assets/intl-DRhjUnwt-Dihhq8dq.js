import{l as c,v as $,bX as b}from"./index-BeTPrQ6f.js";import{W as y,B as R}from"./messages-DQ10DjvF-6kk0dzjG.js";async function U(e,n,t,r){const s=n.exec(t);if(!s)throw new c("esri-intl:invalid-bundle",`Bundle id "${t}" is not compatible with the pattern "${n}"`);const i=s[1]?`${s[1]}/`:"",l=s[2],w=R(r),o=`${i}${l}.json`,h=w?`${i}${l}_${w}.json`:o;let a;try{a=await u(e(h))}catch(f){if(h===o)throw new c("intl:unknown-bundle",`Bundle "${t}" cannot be loaded`,{error:f});try{a=await u(e(o))}catch(p){throw new c("intl:unknown-bundle",`Bundle "${t}" cannot be loaded`,{error:p})}}return a}async function u(e){if(d.fetchBundleAsset!=null)return d.fetchBundleAsset(e);const n=await $(e,{responseType:"text"});return JSON.parse(n.data)}class g{constructor({base:n="",pattern:t,location:r=new URL(window.location.href)}){let s;s=typeof r=="string"?i=>new URL(i,new URL(r,window.location.href)).href:r instanceof URL?i=>new URL(i,r).href:r,this.pattern=typeof t=="string"?new RegExp(`^${t}`):t,this.getAssetUrl=s,n=n?n.endsWith("/")?n:n+"/":"",this.matcher=new RegExp(`^${n}(?:(.*)\\/)?(.*)$`)}fetchMessageBundle(n,t){return U(this.getAssetUrl,this.matcher,n,t)}}function m(e){return new g(e)}const d={};y(m({pattern:"esri/",location:b}));
