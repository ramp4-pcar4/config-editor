import{bw as u,eN as f,eO as m,eP as p,eQ as l,eR as b,eS as g,eT as w,eU as F}from"./index-JysQxb7m.js";function S({displayField:e,editFieldsInfo:s,fields:t,objectIdField:a,title:n},o){if(!t)return null;const i=L({editFieldsInfo:s,fields:t,objectIdField:a},o);if(!i.length)return null;const d=I({titleBase:n,fields:t,displayField:e}),c=C();return new u({title:d,content:c,fieldInfos:i})}const y=(e,s)=>s.visibleFieldNames?s.visibleFieldNames.has(e.name):F(e,s);function N({fields:e,ignoreFieldTypes:s,sortDisabled:t}){const a=e;return s&&(e=e.filter(n=>!s.includes(n.type))),e===a&&(e=e.slice()),t!==!0&&e.sort(v),e}function v(e,s){return e.type==="oid"?-1:s.type==="oid"?1:r(e)?-1:r(s)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((s.alias||s.name).toLocaleLowerCase())}function L(e,s){const t=s==null?void 0:s.visibleFieldNames;return N({fields:e.fields??[],ignoreFieldTypes:(s==null?void 0:s.ignoreFieldTypes)||T,sortDisabled:s==null?void 0:s.sortDisabled}).map(a=>new f({fieldName:a.name,isEditable:m(a,e),label:a.alias,format:h(a),visible:y(a,{...e,visibleFieldNames:t})}))}function h(e){switch(e.type){case"small-integer":case"integer":case"single":return new l({digitSeparator:!0,places:0});case"double":return new l({digitSeparator:!0,places:2});case"string":return p(e.name)?new l({digitSeparator:!0,places:0}):void 0;default:return}}function C(){return[new b,new g]}function I(e){const s=w(e),{titleBase:t}=e;return s?`${t}: {${s.trim()}}`:t??""}function r(e){var s;return(e.name&&e.name.toLowerCase())==="name"?!0:((s=e.alias)==null?void 0:s.toLowerCase())==="name"}const T=["geometry","blob","raster","guid","xml"];export{S as y};
