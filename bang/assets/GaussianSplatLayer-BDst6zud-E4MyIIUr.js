import{F as o,be as y,ah as d,l as n,M as p,v as m,P as u,Q as c,m as i,E as s,n as v}from"./index-BeTPrQ6f.js";import{M as S}from"./MultiOriginJSONSupport-DNNJhlNT-Bm4fcG4m.js";import{l as x}from"./APIKeyMixin-DYy2zfLn-D3z7LonQ.js";import{h as w}from"./ArcGISService-CytDmkiZ-emNrPdED.js";import{n as g}from"./CustomParametersMixin-CqtpZgix-ZCd9Um94.js";import{b as E,a as R,s as T}from"./OperationalLayer-Ds0FQSCg-DEUbTcjK.js";import{x as L}from"./PortalLayer-B52AUJ7S-DLZhjKpz.js";import{r as b}from"./ScaleRangeLayer-DkZwCH6_-C95kTMqN.js";import{W as C,X as h}from"./tiles3DUtils-D1ZZJnSG-C1bG4bJM.js";import{H as f,D as I,G as O}from"./elevationInfoUtils-DFX5QvG8-DWLx2t7K.js";import"./layerContainerType-CJrPp4UB-BIF7XAYP.js";import"./ElevationInfo-tlrAM5SV-D86C1F9d.js";import"./lengthUtils-CopeXEyE-DjCEitlq.js";import"./asyncUtils-Cu__bxqs-ecCTUaGV.js";import"./PortalItem-BrQqKoE_-zs2bKsCH.js";import"./portalItemUtils-C12I5owR-Iiaf4oEu.js";import"./projectionUtils-CsX1UTBu-DsZaU4xz.js";import"./projectBuffer-CMNsPBq1-CMpE7Jo3.js";import"./zscale-PLuFqpaL-BIEnWBsg.js";import"./vec32-CI1xtKog-DFVYRcgb.js";import"./HeightModelInfo-Cjals-AI-DMpn5Tsh.js";let t=class extends w(E(L(b(S(g(x(c))))))){constructor(e){super(e),this.operationalLayerType="GaussianSplatLayer",this.type="gaussian-splat",this.opacity=1,this.minScale=0,this.maxScale=0,this.url=null,this.rootTilesetJSON=null,this.fullExtent=new o(-180,-90,180,90,this.spatialReference),this.spatialReference=new y({wkid:4326,vcsWkid:115700}),this.esriCrsSpatialReference=null,this.esriCrsFullExtent=null}get supportedSpatialReferences(){return this.initialized&&this.esriCrsSpatialReference?[this.spatialReference,this.esriCrsSpatialReference]:[this.spatialReference]}get fullExtents(){return this.initialized&&this.esriCrsFullExtent?[this.fullExtent,this.esriCrsFullExtent]:[this.fullExtent]}set elevationInfo(e){e!=null&&e.mode!=="absolute-height"||this._set("elevationInfo",e),this._validateElevationInfo(e)}async load(e){return this.addResolvingPromise(this._doLoad(e)),this}async _doLoad(e){const a=e!=null?e.signal:null;if(!d("enable-feature:gaussianSplatLayer"))throw new n("GaussianSplatLayer-init:not-supported","This layer is currently not supported.");try{await this.loadFromPortal({supportedTypes:["3DTiles Service"],validateItem:r=>{var l;if((l=r.typeKeywords)!=null&&l.includes("GaussianSplat"))return!0;throw new n("portal:invalid-layer-item-type","Invalid layer item, expected '${expectedType}' ",{expectedType:"3DTiles Service"})}},e)}catch(r){p(r)}this.url&&await m(this.url,{query:{...this.customParameters,token:this.apiKey},responseType:"json",signal:a}).then(r=>{this.rootTilesetJSON=r.data;const l=C(this.rootTilesetJSON);this.fullExtent=h(this.rootTilesetJSON,!1),this.spatialReference=this.fullExtent.spatialReference,l&&(this.esriCrsFullExtent=h(this.rootTilesetJSON,!0),this.esriCrsSpatialReference=this.esriCrsFullExtent.spatialReference)},r=>{p(r)})}_validateElevationInfo(e){const a="Gaussian Splat layers";f(u.getLogger(this),I(a,"absolute-height",e)),f(u.getLogger(this),O(a,e))}};i([s({type:["GaussianSplatLayer"]})],t.prototype,"operationalLayerType",void 0),i([s({readOnly:!0})],t.prototype,"type",void 0),i([s({readOnly:!0,json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},"portal-item":{read:!1,write:!1},"web-document":{read:!1,write:!1}}}})],t.prototype,"opacity",void 0),i([s({type:Number,json:{name:"layerDefinition.minScale",write:!0,origins:{service:{read:!1,write:!1}}}})],t.prototype,"minScale",void 0),i([s({type:Number,json:{name:"layerDefinition.maxScale",write:!0,origins:{service:{read:!1,write:!1}}}})],t.prototype,"maxScale",void 0),i([s(R)],t.prototype,"url",void 0),i([s({type:o})],t.prototype,"fullExtent",void 0),i([s({type:y})],t.prototype,"spatialReference",void 0),i([s({readOnly:!0})],t.prototype,"supportedSpatialReferences",null),i([s({type:[o]})],t.prototype,"fullExtents",null),i([s({type:["show","hide"]})],t.prototype,"listMode",void 0),i([s(T)],t.prototype,"elevationInfo",null),t=i([v("esri.layers.GaussianSplatLayer")],t);const V=t;export{V as default};
