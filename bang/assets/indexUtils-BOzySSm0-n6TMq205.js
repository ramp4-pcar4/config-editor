import{oM as c,dT as d,N as m,v as y,l as p,M as h,m1 as _,dR as w,oN as g,oO as I,oP as b}from"./index-BeTPrQ6f.js";import{k as B}from"./asyncUtils-Cu__bxqs-ecCTUaGV.js";import{E as N,w as R}from"./Indices-CAn-HCVv-hWNN5onC.js";import{E as i}from"./enums-DDJfd4_p-D3z9tmVA.js";function S(e,t){l(e.typedBuffer,t.typedBuffer,e.typedBufferStride,t.typedBufferStride)}function l(e,t,f=2,n=f){const o=t.length/2;let r=0,u=0;if(!w(t)||g(t)){for(let a=0;a<o;++a)e[r]=t[u],e[r+1]=t[u+1],r+=f,u+=n;return}const s=I(t);if(b(t))for(let a=0;a<o;++a)e[r]=Math.max(t[u]/s,-1),e[r+1]=Math.max(t[u+1]/s,-1),r+=f,u+=n;else for(let a=0;a<o;++a)e[r]=t[u]/s,e[r+1]=t[u+1]/s,r+=f,u+=n}function A(e,t,f,n){const o=e.typedBuffer,r=e.typedBufferStride,u=(n==null?void 0:n.count)??e.count;let s=((n==null?void 0:n.dstIndex)??0)*r;for(let a=0;a<u;++a)o[s]=t,o[s+1]=f,s+=r}Object.freeze(Object.defineProperty({__proto__:null,fill:A,normalizeIntegerBuffer:l,normalizeIntegerBufferView:S},Symbol.toStringTag,{value:"Module"}));class O{constructor(t){this._streamDataRequester=t}async loadJSON(t,f){return this._load(0,t,f)}async loadBinary(t,f){return d(t)?(m(f),c(t)):this._load(1,t,f)}async loadImage(t,f){return this._load(2,t,f)}async _load(t,f,n){if(this._streamDataRequester==null)return(await y(f,{responseType:E[t]})).data;const o=await B(this._streamDataRequester.request(f,t,n));if(o.ok===!0)return o.value;throw h(o.error),new p("glt-loader-request-error",`Request for resource failed: ${o.error}`)}}const E={2:"image",1:"array-buffer",0:"json",3:void 0};function U(e,t){switch(t){case i.TRIANGLES:return T(e);case i.TRIANGLE_STRIP:return q(e);case i.TRIANGLE_FAN:return v(e)}}function T(e){return typeof e=="number"?R(e):_(e)?new Uint16Array(e):e}function q(e){const t=typeof e=="number"?e:e.length;if(t<3)return[];const f=t-2,n=N(3*f);if(typeof e=="number"){let o=0;for(let r=0;r<f;r+=1)r%2==0?(n[o++]=r,n[o++]=r+1,n[o++]=r+2):(n[o++]=r+1,n[o++]=r,n[o++]=r+2)}else{let o=0;for(let r=0;r<f;r+=1)r%2==0?(n[o++]=e[r],n[o++]=e[r+1],n[o++]=e[r+2]):(n[o++]=e[r+1],n[o++]=e[r],n[o++]=e[r+2])}return n}function v(e){const t=typeof e=="number"?e:e.length;if(t<3)return new Uint16Array(0);const f=t-2,n=f<=65536?new Uint16Array(3*f):new Uint32Array(3*f);if(typeof e=="number"){let s=0;for(let a=0;a<f;++a)n[s++]=0,n[s++]=a+1,n[s++]=a+2;return n}const o=e[0];let r=e[1],u=0;for(let s=0;s<f;++s){const a=e[s+2];n[u++]=o,n[u++]=r,n[u++]=a,r=a}return n}export{U as N,O as T,S as c,l,A as m};
