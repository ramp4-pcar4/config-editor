import{K as G,ah as hi,cB as R,cP as vi,cX as wi,cC as Ii,z as j,s as z,cY as gi,cZ as yi}from"./index-BeTPrQ6f.js";import{u as Y,I as K}from"./TimeOnly-BFfVS_ja-C4MPGwCM.js";import{o as Ke,a as we,n as Qe}from"./UnknownTimeZone-DzO8gKMe-d6rtFXqm.js";import"./enum-D3e-PyKo-Bl5V5br5.js";const Ti={InvalidValueForAggregateFunction:"Invalid value used in aggregate function",MissingStatisticParameters:"Statistic does not have 1 or 0 Parameters",InvalidFunctionParameters:"Invalid parameters for call to {function}",UnsupportedIsLhs:"Unsupported left hand expression in is statement",UnsupportedIsRhs:"Unsupported right hand expression in is statement",UnsupportedOperator:"Unsupported operator - {operator}",UnsupportedSyntax:"Unsupported syntax - {node}",UnsupportedSqlFunction:"Sql function not found = {function}",InvalidDataType:"Invalid sql data type",InvalidDate:"Invalid date encountered",InvalidOperator:"Invalid operator encountered",InvalidTime:"Invalid time encountered",IllegalInterval:"Illegal interval",FunctionNotRecognized:"Function not recognized",InvalidTimeStamp:"Invalid timestamp encountered",InvalidParameterCount:"Invalid parameter count for call to {name}",PrimarySecondaryQualifiers:"Primary and Secondary SqlInterval qualifiers not supported",YearMonthIntervals:"Year-Month Intervals not supported",CannotCastValue:"Cannot cast value to the required data type"};class m extends Error{constructor(o,t){super(vi(Ti[o],t)),this.declaredRootClass="esri.arcade.featureset.support.sqlerror",Error.captureStackTrace&&Error.captureStackTrace(this,m)}}function wn(s){return Number.isNaN(s)||s===0?s:Math.trunc(s)}const In="esri.core.sql.SqlTimeStampOffset";let ee=class fe{constructor(o){this._timeStampOffset=o,this.declaredRootClass=In,this._date=null}static isTimestampOffset(o){return typeof o=="object"&&o!=null&&"declaredRootClass"in o&&o.declaredRootClass===In}toDateTime(){return this._date??(this._date=R.fromISO(this._timeStampOffset,{setZone:!0})),this._date}get isValid(){return this.toDateTime().isValid}get timezoneOffsetHour(){return wn(this.toDateTime().offset/60)}get timezoneOffsetMinutes(){return wn(this.toDateTime().offset%60)}toMilliseconds(){return this.toDateTime().toMillis()}get hour(){return this.toDateTime().hour}get minute(){return this.toDateTime().minute}get second(){return this.toDateTime().second}get day(){return this.toDateTime().day}get month(){return this.toDateTime().month}get year(){return this.toDateTime().year}startOfDay(){return fe.fromDateTime(this.toDateTime().startOf("day"))}static fromJSDate(o){return new fe(R.fromJSDate(o).toISO({includeOffset:!0}))}static fromDateTime(o){return new fe(o.toISO({includeOffset:!0}))}static fromParts(o,t,l=0,f=0,h=0,g=0,S=0,T=!1,x=0,_=0){const H=`${o.toString().padStart(4,"0")}-${t.toString().padStart(2,"0")}-${l.toString().padStart(2,"0")}`;let E="";g<10&&(E="0");let D=`${f.toString().padStart(2,"0")}:${h.toString().padStart(2,"0")}:${E+g.toString()}`;S!==0&&(D+="."+S.toString().padStart(3,"0"));const Z=`${T?"-":"+"}${x.toString().padStart(2,"0")}:${_.toString().padStart(2,"0")}`;return new fe(H+"T"+D+Z)}toStorageFormat(){return this._timeStampOffset}toString(){return this._timeStampOffset}toSQLValue(){let o=this.toDateTime().toSQL({includeOffset:!0,includeOffsetSpace:!0});return o&&(o=o.replace(".000","")),o}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}addMilliseconds(o){const t=this.toDateTime().plus(o);return fe.fromDateTime(t)}};function Oi(s,o){const t=_n[s.toLowerCase()];if(t==null)throw new m("FunctionNotRecognized");if(o.length<t.minParams||o.length>t.maxParams)throw new m("InvalidParameterCount",{name:s.toUpperCase()});return t.evaluate(o)}function gn(s,o){const t=_n[s.toLowerCase()];return t!=null&&o>=t.minParams&&o<=t.maxParams}const _n={min:{minParams:1,maxParams:1,evaluate:s=>yn(s[0],"min")},max:{minParams:1,maxParams:1,evaluate:s=>yn(s[0],"max")},avg:{minParams:1,maxParams:1,evaluate:s=>Mn(s[0])},sum:{minParams:1,maxParams:1,evaluate:s=>Ni(s[0])},stddev:{minParams:1,maxParams:1,evaluate:s=>xi(s[0])},count:{minParams:1,maxParams:1,evaluate:s=>s[0]==null?null:s[0].length},var:{minParams:1,maxParams:1,evaluate:s=>bn(s[0])}};function Mn(s){if(s===null)return null;let o=0,t=0;for(let l=0;l<s.length;l++){const f=s[l];if(f!==null){if(!ct(f))throw new m("InvalidValueForAggregateFunction");t++,o+=f}}return t===0?null:o/s.length}function ct(s){return typeof s=="number"}function yn(s,o){if(s===null)return null;let t=null,l=null;for(const f of s){let h=f;h=K.isDateOnly(f)||Y.isTimeOnly(f)?f.toNumber():R.isDateTime(f)?f.toMillis():ee.isTimestampOffset(f)?f.toMilliseconds():f,(t===null||o==="max"&&l!==null&&h!==null&&l<=h||o==="min"&&l!==null&&h!==null&&l>=h)&&(t=f,l=h)}return t}function Ni(s){if(s===null)return null;let o=0;for(let t=0;t<s.length;t++){const l=s[t];if(l!==null){if(!ct(l))throw new m("InvalidValueForAggregateFunction");o+=l}}return o}function xi(s){if(s===null)return null;const o=bn(s);return o===null?null:Math.sqrt(o)}function bn(s){if(s===null||(s=s.filter(l=>l!==null)).length===0)return null;const o=Mn(s);if(o===null)return null;let t=0;for(const l of s){if(!ct(l))throw new m("InvalidValueForAggregateFunction");t+=(o-l)**2}return t/(s.length-1)}function Xe(s){if(s.precision!==null||s.secondary!==null)throw new m("PrimarySecondaryQualifiers")}function Re(s,o){if(o.includes(".")){const t=o.split(".");s.second=parseFloat(t[0]),s.millis=parseInt(t[1],10)}else s.second=parseFloat(o)}const Tn="esri.core.sql.SqlInterval";let q=class ot{constructor(){this.declaredRootClass=Tn,this.op="+",this.day=0,this.second=0,this.hour=0,this.month=0,this.year=0,this.minute=0,this.millis=0}static isInterval(o){return typeof o=="object"&&o!=null&&"declaredRootClass"in o&&o.declaredRootClass===Tn}static createFromMilliseconds(o){const t=new ot;return t.second=o/1e3,t}static createFromValueAndQualifier(o,t,l){let f=null;const h=new ot;if(h.op=l==="-"?"-":"+",t.type==="interval-period"){Xe(t);const g=new RegExp("^[0-9]{1,}$");if(t.period==="year"||t.period==="month")throw new m("YearMonthIntervals");if(t.period==="second"){if(!/^[0-9]{1,}(\.[0-9]{1,}){0,1}$/.test(o))throw new m("IllegalInterval");Re(h,o)}else{if(!g.test(o))throw new m("IllegalInterval");h[t.period]=parseFloat(o)}}else{if(Xe(t.start),Xe(t.end),t.start.period==="year"||t.start.period==="month"||t.end.period==="year"||t.end.period==="month")throw new m("YearMonthIntervals");switch(t.start.period){case"day":switch(t.end.period){case"hour":if(f=new RegExp("^[0-9]{1,} [0-9]{1,}$"),!f.test(o))throw new m("IllegalInterval");h[t.start.period]=parseFloat(o.split(" ")[0]),h[t.end.period]=parseFloat(o.split(" ")[1]);break;case"minute":if(f=new RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$"),!f.test(o))throw new m("IllegalInterval");{h[t.start.period]=parseFloat(o.split(" ")[0]);const g=o.split(" ")[1].split(":");h.hour=parseFloat(g[0]),h.minute=parseFloat(g[1])}break;case"second":if(f=new RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}(\\.[0-9]{1,}){0,1}$"),!f.test(o))throw new m("IllegalInterval");{h[t.start.period]=parseFloat(o.split(" ")[0]);const g=o.split(" ")[1].split(":");h.hour=parseFloat(g[0]),h.minute=parseFloat(g[1]),Re(h,g[2])}break;default:throw new m("IllegalInterval")}break;case"hour":switch(t.end.period){case"minute":if(f=new RegExp("^[0-9]{1,}:[0-9]{1,}$"),!f.test(o))throw new m("IllegalInterval");h.hour=parseFloat(o.split(":")[0]),h.minute=parseFloat(o.split(":")[1]);break;case"second":if(f=new RegExp("^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}(\\.[0-9]{1,}){0,1}$"),!f.test(o))throw new m("IllegalInterval");{const g=o.split(":");h.hour=parseFloat(g[0]),h.minute=parseFloat(g[1]),Re(h,g[2])}break;default:throw new m("IllegalInterval")}break;case"minute":if(t.end.period!=="second")throw new m("IllegalInterval");if(f=new RegExp("^[0-9]{1,}:[0-9]{1,}(\\.[0-9]{1,}){0,1}$"),!f.test(o))throw new m("IllegalInterval");{const g=o.split(":");h.minute=parseFloat(g[0]),Re(h,g[1])}break;default:throw new m("IllegalInterval")}}return h}valueInMilliseconds(){return(this.op==="-"?-1:1)*(this.millis+1e3*this.second+60*this.minute*1e3+60*this.hour*60*1e3+24*this.day*60*60*1e3+this.month*(365/12)*24*60*60*1e3+365*this.year*24*60*60*1e3)}};const Si=/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/,Ei=/^(\d{1,2}):(\d{1,2})$/,Ci=/^(\d{1,2}):(\d{1,2}):(\d{1,2}).([0-9]+)$/,Fn=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,Di=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$/,_i=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)? {0,1}(\+|-)(\d{1,2}):(\d{1,2})$/,Mi=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})? {0,1}(\+|-)(\d{1,2}):(\d{1,2})$/,bi=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/;function Ve(s,o){if(o instanceof yi)return o===Qe.instance?R.fromMillis(s.getTime(),{zone:Qe.instance}):R.fromJSDate(s,{zone:o});switch(o){case"system":case"local":case null:return R.fromJSDate(s);default:return(o==null?void 0:o.toLowerCase())==="unknown"?R.fromMillis(s.getTime(),{zone:Qe.instance}):R.fromJSDate(s,{zone:o})}}function ue(s){return q.isInterval(s)}function F(s){return R.isDateTime(s)}function A(s){return K.isDateOnly(s)}function P(s){return Y.isTimeOnly(s)}function L(s){return ee.isTimestampOffset(s)}function ke(s){let o=Si.exec(s);if(o!==null){const[,t,l,f]=o,h=Y.fromParts(parseInt(t,10),parseInt(l,10),parseInt(f,10),0);if(h!==null)return h;throw new m("InvalidTime")}if(o=Ei.exec(s),o!==null){const[,t,l]=o,f=Y.fromParts(parseInt(t,10),parseInt(l,10),0,0);if(f!==null)return f;throw new m("InvalidTime")}if(o=Ci.exec(s),o!==null){const[,t,l,f,h]=o,g=Y.fromParts(parseInt(t,10),parseInt(l,10),parseInt(f,10),parseInt(h,10));if(g!==null)return g;throw new m("InvalidTime")}throw new m("InvalidTime")}function ge(s,o,t=!1){let l=Di.exec(s);if(l!==null){const[,f,h,g,S,T,x,_]=l,H=R.fromObject({year:parseInt(f,10),month:parseInt(h,10),day:parseInt(g,10),hour:parseInt(S,10),minute:parseInt(T,10),second:parseInt(x,10),millisecond:_?parseInt(_.replace(".",""),10):0},{zone:Ke(o)});if(H.isValid===!1)throw new m("InvalidTimeStamp");return H}if(l=_i.exec(s),l!==null){const[,f,h,g,S,T,x,_,H,E,D]=l,Z=ee.fromParts(parseInt(f,10),parseInt(h,10),parseInt(g,10),parseInt(S,10),parseInt(T,10),parseInt(x,10),_?parseInt(_.replace(".",""),10):0,H==="-",parseInt(E,10),parseInt(D,10));if(Z.isValid===!1)throw new m("InvalidTimeStamp");return Z}if(l=Mi.exec(s),l!==null){const[,f,h,g,S,T,x,_,H]=l,E=ee.fromParts(parseInt(f,10),parseInt(h,10),parseInt(g,10),parseInt(S,10),parseInt(T,10),0,0,x==="-",parseInt(_,10),parseInt(H,10));if(E.isValid===!1)throw new m("InvalidTimeStamp");return E}if(l=bi.exec(s),l!==null){const[,f,h,g,S,T]=l,x=R.fromObject({year:parseInt(f,10),month:parseInt(h,10),day:parseInt(g,10),hour:parseInt(S,10),minute:parseInt(T,10),second:0},{zone:Ke(o)});if(x.isValid===!1)throw new m("InvalidTimeStamp");return x}if(l=Fn.exec(s),l!==null){const[,f,h,g]=l,S=R.fromObject({year:parseInt(f,10),month:parseInt(h,10),day:parseInt(g,10),hour:0,minute:0,second:0},{zone:Ke(o)});if(S.isValid===!1)throw new m("InvalidTimeStamp");return S}throw new m("InvalidTimeStamp")}function ft(s,o){const t=Fn.exec(s);if(t===null)try{return ge(s,o)}catch{throw new m("InvalidDate")}const[,l,f,h]=t,g=K.fromParts(parseInt(l,10),parseInt(f,10),parseInt(h,10));if(g===null)throw new m("InvalidDate");return g}const Fi=321408e5,Ai=26784e5,Li=864e5,Pi=36e5,Ri=6e4;function et(s){return!!F(s)||!!L(s)}function ut(s){return!!F(s)||!!A(s)||!!L(s)||!!P(s)}function Ue(s){if(F(s))return s.toMillis();if(A(s))return s.toNumber();if(L(s))return s.toMilliseconds();throw new m("InvalidDataType")}function W(s,o,t){if(s==null||o==null)return null;if(j(s)){if(j(o))return X(s,o,t);if(z(o))return Ui(s,o,t);if(ut(o))throw new m("InvalidOperator");if(A(o))throw new m("InvalidOperator")}else if(z(s)){if(j(o))return $i(s,o,t);if(z(o))return Vi(s,o,t);if(F(o))throw new m("InvalidOperator");if(A(o))throw new m("InvalidOperator");if(P(o))throw new m("InvalidOperator");if(L(o))throw new m("InvalidOperator")}else if(F(s)){if(et(o)){if(we(s.zone)){if(R.isDateTime(o)&&!we(o.zone)||ee.isTimestampOffset(o))return tt(s,o,t)}else if(R.isDateTime(o)&&we(o.zone)&&(!we(s.zone)||ee.isTimestampOffset(s)))return tt(s,o,t);return X(Ue(s),Ue(o),t)}if(z(o))throw new m("InvalidOperator");if(A(o))return ki(s,o,t);if(P(o))throw new m("InvalidOperator");if(j(o))throw new m("InvalidOperator")}else if(A(s)){if(L(o))return qi(s,o,t);if(F(o))return Hi(s,o,t);if(z(o))throw new m("InvalidOperator");if(A(o))return X(s.toNumber(),o.toNumber(),t);if(P(o))throw new m("InvalidOperator");if(j(o))throw new m("InvalidOperator")}else if(P(s)){if(P(o))return X(s.toNumber(),o.toNumber(),t);if(z(o))throw new m("InvalidOperator");if(j(o))throw new m("InvalidOperator");if(A(o))throw new m("InvalidOperator");if(et(o))throw new m("InvalidOperator")}else if(L(s)){if(et(o))return R.isDateTime(o)&&we(o.zone)?tt(s,o,t):X(Ue(s),Ue(o),t);if(z(o))throw new m("InvalidOperator");if(A(o))return zi(s,o,t);if(P(o))throw new m("InvalidOperator");if(j(o))throw new m("InvalidOperator")}switch(t){case"<>":return s!==o;case"=":return s===o;case">":return s>o;case"<":return s<o;case">=":return s>=o;case"<=":return s<=o}}function X(s,o,t){switch(t){case"<>":return s!==o;case"=":return s===o;case">":return s>o;case"<":return s<o;case">=":return s>=o;case"<=":return s<=o}}function Ui(s,o,t){const l=parseFloat(o);if(!isNaN(l))return X(s,l,t);const f=s.toString();switch(t){case"<>":return f!==o;case"=":return f===o;case">":return f>o;case"<":return f<o;case">=":return f>=o;case"<=":return f<=o}}function $i(s,o,t){const l=parseFloat(s);if(!isNaN(l))return X(l,o,t);const f=o.toString();switch(t){case"<>":return s!==f;case"=":return s===f;case">":return s>f;case"<":return s<f;case">=":return s>=f;case"<=":return s<=f}}function Vi(s,o,t){switch(t){case"<>":return s!==o;case"=":return s===o;case">":return s>o;case"<":return s<o;case">=":return s>=o;case"<=":return s<=o}}function ki(s,o,t){const l=o.toDateTimeLuxon(s.zone);return X((s=s.startOf("day")).toMillis(),l.toMillis(),t)}function zi(s,o,t){const l=o.toDateTimeLuxon(s.toDateTime().zone);return X((s=s.startOfDay()).toMilliseconds(),l.toMillis(),t)}function Hi(s,o,t){const l=s.toDateTimeLuxon(o.zone);return o=o.startOf("day"),X(l.toMillis(),o.toMillis(),t)}function qi(s,o,t){const l=s.toDateTimeLuxon(o.toDateTime().zone);return o=o.startOfDay(),X(l.toMillis(),o.toMilliseconds(),t)}function tt(s,o,t){ee.isTimestampOffset(s)&&(s=s.toDateTime()),ee.isTimestampOffset(o)&&(o=o.toDateTime());const l=On(s),f=On(o);switch(t){case"<>":return l!==f;case"=":return l===f;case">":return l>f;case"<":return l<f;case">=":return l>=f;case"<=":return l<=f}}function On(s){return s.year*Fi+s.month*Ai+s.day*Li+s.hour*Pi+s.minute*Ri+1e3*s.second+s.millisecond}function dt(s,o,t){const l=Ln[s.toLowerCase()];if(l==null)throw new m("FunctionNotRecognized");if(o.length<l.minParams||o.length>l.maxParams)throw new m("InvalidParameterCount",{name:s.toUpperCase()});return l.evaluate(o,t)}function Zi(s,o){const t=Ln[s.toLowerCase()];return t!=null&&o>=t.minParams&&o<=t.maxParams}function nt(s){return!G(s)&&!A(s)&&!F(s)&&!P(s)&&!L(s)}function An(s){return A(s)||P(s)?s.toString():L(s)?s.toSQLValue():F(s)?s.millisecond===0?s.toFormat("yyyy-LL-dd HH:mm:ss"):s.toSQL({includeOffset:!1}):G(s)?An(R.fromJSDate(s)):s.toString()}function ji(s){if(G(s))return K.fromDateJS(s);if(F(s))return K.fromParts(s.year,s.month,s.day);if(A(s))return s;if(P(s))throw new m("CannotCastValue");if(L(s)&&K.fromParts(s.year,s.month,s.day)===null)throw new m("CannotCastValue");if(z(s)){const o=K.fromReader(s);if(o!==null&&o.isValid)return o}throw new m("CannotCastValue")}function Wi(s,o,t){if(G(s))return Ve(s,o);if(F(s))return s;if(A(s))return s.toDateTimeLuxon("unknown");if(P(s))throw new m("CannotCastValue");if(L(s))return s;if(z(s))return ge(s,"unknown",t);throw new m("CannotCastValue")}function Yi(s){if(G(s))return Y.fromDateJS(s);if(F(s))return Y.fromDateTime(s);if(A(s))throw new m("CannotCastValue");if(P(s))return s;if(L(s))return Y.fromSqlTimeStampOffset(s);if(z(s))return ke(s);throw new m("CannotCastValue")}const Ln={extract:{minParams:2,maxParams:2,evaluate:([s,o])=>{if(o==null)return null;if(G(o))switch(s.toUpperCase()){case"SECOND":return o.getSeconds();case"MINUTE":return o.getMinutes();case"HOUR":return o.getHours();case"DAY":return o.getDate();case"MONTH":return o.getMonth()+1;case"YEAR":return o.getFullYear();case"TIMEZONE_HOUR":case"TIMEZONE_MINUTE":return 0;case"DOW":return R.fromJSDate(o,{zone:"system"}).weekday;case"DOY":return R.fromJSDate(o,{zone:"system"}).ordinal;case"WEEK":return R.fromJSDate(o,{zone:"system"}).weekNumber}else if(F(o))switch(s.toUpperCase()){case"SECOND":return o.second;case"MINUTE":return o.minute;case"HOUR":return o.hour;case"DAY":return o.day;case"MONTH":return o.month;case"YEAR":return o.year;case"TIMEZONE_HOUR":case"TIMEZONE_MINUTE":throw new m("InvalidFunctionParameters",{function:"EXTRACT"});case"DOW":return o.weekday;case"DOY":return o.ordinal;case"WEEK":return o.weekNumber}else if(A(o))switch(s.toUpperCase()){case"DAY":return o.day;case"MONTH":return o.month;case"YEAR":return o.year;case"TIMEZONE_HOUR":case"TIMEZONE_MINUTE":throw new m("InvalidFunctionParameters",{function:"EXTRACT"});case"DOW":return o.toDateTime("unknown").weekday;case"DOY":return o.toDateTime("unknown").ordinal;case"WEEK":return o.toDateTime("unknown").weekNumber}else if(P(o))switch(s.toUpperCase()){case"SECOND":return o.second;case"MINUTE":return o.minute;case"HOUR":return o.hour}else if(L(o))switch(s.toUpperCase()){case"SECOND":return o.second;case"MINUTE":return o.minute;case"HOUR":return o.hour;case"DAY":return o.day;case"MONTH":return o.month;case"YEAR":return o.year;case"TIMEZONE_HOUR":return o.timezoneOffsetHour;case"TIMEZONE_MINUTE":return o.timezoneOffsetMinutes;case"DOW":return o.toDateTime().weekday;case"DOY":return o.toDateTime().ordinal;case"WEEK":return o.toDateTime().weekNumber}throw new m("InvalidFunctionParameters",{function:"EXTRACT"})}},substring:{minParams:2,maxParams:3,evaluate:s=>{if(s.length===2){const[o,t]=s;return o==null||t==null?null:o.toString().substring(t-1)}if(s.length===3){const[o,t,l]=s;return o==null||t==null||l==null?null:l<=0?"":o.toString().substring(t-1,t+l-1)}}},position:{minParams:2,maxParams:2,evaluate:([s,o])=>s==null||o==null?null:o.indexOf(s)+1},trim:{minParams:2,maxParams:3,evaluate:s=>{const o=s.length===3,t=o?s[1]:" ",l=o?s[2]:s[1];if(t==null||l==null)return null;const f=`(${gi(t)})`;switch(s[0]){case"BOTH":return l.replaceAll(new RegExp(`^${f}*|${f}*$`,"g"),"");case"LEADING":return l.replaceAll(new RegExp(`^${f}*`,"g"),"");case"TRAILING":return l.replaceAll(new RegExp(`${f}*$`,"g"),"")}throw new m("InvalidFunctionParameters",{function:"TRIM"})}},abs:{minParams:1,maxParams:1,evaluate:s=>s[0]==null?null:Math.abs(s[0])},ceiling:{minParams:1,maxParams:1,evaluate:s=>s[0]==null?null:Math.ceil(s[0])},floor:{minParams:1,maxParams:1,evaluate:s=>s[0]==null?null:Math.floor(s[0])},log:{minParams:1,maxParams:1,evaluate:s=>s[0]==null?null:Math.log(s[0])},log10:{minParams:1,maxParams:1,evaluate:s=>s[0]==null?null:Math.log(s[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:s=>s[0]==null?null:Math.sin(s[0])},cos:{minParams:1,maxParams:1,evaluate:s=>s[0]==null?null:Math.cos(s[0])},tan:{minParams:1,maxParams:1,evaluate:s=>s[0]==null?null:Math.tan(s[0])},asin:{minParams:1,maxParams:1,evaluate:s=>s[0]==null?null:Math.asin(s[0])},acos:{minParams:1,maxParams:1,evaluate:s=>s[0]==null?null:Math.acos(s[0])},atan:{minParams:1,maxParams:1,evaluate:s=>s[0]==null?null:Math.atan(s[0])},sign:{minParams:1,maxParams:1,evaluate:s=>s[0]==null?null:s[0]>0?1:s[0]<0?-1:0},power:{minParams:2,maxParams:2,evaluate:s=>s[0]==null||s[1]==null?null:s[0]**s[1]},mod:{minParams:2,maxParams:2,evaluate:s=>s[0]==null||s[1]==null?null:s[0]%s[1]},round:{minParams:1,maxParams:2,evaluate:s=>{const o=s[0],t=s.length===2?10**s[1]:1;return o==null?null:Math.round(o*t)/t}},truncate:{minParams:1,maxParams:2,evaluate:s=>s[0]==null?null:s.length===1||s[1]===0?Math.trunc(s[0]):wi("trunc",s[0],-Number(s[1]))},char_length:{minParams:1,maxParams:1,evaluate:s=>z(s[0])?s[0].length:0},concat:{minParams:1,maxParams:1/0,evaluate:s=>{let o="";for(let t=0;t<s.length;t++){if(s[t]==null)return null;o+=s[t].toString()}return o}},lower:{minParams:1,maxParams:1,evaluate:s=>s[0]==null?null:s[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:s=>s[0]==null?null:s[0].toString().toUpperCase()},coalesce:{minParams:1,maxParams:1/0,evaluate:s=>{for(const o of s)if(o!==null)return o;return null}},cosh:{minParams:1,maxParams:1,evaluate:s=>s[0]==null?null:Math.cosh(s[0])},sinh:{minParams:1,maxParams:1,evaluate:s=>s[0]==null?null:Math.sinh(s[0])},tanh:{minParams:1,maxParams:1,evaluate:s=>s[0]==null?null:Math.tanh(s[0])},nullif:{minParams:2,maxParams:2,evaluate:s=>W(s[0],s[1],"=")?null:s[0]},cast:{minParams:2,maxParams:2,evaluate:(s,o)=>{const t=s[0],l=s[1];if(t===null)return null;switch(l.type){case"integer":{if(!nt(t))throw new m("CannotCastValue");const f=parseInt(t,10);if(isNaN(f))throw new m("CannotCastValue");return f}case"smallint":{if(!nt(t))throw new m("CannotCastValue");const f=parseInt(t,10);if(isNaN(f))throw new m("CannotCastValue");if(f>32767||f<-32767)throw new m("CannotCastValue");return f}case"float":case"real":{if(!nt(t))throw new m("CannotCastValue");const f=parseFloat(t);if(isNaN(f))throw new m("CannotCastValue");return f}case"time":return Yi(t);case"date":return ji(t);case"timestamp":return Wi(t,o,l.withtimezone===!0);case"varchar":{const f=An(t);if(f.length>l.size)throw new m("CannotCastValue");return f}default:throw new m("InvalidDataType")}}}};function Pn(s,o,t,l){if(s==="||")return dt("concat",[o,t],l);if(o===null||t===null)return null;if(j(o)){if(j(t))return pt(o,t,s);if(ue(t))return tc(o,t,s);if(P(t))return fc();if(A(t))return dc();if(L(t))return cc();if(F(t))return lc();if(z(t))return pc(o,t,s);throw new m("InvalidOperator")}if(A(o)){if(j(t))return sc(o,t,s);if(ue(t))return nc(o,t,s);if(P(t))return Tc();if(A(t))return yc(o,t,s);if(L(t))return gc(o,t,s);if(F(t))return Ic(o,t,s);if(z(t))return Lc();throw new m("InvalidOperator")}if(P(o)){if(j(t))return ac(o,t,s);if(ue(t))return Ki(o,t,s);if(P(t))return _c();if(A(t))return Cc();if(L(t))return Dc();if(F(t))return Ec();if(z(t))return Pc();throw new m("InvalidOperator")}if(ue(o)){if(j(t))return ec(o,t,s);if(ue(t))return Xi(o,t,s);if(P(t))return Bi(o,t,s);if(A(t))return Gi(o,t,s);if(L(t))return Qi(o,t,s);if(F(t))return Ji(o,t,s);if(z(t))return vc();throw new m("InvalidOperator")}if(F(o)){if(j(t))return uc(o,t,s);if(ue(t))return rc(o,t,s);if(P(t))return Ac();if(A(t))return bc(o,t,s);if(L(t))return Fc(o,t,s);if(F(t))return Mc(o,t,s);if(z(t))return Rc();throw new m("InvalidOperator")}if(L(o)){if(j(t))return ic(o,t,s);if(ue(t))return oc(o,t,s);if(P(t))return Oc();if(A(t))return Nc(o,t,s);if(L(t))return Sc(o,t,s);if(F(t))return xc(o,t,s);if(z(t))return Uc();throw new m("InvalidOperator")}if(z(o)){if(j(t))return mc(o,t,s);if(ue(t))return wc();if(P(t))return $c();if(A(t))return Vc();if(L(t))return zc();if(F(t))return kc();if(z(t))return hc(o,t,s);throw new m("InvalidOperator")}throw new m("InvalidOperator")}function pt(s,o,t){switch(t){case"+":return s+o;case"-":return s-o;case"*":return s*o;case"/":return s/o}throw new m("InvalidOperator")}function Ji(s,o,t){switch(t){case"+":return o.plus({milliseconds:s.valueInMilliseconds()});case"-":return s.valueInMilliseconds()-o.toMillis()}throw new m("InvalidOperator")}function Bi(s,o,t){if(t==="+")return o.plus("milliseconds",s.valueInMilliseconds());throw new m("InvalidOperator")}function Gi(s,o,t){if(t==="+")return o.plus("milliseconds",s.valueInMilliseconds());throw new m("InvalidOperator")}function Ki(s,o,t){switch(t){case"+":return s.plus("milliseconds",o.valueInMilliseconds());case"-":return s.plus("milliseconds",-1*o.valueInMilliseconds())}throw new m("InvalidOperator")}function Qi(s,o,t){if(t==="+")return o.addMilliseconds(s.valueInMilliseconds());throw new m("InvalidOperator")}function Xi(s,o,t){switch(t){case"+":return q.createFromMilliseconds(s.valueInMilliseconds()+o.valueInMilliseconds());case"-":return q.createFromMilliseconds(s.valueInMilliseconds()-o.valueInMilliseconds());case"*":return q.createFromMilliseconds(s.valueInMilliseconds()*o.valueInMilliseconds());case"/":return q.createFromMilliseconds(s.valueInMilliseconds()/o.valueInMilliseconds())}throw new m("InvalidOperator")}function ec(s,o,t){switch(t){case"+":return q.createFromMilliseconds(s.valueInMilliseconds()+o);case"-":return q.createFromMilliseconds(s.valueInMilliseconds()-o);case"*":return q.createFromMilliseconds(s.valueInMilliseconds()*o);case"/":return q.createFromMilliseconds(s.valueInMilliseconds()/o)}throw new m("InvalidOperator")}function tc(s,o,t){switch(t){case"+":return q.createFromMilliseconds(s+o.valueInMilliseconds());case"-":return q.createFromMilliseconds(s-o.valueInMilliseconds());case"*":return q.createFromMilliseconds(s*o.valueInMilliseconds());case"/":return q.createFromMilliseconds(s/o.valueInMilliseconds())}throw new m("InvalidOperator")}function nc(s,o,t){switch(t){case"+":return s.plus("milliseconds",o.valueInMilliseconds());case"-":return s.plus("milliseconds",-1*o.valueInMilliseconds())}throw new m("InvalidOperator")}function rc(s,o,t){switch(t){case"+":return s.plus({milliseconds:o.valueInMilliseconds()});case"-":return s.minus({milliseconds:o.valueInMilliseconds()})}throw new m("InvalidOperator")}function oc(s,o,t){switch(t){case"+":return s.addMilliseconds(o.valueInMilliseconds());case"-":return s.addMilliseconds(-1*o.valueInMilliseconds())}throw new m("InvalidOperator")}function uc(s,o,t){const l=1e3*o*24*60*60;switch(t){case"+":return s.plus({milliseconds:l});case"-":return s.minus({milliseconds:l})}throw new m("InvalidOperator")}function sc(s,o,t){const l=1e3*o*24*60*60;switch(t){case"+":return s.plus("milliseconds",l);case"-":return s.plus("milliseconds",-1*l)}throw new m("InvalidOperator")}function ac(s,o,t){const l=1e3*o*24*60*60;switch(t){case"+":return s.plus("milliseconds",l);case"-":return s.plus("milliseconds",-1*l)}throw new m("InvalidOperator")}function lc(s,o,t){throw new m("InvalidOperator")}function ic(s,o,t){const l=1e3*o*24*60*60;switch(t){case"+":return s.addMilliseconds(l);case"-":return s.addMilliseconds(-1*l)}throw new m("InvalidOperator")}function cc(s,o,t){throw new m("InvalidOperator")}function fc(s,o,t){throw new m("InvalidOperator")}function dc(s,o,t){throw new m("InvalidOperator")}function pc(s,o,t){const l=parseFloat(o);if(isNaN(l))throw new m("InvalidOperator");return pt(s,l,t)}function mc(s,o,t){const l=parseFloat(s);if(isNaN(l))throw new m("InvalidOperator");return pt(l,o,t)}function hc(s,o,t){if(t==="+")return s+o;throw new m("InvalidOperator")}function vc(s,o,t){throw new m("InvalidOperator")}function wc(s,o,t){throw new m("InvalidOperator")}function Ic(s,o,t){if(t==="-")return s.toDateTimeLuxon(o.zone).diff(o).as("days");throw new m("InvalidOperator")}function gc(s,o,t){if(t==="-")return s.toDateTimeLuxon(o.toDateTime().zone).diff(o.toDateTime()).as("days");throw new m("InvalidOperator")}function yc(s,o,t){if(t==="-")return s.toDateTimeLuxon("UTC").diff(o.toDateTimeLuxon("UTC")).as("days");throw new m("InvalidOperator")}function Tc(s,o,t){throw new m("InvalidOperator")}function Oc(s,o,t){throw new m("InvalidOperator")}function Nc(s,o,t){if(t==="-")return s.toDateTime().diff(o.toDateTimeLuxon(s.toDateTime().zone)).as("days");throw new m("InvalidOperator")}function xc(s,o,t){if(t==="-")return s.toDateTime().diff(o).as("days");throw new m("InvalidOperator")}function Sc(s,o,t){if(t==="-")return s.toDateTime().diff(o.toDateTime()).as("days");throw new m("InvalidOperator")}function Ec(s,o,t){throw new m("InvalidOperator")}function Cc(s,o,t){throw new m("InvalidOperator")}function Dc(s,o,t){throw new m("InvalidOperator")}function _c(s,o,t){throw new m("InvalidOperator")}function Mc(s,o,t){if(t==="-")return s.diff(o).as("days");throw new m("InvalidOperator")}function bc(s,o,t){if(t==="-")return s.diff(o.toDateTimeLuxon(s.zone)).as("days");throw new m("InvalidOperator")}function Fc(s,o,t){if(t==="-")return s.diff(o.toDateTime()).as("days");throw new m("InvalidOperator")}function Ac(s,o,t){throw new m("InvalidOperator")}function Lc(s,o,t){throw new m("InvalidOperator")}function Pc(s,o,t){throw new m("InvalidOperator")}function Rc(s,o,t){throw new m("InvalidOperator")}function Uc(s,o,t){throw new m("InvalidOperator")}function $c(s,o,t){throw new m("InvalidOperator")}function Vc(s,o,t){throw new m("InvalidOperator")}function kc(s,o,t){throw new m("InvalidOperator")}function zc(s,o,t){throw new m("InvalidOperator")}class rt extends SyntaxError{constructor(o,t,l,f){super(o),this.expected=t,this.found=l,this.location=f,this.name="SyntaxError"}format(o){let t="Error: "+this.message;if(this.location){let l=null;const f=o.find(T=>T.source===this.location.source);f&&(l=f.text.split(/\r\n|\n|\r/g));const h=this.location.start,g=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(h):h,S=this.location.source+":"+g.line+":"+g.column;if(l){const T=this.location.end,x="".padEnd(g.line.toString().length," "),_=l[h.line-1],H=(h.line===T.line?T.column:_.length+1)-h.column||1;t+=`
 --> `+S+`
`+x+` |
`+g.line+" | "+_+`
`+x+" | "+"".padEnd(h.column-1," ")+"".padEnd(H,"^")}else t+=`
 at `+S}return t}static buildMessage(o,t){function l(E){return E.codePointAt(0).toString(16).toUpperCase()}const f=Object.prototype.hasOwnProperty.call(RegExp.prototype,"unicode")?new RegExp("[\\p{C}\\p{Mn}\\p{Mc}]","gu"):null;function h(E){return f?E.replace(f,D=>"\\u{"+l(D)+"}"):E}function g(E){return h(E.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,D=>"\\x0"+l(D)).replace(/[\x10-\x1F\x7F-\x9F]/g,D=>"\\x"+l(D)))}function S(E){return h(E.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,D=>"\\x0"+l(D)).replace(/[\x10-\x1F\x7F-\x9F]/g,D=>"\\x"+l(D)))}const T={literal:E=>'"'+g(E.text)+'"',class(E){const D=E.parts.map(Z=>Array.isArray(Z)?S(Z[0])+"-"+S(Z[1]):S(Z));return"["+(E.inverted?"^":"")+D.join("")+"]"+(E.unicode?"u":"")},any:()=>"any character",end:()=>"end of input",other:E=>E.description};function x(E){return T[E.type](E)}function _(E){const D=E.map(x);if(D.sort(),D.length>0){let Z=1;for(let ne=1;ne<D.length;ne++)D[ne-1]!==D[ne]&&(D[Z]=D[ne],Z++);D.length=Z}switch(D.length){case 1:return D[0];case 2:return D[0]+" or "+D[1];default:return D.slice(0,-1).join(", ")+", or "+D[D.length-1]}}function H(E){return E?'"'+g(E)+'"':"end of input"}return"Expected "+_(o)+" but "+H(t)+" found."}}function Hc(s,o){const t={},l=(o=o!==void 0?o:{}).grammarSource,f={start:At};let h=At;const g="!",S="=",T=">=",x=">",_="<=",H="<>",E="!=",D="||",Z="@",ne="'",ht="N'",ye="''",qn=".",Zn="null",jn="true",Wn="false",Yn="in",Jn="is",Bn="like",Gn="escape",Kn="not",Qn="and",Xn="or",er="between",tr="from",nr="for",rr="substring",or="extract",ur="trim",sr="position",ar="timestamp",lr="date",ir="time",cr="leading",fr="trailing",dr="both",pr="cast",mr="as",hr="integer",vr="int",wr="smallint",Ir="float",gr="real",yr="varchar",Tr="to",Or="interval",Nr="year",xr="timezone_hour",Sr="timezone_minute",Er="month",Cr="day",Dr="hour",_r="minute",Mr="second",br="dow",Fr="doy",Ar="week",Lr="case",Pr="end",Rr="when",Ur="then",$r="else",Vr=",",kr="(",zr=")",vt="`",Hr=/^[<-=]/,Te=/^[+\-]/,qr=/^[*\/]/,Zr=/^[A-Za-z_\x80-\uFFFF]/,jr=/^[A-Za-z0-9_]/,wt=/^[A-Za-z0-9_.\x80-\uFFFF]/,Wr=/^["]/,It=/^[^']/,Yr=/^[0-9]/,Jr=/^[eE]/,Br=/^[ \t\n\r]/,gt=/^[^`]/,Gr=y("!",!1),Kr=y("=",!1),Qr=y(">=",!1),Xr=y(">",!1),eo=y("<=",!1),to=y("<>",!1),no=J([["<","="]],!1,!1,!1),ro=y("!=",!1),Oe=J(["+","-"],!1,!1,!1),oo=y("||",!1),uo=J(["*","/"],!1,!1,!1),so=J([["A","Z"],["a","z"],"_",["","￿"]],!1,!1,!1),ao=J([["A","Z"],["a","z"],["0","9"],"_"],!1,!1,!1),yt=J([["A","Z"],["a","z"],["0","9"],"_",".",["","￿"]],!1,!1,!1),lo=J(['"'],!1,!1,!1),io=y("@",!1),Tt=y("'",!1),co=y("N'",!1),Ot=y("''",!1),Nt=J(["'"],!0,!1,!1),fo=y(".",!1),po=J([["0","9"]],!1,!1,!1),mo=J(["e","E"],!1,!1,!1),ho=y("NULL",!0),vo=y("TRUE",!0),wo=y("FALSE",!0),Io=y("IN",!0),go=y("IS",!0),yo=y("LIKE",!0),To=y("ESCAPE",!0),Oo=y("NOT",!0),No=y("AND",!0),xo=y("OR",!0),So=y("BETWEEN",!0),Eo=y("FROM",!0),Co=y("FOR",!0),Do=y("SUBSTRING",!0),_o=y("EXTRACT",!0),Mo=y("TRIM",!0),bo=y("POSITION",!0),Fo=y("TIMESTAMP",!0),Ao=y("DATE",!0),Lo=y("TIME",!0),Po=y("LEADING",!0),Ro=y("TRAILING",!0),Uo=y("BOTH",!0),$o=y("CAST",!0),Vo=y("AS",!0),ko=y("INTEGER",!0),zo=y("INT",!0),Ho=y("SMALLINT",!0),qo=y("FLOAT",!0),Zo=y("REAL",!0),jo=y("VARCHAR",!0),Wo=y("TO",!0),Yo=y("INTERVAL",!0),Jo=y("YEAR",!0),Bo=y("TIMEZONE_HOUR",!0),Go=y("TIMEZONE_MINUTE",!0),Ko=y("MONTH",!0),Qo=y("DAY",!0),Xo=y("HOUR",!0),eu=y("MINUTE",!0),tu=y("SECOND",!0),nu=y("DOW",!0),ru=y("DOY",!0),ou=y("WEEK",!0),uu=y("CASE",!0),su=y("END",!0),au=y("WHEN",!0),lu=y("THEN",!0),iu=y("ELSE",!0),cu=y(",",!1),fu=y("(",!1),du=y(")",!1),pu=J([" ","	",`
`,"\r"],!1,!1,!1),xt=y("`",!1),St=J(["`"],!0,!1,!1);function mu(e){return{type:"expression-list",location:I(),value:e}}function Et(e,n,u){return{op:n,expr:u,location:I()}}function hu(e,n){return he(e,n)}function Ct(e,n,u){return{op:n,expr:u,location:I()}}function vu(e,n){return he(e,n)}function wu(e){return fi("NOT",e,I())}function Iu(e,n){return n==""||n==null||n==null?e:n.type=="arithmetic"?he(e,n.tail):hn(n.op,e,n.right,n.escape,I())}function Dt(e,n){return{op:e,expr:n,location:I()}}function gu(e){return{type:"arithmetic",tail:e}}function yu(e,n){return{op:e+"NOT",right:n}}function Tu(e,n){return{op:e,right:n}}function Ou(e,n,u){return B(I(),n,u)}function Nu(e,n){return{op:"NOT"+e,right:n}}function xu(e,n,u){return B(I(),n,u)}function Su(e,n){return{op:e,right:n}}function Eu(e){return e[0]+" "+e[2]}function Cu(e){return e[0]+" "+e[2]}function Du(e,n,u){return{op:e,right:n,escape:u.value}}function _u(e,n){return{op:e,right:n,escape:""}}function Mu(e,n){return{op:e,right:n}}function bu(e,n){return{op:e,right:n}}function _t(e,n,u){return{op:n,expr:u,location:I()}}function Fu(e,n){return he(e,n)}function Mt(e,n,u){return{op:n,expr:u,location:I()}}function Au(e,n){return he(e,n)}function Lu(e){return e.paren=!0,e}function Pu(e){return/^CURRENT_DATE$/i.test(e)?{type:"current-time",location:I(),mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(e)?{type:"current-time",location:I(),mode:"timestamp"}:/^CURRENT_TIME$/i.test(e)?{type:"current-time",location:I(),mode:"time"}:/^CURRENT_USER$/i.test(e)?{type:"current-user",location:I()}:{type:"column-reference",location:I(),table:"",column:e}}function Ru(e){return{type:"column-reference",location:I(),table:"",column:e,delimited:!0}}function Uu(e,n){return e+n.join("")}function $u(e,n){return e+n.join("")}function Vu(e){return e.join("")}function ku(){return'"'}function zu(e){return{type:"parameter",location:I(),value:e[1]}}function Hu(e,n){return B(I(),e,n)}function qu(e,n){return B(I(),e,n)}function Zu(e){return{type:"function",location:I(),name:"extract",args:e}}function ju(e,n,u){return B(I(),e,n,...u?[u]:[])}function Wu(e,n,u){return B(I(),e,n,u)}function Yu(e){return{type:"function",location:I(),name:"substring",args:e}}function Ju(e,n){return B(I(),e,n)}function Bu(e,n){return B(I(),e,n)}function Gu(e){return{type:"function",location:I(),name:"cast",args:e}}function Ku(){return{type:"data-type",location:I(),value:{type:"integer"}}}function Qu(){return{type:"data-type",location:I(),value:{type:"smallint"}}}function Xu(){return{type:"data-type",location:I(),value:{type:"float"}}}function es(){return{type:"data-type",location:I(),value:{type:"real"}}}function ts(){return{type:"data-type",location:I(),value:{type:"date"}}}function ns(){return{type:"data-type",location:I(),value:{type:"timestamp"}}}function rs(){return{type:"data-type",location:I(),value:{type:"time"}}}function os(e){return{type:"data-type",location:I(),value:{type:"varchar",size:parseInt(e)}}}function us(e,n,u){return B(I(),e,n,u)}function ss(e,n){return B(I(),e,n)}function as(e){return{type:"function",location:I(),name:"trim",args:e}}function ls(e){return{type:"string",location:I(),value:e??"BOTH"}}function is(e,n){return B(I(),e,n)}function cs(e,n){return B(I(),e,n)}function fs(e){return{type:"function",location:I(),name:"position",args:e}}function ds(e,n){return{type:"function",location:I(),name:e,args:n}}function ps(e){return{type:"string",location:I(),value:e}}function ms(e){return e.type==="string"&&di(e.value),{type:"timestamp",location:I(),value:e.value}}function hs(e){return e.type==="string"&&pi(e.value),{type:"time",location:I(),value:e.value}}function vs(e,n,u){return{type:"interval",location:I(),value:n,qualifier:u,op:e}}function ws(e,n){return{type:"interval",location:I(),value:e,qualifier:n,op:""}}function Is(e,n){return{type:"interval-qualifier",location:I(),start:e,end:n}}function gs(e,n){return{type:"interval-period",location:I(),period:e.value,precision:n,secondary:null}}function ys(e){return{type:"interval-period",location:I(),period:e.value,precision:null,secondary:null}}function Ts(e){return{type:"interval-period",location:I(),period:e.value,precision:null,secondary:null}}function Os(e,n){return{type:"interval-period",location:I(),period:"second",precision:e,secondary:n}}function Ns(e){return{type:"interval-period",location:I(),period:"second",precision:e,secondary:null}}function xs(){return{type:"interval-period",location:I(),period:"second",precision:null,secondary:null}}function Ss(e,n){return{type:"interval-period",location:I(),period:e.value,precision:n,secondary:null}}function Es(e){return{type:"interval-period",location:I(),period:e.value,precision:null,secondary:null}}function Cs(e,n){return{type:"interval-period",location:I(),period:"second",precision:e,secondary:n}}function Ds(e){return{type:"interval-period",location:I(),period:"second",precision:e,secondary:null}}function _s(){return{type:"interval-period",location:I(),period:"second",precision:null,secondary:null}}function Ms(){return{type:"string",location:I(),value:"day"}}function bs(){return{type:"string",location:I(),value:"hour"}}function Fs(){return{type:"string",location:I(),value:"minute"}}function As(){return{type:"string",location:I(),value:"month"}}function Ls(){return{type:"string",location:I(),value:"year"}}function Ps(e){return parseFloat(e)}function Rs(e){return parseFloat(e)}function Us(e){return e.type==="string"&&mi(e.value),{type:"date",location:I(),value:e.value}}function $s(){return{type:"null",location:I(),value:null}}function Vs(){return{type:"boolean",location:I(),value:!0}}function ks(){return{type:"boolean",location:I(),value:!1}}function bt(){return"'"}function zs(e){return{type:"string",location:I(),value:e.join("")}}function Hs(e,n){return{type:"case-expression",location:I(),format:"simple",operand:e,clauses:n,else:null,elseLocation:null}}function qs(e,n,u){return{type:"case-expression",location:I(),format:"simple",operand:e,clauses:n,else:u.value,elseLocation:u.location}}function Zs(e){return{type:"case-expression",location:I(),format:"searched",clauses:e,else:null,elseLocation:null}}function js(e,n){return{type:"case-expression",location:I(),format:"searched",clauses:e,else:n.value,elseLocation:n.location}}function Ws(e,n){return{type:"when-clause",location:I(),operand:e,value:n}}function Ys(e,n){return{type:"when-clause",location:I(),operand:e,value:n}}function Js(e){return{type:"else-clause",location:I(),value:e}}function Bs(e){return{type:"number",location:I(),value:e}}function Gs(e,n,u){return parseFloat(e+n+u)}function Ks(e,n){return parseFloat(e+n)}function Qs(e,n){return parseFloat(e+n)}function Xs(e){return parseFloat(e)}function ea(e,n){return e[0]+n}function ta(e){return"."+(e??"")}function na(e,n){return e+n}function ra(e){return e.join("")}function oa(e,n){return"e"+(n===null?"":n)}function ua(){return"IN"}function sa(){return"IS"}function aa(){return"LIKE"}function la(){return"ESCAPE"}function ia(){return"NOT"}function ca(){return"AND"}function fa(){return"OR"}function da(){return"BETWEEN"}function pa(){return"FROM"}function ma(){return"FOR"}function ha(){return"SUBSTRING"}function va(){return"EXTRACT"}function wa(){return"TRIM"}function Ia(){return"POSITION"}function ga(){return"TIMESTAMP"}function ya(){return"DATE"}function Ta(){return"TIME"}function Oa(){return"LEADING"}function Na(){return"TRAILING"}function xa(){return"BOTH"}function Sa(){return"CAST"}function Ea(){return"AS"}function Ca(){return"INTEGER"}function Da(){return"INT"}function _a(){return"SMALLINT"}function Ma(){return"FLOAT"}function ba(){return"REAL"}function Fa(){return"VARCHAR"}function Aa(){return"TO"}function La(){return"INTERVAL"}function Pa(){return"YEAR"}function Ra(){return"TIMEZONE_HOUR"}function Ua(){return"TIMEZONE_MINUTE"}function $a(){return"MONTH"}function Va(){return"DAY"}function ka(){return"HOUR"}function za(){return"MINUTE"}function Ha(){return"SECOND"}function qa(){return"DOW"}function Za(){return"DOY"}function ja(){return"WEEK"}function Wa(){return"CASE"}function Ya(){return"END"}function Ja(){return"WHEN"}function Ba(){return"THEN"}function Ga(){return"ELSE"}function Ka(e){return e.join("")}let r=0|o.peg$currPos,d=r;const ie=[{line:1,column:1}];let de,Q=r,Ne=o.peg$maxFailExpected||[],c=0|o.peg$silentFails;if(o.startRule){if(!(o.startRule in f))throw new Error(`Can't start parsing from rule "`+o.startRule+'".');h=f[o.startRule]}function I(){return xe(d,r)}function ze(e,n){throw el(e,n=n!==void 0?n:xe(d,r))}function Qa(e=r){const n=s.codePointAt(e);return n===void 0?"":String.fromCodePoint(n)}function y(e,n){return{type:"literal",text:e,ignoreCase:n}}function J(e,n,u,a){return{type:"class",parts:e,inverted:n,ignoreCase:u,unicode:a}}function Xa(){return{type:"end"}}function Ft(e){let n,u=ie[e];if(u)return u;if(e>=ie.length)n=ie.length-1;else for(n=e;!ie[--n];);for(u=ie[n],u={line:u.line,column:u.column};n<e;)s.charCodeAt(n)===10?(u.line++,u.column=1):u.column++,n++;return ie[e]=u,u}function xe(e,n,u){const a=Ft(e),i=Ft(n);return{source:l,start:{offset:e,line:a.line,column:a.column},end:{offset:n,line:i.line,column:i.column}}}function w(e){r<Q||(r>Q&&(Q=r,Ne=[]),Ne.push(e))}function el(e,n){return new rt(e,null,null,n)}function tl(e,n,u){return new rt(rt.buildMessage(e,n),e,n,u)}function At(){let e,n;return e=r,p(),n=M(),n!==t?(p(),d=e,e=n):(r=e,e=t),e}function Lt(){let e,n,u,a,i,v,O,C;if(e=r,n=U(),n!==t){for(p(),u=[],a=M();a!==t;)u.push(a),a=r,i=r,v=p(),O=re(),O!==t?(C=p(),v=[v,O,C],i=v):(r=i,i=t),i!==t?(i=M(),i===t?(r=a,a=t):a=i):a=i;a=p(),i=$(),i!==t?(d=e,e=mu(u)):(r=e,e=t)}else r=e,e=t;return e}function M(){let e,n,u,a,i,v;if(e=r,n=He(),n!==t){for(u=[],a=r,p(),i=Xt(),i!==t?(p(),v=He(),v!==t?(d=a,a=Et(n,i,v)):(r=a,a=t)):(r=a,a=t);a!==t;)u.push(a),a=r,p(),i=Xt(),i!==t?(p(),v=He(),v!==t?(d=a,a=Et(n,i,v)):(r=a,a=t)):(r=a,a=t);d=e,e=hu(n,u)}else r=e,e=t;return e}function He(){let e,n,u,a,i,v;if(e=r,n=Se(),n!==t){for(u=[],a=r,p(),i=Fe(),i!==t?(p(),v=Se(),v!==t?(d=a,a=Ct(n,i,v)):(r=a,a=t)):(r=a,a=t);a!==t;)u.push(a),a=r,p(),i=Fe(),i!==t?(p(),v=Se(),v!==t?(d=a,a=Ct(n,i,v)):(r=a,a=t)):(r=a,a=t);d=e,e=vu(n,u)}else r=e,e=t;return e}function Se(){let e,n,u,a,i;return e=r,n=me(),n===t&&(n=r,s.charCodeAt(r)===33?(u=g,r++):(u=t,c===0&&w(Gr)),u!==t?(a=r,c++,s.charCodeAt(r)===61?(i=S,r++):(i=t,c===0&&w(Kr)),c--,i===t?a=void 0:(r=a,a=t),a!==t?(u=[u,a],n=u):(r=n,n=t)):(r=n,n=t)),n!==t?(u=p(),a=Se(),a!==t?(d=e,e=wu(a)):(r=e,e=t)):(r=e,e=t),e===t&&(e=nl()),e}function nl(){let e,n,u,a;return e=r,n=te(),n!==t?(u=r,p(),a=rl(),a!==t?u=a:(r=u,u=t),u===t&&(u=null),d=e,e=Iu(n,u)):(r=e,e=t),e}function rl(){let e;return e=ol(),e===t&&(e=ll(),e===t&&(e=sl(),e===t&&(e=ul(),e===t&&(e=al())))),e}function ol(){let e,n,u,a,i;if(e=r,n=[],u=r,p(),a=Pt(),a!==t?(p(),i=te(),i!==t?(d=u,u=Dt(a,i)):(r=u,u=t)):(r=u,u=t),u!==t)for(;u!==t;)n.push(u),u=r,p(),a=Pt(),a!==t?(p(),i=te(),i!==t?(d=u,u=Dt(a,i)):(r=u,u=t)):(r=u,u=t);else n=t;return n!==t&&(d=e,n=gu(n)),e=n,e}function Pt(){let e;return s.substr(r,2)===T?(e=T,r+=2):(e=t,c===0&&w(Qr)),e===t&&(s.charCodeAt(r)===62?(e=x,r++):(e=t,c===0&&w(Xr)),e===t&&(s.substr(r,2)===_?(e=_,r+=2):(e=t,c===0&&w(eo)),e===t&&(s.substr(r,2)===H?(e=H,r+=2):(e=t,c===0&&w(to)),e===t&&(e=s.charAt(r),Hr.test(e)?r++:(e=t,c===0&&w(no)),e===t&&(s.substr(r,2)===E?(e=E,r+=2):(e=t,c===0&&w(ro))))))),e}function ul(){let e,n,u,a;return e=r,n=Kt(),n!==t?(p(),u=me(),u!==t?(p(),a=te(),a!==t?(d=e,e=yu(n,a)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,n=Kt(),n!==t?(p(),u=te(),u!==t?(d=e,e=Tu(n,u)):(r=e,e=t)):(r=e,e=t)),e}function sl(){let e,n,u,a,i,v,O,C;return e=r,n=me(),n!==t?(p(),u=en(),u!==t?(a=p(),i=r,v=te(),v!==t?(p(),O=Fe(),O!==t?(p(),C=te(),C!==t?(d=i,i=Ou(u,v,C)):(r=i,i=t)):(r=i,i=t)):(r=i,i=t),i!==t?(d=e,e=Nu(u,i)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,n=en(),n!==t?(p(),u=r,a=te(),a!==t?(i=p(),v=Fe(),v!==t?(p(),O=te(),O!==t?(d=u,u=xu(n,a,O)):(r=u,u=t)):(r=u,u=t)):(r=u,u=t),u!==t?(d=e,e=Su(n,u)):(r=e,e=t)):(r=e,e=t)),e}function Rt(){let e,n,u,a,i;return e=r,n=r,u=me(),u!==t?(a=p(),i=Qt(),i!==t?(u=[u,a,i],n=u):(r=n,n=t)):(r=n,n=t),n!==t&&(d=e,n=Eu(n)),e=n,e===t&&(e=Qt()),e}function Ut(){let e,n,u,a,i;return e=r,n=r,u=me(),u!==t?(a=p(),i=Je(),i!==t?(u=[u,a,i],n=u):(r=n,n=t)):(r=n,n=t),n!==t&&(d=e,n=Cu(n)),e=n,e===t&&(e=Je()),e}function al(){let e,n,u,a,i;return e=r,n=Rt(),n!==t?(p(),u=se(),u!==t?(p(),a=zl(),a!==t?(p(),i=Ye(),i!==t?(d=e,e=Du(n,u,i)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,n=Rt(),n!==t?(p(),u=se(),u!==t?(d=e,e=_u(n,u)):(r=e,e=t)):(r=e,e=t)),e}function ll(){let e,n,u;return e=r,n=Ut(),n!==t?(p(),u=Lt(),u!==t?(d=e,e=Mu(n,u)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,n=Ut(),n!==t?(p(),u=We(),u!==t?(d=e,e=bu(n,u)):(r=e,e=t)):(r=e,e=t)),e}function te(){let e,n,u,a,i,v;if(e=r,n=qe(),n!==t){for(u=[],a=r,p(),i=$t(),i!==t?(p(),v=qe(),v!==t?(d=a,a=_t(n,i,v)):(r=a,a=t)):(r=a,a=t);a!==t;)u.push(a),a=r,p(),i=$t(),i!==t?(p(),v=qe(),v!==t?(d=a,a=_t(n,i,v)):(r=a,a=t)):(r=a,a=t);d=e,e=Fu(n,u)}else r=e,e=t;return e}function $t(){let e;return e=s.charAt(r),Te.test(e)?r++:(e=t,c===0&&w(Oe)),e===t&&(s.substr(r,2)===D?(e=D,r+=2):(e=t,c===0&&w(oo))),e}function qe(){let e,n,u,a,i,v;if(e=r,n=Ze(),n!==t){for(u=[],a=r,p(),i=Vt(),i!==t?(p(),v=Ze(),v!==t?(d=a,a=Mt(n,i,v)):(r=a,a=t)):(r=a,a=t);a!==t;)u.push(a),a=r,p(),i=Vt(),i!==t?(p(),v=Ze(),v!==t?(d=a,a=Mt(n,i,v)):(r=a,a=t)):(r=a,a=t);d=e,e=Au(n,u)}else r=e,e=t;return e}function Vt(){let e;return e=s.charAt(r),qr.test(e)?r++:(e=t,c===0&&w(uo)),e}function Ze(){let e,n,u,a;return e=Ol(),e===t&&(e=vl(),e===t&&(e=wl(),e===t&&(e=gl(),e===t&&(e=yl(),e===t&&(e=Il(),e===t&&(e=Tl(),e===t&&(e=Fl(),e===t&&(e=il(),e===t&&(e=We(),e===t&&(e=r,n=U(),n!==t?(p(),u=M(),u!==t?(p(),a=$(),a!==t?(d=e,e=Lu(u)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t))))))))))),e}function il(){let e,n;return e=r,n=cl(),n!==t&&(d=e,n=Pu(n)),e=n,e===t&&(e=r,n=dl(),n!==t&&(d=e,n=Ru(n)),e=n),e}function cl(){let e,n;return e=r,n=fl(),n!==t&&(d=e,n=n),e=n,e}function fl(){let e,n,u,a;if(e=r,n=je(),n!==t){for(u=[],a=zt();a!==t;)u.push(a),a=zt();d=e,e=Uu(n,u)}else r=e,e=t;return e}function kt(){let e,n,u,a;if(e=r,n=je(),n!==t){for(u=[],a=N();a!==t;)u.push(a),a=N();d=e,e=$u(n,u)}else r=e,e=t;return e}function je(){let e;return e=s.charAt(r),Zr.test(e)?r++:(e=t,c===0&&w(so)),e}function N(){let e;return e=s.charAt(r),jr.test(e)?r++:(e=t,c===0&&w(ao)),e}function zt(){let e;return e=s.charAt(r),wt.test(e)?r++:(e=t,c===0&&w(yt)),e}function dl(){let e,n,u,a;return e=r,n=Ee(),n!==t?(u=pl(),a=Ee(),a!==t?(d=e,e=u):(r=e,e=t)):(r=e,e=t),e}function pl(){let e,n,u;for(e=r,n=[],u=Ht();u!==t;)n.push(u),u=Ht();return d=e,n=Vu(n),e=n,e}function Ht(){let e;return e=hl(),e===t&&(e=ml()),e}function ml(){let e,n,u;return e=r,n=Ee(),n!==t?(u=Ee(),u!==t?(d=e,e=ku()):(r=e,e=t)):(r=e,e=t),e}function hl(){let e;return e=s.charAt(r),wt.test(e)?r++:(e=t,c===0&&w(yt)),e}function Ee(){let e;return e=s.charAt(r),Wr.test(e)?r++:(e=t,c===0&&w(lo)),e}function We(){let e,n,u,a;return e=r,n=r,s.charCodeAt(r)===64?(u=Z,r++):(u=t,c===0&&w(io)),u!==t?(a=kt(),a!==t?(u=[u,a],n=u):(r=n,n=t)):(r=n,n=t),n!==t&&(d=e,n=zu(n)),e=n,e}function vl(){let e,n,u,a,i,v,O,C;return e=r,n=tn(),n!==t?(p(),u=r,a=U(),a!==t?(p(),i=jt(),i!==t?(p(),v=Be(),v!==t?(p(),O=M(),O!==t?(p(),C=$(),C!==t?(d=u,u=Hu(i,O)):(r=u,u=t)):(r=u,u=t)):(r=u,u=t)):(r=u,u=t)):(r=u,u=t),u===t&&(u=r,a=U(),a!==t?(p(),i=jt(),i!==t?(p(),v=re(),v!==t?(p(),O=M(),O!==t?(p(),C=$(),C!==t?(d=u,u=qu(i,O)):(r=u,u=t)):(r=u,u=t)):(r=u,u=t)):(r=u,u=t)):(r=u,u=t)),u!==t?(d=e,e=Zu(u)):(r=e,e=t)):(r=e,e=t),e}function wl(){let e,n,u,a,i,v,O,C,oe,Pe,ve;return e=r,n=ql(),n!==t?(p(),u=r,a=U(),a!==t?(p(),i=M(),i!==t?(p(),v=Be(),v!==t?(p(),O=M(),O!==t?(p(),C=r,oe=Hl(),oe!==t?(Pe=p(),ve=M(),ve!==t?(p(),C=ve):(r=C,C=t)):(r=C,C=t),C===t&&(C=null),oe=$(),oe!==t?(d=u,u=ju(i,O,C)):(r=u,u=t)):(r=u,u=t)):(r=u,u=t)):(r=u,u=t)):(r=u,u=t),u===t&&(u=r,a=U(),a!==t?(p(),i=M(),i!==t?(p(),v=re(),v!==t?(p(),O=M(),O!==t?(p(),C=re(),C!==t?(oe=p(),Pe=M(),Pe!==t?(ve=$(),ve!==t?(d=u,u=Wu(i,O,Pe)):(r=u,u=t)):(r=u,u=t)):(r=u,u=t)):(r=u,u=t)):(r=u,u=t)):(r=u,u=t)):(r=u,u=t)),u!==t?(d=e,e=Yu(u)):(r=e,e=t)):(r=e,e=t),e}function Il(){let e,n,u,a,i,v,O,C;return e=r,n=Bl(),n!==t?(p(),u=r,a=U(),a!==t?(p(),i=M(),i!==t?(p(),v=Gl(),v!==t?(p(),O=qt(),O!==t?(p(),C=$(),C!==t?(d=u,u=Ju(i,O)):(r=u,u=t)):(r=u,u=t)):(r=u,u=t)):(r=u,u=t)):(r=u,u=t),u===t&&(u=r,a=U(),a!==t?(p(),i=M(),i!==t?(p(),v=re(),v!==t?(p(),O=qt(),O!==t?(p(),C=$(),C!==t?(d=u,u=Bu(i,O)):(r=u,u=t)):(r=u,u=t)):(r=u,u=t)):(r=u,u=t)):(r=u,u=t)),u!==t?(d=e,e=Gu(u)):(r=e,e=t)):(r=e,e=t),e}function qt(){let e,n,u,a,i;return e=r,n=Kl(),n===t&&(n=Ql()),n!==t&&(d=e,n=Ku()),e=n,e===t&&(e=r,n=Xl(),n!==t&&(d=e,n=Qu()),e=n,e===t&&(e=r,n=ei(),n!==t&&(d=e,n=Xu()),e=n,e===t&&(e=r,n=ti(),n!==t&&(d=e,n=es()),e=n,e===t&&(e=r,n=rn(),n!==t&&(d=e,n=ts()),e=n,e===t&&(e=r,n=nn(),n!==t&&(d=e,n=ns()),e=n,e===t&&(e=r,n=on(),n!==t&&(d=e,n=rs()),e=n,e===t&&(e=r,n=ni(),n!==t?(p(),u=U(),u!==t?(p(),a=ae(),a!==t?(p(),i=$(),i!==t?(d=e,e=os(a)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)))))))),e}function gl(){let e,n,u,a,i,v,O,C,oe;return e=r,n=Zl(),n!==t?(p(),u=r,a=U(),a!==t?(p(),i=Zt(),p(),v=M(),v!==t?(p(),O=Be(),O!==t?(p(),C=M(),C!==t?(p(),oe=$(),oe!==t?(d=u,u=us(i,v,C)):(r=u,u=t)):(r=u,u=t)):(r=u,u=t)):(r=u,u=t)):(r=u,u=t),u===t&&(u=r,a=U(),a!==t?(p(),i=Zt(),p(),v=M(),v!==t?(p(),O=$(),O!==t?(d=u,u=ss(i,v)):(r=u,u=t)):(r=u,u=t)):(r=u,u=t)),u!==t?(d=e,e=as(u)):(r=e,e=t)):(r=e,e=t),e}function Zt(){let e,n;return e=r,n=Wl(),n===t&&(n=Yl(),n===t&&(n=Jl())),n===t&&(n=null),d=e,n=ls(n),e=n,e}function yl(){let e,n,u,a,i,v,O,C;return e=r,n=jl(),n!==t?(p(),u=r,a=U(),a!==t?(p(),i=M(),i!==t?(p(),v=Je(),v!==t?(p(),O=M(),O!==t?(p(),C=$(),C!==t?(d=u,u=is(i,O)):(r=u,u=t)):(r=u,u=t)):(r=u,u=t)):(r=u,u=t)):(r=u,u=t),u===t&&(u=r,a=U(),a!==t?(p(),i=M(),i!==t?(p(),v=re(),v!==t?(p(),O=M(),O!==t?(p(),C=$(),C!==t?(d=u,u=cs(i,O)):(r=u,u=t)):(r=u,u=t)):(r=u,u=t)):(r=u,u=t)):(r=u,u=t)),u!==t?(d=e,e=fs(u)):(r=e,e=t)):(r=e,e=t),e}function Tl(){let e,n,u,a;return e=r,n=r,c++,u=tn(),c--,u===t?n=void 0:(r=n,n=t),n!==t?(u=ci(),u!==t?(p(),a=Lt(),a!==t?(d=e,e=ds(u,a)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e}function jt(){let e,n;return e=r,n=sn(),n===t&&(n=an(),n===t&&(n=ln(),n===t&&(n=cn(),n===t&&(n=fn(),n===t&&(n=le(),n===t&&(n=oi(),n===t&&(n=ui(),n===t&&(n=si(),n===t&&(n=ai(),n===t&&(n=li())))))))))),n!==t&&(d=e,n=ps(n)),e=n,e}function Ol(){let e;return e=Ye(),e===t&&(e=Pl(),e===t&&(e=bl(),e===t&&(e=Ml(),e===t&&(e=_l(),e===t&&(e=Nl(),e===t&&(e=Sl(),e===t&&(e=xl()))))))),e}function Nl(){let e,n,u;return e=r,n=nn(),n!==t?(p(),u=se(),u!==t?(d=e,e=ms(u)):(r=e,e=t)):(r=e,e=t),e}function xl(){let e,n,u;return e=r,n=on(),n!==t?(p(),u=se(),u!==t?(d=e,e=hs(u)):(r=e,e=t)):(r=e,e=t),e}function Sl(){let e,n,u,a,i;return e=r,n=un(),n!==t?(p(),u=s.charAt(r),Te.test(u)?r++:(u=t,c===0&&w(Oe)),u!==t?(p(),a=se(),a!==t?(p(),i=Wt(),i!==t?(d=e,e=vs(u,a,i)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,n=un(),n!==t?(p(),u=se(),u!==t?(p(),a=Wt(),a!==t?(d=e,e=ws(u,a)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)),e}function Wt(){let e,n,u,a;return e=r,n=El(),n!==t?(p(),u=ri(),u!==t?(p(),a=Cl(),a!==t?(d=e,e=Is(n,a)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=Dl()),e}function El(){let e,n,u,a,i;return e=r,n=pe(),n!==t?(p(),u=U(),u!==t?(p(),a=De(),a!==t?(p(),i=$(),i!==t?(d=e,e=gs(n,a)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,n=pe(),n!==t&&(d=e,n=ys(n)),e=n),e}function Cl(){let e,n,u,a,i,v,O;return e=r,n=pe(),n!==t&&(d=e,n=Ts(n)),e=n,e===t&&(e=r,n=le(),n!==t?(p(),u=U(),u!==t?(p(),a=De(),a!==t?(p(),i=re(),i!==t?(p(),v=Ce(),v!==t?(p(),O=$(),O!==t?(d=e,e=Os(a,v)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,n=le(),n!==t?(p(),u=U(),u!==t?(p(),a=De(),a!==t?(p(),i=$(),i!==t?(d=e,e=Ns(a)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,n=le(),n!==t&&(d=e,n=xs()),e=n))),e}function Dl(){let e,n,u,a,i,v,O;return e=r,n=pe(),n!==t?(p(),u=U(),u!==t?(p(),a=Ce(),a!==t?(p(),i=$(),i!==t?(d=e,e=Ss(n,a)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,n=pe(),n!==t&&(d=e,n=Es(n)),e=n,e===t&&(e=r,n=le(),n!==t?(p(),u=U(),u!==t?(p(),a=De(),a!==t?(p(),i=re(),i!==t?(p(),v=Ce(),v!==t?(p(),O=$(),O!==t?(d=e,e=Cs(a,v)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,n=le(),n!==t?(p(),u=U(),u!==t?(p(),a=Ce(),a!==t?(p(),i=$(),i!==t?(d=e,e=Ds(a)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,n=le(),n!==t&&(d=e,n=_s()),e=n)))),e}function pe(){let e,n;return e=r,n=ln(),n!==t&&(d=e,n=Ms()),e=n,e===t&&(e=r,n=cn(),n!==t&&(d=e,n=bs()),e=n,e===t&&(e=r,n=fn(),n!==t&&(d=e,n=Fs()),e=n,e===t&&(e=r,n=an(),n!==t&&(d=e,n=As()),e=n,e===t&&(e=r,n=sn(),n!==t&&(d=e,n=Ls()),e=n)))),e}function Ce(){let e,n;return e=r,n=ae(),n!==t&&(d=e,n=Ps(n)),e=n,e}function De(){let e,n;return e=r,n=ae(),n!==t&&(d=e,n=Rs(n)),e=n,e}function _l(){let e,n,u;return e=r,n=rn(),n!==t?(p(),u=se(),u!==t?(d=e,e=Us(u)):(r=e,e=t)):(r=e,e=t),e}function Ml(){let e,n;return e=r,n=$l(),n!==t&&(d=e,n=$s()),e=n,e}function bl(){let e,n;return e=r,n=Vl(),n!==t&&(d=e,n=Vs()),e=n,e===t&&(e=r,n=kl(),n!==t&&(d=e,n=ks()),e=n),e}function se(){let e;return e=Ye(),e===t&&(e=We()),e}function Ye(){let e,n,u,a,i;if(e=r,s.charCodeAt(r)===39?(n=ne,r++):(n=t,c===0&&w(Tt)),n===t&&(s.substr(r,2)===ht?(n=ht,r+=2):(n=t,c===0&&w(co))),n!==t){for(u=[],a=r,s.substr(r,2)===ye?(i=ye,r+=2):(i=t,c===0&&w(Ot)),i!==t&&(d=a,i=bt()),a=i,a===t&&(a=s.charAt(r),It.test(a)?r++:(a=t,c===0&&w(Nt)));a!==t;)u.push(a),a=r,s.substr(r,2)===ye?(i=ye,r+=2):(i=t,c===0&&w(Ot)),i!==t&&(d=a,i=bt()),a=i,a===t&&(a=s.charAt(r),It.test(a)?r++:(a=t,c===0&&w(Nt)));s.charCodeAt(r)===39?(a=ne,r++):(a=t,c===0&&w(Tt)),a!==t?(d=e,e=zs(u)):(r=e,e=t)}else r=e,e=t;return e}function Fl(){let e;return e=Al(),e===t&&(e=Ll()),e}function Al(){let e,n,u,a,i,v,O;if(e=r,n=Ae(),n!==t)if(p(),u=M(),u!==t){for(p(),a=[],i=r,v=Me(),v!==t?(O=p(),i=v):(r=i,i=t);i!==t;)a.push(i),i=r,v=Me(),v!==t?(O=p(),i=v):(r=i,i=t);i=Le(),i!==t?(d=e,e=Hs(u,a)):(r=e,e=t)}else r=e,e=t;else r=e,e=t;if(e===t)if(e=r,n=Ae(),n!==t)if(p(),u=M(),u!==t){for(p(),a=[],i=r,v=Me(),v!==t?(O=p(),i=v):(r=i,i=t);i!==t;)a.push(i),i=r,v=Me(),v!==t?(O=p(),i=v):(r=i,i=t);i=Yt(),i!==t?(v=p(),O=Le(),O!==t?(d=e,e=qs(u,a,i)):(r=e,e=t)):(r=e,e=t)}else r=e,e=t;else r=e,e=t;return e}function Ll(){let e,n,u,a,i,v;if(e=r,n=Ae(),n!==t){for(p(),u=[],a=r,i=_e(),i!==t?(v=p(),a=i):(r=a,a=t);a!==t;)u.push(a),a=r,i=_e(),i!==t?(v=p(),a=i):(r=a,a=t);a=Le(),a!==t?(d=e,e=Zs(u)):(r=e,e=t)}else r=e,e=t;if(e===t)if(e=r,n=Ae(),n!==t){for(p(),u=[],a=r,i=_e(),i!==t?(v=p(),a=i):(r=a,a=t);a!==t;)u.push(a),a=r,i=_e(),i!==t?(v=p(),a=i):(r=a,a=t);a=Yt(),a!==t?(i=p(),v=Le(),v!==t?(d=e,e=js(u,a)):(r=e,e=t)):(r=e,e=t)}else r=e,e=t;return e}function _e(){let e,n,u,a,i;return e=r,n=dn(),n!==t?(p(),u=M(),u!==t?(p(),a=pn(),a!==t?(p(),i=M(),i!==t?(d=e,e=Ws(u,i)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e}function Me(){let e,n,u,a,i;return e=r,n=dn(),n!==t?(p(),u=M(),u!==t?(p(),a=pn(),a!==t?(p(),i=M(),i!==t?(d=e,e=Ys(u,i)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e}function Yt(){let e,n,u;return e=r,n=ii(),n!==t?(p(),u=M(),u!==t?(d=e,e=Js(u)):(r=e,e=t)):(r=e,e=t),e}function Pl(){let e,n,u,a;return e=r,n=Rl(),n!==t?(u=r,c++,a=je(),c--,a===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=Bs(n)):(r=e,e=t)):(r=e,e=t),e}function Rl(){let e,n,u,a;return e=r,n=be(),n!==t?(u=Jt(),u!==t?(a=Bt(),a!==t?(d=e,e=Gs(n,u,a)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,n=be(),n!==t?(u=Jt(),u!==t?(d=e,e=Ks(n,u)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,n=be(),n!==t?(u=Bt(),u!==t?(d=e,e=Qs(n,u)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,n=be(),n!==t&&(d=e,n=Xs(n)),e=n))),e}function be(){let e,n,u;return e=ae(),e===t&&(e=r,n=s.charAt(r),Te.test(n)?r++:(n=t,c===0&&w(Oe)),n!==t?(u=ae(),u!==t?(d=e,e=ea(n,u)):(r=e,e=t)):(r=e,e=t)),e}function Jt(){let e,n,u;return e=r,s.charCodeAt(r)===46?(n=qn,r++):(n=t,c===0&&w(fo)),n!==t?(u=ae(),u===t&&(u=null),d=e,e=ta(u)):(r=e,e=t),e}function Bt(){let e,n,u;return e=r,n=Ul(),n!==t?(u=ae(),u!==t?(d=e,e=na(n,u)):(r=e,e=t)):(r=e,e=t),e}function ae(){let e,n,u;if(e=r,n=[],u=Gt(),u!==t)for(;u!==t;)n.push(u),u=Gt();else n=t;return n!==t&&(d=e,n=ra(n)),e=n,e}function Gt(){let e;return e=s.charAt(r),Yr.test(e)?r++:(e=t,c===0&&w(po)),e}function Ul(){let e,n,u;return e=r,n=s.charAt(r),Jr.test(n)?r++:(n=t,c===0&&w(mo)),n!==t?(u=s.charAt(r),Te.test(u)?r++:(u=t,c===0&&w(Oe)),u===t&&(u=null),d=e,e=oa(n,u)):(r=e,e=t),e}function $l(){let e,n,u,a;return e=r,n=s.substr(r,4),n.toLowerCase()===Zn?r+=4:(n=t,c===0&&w(ho)),n!==t?(u=r,c++,a=N(),c--,a===t?u=void 0:(r=u,u=t),u!==t?(n=[n,u],e=n):(r=e,e=t)):(r=e,e=t),e}function Vl(){let e,n,u,a;return e=r,n=s.substr(r,4),n.toLowerCase()===jn?r+=4:(n=t,c===0&&w(vo)),n!==t?(u=r,c++,a=N(),c--,a===t?u=void 0:(r=u,u=t),u!==t?(n=[n,u],e=n):(r=e,e=t)):(r=e,e=t),e}function kl(){let e,n,u,a;return e=r,n=s.substr(r,5),n.toLowerCase()===Wn?r+=5:(n=t,c===0&&w(wo)),n!==t?(u=r,c++,a=N(),c--,a===t?u=void 0:(r=u,u=t),u!==t?(n=[n,u],e=n):(r=e,e=t)):(r=e,e=t),e}function Je(){let e,n,u,a;return e=r,n=s.substr(r,2),n.toLowerCase()===Yn?r+=2:(n=t,c===0&&w(Io)),n!==t?(u=r,c++,a=N(),c--,a===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=ua()):(r=e,e=t)):(r=e,e=t),e}function Kt(){let e,n,u,a;return e=r,n=s.substr(r,2),n.toLowerCase()===Jn?r+=2:(n=t,c===0&&w(go)),n!==t?(u=r,c++,a=N(),c--,a===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=sa()):(r=e,e=t)):(r=e,e=t),e}function Qt(){let e,n,u,a;return e=r,n=s.substr(r,4),n.toLowerCase()===Bn?r+=4:(n=t,c===0&&w(yo)),n!==t?(u=r,c++,a=N(),c--,a===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=aa()):(r=e,e=t)):(r=e,e=t),e}function zl(){let e,n,u,a;return e=r,n=s.substr(r,6),n.toLowerCase()===Gn?r+=6:(n=t,c===0&&w(To)),n!==t?(u=r,c++,a=N(),c--,a===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=la()):(r=e,e=t)):(r=e,e=t),e}function me(){let e,n,u,a;return e=r,n=s.substr(r,3),n.toLowerCase()===Kn?r+=3:(n=t,c===0&&w(Oo)),n!==t?(u=r,c++,a=N(),c--,a===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=ia()):(r=e,e=t)):(r=e,e=t),e}function Fe(){let e,n,u,a;return e=r,n=s.substr(r,3),n.toLowerCase()===Qn?r+=3:(n=t,c===0&&w(No)),n!==t?(u=r,c++,a=N(),c--,a===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=ca()):(r=e,e=t)):(r=e,e=t),e}function Xt(){let e,n,u,a;return e=r,n=s.substr(r,2),n.toLowerCase()===Xn?r+=2:(n=t,c===0&&w(xo)),n!==t?(u=r,c++,a=N(),c--,a===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=fa()):(r=e,e=t)):(r=e,e=t),e}function en(){let e,n,u,a;return e=r,n=s.substr(r,7),n.toLowerCase()===er?r+=7:(n=t,c===0&&w(So)),n!==t?(u=r,c++,a=N(),c--,a===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=da()):(r=e,e=t)):(r=e,e=t),e}function Be(){let e,n,u,a;return e=r,n=s.substr(r,4),n.toLowerCase()===tr?r+=4:(n=t,c===0&&w(Eo)),n!==t?(u=r,c++,a=N(),c--,a===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=pa()):(r=e,e=t)):(r=e,e=t),e}function Hl(){let e,n,u,a;return e=r,n=s.substr(r,3),n.toLowerCase()===nr?r+=3:(n=t,c===0&&w(Co)),n!==t?(u=r,c++,a=N(),c--,a===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=ma()):(r=e,e=t)):(r=e,e=t),e}function ql(){let e,n,u,a;return e=r,n=s.substr(r,9),n.toLowerCase()===rr?r+=9:(n=t,c===0&&w(Do)),n!==t?(u=r,c++,a=N(),c--,a===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=ha()):(r=e,e=t)):(r=e,e=t),e}function tn(){let e,n,u,a;return e=r,n=s.substr(r,7),n.toLowerCase()===or?r+=7:(n=t,c===0&&w(_o)),n!==t?(u=r,c++,a=N(),c--,a===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=va()):(r=e,e=t)):(r=e,e=t),e}function Zl(){let e,n,u,a;return e=r,n=s.substr(r,4),n.toLowerCase()===ur?r+=4:(n=t,c===0&&w(Mo)),n!==t?(u=r,c++,a=N(),c--,a===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=wa()):(r=e,e=t)):(r=e,e=t),e}function jl(){let e,n,u,a;return e=r,n=s.substr(r,8),n.toLowerCase()===sr?r+=8:(n=t,c===0&&w(bo)),n!==t?(u=r,c++,a=N(),c--,a===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=Ia()):(r=e,e=t)):(r=e,e=t),e}function nn(){let e,n,u,a;return e=r,n=s.substr(r,9),n.toLowerCase()===ar?r+=9:(n=t,c===0&&w(Fo)),n!==t?(u=r,c++,a=N(),c--,a===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=ga()):(r=e,e=t)):(r=e,e=t),e}function rn(){let e,n,u,a;return e=r,n=s.substr(r,4),n.toLowerCase()===lr?r+=4:(n=t,c===0&&w(Ao)),n!==t?(u=r,c++,a=N(),c--,a===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=ya()):(r=e,e=t)):(r=e,e=t),e}function on(){let e,n,u,a;return e=r,n=s.substr(r,4),n.toLowerCase()===ir?r+=4:(n=t,c===0&&w(Lo)),n!==t?(u=r,c++,a=N(),c--,a===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=Ta()):(r=e,e=t)):(r=e,e=t),e}function Wl(){let e,n,u,a;return e=r,n=s.substr(r,7),n.toLowerCase()===cr?r+=7:(n=t,c===0&&w(Po)),n!==t?(u=r,c++,a=N(),c--,a===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=Oa()):(r=e,e=t)):(r=e,e=t),e}function Yl(){let e,n,u,a;return e=r,n=s.substr(r,8),n.toLowerCase()===fr?r+=8:(n=t,c===0&&w(Ro)),n!==t?(u=r,c++,a=N(),c--,a===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=Na()):(r=e,e=t)):(r=e,e=t),e}function Jl(){let e,n,u,a;return e=r,n=s.substr(r,4),n.toLowerCase()===dr?r+=4:(n=t,c===0&&w(Uo)),n!==t?(u=r,c++,a=N(),c--,a===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=xa()):(r=e,e=t)):(r=e,e=t),e}function Bl(){let e,n,u,a;return e=r,n=s.substr(r,4),n.toLowerCase()===pr?r+=4:(n=t,c===0&&w($o)),n!==t?(u=r,c++,a=N(),c--,a===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=Sa()):(r=e,e=t)):(r=e,e=t),e}function Gl(){let e,n,u,a;return e=r,n=s.substr(r,2),n.toLowerCase()===mr?r+=2:(n=t,c===0&&w(Vo)),n!==t?(u=r,c++,a=N(),c--,a===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=Ea()):(r=e,e=t)):(r=e,e=t),e}function Kl(){let e,n,u,a;return e=r,n=s.substr(r,7),n.toLowerCase()===hr?r+=7:(n=t,c===0&&w(ko)),n!==t?(u=r,c++,a=N(),c--,a===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=Ca()):(r=e,e=t)):(r=e,e=t),e}function Ql(){let e,n,u,a;return e=r,n=s.substr(r,3),n.toLowerCase()===vr?r+=3:(n=t,c===0&&w(zo)),n!==t?(u=r,c++,a=N(),c--,a===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=Da()):(r=e,e=t)):(r=e,e=t),e}function Xl(){let e,n,u,a;return e=r,n=s.substr(r,8),n.toLowerCase()===wr?r+=8:(n=t,c===0&&w(Ho)),n!==t?(u=r,c++,a=N(),c--,a===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=_a()):(r=e,e=t)):(r=e,e=t),e}function ei(){let e,n,u,a;return e=r,n=s.substr(r,5),n.toLowerCase()===Ir?r+=5:(n=t,c===0&&w(qo)),n!==t?(u=r,c++,a=N(),c--,a===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=Ma()):(r=e,e=t)):(r=e,e=t),e}function ti(){let e,n,u,a;return e=r,n=s.substr(r,4),n.toLowerCase()===gr?r+=4:(n=t,c===0&&w(Zo)),n!==t?(u=r,c++,a=N(),c--,a===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=ba()):(r=e,e=t)):(r=e,e=t),e}function ni(){let e,n,u,a;return e=r,n=s.substr(r,7),n.toLowerCase()===yr?r+=7:(n=t,c===0&&w(jo)),n!==t?(u=r,c++,a=N(),c--,a===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=Fa()):(r=e,e=t)):(r=e,e=t),e}function ri(){let e,n,u,a;return e=r,n=s.substr(r,2),n.toLowerCase()===Tr?r+=2:(n=t,c===0&&w(Wo)),n!==t?(u=r,c++,a=N(),c--,a===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=Aa()):(r=e,e=t)):(r=e,e=t),e}function un(){let e,n,u,a;return e=r,n=s.substr(r,8),n.toLowerCase()===Or?r+=8:(n=t,c===0&&w(Yo)),n!==t?(u=r,c++,a=N(),c--,a===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=La()):(r=e,e=t)):(r=e,e=t),e}function sn(){let e,n,u,a;return e=r,n=s.substr(r,4),n.toLowerCase()===Nr?r+=4:(n=t,c===0&&w(Jo)),n!==t?(u=r,c++,a=N(),c--,a===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=Pa()):(r=e,e=t)):(r=e,e=t),e}function oi(){let e,n,u,a;return e=r,n=s.substr(r,13),n.toLowerCase()===xr?r+=13:(n=t,c===0&&w(Bo)),n!==t?(u=r,c++,a=N(),c--,a===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=Ra()):(r=e,e=t)):(r=e,e=t),e}function ui(){let e,n,u,a;return e=r,n=s.substr(r,15),n.toLowerCase()===Sr?r+=15:(n=t,c===0&&w(Go)),n!==t?(u=r,c++,a=N(),c--,a===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=Ua()):(r=e,e=t)):(r=e,e=t),e}function an(){let e,n,u,a;return e=r,n=s.substr(r,5),n.toLowerCase()===Er?r+=5:(n=t,c===0&&w(Ko)),n!==t?(u=r,c++,a=N(),c--,a===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=$a()):(r=e,e=t)):(r=e,e=t),e}function ln(){let e,n,u,a;return e=r,n=s.substr(r,3),n.toLowerCase()===Cr?r+=3:(n=t,c===0&&w(Qo)),n!==t?(u=r,c++,a=N(),c--,a===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=Va()):(r=e,e=t)):(r=e,e=t),e}function cn(){let e,n,u,a;return e=r,n=s.substr(r,4),n.toLowerCase()===Dr?r+=4:(n=t,c===0&&w(Xo)),n!==t?(u=r,c++,a=N(),c--,a===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=ka()):(r=e,e=t)):(r=e,e=t),e}function fn(){let e,n,u,a;return e=r,n=s.substr(r,6),n.toLowerCase()===_r?r+=6:(n=t,c===0&&w(eu)),n!==t?(u=r,c++,a=N(),c--,a===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=za()):(r=e,e=t)):(r=e,e=t),e}function le(){let e,n,u,a;return e=r,n=s.substr(r,6),n.toLowerCase()===Mr?r+=6:(n=t,c===0&&w(tu)),n!==t?(u=r,c++,a=N(),c--,a===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=Ha()):(r=e,e=t)):(r=e,e=t),e}function si(){let e,n,u,a;return e=r,n=s.substr(r,3),n.toLowerCase()===br?r+=3:(n=t,c===0&&w(nu)),n!==t?(u=r,c++,a=N(),c--,a===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=qa()):(r=e,e=t)):(r=e,e=t),e}function ai(){let e,n,u,a;return e=r,n=s.substr(r,3),n.toLowerCase()===Fr?r+=3:(n=t,c===0&&w(ru)),n!==t?(u=r,c++,a=N(),c--,a===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=Za()):(r=e,e=t)):(r=e,e=t),e}function li(){let e,n,u,a;return e=r,n=s.substr(r,4),n.toLowerCase()===Ar?r+=4:(n=t,c===0&&w(ou)),n!==t?(u=r,c++,a=N(),c--,a===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=ja()):(r=e,e=t)):(r=e,e=t),e}function Ae(){let e,n,u,a;return e=r,n=s.substr(r,4),n.toLowerCase()===Lr?r+=4:(n=t,c===0&&w(uu)),n!==t?(u=r,c++,a=N(),c--,a===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=Wa()):(r=e,e=t)):(r=e,e=t),e}function Le(){let e,n,u,a;return e=r,n=s.substr(r,3),n.toLowerCase()===Pr?r+=3:(n=t,c===0&&w(su)),n!==t?(u=r,c++,a=N(),c--,a===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=Ya()):(r=e,e=t)):(r=e,e=t),e}function dn(){let e,n,u,a;return e=r,n=s.substr(r,4),n.toLowerCase()===Rr?r+=4:(n=t,c===0&&w(au)),n!==t?(u=r,c++,a=N(),c--,a===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=Ja()):(r=e,e=t)):(r=e,e=t),e}function pn(){let e,n,u,a;return e=r,n=s.substr(r,4),n.toLowerCase()===Ur?r+=4:(n=t,c===0&&w(lu)),n!==t?(u=r,c++,a=N(),c--,a===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=Ba()):(r=e,e=t)):(r=e,e=t),e}function ii(){let e,n,u,a;return e=r,n=s.substr(r,4),n.toLowerCase()===$r?r+=4:(n=t,c===0&&w(iu)),n!==t?(u=r,c++,a=N(),c--,a===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=Ga()):(r=e,e=t)):(r=e,e=t),e}function re(){let e;return s.charCodeAt(r)===44?(e=Vr,r++):(e=t,c===0&&w(cu)),e}function U(){let e;return s.charCodeAt(r)===40?(e=kr,r++):(e=t,c===0&&w(fu)),e}function $(){let e;return s.charCodeAt(r)===41?(e=zr,r++):(e=t,c===0&&w(du)),e}function p(){let e,n;for(e=[],n=mn();n!==t;)e.push(n),n=mn();return e}function mn(){let e;return e=s.charAt(r),Br.test(e)?r++:(e=t,c===0&&w(pu)),e}function ci(){let e,n,u,a;if(e=r,n=kt(),n!==t&&(d=e,n=n),e=n,e===t)if(e=r,s.charCodeAt(r)===96?(n=vt,r++):(n=t,c===0&&w(xt)),n!==t){if(u=[],a=s.charAt(r),gt.test(a)?r++:(a=t,c===0&&w(St)),a!==t)for(;a!==t;)u.push(a),a=s.charAt(r),gt.test(a)?r++:(a=t,c===0&&w(St));else u=t;u!==t?(s.charCodeAt(r)===96?(a=vt,r++):(a=t,c===0&&w(xt)),a!==t?(d=e,e=Ka(u)):(r=e,e=t)):(r=e,e=t)}else r=e,e=t;return e}function fi(e,n,u){return{type:"unary-expression",location:u,operator:e,expr:n}}function hn(e,n,u,a,i){const v={type:"binary-expression",location:i,operator:e,left:n,right:u};return a!==void 0&&(v.escape=a),v}function B(e,...n){return{type:"expression-list",location:e,value:n}}function he(e,n){let u=e;for(const{op:a,expr:i,location:{end:v}}of n)u=hn(a,u,i,void 0,{...u.location,end:v});return u}function di(e){/^(\d{4})-(\d{1,2})-(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/.test(e)!==!0&&ze("Timestamp literal is invalid")}function pi(e){/^(\d{1,2}):(\d{1,2}):(\d{1,2})$|^(\d{1,2}):(\d{1,2})$|^(\d{1,2}):(\d{1,2}):(\d{1,2}).([0-9]+)$/.test(e)!==!0&&ze("Time literal is invalid")}function mi(e){/^(\d{4})-(\d{1,2})-(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/.test(e)!==!0&&ze("Date literal is invalid")}de=h();const Ge=de!==t&&r===s.length;function vn(){throw de!==t&&r<s.length&&w(Xa()),tl(Ne,Q<s.length?Qa(Q):null,Q<s.length?xe(Q,Q+1):xe(Q,Q))}return o.peg$library?{peg$result:de,peg$currPos:r,peg$FAILED:t,peg$maxFailExpected:Ne,peg$maxFailPos:Q,peg$success:Ge,peg$throw:Ge?void 0:vn}:Ge?de:void vn()}class qc{static parse(o){return Hc(o)}}function k(s,o){if(s!=null)switch(o(s),s.type){case"when-clause":k(s.operand,o),k(s.value,o);break;case"case-expression":for(const t of s.clauses)k(t,o);s.format==="simple"&&k(s.operand,o),s.else!==null&&k(s.else,o);break;case"expression-list":for(const t of s.value)k(t,o);break;case"unary-expression":k(s.expr,o);break;case"binary-expression":k(s.left,o),k(s.right,o);break;case"function":k(s.args,o);break;case"interval":k(s.value,o),k(s.qualifier,o);break;case"interval-qualifier":k(s.start,o),k(s.end,o)}}const Zc=new Set(["current_timestamp","current_date","current_time"]);class jc{constructor(o){this.staticData=o}makeBool(o){return Rn(o)}featureValue(o,t,l,f){return Hn(o,t,l,f)}equalsNull(o){return o===null}applyLike(o,t,l){return it(o,t,l)}ensureArray(o){return at(o)}applyIn(o,t){return lt(o,t)}currentTimestamp(o){return Vn(o)}currentDate(o){return kn(o)}currentTime(o){return zn(o)}makeSqlInterval(o,t,l){return q.createFromValueAndQualifier(o,t,l)}convertInterval(o){return q.isInterval(o)?o.valueInMilliseconds():o}compare(o,t,l){return W(t,l,o)}calculate(o,t,l,f){return Pn(o,t,l,f)}evaluateTime(o){return ke(o)}evaluateTimestamp(o,t,l){return ge(o,t,l)}evaluateDate(o,t){return ft(o,t)}evaluateFunction(o,t,l){return dt(o,t,l)}lookup(o,t){const l=t[o];return l===void 0?null:l}between(o,t){return o==null||t[0]==null||t[1]==null?null:W(o,t[0],">=")&&W(o,t[1],"<=")}notbetween(o,t){return o==null||t[0]==null||t[1]==null?null:W(o,t[0],"<")||W(o,t[1],">")}ternaryNot(o){return $e(o)}ternaryAnd(o,t){return Un(o,t)}ternaryOr(o,t){return $n(o,t)}}function b(s,...o){return`this.${s}(${o.join(", ")})`}function V(s){return s===void 0?"void 0":JSON.stringify(s)}function Wc({type:s,start:o,end:t}){return`{type: ${V(s)}, start: ${st(o)}, end: ${st(t)}}`}function st({type:s,period:o,precision:t,secondary:l}){return JSON.stringify({type:s,period:o,precision:t,secondary:l})}function Yc({type:s,size:o,withtimezone:t}){return JSON.stringify({type:s,size:o,withtimezone:t})}const Nn="feature",xn="lookups",Sn="attributeAdapter",En="fieldsIndex",ce="timeZone",Cn="currentUser";class Jc{constructor(o){this._parseTree=o,this._staticData=Object.create(null),this._nextStaticDataId=0,this._tempVars=new Set,this._nextTempVarId=0}compile(){const o=this._compileNode(this._parseTree),t=`
      ${this._tempVars.size>0?`var ${Array.from(this._tempVars).join(", ")};`:""}
      return this.convertInterval(${o});
    `;return new Function(Nn,xn,Sn,En,ce,Cn,t).bind(new jc(this._staticData))}_storeStaticData(o){const t="static$"+this._nextStaticDataId++;return this._staticData[t]=o,t}_compileRefStaticData(o){return`this.staticData[${V(o)}]`}_generateTempVar(){const o="temp$"+this._nextTempVarId++;return this._tempVars.add(o),o}_compileSimpleCase(o){const t=this._compileNode(o.operand),l=this._generateTempVar(),f=[];for(const h of o.clauses){const g=b("compare",V("="),l,this._compileNode(h.operand)),S=this._compileNode(h.value);f.push(`${g} ? (${S}) :`)}return o.else!=null?f.push(this._compileNode(o.else)):f.push(V(null)),`(${l} = ${t}, ${f.join(" ")})`}_compileSearchedCase(o){const t=[];for(const l of o.clauses){const f=b("makeBool",this._compileNode(l.operand)),h=this._compileNode(l.value);t.push(`${f} ? (${h}) :`)}return o.else!=null?t.push(this._compileNode(o.else)):t.push(V(null)),t.join(" ")}_compileInExpr(o,t){const l=new Set,f=[];for(const S of t.value)S.type==="number"||S.type==="string"?l.add(S.value):f.push(S);const h=this._compileNode(o),g=b("ensureArray",this._compileNode({type:"expression-list",location:t.location,value:f}));if(l.size>0){const S=this._compileRefStaticData(this._storeStaticData(l)),T=this._generateTempVar();return f.length>0?`(${T} = ${h}, ${S}.has(${T}) || ${b("applyIn",T,g)})`:`(${T} = ${h}, ${T} == null ? null : ${S}.has(${T}))`}return b("applyIn",h,g)}_compileNode(o){switch(o.type){case"interval":return b("makeSqlInterval",this._compileNode(o.value),o.qualifier.type==="interval-qualifier"?Wc(o.qualifier):st(o.qualifier),V(o.op));case"case-expression":return o.format==="simple"?this._compileSimpleCase(o):this._compileSearchedCase(o);case"parameter":return b("lookup",V(o.value.toLowerCase()),xn);case"expression-list":return`[${o.value.map(t=>this._compileNode(t)).join(", ")}]`;case"unary-expression":return b("ternaryNot",this._compileNode(o.expr));case"binary-expression":switch(o.operator){case"AND":return b("ternaryAnd",this._compileNode(o.left),this._compileNode(o.right));case"OR":return b("ternaryOr",this._compileNode(o.left),this._compileNode(o.right));case"IS":if(o.right.type!=="null")throw new m("UnsupportedIsRhs");return b("equalsNull",this._compileNode(o.left));case"ISNOT":if(o.right.type!=="null")throw new m("UnsupportedIsRhs");return`!${b("equalsNull",this._compileNode(o.left))}`;case"IN":return this._compileInExpr(o.left,o.right);case"NOT IN":return b("ternaryNot",this._compileInExpr(o.left,o.right));case"BETWEEN":return b("between",this._compileNode(o.left),this._compileNode(o.right));case"NOTBETWEEN":return b("notbetween",this._compileNode(o.left),this._compileNode(o.right));case"LIKE":return b("applyLike",this._compileNode(o.left),this._compileNode(o.right),V(o.escape));case"NOT LIKE":return b("ternaryNot",b("applyLike",this._compileNode(o.left),this._compileNode(o.right),V(o.escape)));case"<>":case"<":case">":case">=":case"<=":case"=":return b("compare",V(o.operator),this._compileNode(o.left),this._compileNode(o.right));case"*":case"-":case"+":case"/":case"||":return b("calculate",V(o.operator),this._compileNode(o.left),this._compileNode(o.right),ce);default:throw new m("UnsupportedOperator",{operator:o.operator})}case"null":case"boolean":case"string":case"number":return V(o.value);case"time":try{return this._compileRefStaticData(this._storeStaticData(ke(o.value)))}catch{return b("evaluateTime",V(o.value))}case"date":try{return this._compileRefStaticData(this._storeStaticData(ft(o.value,"unknown")))}catch{return b("evaluateDate",V(o.value),V("unknown"))}case"timestamp":try{return this._compileRefStaticData(this._storeStaticData(ge(o.value,"unknown")))}catch{return b("evaluateTimestamp",V(o.value),V("unknown"))}case"current-time":return o.mode==="date"?b("currentDate",ce):o.mode==="time"?b("currentTime",ce):b("currentTimestamp",ce);case"current-user":return Cn;case"column-reference":return b("featureValue",Nn,V(o.column),En,Sn);case"data-type":return Yc(o.value);case"function":return b("evaluateFunction",V(o.name),this._compileNode(o.args),ce)}throw new m("UnsupportedSyntax",{node:o.type})}}class mt{static create(o,t={}){return new mt(o,t.fieldsIndex,t.timeZone??void 0,t.currentUser)}constructor(o,t,l="UTC",f=null){this.fieldsIndex=t,this.timeZone=l,this.currentUser=f,this.parameters={},this._compiledExecutor=null,this._hasDateFunctions=void 0,this.parseTree=qc.parse(o);const{isStandardized:h,isAggregate:g,currentUserRequired:S,referencedFieldNames:T}=this._extractExpressionInfo(t);this._referencedFieldNames=T,this.isStandardized=h,this.isAggregate=g,this.currentUserRequired=S}static convertValueToStorageFormat(o,t=null){if(t===null)return G(o)?o.getTime():F(o)?o.toMillis():L(o)?o.toStorageFormat():P(o)?o.toStorageString():A(o)?o.toStorageFormat():o;switch(t){case"date":return G(o)?o.getTime():F(o)?o.toMillis():L(o)?o.toMilliseconds():A(o)?o.toNumber():o;case"date-only":return G(o)?K.fromDateJS(o).toString():L(o)?K.fromSqlTimeStampOffset(o).toString():F(o)?K.fromDateTime(o).toString():o;case"time-only":return G(o)?Y.fromDateJS(o).toStorageString():F(o)?Y.fromDateTime(o).toStorageString():L(o)?Y.fromSqlTimeStampOffset(o).toStorageString():P(o)?o.toStorageString():o;case"timestamp-offset":if(G(o))return ee.fromJSDate(o).toStorageFormat();if(F(o))return ee.fromDateTime(o).toStorageFormat();if(L(o))return o.toStorageFormat()}return o}get fieldNames(){return this._referencedFieldNames}testSet(o,t=Ie,l=this.currentUser){return!!this._evaluateNode(this.parseTree,null,t,o,l)}calculateValue(o,t=Ie,l=this.currentUser){const f=this._evaluateNode(this.parseTree,o,t,null,l);return q.isInterval(f)?f.valueInMilliseconds()/864e5:f}tryGetCompiledExecutor(){if(this._compiledExecutor!=null)return this._compiledExecutor;if(hi("esri-csp-restrictions"))return null;const o=new Jc(this.parseTree);return this._compiledExecutor=o.compile(),this._compiledExecutor}calculateValueCompiled(o,t=Ie,l=this.currentUser){const f=this.tryGetCompiledExecutor();return f==null?this.calculateValue(o,t):f(o,this.parameters,t,this.fieldsIndex,this.timeZone,l??null)}testFeature(o,t=Ie,l=this.currentUser){return!!this._evaluateNode(this.parseTree,o,t,null,l)}testFeatureCompiled(o,t=Ie,l=this.currentUser){const f=this.tryGetCompiledExecutor();return f==null?this.testFeature(o,t):!!f(o,this.parameters,t,this.fieldsIndex,this.timeZone,l??null)}get hasDateFunctions(){return this._hasDateFunctions!=null||(this._hasDateFunctions=!1,k(this.parseTree,o=>{o.type==="current-time"?this._hasDateFunctions=!0:o.type==="function"&&(this._hasDateFunctions=this._hasDateFunctions||Zc.has(o.name.toLowerCase()))})),this._hasDateFunctions}getFunctions(){const o=new Set;return k(this.parseTree,t=>{t.type==="function"&&o.add(t.name.toLowerCase())}),Array.from(o)}getExpressions(){const o=new Map;return k(this.parseTree,t=>{if(t.type==="function"){const l=t.name.toLowerCase(),f=t.args.value[0];if(f.type==="column-reference"){const h=f.column,g=`${l}-${h}`;o.has(g)||o.set(g,{aggregateType:l,field:h})}}}),[...o.values()]}getVariables(){const o=new Set;return k(this.parseTree,t=>{t.type==="parameter"&&o.add(t.value.toLowerCase())}),Array.from(o)}_extractExpressionInfo(o){const t=[],l=new Set;let f=!0,h=!1,g=!1;return k(this.parseTree,S=>{switch(S.type){case"column-reference":{const T=o==null?void 0:o.get(S.column);let x,_;T?x=_=T.name??"":(_=S.column,x=_.toLowerCase()),l.has(x)||(l.add(x),t.push(_)),S.column=_;break}case"current-user":g=!0;break;case"function":{const{name:T,args:x}=S,_=x.value.length;f&&(f=Zi(T,_)),h===!1&&(h=gn(T,_));break}}}),{referencedFieldNames:Array.from(t),isStandardized:f,isAggregate:h,currentUserRequired:g}}_evaluateNode(o,t,l,f,h){var S;let g;switch(o.type){case"interval":{const T=this._evaluateNode(o.value,t,l,f,h);return q.createFromValueAndQualifier(T,o.qualifier,o.op)}case"case-expression":if(o.format==="simple"){const T=this._evaluateNode(o.operand,t,l,f,h);for(let x=0;x<o.clauses.length;x++)if(W(T,this._evaluateNode(o.clauses[x].operand,t,l,f,h),"="))return this._evaluateNode(o.clauses[x].value,t,l,f,h);if(o.else!==null)return this._evaluateNode(o.else,t,l,f,h)}else{for(let T=0;T<o.clauses.length;T++)if(Rn(this._evaluateNode(o.clauses[T].operand,t,l,f,h)))return this._evaluateNode(o.clauses[T].value,t,l,f,h);if(o.else!==null)return this._evaluateNode(o.else,t,l,f,h)}return null;case"parameter":return g=this.parameters[o.value.toLowerCase()],G(g)?R.fromJSDate(g):g!=null&&typeof g=="object"&&"toDateTime"in g?g.toDateTime():g;case"expression-list":{const T=[];for(const x of o.value)T.push(this._evaluateNode(x,t,l,f,h));return T}case"unary-expression":return $e(this._evaluateNode(o.expr,t,l,f,h));case"binary-expression":switch(o.operator){case"AND":return Un(this._evaluateNode(o.left,t,l,f,h),this._evaluateNode(o.right,t,l,f,h));case"OR":return $n(this._evaluateNode(o.left,t,l,f,h),this._evaluateNode(o.right,t,l,f,h));case"IS":if(o.right.type!=="null")throw new m("UnsupportedIsRhs");return this._evaluateNode(o.left,t,l,f,h)===null;case"ISNOT":if(o.right.type!=="null")throw new m("UnsupportedIsRhs");return this._evaluateNode(o.left,t,l,f,h)!==null;case"IN":{const T=at(this._evaluateNode(o.right,t,l,f,h));return lt(this._evaluateNode(o.left,t,l,f,h),T)}case"NOT IN":{const T=at(this._evaluateNode(o.right,t,l,f,h));return $e(lt(this._evaluateNode(o.left,t,l,f,h),T))}case"BETWEEN":{const T=this._evaluateNode(o.left,t,l,f,h),x=this._evaluateNode(o.right,t,l,f,h);return T==null||x[0]==null||x[1]==null?null:W(T,x[0],">=")&&W(T,x[1],"<=")}case"NOTBETWEEN":{const T=this._evaluateNode(o.left,t,l,f,h),x=this._evaluateNode(o.right,t,l,f,h);return T==null||x[0]==null||x[1]==null?null:W(T,x[0],"<")||W(T,x[1],">")}case"LIKE":return it(this._evaluateNode(o.left,t,l,f,h),this._evaluateNode(o.right,t,l,f,h),o.escape);case"NOT LIKE":return $e(it(this._evaluateNode(o.left,t,l,f,h),this._evaluateNode(o.right,t,l,f,h),o.escape));case"<>":case"<":case">":case">=":case"<=":case"=":return W(this._evaluateNode(o.left,t,l,f,h),this._evaluateNode(o.right,t,l,f,h),o.operator);case"-":case"+":case"*":case"/":case"||":return Pn(o.operator,this._evaluateNode(o.left,t,l,f,h),this._evaluateNode(o.right,t,l,f,h),this.timeZone)}case"null":case"boolean":case"string":case"number":return o.value;case"date":return o.parsedValue??(o.parsedValue=ft(o.value,"unknown")),o.parsedValue;case"timestamp":return o.parsedValue??(o.parsedValue=ge(o.value,"unknown")),o.parsedValue;case"time":return ke(o.value);case"current-time":return o.mode==="date"?kn(this.timeZone):o.mode==="time"?zn(this.timeZone):Vn(this.timeZone);case"current-user":return h??null;case"column-reference":return Hn(t,o.column,this.fieldsIndex,l);case"data-type":return o.value;case"function":{if(this.isAggregate&&gn(o.name,o.args.value.length)){const x=[];for(const _ of((S=o.args)==null?void 0:S.value)||[]){const H=[];for(const E of f||[])H.push(this._evaluateNode(_,E,l,null,h));x.push(H)}return Oi(o.name,x)}const T=this._evaluateNode(o.args,t,l,f,h);return dt(o.name,T,this.timeZone)}}throw new m("UnsupportedSyntax",{node:o.type})}}function Rn(s){return s===!0}function at(s){return Array.isArray(s)?s:[s]}function $e(s){return s!==null?s!==!0:null}function Un(s,o){return s!=null&&o!=null?s===!0&&o===!0:s!==!1&&o!==!1&&null}function $n(s,o){return s!=null&&o!=null?s===!0||o===!0:s===!0||o===!0||null}function lt(s,o){if(s==null)return null;let t=!1;for(const l of o)if(l==null)t=null;else{if(s===l){t=!0;break}if(ut(s)&&ut(l)&&(t=W(s,l,"="),t))break}return t}function Vn(s){return Ve(new Date,s)}function kn(s){return K.fromNow(s)}function zn(s){const o=Ve(new Date,s);return Y.fromDateTime(o)}const Dn="-[]/{}()*+?.\\^$|";function Bc(s,o){const t=o;let l="",f=0;for(let h=0;h<s.length;h++){const g=s.charAt(h);switch(f){case 0:g===t?f=1:Dn.includes(g)?l+="\\"+g:l+=g==="%"?".*":g==="_"?".":g;break;case 1:Dn.includes(g)?l+="\\"+g:l+=g,f=0}}return new RegExp("^"+l+"$","m")}function it(s,o,t){return s==null?null:Bc(o,t).test(s)}function Gc(s){return s&&typeof s.attributes=="object"}function Hn(s,o,t,l){if("getAttributeSQL"in l)return l.getAttributeSQL(s,o);const f=l.getAttribute(s,o);if(f==null)return f;const h=t==null?void 0:t.get(o);switch(h==null?void 0:h.type){case"esriFieldTypeDate":case"date":return Ve(new Date(f),(t==null?void 0:t.getLuxonTimeZone(h.name))??Ii.utcInstance);case"esriFieldTypeDateOnly":case"date-only":return K.fromReader(f);case"esriFieldTypeTimeOnly":case"time-only":return Y.fromReader(f);case"esriFieldTypeTimestampOffset":case"timestamp-offset":return new ee(f)}return f}const Ie={getAttribute:(s,o)=>(Gc(s)?s.attributes:s)[o]},tf=Object.freeze(Object.defineProperty({__proto__:null,default:mt},Symbol.toStringTag,{value:"Module"}));export{mt as L,tf as W,m as a,ee as i,Oi as r};
