const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-CPuo0G35-CrRCQ2Ya.js","./index-B5UpFGZX-BY7UCsxA.js","./jsxFactory-DN-m49_5-CUFCpKPo.js","./index-BeTPrQ6f.js","./index-BlWAJbpo.css","./intl-DRhjUnwt-Dihhq8dq.js","./messages-DQ10DjvF-6kk0dzjG.js","./uuid-CFz2qBzH-cIdlpVG-.js","./sanitizerUtils-CrdmaILo-DztC6Qnx.js","./guid-Dls486Er-CBh637k4.js","./useT9n-DLD4Ns9x-BMNOgwpk.js","./index-CZRmpYJQ-B_ZQ2kaU.js","./dom-cV1JHjxC-ECa-LXIB.js","./observers-CAhVhbXT-D_oY9tJ5.js","./keyed-BsTPRA5D-oS6cmwSg.js","./interactive-CoTGpEoh-DzPnGf4B.js","./useSetFocus-BJqFX1-H-ChkfMq9o.js","./form-D03n6FLW-C_W96jbq.js","./index-DsKoYdZK-CCdHKxmk.js","./index-CXfSk3I4-Bs_ihh4m.js","./floating-ui-yKM6nE1h-7HS70EnH.js","./debounce-BgMoWmzF-DQf8_AwT.js","./openCloseComponent-DHhaQPZ4-CCedQdfz.js","./static-I-rbCIK8-CmBWZ6Bh.js","./FloatingArrow-wReOH_xj-BY9KnqOX.js","./key-CZySMiwx-kmS7VeUz.js","./index-BJe6KWh2-Z1AFTVnh.js","./array-C6Ny8gbM-C9M-r-JU.js","./index-CwdFwT2M-5WGIIVNT.js","./useCancelable-Bx62O-42-BWQ6Sha4.js","./intersectsOperator-CJZC9CBi-BzN4JHuK.js","./ProjectionTransformation-BXUROh_s-kKBZ5FDB.js","./Envelope2D-2iYexKQo-BCKocNS7.js","./Point2D-BVUQyGsf-qih0ZuJV.js","./Transformation2D-CZCvoz9N-B-IhcWnl.js","./SimpleGeometryCursor-DSF_YyIm-TAMgMsbK.js","./OperatorDefinitions-DJdq_wrt-DP7_WWTp.js","./jsonConverter-CiKBkr5U-C590VlCu.js","./OperatorIntersects-D3hvPVgP-DsdTZPTQ.js","./apiConverter-Djde5pBD-Dr3vspB4.js","./DrawScreenTool-DmlsB6Tb-DyUBX91p.js","./mat2df64-VxtldH1S-CqyKAV7h.js","./drawSurfaces--K8ToToC-FllffqSc.js","./elevationInfoUtils-DFX5QvG8-DWLx2t7K.js","./ElevationInfo-tlrAM5SV-D86C1F9d.js","./lengthUtils-CopeXEyE-DjCEitlq.js","./ReactiveSet-DP8oFB7N-DSfeDz8k.js","./diffUtils-D3O4EfgX-CznKxD4n.js","./UpdatingHandles-XotKWqvb-CyHJIoZx.js","./SnappingContext-pR4ApgxC--JaBRde9.js","./vec2f64-CkowXrDb-3zFQ3LNH.js","./vec32-CI1xtKog-DFVYRcgb.js","./vec42-DHp-FUwt-Br7hmYJs.js","./vec4f64-DD-nkcCV-CSNWKRqG.js","./plane-wUwHaY3K-ZwGBF7HQ.js","./vectorStacks-B2ngxq6F-myhPBoPk.js","./quatf64-C16JxGFv-BKWK1F8U.js","./SketchViewModel-BCVIeloG-Cwmt4M0t.js","./projectionUtils-CsX1UTBu-DsZaU4xz.js","./projectBuffer-CMNsPBq1-CMpE7Jo3.js","./zscale-PLuFqpaL-BIEnWBsg.js","./GraphicsLayer-DPoztXf7-DWF8RDJT.js","./GraphicsCollection-CT-y6p3H-4XYPvC_j.js","./BlendLayer-D8oJmNCO-A0sTzbOF.js","./layerContainerType-CJrPp4UB-BIF7XAYP.js","./jsonUtils-Bl9MVnOR-Be8hf0yA.js","./parser-CXoJuqeV-C7irlk5U.js","./mat4f32-BdRMyjXW-CWt6U0BP.js","./mat4-R0VY9B_E-DoEP887i.js","./ScaleRangeLayer-DkZwCH6_-C95kTMqN.js","./editableLayers-BTZOOiKD-ByJ-Oydo.js","./utils-DqlCEhl6-DBO0-7VG.js","./Queue-CK6TduSr-C-T211SM.js","./signal-DHxLvooI-Bin-tnuW.js","./Version-DSJSGSLA-Cg87msWM.js","./asyncUtils-Cu__bxqs-ecCTUaGV.js","./projectVectorToVector-OCoJKalB-CQIDHzSm.js","./projectPointToVector-BHS0gJJf-DOVZH8Fn.js","./Query-DKLDaFaA-I4zhlfzt.js","./Field-Dn1Bgq7n-CJCGLoNR.js","./fieldType-DvW5hpfa-DYUbIy_X.js","./geodesicUtils-DHDMXkUY-CP5HeHA5.js","./sphere-CIGsF4vz-C3zVQu9y.js","./quantityUtils-v7kjLywD-Cq6IoGLM.js","./geodeticLengthOperator-CMi-Z1ZN-WUImro4E.js","./geodeticCurveType-D_etKnbP-CirnHLSB.js","./earcut-C6NeZYSh-P2HUZ781.js","./triangle-DA_o7I-u-CHbj6sRJ.js","./lineSegment-D8lwRkdT-CnWWOaLb.js","./spatialReferenceEllipsoidUtils-Ty3j4VoE-BUAsRqCF.js","./rotate-ClH9iv5s-CoX5oM8l.js","./curveOperationUtils-ClbIvhut-17Ywjz26.js","./meshVertexSpaceUtils-EbHpWZGf-CmRuaT8m.js","./MeshLocalVertexSpace-CxmyTFZH-DhgfYuby.js","./hydratedFeatures-82j52esm-6EbRngQ4.js","./angularMeasurementUtils-CVK8K4WU-C6RO-Ta3.js","./Cyclical-Bzwh_QaL-CXh-hbnA.js","./Scheduler-D_tOhFWn-SFGb1GBz.js","./debugFlags-vZXEBr68-Bc51Oe-E.js","./createUtils-QoBeynM5-wXx8RLRA.js","./distanceOperator-C3n_j88h-CjjOO0Zj.js","./Distance2DCalculator-CXhBP-8I-CW7HDKXX-kSux2duE.js","./simplifyOperator-CK8t6p1S-COLMjdqn.js","./operatorSimplify-BRKLCaj2-DisWK8Yh.js","./mat2d-Cf4xHr3Z-u09Kv-lR.js","./quat-B6H0knG8-DtO1-hlf.js","./index-Nm1hzI7x-UyMsP99p.js","./index-BWOnSSps-Bph8AAFt.js","./dynamicClasses-CFULUtQ8-Bg5tAS65.js","./index-CFsWasN--DbXEBCjM.js","./resources7-D3vpaV3c-BkUdOmp7.js","./index-ppKNqZBY-CeaxB8ts.js","./index-DhiKtjhW-kTAwhIPd.js","./label-C3m_eiKP-DS3cqnkb.js","./index-S86CTvFw-CJ5fjnNA.js","./InternalLabel-BiuqGPFq-CpSD2G_N.js","./index-bZE3dpLT-CSjZXDJ4.js","./index-Cw0teFC5-DKaIKrcn.js","./customElement-CISNft8l-BrE3a95-.js","./_sortable-dwWGHOiR-C8Yy2lmT.js","./index-CI2nLjwd--f-tneQg.js","./index-Ds277fO_-DxR8D6Tq.js","./index-DMFZlf9Z-B9K-JAa4.js","./Validation-EOXLsGwz-3qHq6x6W.js","./Legend-DkNwDTXo-B_WWqMyc.js","./featureReductionUtils-CT3zJdMo-COEl9dk_.js","./EffectView-kLXORhA_-D7bXwfxF.js","./displayFilterUtils-BCW-UeaE-CnjPWjFU.js","./ExportImageParameters-BGZXJ_p1-D2SXQ2bD.js","./scaleUtils-Ckma21r5-DhwWQymd.js","./floorFilterUtils-4r-vVdzs-u-jw2p7F.js","./sublayerUtils-4P0fN3TU-D5NLvnmv.js","./pixelRangeUtils-DcEknavd-BIL6Doop.js","./jsonUtils-5anAqpiW-BnpEYfRl.js","./typeUtils-BTAsL08--B1VjqkPN.js","./ClassBreaksRenderer-AH_lBYRG-CIe34emV.js","./commonProperties-CYpRbAZr-PcmW9U_y.js","./colorRamps-C5pnMn-A-BSSJ2zvJ.js","./ColorStop-CBXZUZ6o-_LZdJKea.js","./visualVariableUtils-DzY4BXXy-D_1S-x1B.js","./RendererLegendOptions-_ue7FeM0-ROeRce-g.js","./LRUCache-CvGiiws0-B3io5Jp4.js","./MemCache-TG-MhOJy-BkjKRNR7.js","./DictionaryScriptEvaluator-DrG0wIBl-D15kCKMK.js","./FieldsIndex-Ds4D9xP7-BiTuE5Z3.js","./UnknownTimeZone-DzO8gKMe-d6rtFXqm.js","./timeZoneUtils-CdK7eU4Y-fyhJ3EFx.js","./ArcadeExpression-BGPPS6z--7N6gsB31.js","./TimeOnly-BFfVS_ja-C4MPGwCM.js","./enum-D3e-PyKo-Bl5V5br5.js","./utils-CIm5uQvO-CtKf129F.js","./defaultCIMValues-BWu-APou-XI-Li77m.js","./heatmapUtils-Bf2yRyEN-BAQJ1IRB.js","./SimpleRenderer-DSyBXxyY-CGNZcXII.js","./UniqueValueRenderer-4zUMozui-C0Y5GPGV.js","./styleUtils-DoTsJ8ze-DHY40A2q.js","./rendererConversion-BQaBjHLq-BdxfewoA.js","./cimSymbolUtils-BJ01Nooc-BfOR3Irv.js","./symbolUtils-BWODOwTq-BEtrWlLF.js","./utils-DvP1Tc7W-CK5sH9q2.js","./colorUtils-DlmOacVt-BnN0T6wa.js","./mat2df32-fg3OHsAI-BF2V2zqo.js","./heatmapRampUtils-B1JSnJ7D-BgqzByPC.js","./utils-B2aAE6RS-DpuzYE1J.js","./previewSymbol3D-CuHhqs-Y-CqdJl1Ic.js","./previewUtils-1NSa4tp5-BqMe2dmc.js","./webStyleSymbolUtils-CyolzL_F-CG3O75V3.js","./devEnvironmentUtils-CxrVv3RG-ktR0Kqgv.js","./webStyleAcceptedFormats-DsfCZOwz-CG7ZQ6BV.js","./previewCIMSymbol-j5qwe-g6-BHMY0IFz.js","./CIMSymbolHelper-C-M9oL19-BYnF76mM.js","./BidiEngine-DXDmu_WZ-DxL95DSc.js","./labelPoint-DTWBMY-Z-DoXEvKTt.js","./OptimizedGeometry-BYxlP_oK-DvAqrgO1.js","./memoryEstimations-C_GUL8g_-JniNFd5l.js","./GeometryUtils-C8-DjR3I-DcNL1Jc6.js","./fontUtils-bOFLFKCC-gLU2ItK2.js","./rasterizingUtils-Cf1zdzIw-BfJyHaiy.js","./definitions-DVO21zOC-BwakNu1s.js","./vec2f32-hTAvipMV-C0AQcwEv.js","./Rect-DD6XS68q-D_hsV3ag.js","./BoundingBox-DlCd_wcU-DBB4UfPl.js","./CIMSymbolRasterizer-BqBQ5vb8-uiaE78vH.js","./CIMResourceManager-CcSrCojH-Bt2v7OJu.js","./imageUtils-DITyjHV4-jEv5aA2D.js","./OverrideHelper-RCCoK8tw-ysetE5jH.js","./callExpressionWithFeature-C8T2jtcK-BKO8mxzd.js","./quantizationUtils-Ba9rpy9D-8ijlY328.js","./modeUtils-V6BDu_YT-Dq8o_RJK.js","./substitute-Cl1SJAIb-D0XLv0xK.js","./index-DPXhoKdb-BRi0pKCq.js","./index-QE3mrqEk-Drg93m0V.js","./customElement-R7RZTIol-BnJ-Elw1.js","./input-CREQlp6f-MVqFAf6a.js","./index-B9d-rvSv-Bh0e-KnG.js","./utils2-CwQdgiQl-BSIkIwiQ.js","./index-9gDPHN2D-CWPxwx81.js","./resources5-GI0SvXPJ-DQyKCby-.js","./index-zXhvvqsJ-Cnhk6MuS.js","./GridControls-BoO_W6I2-CSaimqZs.js","./unitFormatUtils-BbVpiips-i7yyYN--.js","./getDefaultUnitForView-CEAuCsu_-B1vEtX96.js","./gridUtils-DpRsTzHe-j68kmuS2.js","./normalizeUtils-DK5542Ty-DtqBcgc2.js","./normalizeUtilsCommon-5DjefBp7-CQyUDMQp.js","./utils-CRANtbnc-C6zyufvL.js","./utils-t279O251-BBk6rV0U.js","./editingTools-Owi9EJyN-BIXDePDC.js","./SnappingVisualizer2D-C1_WGevN-BkQ_4UbX.js","./TooltipInfoWithCoordinates-Ddvg_E_1-DHPxpvzo.js","./PointSnappingHint-NgOvzAAk-CFqn5eSp.js","./SketchTooltipInfo-EowXqHHv-Yp97uw3T.js","./MeshTransform-DfLVYScT-Cq2gdNT7.js","./axisAngleDegrees-StGk9lM5-YzC5iFyo.js","./a11yUtils-tU3tY6-a-CmHbThdR.js","./editPlaneUtils-DVPHOAL2-C25USCi0.js","./boundedPlane-CehKkKe3-4WekUEh5.js","./GraphicManipulator-CkOY4Z_k-BgpI7zKu.js","./drapedUtils-D9z307XM-CQXlJXY2.js","./drawUtils-IdZShl4g-YZikzVNa.js","./draw-store-DwCnUTPl-Dp2Sl1TU.js","./layerViewUtils-BBTk5dU--BemaIlLi.js","./utils-C0LvbFCo-RMQaTNpt.js","./widget-Yo6nzRYu-BBI8jxq5.js","./TextOverlayItem-5NFsakI7-CpLCqR0o.js","./number-BsNxu9Ry-D0lLRJTw.js","./circle-icon-CY-pgLZB-DIywXXLG.js","./edit-icon-BKw9252x-C-FG-Mbv.js","./point-icon-DkINEOM7-CEENOrUi.js","./polygon-icon-nxFnmVpc-ISMF6OL3.js","./polyline-icon-CHRNkL-v-BtITG78O.js","./rectangle-icon-DSbog25R-DESFthbN.js"])))=>i.map(i=>d[i]);
var Pi=Object.defineProperty;var Ht=e=>{throw TypeError(e)};var Ii=(e,t,i)=>t in e?Pi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var Ut=(e,t,i)=>Ii(e,typeof t!="symbol"?t+"":t,i),wt=(e,t,i)=>t.has(e)||Ht("Cannot "+i);var Qe=(e,t,i)=>(wt(e,t,"read from private field"),i?i.call(e):t.get(e)),$e=(e,t,i)=>t.has(e)?Ht("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,i),ft=(e,t,i,s)=>(wt(e,t,"write to private field"),s?s.call(e,i):t.set(e,i),i),Je=(e,t,i)=>(wt(e,t,"access private method"),i);import{aj as se,ht as Di,_ as b,gS as Ai,gT as ti,gV as Ri,gZ as Vi,hk as Fi,hy as Bi,hz as Gi,hn as Wt,h6 as zi,g_ as Ni,hA as $i,h7 as Hi,hB as Ui,H as Ee,C as ne,bw as Ce,fX as Kt,fY as Ze,B as lt,fG as Wi,m as o,E as r,n as M,cf as ii,as as C,aH as Y,ar as Be,a7 as de,hC as Ki,hD as ji,hE as qi,bE as et,aB as be,bl as Yi,hF as Xi,hG as Qi,hH as Ji,hI as He,hJ as Zi,hK as eo,hL as to,j as Mt,bY as io,A as oo,d3 as ro,ay as so,bh as dt,av as lo,P as ve,ax as je,bG as oi,hM as ri,au as pt,al as Ot,bc as Tt,l as no,hN as ao,aT as co,at as jt,aP as po,aS as Lt,hO as uo,hP as ho,hQ as go,hR as yo,hS as mo,hT as vo,hU as bo,bB as _o,by as wo,hV as fo,hW as To,hX as si,g0 as ko}from"./index-BeTPrQ6f.js";import{y as St}from"./draw-store-DwCnUTPl-Dp2Sl1TU.js";import xo from"./GraphicsLayer-DPoztXf7-DWF8RDJT.js";import"./intl-DRhjUnwt-Dihhq8dq.js";import{z as li,M as ni,s as Eo,b as ai,g as Co,O as qt,Y as Mo}from"./SketchViewModel-BCVIeloG-Cwmt4M0t.js";import{C as fe,V as p,O as Oo,Y as ci,q as _e,U as pe,B as Lo}from"./jsxFactory-DN-m49_5-CUFCpKPo.js";import{V as tt,t as So,g as Pt}from"./utils-DqlCEhl6-DBO0-7VG.js";import{f as nt}from"./layerViewUtils-BBTk5dU--BemaIlLi.js";import{g as di}from"./asyncUtils-Cu__bxqs-ecCTUaGV.js";import{h as Po,y as Io}from"./drapedUtils-D9z307XM-CQXlJXY2.js";import{R as Do}from"./messages-DQ10DjvF-6kk0dzjG.js";import{n as Yt}from"./utils-C0LvbFCo-RMQaTNpt.js";import{a as Xt,r as Ao}from"./widget-Yo6nzRYu-BBI8jxq5.js";import{b as Qt}from"./substitute-Cl1SJAIb-D0XLv0xK.js";import"./GraphicsCollection-CT-y6p3H-4XYPvC_j.js";import"./BlendLayer-D8oJmNCO-A0sTzbOF.js";import"./layerContainerType-CJrPp4UB-BIF7XAYP.js";import"./jsonUtils-Bl9MVnOR-Be8hf0yA.js";import"./parser-CXoJuqeV-C7irlk5U.js";import"./mat4f32-BdRMyjXW-CWt6U0BP.js";import"./mat4-R0VY9B_E-DoEP887i.js";import"./ScaleRangeLayer-DkZwCH6_-C95kTMqN.js";import"./ElevationInfo-tlrAM5SV-D86C1F9d.js";import"./lengthUtils-CopeXEyE-DjCEitlq.js";import"./UpdatingHandles-XotKWqvb-CyHJIoZx.js";import"./projectionUtils-CsX1UTBu-DsZaU4xz.js";import"./projectBuffer-CMNsPBq1-CMpE7Jo3.js";import"./zscale-PLuFqpaL-BIEnWBsg.js";import"./editableLayers-BTZOOiKD-ByJ-Oydo.js";import"./elevationInfoUtils-DFX5QvG8-DWLx2t7K.js";import"./projectVectorToVector-OCoJKalB-CQIDHzSm.js";import"./projectPointToVector-BHS0gJJf-DOVZH8Fn.js";import"./vec32-CI1xtKog-DFVYRcgb.js";import"./Query-DKLDaFaA-I4zhlfzt.js";import"./Field-Dn1Bgq7n-CJCGLoNR.js";import"./fieldType-DvW5hpfa-DYUbIy_X.js";import"./vec2f64-CkowXrDb-3zFQ3LNH.js";import"./vec42-DHp-FUwt-Br7hmYJs.js";import"./vec4f64-DD-nkcCV-CSNWKRqG.js";import"./geodesicUtils-DHDMXkUY-CP5HeHA5.js";import"./plane-wUwHaY3K-ZwGBF7HQ.js";import"./vectorStacks-B2ngxq6F-myhPBoPk.js";import"./quatf64-C16JxGFv-BKWK1F8U.js";import"./sphere-CIGsF4vz-C3zVQu9y.js";import"./quantityUtils-v7kjLywD-Cq6IoGLM.js";import"./geodeticLengthOperator-CMi-Z1ZN-WUImro4E.js";import"./geodeticCurveType-D_etKnbP-CirnHLSB.js";import"./earcut-C6NeZYSh-P2HUZ781.js";import"./triangle-DA_o7I-u-CHbj6sRJ.js";import"./lineSegment-D8lwRkdT-CnWWOaLb.js";import"./spatialReferenceEllipsoidUtils-Ty3j4VoE-BUAsRqCF.js";import"./uuid-CFz2qBzH-cIdlpVG-.js";import"./sanitizerUtils-CrdmaILo-DztC6Qnx.js";import"./Queue-CK6TduSr-C-T211SM.js";import"./signal-DHxLvooI-Bin-tnuW.js";import"./Version-DSJSGSLA-Cg87msWM.js";const Ro=(e,t,i)=>{const s=e[t];return s?typeof s=="function"?s():Promise.resolve(s):new Promise((l,n)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(n.bind(null,new Error("Unknown variable dynamic import: "+t+(t.split("/").length!==i?". Note that variables only represent file names one level deep.":""))))})};let j=class extends se{constructor(e){super(e),this.colorSelection=!0,this.dynamicScaleToggle=!0,this.gridEnabledToggle=!0,this.numericInputs=!0,this.gridSnapEnabledToggle=!0,this.lineIntervalInput=!0,this.outOfScaleWarning=!0,this.placementButtons=!0,this.rotateWithMapToggle=!0}};o([r({type:Boolean,nonNullable:!0})],j.prototype,"colorSelection",void 0),o([r({type:Boolean,nonNullable:!0})],j.prototype,"dynamicScaleToggle",void 0),o([r({type:Boolean,nonNullable:!0})],j.prototype,"gridEnabledToggle",void 0),o([r({type:Boolean,nonNullable:!0})],j.prototype,"numericInputs",void 0),o([r({type:Boolean,nonNullable:!0})],j.prototype,"gridSnapEnabledToggle",void 0),o([r({type:Boolean,nonNullable:!0})],j.prototype,"lineIntervalInput",void 0),o([r({type:Boolean,nonNullable:!0})],j.prototype,"outOfScaleWarning",void 0),o([r({type:Boolean,nonNullable:!0})],j.prototype,"placementButtons",void 0),o([r({type:Boolean,nonNullable:!0})],j.prototype,"rotateWithMapToggle",void 0),j=o([M("esri.widgets.support.GridControls.VisibleElements")],j);const pi=j;let q=class extends se{constructor(e){super(e),this.enabledToggle=!0,this.featureEnabledToggle=!0,this.gridEnabledToggle=!0,this.header=!1,this.layerList=!0,this.gridControls=!0,this.gridControlsElements=new pi({gridSnapEnabledToggle:!1,gridEnabledToggle:!1}),this.layerListToggleLayersButton=!0,this.selfEnabledToggle=!0}};o([r({type:Boolean,nonNullable:!0})],q.prototype,"enabledToggle",void 0),o([r({type:Boolean,nonNullable:!0})],q.prototype,"featureEnabledToggle",void 0),o([r({type:Boolean,nonNullable:!0})],q.prototype,"gridEnabledToggle",void 0),o([r({type:Boolean,nonNullable:!0})],q.prototype,"header",void 0),o([r({type:Boolean,nonNullable:!0})],q.prototype,"layerList",void 0),o([r({type:Boolean,nonNullable:!0})],q.prototype,"gridControls",void 0),o([r({type:pi,nonNullable:!0})],q.prototype,"gridControlsElements",void 0),o([r({type:Boolean,nonNullable:!0})],q.prototype,"layerListToggleLayersButton",void 0),o([r({type:Boolean,nonNullable:!0})],q.prototype,"selfEnabledToggle",void 0),q=o([M("esri.widgets.support.SnappingControls.VisibleElements")],q);const yt=q;let U=class extends se{constructor(e){super(e),this.point=!0,this.polyline=!0,this.polygon=!0,this.rectangle=!0,this.circle=!0,this.multipoint=!0,this.mesh=!0,this.freehandPolyline=!1,this.freehandPolygon=!1,this.text=!1}};o([r({type:Boolean,nonNullable:!0})],U.prototype,"point",void 0),o([r({type:Boolean,nonNullable:!0})],U.prototype,"polyline",void 0),o([r({type:Boolean,nonNullable:!0})],U.prototype,"polygon",void 0),o([r({type:Boolean,nonNullable:!0})],U.prototype,"rectangle",void 0),o([r({type:Boolean,nonNullable:!0})],U.prototype,"circle",void 0),o([r({type:Boolean,nonNullable:!0})],U.prototype,"multipoint",void 0),o([r({type:Boolean,nonNullable:!0})],U.prototype,"mesh",void 0),o([r({type:Boolean,nonNullable:!0})],U.prototype,"freehandPolyline",void 0),o([r({type:Boolean,nonNullable:!0})],U.prototype,"freehandPolygon",void 0),o([r({type:Boolean,nonNullable:!0})],U.prototype,"text",void 0),U=o([M("esri.widgets.Sketch.VisibleElements.CreateToolVisibilityMap")],U);let Ie=class extends se{constructor(e){super(e),this["rectangle-selection"]=!0,this["lasso-selection"]=!0,this["custom-selection"]=!0}};o([r({nonNullable:!0})],Ie.prototype,"rectangle-selection",void 0),o([r({nonNullable:!0})],Ie.prototype,"lasso-selection",void 0),o([r({nonNullable:!0})],Ie.prototype,"custom-selection",void 0),Ie=o([M("esri.widgets.Sketch.VisibleElements.SelectionToolVisibilityMap")],Ie);let H=class extends se{constructor(e){super(e),this.createTools=new U,this.directionModePicker=!1,this.duplicateButton=!0,this.deleteButton=!0,this.selectionCountLabel=!0,this.labelsToggle=!0,this.selectionTools=new Ie,this.settingsMenu=!0,this.snappingControls=!0,this.snappingControlsElements=new yt,this.tooltipsToggle=!0,this.undoRedoMenu=!0}};o([r({type:U,nonNullable:!0})],H.prototype,"createTools",void 0),o([r({type:Boolean,nonNullable:!0})],H.prototype,"directionModePicker",void 0),o([r({type:Boolean,nonNullable:!0})],H.prototype,"duplicateButton",void 0),o([r({type:Boolean,nonNullable:!0})],H.prototype,"deleteButton",void 0),o([r({type:Boolean,nonNullable:!0})],H.prototype,"selectionCountLabel",void 0),o([r({type:Boolean,nonNullable:!0})],H.prototype,"labelsToggle",void 0),o([r({type:Ie,nonNullable:!0})],H.prototype,"selectionTools",void 0),o([r({type:Boolean,nonNullable:!0})],H.prototype,"settingsMenu",void 0),o([r({type:Boolean,nonNullable:!0})],H.prototype,"snappingControls",void 0),o([r({type:yt,nonNullable:!0})],H.prototype,"snappingControlsElements",void 0),o([r({type:Boolean,nonNullable:!0})],H.prototype,"tooltipsToggle",void 0),o([r({type:Boolean,nonNullable:!0})],H.prototype,"undoRedoMenu",void 0),H=o([M("esri.widgets.Sketch.VisibleElements")],H);const R={groupSeparator:1,action:{s:32,m:48,l:64},splitButtonPart:{horizontal:{s:16,m:16,l:24},vertical:{s:16,m:24,l:40}}},ui={splitButton:{horizontal:"chevron-down",vertical:"ellipsis"},overflow:"ellipsis"};function hi(e,t){var i;return e.vnodeSelector===t?[e]:((i=e.children)==null?void 0:i.flatMap(s=>hi(s,t)))??[]}const It=e=>{const t=e;let i=class extends t{constructor(){super(...arguments),this.priority=0,this.scale="m",this.slot=void 0,this.lastActiveKey=null,this.layout="horizontal"}destroy(){var s;(s=this.measurementManager)==null||s.managedElements.remove(this),this.measurementManager=null}set measurementManager(s){const l=this._get("measurementManager");s!==l&&(l&&l.managedElements.remove(this),this._set("measurementManager",s),s==null||s.managedElements.add(this))}set budgetedLength(s){this.budgetedLength!==s&&(this._set("budgetedLength",s),this.scheduleRender())}get actionChildren(){var s;return((s=this.children)==null?void 0:s.flatMap(l=>hi(l,"calcite-action")))??[]}get activeChildElement(){var l;const s=this.actionChildren.find(n=>{var a;return((a=n.properties)==null?void 0:a.active)===!0});return s?(this._set("lastActiveKey",(l=s.properties)==null?void 0:l.key),s):this.lastActiveKey?this.actionChildren.find(n=>{var a;return((a=n.properties)==null?void 0:a.key)===this.lastActiveKey}):void 0}_handleClick(s){s!=null&&s.dataset&&"dataset"in s&&s.dataset.actionKey&&(this.lastActiveKey=s.dataset.actionKey)}};return o([r()],i.prototype,"priority",void 0),o([r()],i.prototype,"measurementManager",null),o([r()],i.prototype,"budgetedLength",null),o([r()],i.prototype,"actionChildren",null),o([r()],i.prototype,"activeChildElement",null),o([r()],i.prototype,"scale",void 0),o([r()],i.prototype,"slot",void 0),o([r()],i.prototype,"lastActiveKey",void 0),o([r()],i.prototype,"layout",void 0),i=o([M("esri.widgets.Sketch.support.ResponsiveToolbar.ToolbarGroupBase")],i),i},Jt=Symbol("on-resize-handle-key");let Me=class extends It(pe){constructor(e){super(e),this._measuredWidth=0,this._measuredHeight=0,this._measuredElement=null}destroy(){this._measuredElement=null}get lengthOptions(){return[this.layout==="horizontal"?this._measuredWidth:this._measuredHeight]}render(){return p("div",{afterCreate:e=>{this._measuredElement=e.firstElementChild,this.addHandles(Oo(this._measuredElement,()=>{var t,i;this._measuredWidth=((t=this._measuredElement)==null?void 0:t.clientWidth)??0,this._measuredHeight=((i=this._measuredElement)==null?void 0:i.clientHeight)??0}),Jt)},afterRemoved:()=>this.removeHandles(Jt)},this.children)}};o([r()],Me.prototype,"_measuredWidth",void 0),o([r()],Me.prototype,"_measuredHeight",void 0),o([r()],Me.prototype,"lengthOptions",null),o([r()],Me.prototype,"_measuredElement",void 0),Me=o([M("esri.widgets.Sketch.support.ResponsiveToolbar.MeasuredContentGroup")],Me);var Ve;let Oe=(Ve=class extends It(pe){constructor(t){super(t),this.allowCollapse=!0,this.messagesCommon=null}loadDependencies(){return fe({action:()=>b(()=>import("./index-CPuo0G35-CrRCQ2Ya.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]),import.meta.url),"action-group":()=>b(()=>import("./index-DsKoYdZK-CCdHKxmk.js"),__vite__mapDeps([18,1,2,3,4,5,6,7,8,9,10,11,12,13,0,14,15,16,17,19,20,21,22,23,24,25,26,27]),import.meta.url).then(t=>t.i),"action-menu":()=>b(()=>import("./index-BJe6KWh2-Z1AFTVnh.js"),__vite__mapDeps([26,1,2,3,4,5,6,7,8,9,10,11,12,13,0,14,15,16,17,19,20,21,22,23,24,25,27]),import.meta.url).then(t=>t.i)})}get minimumLength(){const{actionChildren:t,scale:i}=this;return t.length?this.allowCollapse?R.groupSeparator+R.action[i]*Math.min(t.length,2):R.groupSeparator+R.action[i]*t.length:0}get lengthOptions(){const{actionChildren:t,scale:i,minimumLength:s,allowCollapse:l,priority:n}=this,a=[s];if(t.length<=2||!l||n<1)return a;for(let d=1;d<t.length-1;d++)a.push(s+R.action[i]*d);return a}render(){if(!this.actionChildren.length)return p(ci,null,void 0);const{budgetedLength:t,actionChildren:i,activeChildElement:s,layout:l,slot:n,scale:a}=this,d=Math.floor(t/R.action[a]),c=[],h=[];if(d>=i.length)c.push(...i);else{const v=s??c.at(0);if(c.push(...i.slice(0,d-1)),h.push(...i.slice(d-1)),v&&h.includes(v)){const[g]=h.splice(h.indexOf(v),1),m=c.pop();c.push(g),m&&h.unshift(m)}}return p("calcite-action-group",{key:"overflow-button-group",layout:l,onclick:v=>this._handleClick(v.target),slot:n},c.map(v=>this._renderManagedAction(v)),h.length>0?p("calcite-action-menu",{key:"split-button-dropdown",label:this.messagesCommon.more,overlayPositioning:"fixed"},p("calcite-action",{icon:ui.overflow,key:"split-button-dropdown-trigger",scale:a,slot:"trigger",text:this.messagesCommon.more}),h.map(v=>this._renderManagedAction(v))):void 0)}_renderManagedAction(t){var i,s;return p("calcite-action",{...t==null?void 0:t.properties,"data-action-key":(i=t==null?void 0:t.properties)==null?void 0:i.key,text:((s=t==null?void 0:t.properties)==null?void 0:s.text)??""})}},Ve.vnodeSelector="calcite-action-group",Ve);o([r()],Oe.prototype,"allowCollapse",void 0),o([r()],Oe.prototype,"minimumLength",null),o([r(),_e("esri/t9n/common")],Oe.prototype,"messagesCommon",void 0),o([r()],Oe.prototype,"lengthOptions",null),Oe=o([M("esri.widgets.Sketch.support.ResponsiveToolbar.OverflowGroup")],Oe);let ye=class extends se{constructor(){super(...arguments),this.measuredElement=null,this.managedElements=new de,this.availableLength=0,this.layout="horizontal",this._resizeObserver=new ResizeObserver(()=>{this._measure()})}get _sortedElements(){return[...this.managedElements].sort((e,t)=>t.priority-e.priority)}connect(e){this._resizeObserver.disconnect(),this.measuredElement=e,this._resizeObserver.observe(e),this._measure()}allocate(){const e=new Map,{availableLength:t,_sortedElements:i}=this;let s=0;for(const l of i){const n=l.lengthOptions[0];e.set(l,n),s+=n}for(const l of i)for(;s<t;){const n=e.get(l);if(!n)break;const a=l.lengthOptions.find(c=>c>n);if(!a)break;const d=s-n+a;if(d>t)break;e.set(l,a),s=d}for(const[l,n]of e)l.budgetedLength=n}_measure(){const e=this.measuredElement;this.availableLength=e?this.layout==="horizontal"?e.clientWidth??0:e.clientHeight??0:0,this.allocate()}destroy(){this._resizeObserver.disconnect()}};o([r()],ye.prototype,"measuredElement",void 0),o([r()],ye.prototype,"managedElements",void 0),o([r()],ye.prototype,"_sortedElements",null),o([r()],ye.prototype,"availableLength",void 0),o([r()],ye.prototype,"layout",void 0),ye=o([M("esri.widgets.Sketch.support.ResponsiveToolbar.ResponsiveToolbarManager")],ye);const Vo={splitButtonBase:"esri-split-button--split-part"};var Fe;let Le=(Fe=class extends It(pe){constructor(t){super(t),this.allowCollapse=!0,this.messagesCommon=null}loadDependencies(){return fe({action:()=>b(()=>import("./index-CPuo0G35-CrRCQ2Ya.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]),import.meta.url),"action-group":()=>b(()=>import("./index-DsKoYdZK-CCdHKxmk.js"),__vite__mapDeps([18,1,2,3,4,5,6,7,8,9,10,11,12,13,0,14,15,16,17,19,20,21,22,23,24,25,26,27]),import.meta.url).then(t=>t.i),"action-menu":()=>b(()=>import("./index-BJe6KWh2-Z1AFTVnh.js"),__vite__mapDeps([26,1,2,3,4,5,6,7,8,9,10,11,12,13,0,14,15,16,17,19,20,21,22,23,24,25,27]),import.meta.url).then(t=>t.i)})}get minimumLength(){const t=this.actionChildren;return t.length?t.length===1?R.action[this.scale]+R.groupSeparator:this.allowCollapse?R.action[this.scale]+R.splitButtonPart[this.layout][this.scale]+R.groupSeparator:R.action[this.scale]*t.length+R.groupSeparator:0}get lengthOptions(){const{actionChildren:t,minimumLength:i,layout:s,scale:l,priority:n,allowCollapse:a}=this;if(t.length<2||n<0||!a)return[i];const d=R.groupSeparator+R.action[l]*t.length;return[R.groupSeparator+R.action[l]+R.splitButtonPart[s][l],d]}render(){if(!this.actionChildren.length)return p(ci,null,void 0);const{actionChildren:t,minimumLength:i,budgetedLength:s,layout:l,slot:n,allowCollapse:a}=this,d=!a||t.length<2||s>i;return p("calcite-action-group",{key:"split-button-group",layout:l,onclick:c=>this._handleClick(c.target),slot:n},d?this._renderUnSplit():this._renderSplit())}_renderSplit(){const{activeChildElement:t,layout:i,actionChildren:s,scale:l,messagesCommon:n}=this,a=t??s.at(0);if(!a)return;const d=s.filter(c=>c!==a);return[this._renderManagedAction(a),p("calcite-action-menu",{key:"split-button-dropdown",label:n.more,overlayPositioning:"fixed",placement:i==="horizontal"?"bottom-end":"right-end"},p("calcite-action",{class:`${Vo.splitButtonBase}--${i}--${this.scale}`,compact:i==="horizontal",icon:ui.splitButton[i],key:"split-button-dropdown-trigger",scale:l,slot:"trigger",text:n.more}),d==null?void 0:d.map(c=>this._renderManagedAction(c)))]}_renderUnSplit(){return this.actionChildren.map(t=>this._renderManagedAction(t))}_renderManagedAction(t){var i,s;return p("calcite-action",{...t==null?void 0:t.properties,"data-action-key":(i=t==null?void 0:t.properties)==null?void 0:i.key,text:((s=t==null?void 0:t.properties)==null?void 0:s.text)??""})}},Fe.vnodeSelector="calcite-action-group",Fe);o([r()],Le.prototype,"minimumLength",null),o([r()],Le.prototype,"allowCollapse",void 0),o([r()],Le.prototype,"lengthOptions",null),o([r(),_e("esri/t9n/common")],Le.prototype,"messagesCommon",void 0),Le=o([M("esri.widgets.Sketch.support.ResponsiveToolbar.SplitButton")],Le);const X="esri-responsive-toolbar",Q={rulerBase:`${X}__ruler`,rulerBarHorizontal:`${X}__ruler--bar`,rulerBarVertical:`${X}__ruler--bar--vertical`,rulerPadVertical:`${X}__ruler--pad--vertical`,rulerPadHorizontal:`${X}__ruler--pad--horizontal`,bar:`${X}__bar`,barHorizontal:`${X}__bar--horizontal`,barVertical:`${X}__bar--vertical`,pad:`${X}__pad`,padVertical:`${X}__pad--vertical`,padHorizontal:`${X}__pad--horizontal`};let re=class extends pe{constructor(e){super(e),this.scale="m",this.barStyle="floating",this._measurementManager=new ye,this._managedWidgets=new Map}loadDependencies(){return fe({"action-bar":()=>b(()=>import("./index-CwdFwT2M-5WGIIVNT.js"),__vite__mapDeps([28,1,2,3,4,5,6,7,8,9,10,11,12,13,0,14,15,16,17,19,20,21,22,23,24,25,26,27,18,29]),import.meta.url)})}destroy(){this._measurementManager=Be(this._measurementManager),this._managedWidgets.forEach(e=>e.destroy()),this._managedWidgets.clear()}set layout(e){const t=this._get("layout");this._set("layout",e),this._measurementManager&&(this._measurementManager.layout=e),t!==e&&this.scheduleRender()}get _barClasses(){const e=this.barStyle==="docked",t=this.layout==="vertical";return{[Q.barHorizontal]:e&&!t,[Q.barVertical]:e&&t,[Q.bar]:e,[Q.padHorizontal]:!e&&!t,[Q.padVertical]:!e&&t,[Q.pad]:!e}}render(){const{layout:e,scale:t,barStyle:i}=this,s={layout:e,scale:t,expandDisabled:!0,key:"measured-toolbar"},l=i==="docked"?e==="vertical"?Q.rulerBarVertical:Q.rulerBarHorizontal:e==="horizontal"?Q.rulerPadHorizontal:Q.rulerPadVertical;return p("div",null,p("div",{afterCreate:n=>{var a;(a=this._measurementManager)==null||a.connect(n)},class:this.classes(Q.rulerBase,l)}),p("calcite-action-bar",{...s,classes:this._barClasses,floating:i!=="docked",overflowActionsDisabled:!0},this._renderChildren()))}_renderChildren(){var s;if(!this.children)return;const e=this.children.filter(l=>{var n;return((n=l.properties)==null?void 0:n.key)!==void 0&&"group-kind"in l.properties}),t=new Set,i=e.map(l=>{const n=l.properties,a=n.key;t.add(a);const d=this.barStyle==="docked"?n.slot??void 0:void 0,c=n.priority??0,h=n["group-kind"]??"overflow-group",v=n["allow-collapse"]??!0,g=this._managedWidgets.get(a);if(g)return g.children=l.children,g.priority=c,"allowCollapse"in g&&(g.allowCollapse=v),g.slot=d,g.layout=this.layout,g.scale=this.scale,g.measurementManager=this._measurementManager,g;const m={scale:this.scale,priority:c,measurementManager:this._measurementManager,children:l.children,slot:d,layout:this.layout};switch(h){case"split-button":{const O=new Le({...m,allowCollapse:v});return this._managedWidgets.set(a,O),O}case"overflow-group":{const O=new Oe({...m,allowCollapse:v});return this._managedWidgets.set(a,O),O}case"measured-content":{const O=new Me({...m});return this._managedWidgets.set(a,O),O}}}).filter(be);return Array.from(this._managedWidgets.keys()).filter(l=>!t.has(l)).forEach(l=>{var n;(n=this._managedWidgets.get(l))==null||n.destroy(),this._managedWidgets.delete(l)}),(s=this._measurementManager)==null||s.allocate(),i.map(l=>l.render())}};o([r()],re.prototype,"scale",void 0),o([r({value:"horizontal"})],re.prototype,"layout",null),o([r()],re.prototype,"barStyle",void 0),o([r()],re.prototype,"_measurementManager",void 0),o([r()],re.prototype,"_managedWidgets",void 0),o([r()],re.prototype,"_barClasses",null),re=o([M("esri.widgets.Sketch.support.ResponsiveToolbar.ResponsiveToolbar")],re);async function Fo(e){const{returnFeatureTitleFields:t,returnGeometry:i,selector:s,signal:l,sources:n,view:a}=e;if(!(n!=null&&n.length))return[];const{layers:d,layerViews:c,graphicsLayers:h}=Bo(n),v=[];return await dt(Lt(Promise.all([No({candidates:v,layers:d,returnFeatureTitleFields:t,returnGeometry:i,selector:s,signal:l,view:a}),Go({candidates:v,layerViews:c,returnGeometry:i,selector:s,signal:l,view:a}),Wo({candidates:v,graphicsLayers:h,selector:s})]),l)),v}function Bo(e){const t=[],i=[],s=[];return e.forEach(l=>{var n,a;bo(l)||_o(l)||wo(l)?t.push(l):(oi(l)||ri(l))&&((n=l.layers)!=null&&n.length)?t.push(...l.layers.toArray()):fo(l)&&((a=l.sublayers)!=null&&a.length)?s.push(...l.sublayers.toArray()):To(l)?s.push(l):nt(l)&&i.push(l)}),{layers:t,layerViews:i,graphicsLayers:s}}async function Go(e){const{candidates:t,layerViews:i,returnGeometry:s,selector:l,signal:n,view:a}=e;l.type!=="point"?await Lt(Promise.allSettled(i.map(async d=>{const c=Ho(d,l,a,s),h=await d.queryFeatures(c,{signal:n});si(t,h.features)})),n):await zo({candidates:t,layerViews:i,selector:l,view:a})}async function zo({candidates:e,layerViews:t,selector:i,view:s}){const l=s.toScreen(i);if(!l)return;const n=t.map(d=>d.layer),{results:a}=await s.hitTest(l,{include:n});a.forEach(d=>{"graphic"in d&&d.graphic&&e.push(d.graphic)})}async function No(e){const{candidates:t,layers:i,returnFeatureTitleFields:s,returnGeometry:l,selector:n,signal:a,view:d}=e;await Lt(Promise.allSettled(i.map(async c=>{if("isTable"in c&&c.isTable)return;const h=Uo(c,n,d,s,l),v=await c.queryFeatures(h,{signal:a});si(t,v.features)})),a)}function gi(e,t,i){return e.type==="point"?Po(e,"renderer"in t?Io({renderer:t.renderer}):0,i):e}function $o(e,t,i){var c,h;const{fields:s,fieldsIndex:l}=e,n=new Set([e.objectIdField]);"globalIdField"in e&&e.globalIdField!=null&&l.has(e.globalIdField)&&n.add(l.get(e.globalIdField).name);const a="displayField"in e?e.displayField:null,d=ko({displayField:a,fields:s});if(d!=null&&l.has(d)&&n.add(d),"subtypeField"in e&&e.subtypeField!=null){const v=(c=l.get(e.subtypeField))==null?void 0:c.name;if(v!=null&&n.add(v),"utilityNetworks"in t.map&&((h=t.map.utilityNetworks)==null?void 0:h.length)){const g=l.get("assetgroup");g!=null&&g.name&&n.add(g.name);const m=l.get("assettype");m!=null&&m.name&&n.add(m.name)}}return(i||t.requiredFieldsOptions.featureTitleFields)&&"featureTitleFields"in e&&e.featureTitleFields&&e.featureTitleFields.forEach(v=>n.add(v)),Array.from(n.values())}function Ho(e,t,i,s=!0){const l=e.createQuery();return l.outFields=["*"],l.geometry=gi(t,e.layer,i),l.returnGeometry=s,l.outSpatialReference=i.spatialReference,l}function Uo(e,t,i,s=!1,l=!0){const n=e.createQuery();return n.outFields=$o(e,i,s),n.geometry=gi(t,e,i),n.returnGeometry=l,n.outSpatialReference=i.spatialReference,n}async function Wo(e){const{candidates:t,graphicsLayers:i,selector:s}=e,l=i.flatMap(a=>a.graphics.toArray())??[];if(!(l!=null&&l.length)||!s)return;const n=await b(()=>import("./intersectsOperator-CJZC9CBi-BzN4JHuK.js"),__vite__mapDeps([30,31,32,33,34,35,3,4,36,37,38,39]),import.meta.url).then(a=>a.i);n.accelerateGeometry(s),l.forEach(a=>{a.geometry&&a.geometry.type!=="mesh"&&n.execute(s,a.geometry)&&t.push(a)})}const Ko=100;let L=class extends Mt{constructor(e){super(e),this._completed=!1,this._isConstraintKeyDown=!1,this._processTask=null,this.createTool="rectangle",this.mode=null,this.persistSelection=!0,this.returnFeatureTitleFields=!1,this.returnGeometry=!0,this.selection=new de,this.selectionManager=null,this.selectOnComplete=!0,this.sources=null,this.toolName="",this.type="add",this._process=io(async(t,i)=>{const{callback:s,selector:l,completed:n}=t,a=di(async d=>{const{effectiveSelectionManager:c,returnFeatureTitleFields:h,returnGeometry:v,selection:g,sources:m,view:O}=this;if(!(!(m!=null&&m.length)&&!c.sources.length)&&O){if(l&&m!=null){const V=await Fo({returnFeatureTitleFields:h,returnGeometry:v,selector:l,signal:d,sources:m,view:O});if(g.removeAll(),g.addMany(V),n&&this.persistSelection)switch(this.effectiveType){case"remove":c.updateSelection({current:[],added:[],removed:V});break;case"replace":c.clear(),c.updateSelection({current:V,added:[],removed:[]});break;default:c.updateSelection({current:V,added:[],removed:[]})}}s&&s()}else g.removeAll()});return oo(i,()=>a.abort()),this._processTask=a,a.promise},Ko),this._onOperationFinish=this._onOperationFinish.bind(this)}initialize(){this._setup()}get _defaultMode(){return this.createTool==="polygon"?"click":"hybrid"}get _selectionArea(){const e=this._tool.coordinates;if(e.length===0)return;const t=po(),i=this.view.spatialReference,s=n=>{t.x=n[0],t.y=n[1];const a=this.view.toMap(t);return[(a==null?void 0:a.x)??0,(a==null?void 0:a.y)??0]};if(e.length===1||e.every(([n,a])=>n===e[0][0]&&a===e[0][1])){const[n,a]=s(e[0]);return new lt({x:n,y:a,spatialReference:i})}const l=e.map(s);if(l.length!==0)return ro(l)||l.reverse(),new ne({spatialReference:i,rings:[l]})}get completed(){return this._completed}get effectiveSelectionManager(){return this.selectionManager??this.view.selectionManager}get effectiveType(){const e=this.type??"add";if(this._isConstraintKeyDown)switch(e){case"add":return"remove";case"remove":case"replace":return"add";default:return e}return e}get processingFinalSelection(){var e,t;return!(!this._processTask||!((t=(e=this._tool)==null?void 0:e.drawOperation)!=null&&t.isCompleted))}cancel(){this.selection.removeAll(),this._onOperationFinish(!0)}destroy(){this._toolImportController=so(this._toolImportController)}async _setup(){const{createTool:e,view:t}=this;if(await t.whenReady(),this.destroyed||this._toolImportController)return;const i=new AbortController;this._toolImportController=i;const[s,l]=await Promise.all([b(()=>import("./DrawScreenTool-DmlsB6Tb-DyUBX91p.js"),__vite__mapDeps([40,3,4,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,33,101,31,32,34,35,36,39,37,102,103,104,105,2,5,6,7,8]),import.meta.url),Co()]);if(i.signal.aborted)return;const n=Symbol();try{this._tool=new s.DrawScreenTool({view:t,mode:this.mode??this._defaultMode,geometryType:e,cursor:e==="point"?"default":"crosshair",automaticLengthMeasurementUtils:l})}finally{this._toolImportController=null}this._tool?(this.selectOnComplete||this.addHandles(this._tool.on(["cursor-update","vertex-add","vertex-remove"],()=>{this._syncConstraintKeyDown(),dt(this._process({selector:this._selectionArea}))}),n),this._syncConstraintKeyDown(),this.addHandles([t.on("key-down",a=>{if(!a.repeat)switch(this._syncConstraintKeyDown(),a.key){case tt.constraint:this._tool.uniformSizeToggled=!0,a.stopPropagation();break;case tt.center:this._tool.centeredToggled=!0,a.stopPropagation()}}),t.on("key-up",a=>{switch(this._syncConstraintKeyDown(),a.key){case tt.constraint:this._tool.uniformSizeToggled=!1,a.stopPropagation();break;case tt.center:this._tool.centeredToggled=!1,a.stopPropagation()}}),this.selection.on("change",({added:a,removed:d})=>this.emit("selection-change",{operationType:this.effectiveType,added:a,removed:d})),this._tool.on("complete",async a=>{this._syncConstraintKeyDown(),this.removeHandles(n),a.aborted?this.cancel():(this._tool.cursor="progress",await this._process({selector:this._selectionArea,callback:this._onOperationFinish,completed:!0}))})],n),this.addHandles(lo(()=>t.tools.remove(this._tool))),t.addAndActivateTool(this._tool)):ve.getLogger(this).warn("Unable to import Draw module. SelectionOperation failed to load.")}_syncConstraintKeyDown(){const{inputManager:e}=this.view;this._isConstraintKeyDown=So.invertType.some(t=>e.isModifierKeyDown(t))}_onOperationFinish(e=!1){var t;this.removeAllHandles(),(t=this._processTask)==null||t.abort(),this.emit("complete",{aborted:e,operationType:this.effectiveType,selection:this.selection.toArray(),toolName:this.toolName}),this._completed=!0}};o([r()],L.prototype,"_completed",void 0),o([r()],L.prototype,"_defaultMode",null),o([r()],L.prototype,"_isConstraintKeyDown",void 0),o([r()],L.prototype,"_processTask",void 0),o([r()],L.prototype,"_selectionArea",null),o([r()],L.prototype,"completed",null),o([r({constructOnly:!0})],L.prototype,"createTool",void 0),o([r()],L.prototype,"effectiveSelectionManager",null),o([r()],L.prototype,"effectiveType",null),o([r({constructOnly:!0})],L.prototype,"mode",void 0),o([r()],L.prototype,"persistSelection",void 0),o([r()],L.prototype,"processingFinalSelection",null),o([r()],L.prototype,"returnFeatureTitleFields",void 0),o([r()],L.prototype,"returnGeometry",void 0),o([r({readOnly:!0})],L.prototype,"selection",void 0),o([r({constructOnly:!0})],L.prototype,"selectionManager",void 0),o([r({constructOnly:!0})],L.prototype,"selectOnComplete",void 0),o([r()],L.prototype,"sources",void 0),o([r({constructOnly:!0})],L.prototype,"toolName",void 0),o([r()],L.prototype,"type",void 0),o([r({constructOnly:!0})],L.prototype,"view",void 0),L=o([M("esri.widgets.support.Selector2D.SelectionOperation")],L);const jo=L;let P=class extends Mt{constructor(e){super(e),this._operationHandlesGroup=null,this.activeOperation=null,this.continuousSelectionEnabled=!1,this.defaultLassoToolOptions={createTool:"polygon",mode:"hybrid",toolName:"lasso"},this.defaultOperationType="add",this.defaultPointToolOptions={createTool:"point",toolName:"point"},this.defaultRectangleToolOptions={createTool:"rectangle",toolName:"rectangle"},this.layerViewPreferenceEnabled=!0,this.persistSelection=!0,this.selectionManager=null,this.returnFeatureTitleFields=!1,this.returnGeometry=!0,this.selectOnComplete=!0,this.sources=null,this.toolConfigs=[]}initialize(){this.addHandles([C(()=>this.effectiveSources,e=>{this.activeOperation&&(this.activeOperation.sources=e)}),C(()=>this.defaultOperationType,e=>{this.activeOperation&&(this.activeOperation.type=e)})])}destroy(){var e,t;(e=this.activeOperation)==null||e.cancel(),(t=this.activeOperation)==null||t.destroy(),this._operationHandlesGroup=je(this._operationHandlesGroup)}get effectiveSelectionManager(){var e;return this.selectionManager??((e=this.view)==null?void 0:e.selectionManager)}get effectiveSources(){var n;const{layerViewPreferenceEnabled:e,sources:t,view:i}=this,s=t??((n=this.effectiveSelectionManager)==null?void 0:n.sources);if(!(s!=null&&s.length))return[];const l=[];return s.forEach(a=>{if(nt(a))l.push(a);else if(oi(a)||ri(a))(a.layers||[]).forEach(d=>{const c=i?qt(i,d):void 0,h=e&&nt(c)?c:d;l.push(h)});else if(e){const d=i?qt(i,a):void 0,c=nt(d)?d:a;l.push(c)}else l.push(a)}),l}get layers(){return pt(ve.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.sources}set layers(e){pt(ve.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.sources=e}get state(){var e;return this.activeOperation?"active":(e=this.view)!=null&&e.ready&&this.effectiveSources.length?"ready":"disabled"}activate(e){const{state:t}=this,i=(e==null?void 0:e.view)||this.view,s=(e==null?void 0:e.sources)||this.effectiveSources;if(t==="disabled"||!i)return void ve.getLogger(this).warn("Unable to start selection operation.");t==="active"&&this.cancel();const l=new CustomEvent("before-activate",{cancelable:!0,detail:{toolName:(e==null?void 0:e.toolName)??null}});if(this.emit("before-activate",l),l.defaultPrevented)return;const n={type:this.defaultOperationType,persistSelection:this.persistSelection,returnFeatureTitleFields:this.returnFeatureTitleFields,returnGeometry:this.returnGeometry,selectOnComplete:this.selectOnComplete,selectionManager:this.effectiveSelectionManager,...e,sources:s,view:i},a=new jo({...n});return this._operationHandlesGroup=Ot([a.on("selection-change",d=>this.emit("selection-change",d)),a.once("complete",d=>this._onOperationComplete(d,n))]),this._set("activeOperation",a),a}activateTool(e){this.cancel();const t=this._getToolOptions(e);if(t)return this.activate(t);ve.getLogger(this).warn("Unable to activate tool: unable to determine options.")}cancel(){var e;(e=this.activeOperation)==null||e.cancel(),this._set("activeOperation",null)}toggleTool(e){const{activeOperation:t}=this;if(t){const i=t.toolName;if(this.cancel(),i===e)return}return this.activateTool(e)}_onOperationComplete(e,t){var s,l;const i=((s=this.activeOperation)==null?void 0:s.type)??e.operationType;this._operationHandlesGroup=je(this._operationHandlesGroup),(l=this.activeOperation)==null||l.destroy(),this._set("activeOperation",null),this.emit("complete",e),this.continuousSelectionEnabled&&!e.aborted&&this.activate({...t,type:i})}_getToolOptions(e){return this.toolConfigs.find(t=>t.toolName===e)||(e==="lasso"?this.defaultLassoToolOptions:e==="point"?this.defaultPointToolOptions:e==="rectangle"?this.defaultRectangleToolOptions:void 0)}};o([r({readOnly:!0})],P.prototype,"activeOperation",void 0),o([r()],P.prototype,"continuousSelectionEnabled",void 0),o([r()],P.prototype,"defaultLassoToolOptions",void 0),o([r()],P.prototype,"defaultOperationType",void 0),o([r()],P.prototype,"defaultPointToolOptions",void 0),o([r()],P.prototype,"defaultRectangleToolOptions",void 0),o([r()],P.prototype,"effectiveSelectionManager",null),o([r()],P.prototype,"effectiveSources",null),o([r()],P.prototype,"layers",null),o([r()],P.prototype,"layerViewPreferenceEnabled",void 0),o([r()],P.prototype,"persistSelection",void 0),o([r()],P.prototype,"selectionManager",void 0),o([r()],P.prototype,"returnFeatureTitleFields",void 0),o([r()],P.prototype,"returnGeometry",void 0),o([r()],P.prototype,"selectOnComplete",void 0),o([r()],P.prototype,"sources",void 0),o([r({readOnly:!0})],P.prototype,"state",null),o([r()],P.prototype,"toolConfigs",void 0),o([r()],P.prototype,"view",void 0),P=o([M("esri.widgets.support.SelectionToolbar.SelectionToolbarViewModel")],P);const qo=P;let ae=class extends se{constructor(e){super(e),this.chip=!0,this.lassoTool=!0,this.operationTypeControls=!0,this.pan=!0,this.pointTool=!0,this.rectangleTool=!0}};o([r({type:Boolean,nonNullable:!0})],ae.prototype,"chip",void 0),o([r({type:Boolean,nonNullable:!0})],ae.prototype,"lassoTool",void 0),o([r({type:Boolean,nonNullable:!0})],ae.prototype,"operationTypeControls",void 0),o([r({type:Boolean,nonNullable:!0})],ae.prototype,"pan",void 0),o([r({type:Boolean,nonNullable:!0})],ae.prototype,"pointTool",void 0),o([r({type:Boolean,nonNullable:!0})],ae.prototype,"rectangleTool",void 0),ae=o([M("esri.widgets.support.SelectionToolbar.VisibleElements")],ae);const Dt=ae,kt="esri-selection-toolbar",it={base:kt,container:`${kt}__container`,toolButton:`${kt}__tool-button`};let k=class extends pe{constructor(e,t){super(e,t),this._viewModelHandlesGroup=null,this.availableOperationTypes=["replace","add","remove"],this.disabled=!1,this.layout="horizontal",this.messages=null,this.scale="s",this.viewModel=new qo,this.visibleElements=new Dt}initialize(){this._viewModelHandlesGroup=Ot([Tt(()=>this.viewModel,"before-activate",e=>this.emit("before-activate",e)),Tt(()=>this.viewModel,"complete",e=>this.emit("complete",e)),Tt(()=>this.viewModel,"selection-change",e=>this.emit("selection-change",e))])}destroy(){this._viewModelHandlesGroup=je(this._viewModelHandlesGroup)}loadDependencies(){return fe({action:()=>b(()=>import("./index-CPuo0G35-CrRCQ2Ya.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]),import.meta.url),"action-bar":()=>b(()=>import("./index-CwdFwT2M-5WGIIVNT.js"),__vite__mapDeps([28,1,2,3,4,5,6,7,8,9,10,11,12,13,0,14,15,16,17,19,20,21,22,23,24,25,26,27,18,29]),import.meta.url),"action-group":()=>b(()=>import("./index-DsKoYdZK-CCdHKxmk.js"),__vite__mapDeps([18,1,2,3,4,5,6,7,8,9,10,11,12,13,0,14,15,16,17,19,20,21,22,23,24,25,26,27]),import.meta.url).then(e=>e.i),chip:()=>b(()=>import("./index-Nm1hzI7x-UyMsP99p.js"),__vite__mapDeps([106,11,2,3,4,5,6,7,8,12,13,15,25,16,10]),import.meta.url),dropdown:()=>b(()=>import("./index-BWOnSSps-Bph8AAFt.js"),__vite__mapDeps([107,2,3,4,5,6,7,8,12,20,21,9,15,25,13,22,108,16]),import.meta.url),"dropdown-item":()=>b(()=>import("./index-CFsWasN--DbXEBCjM.js"),__vite__mapDeps([109,11,2,3,4,5,6,7,8,12,13,16,15,110]),import.meta.url),"dropdown-group":()=>b(()=>import("./index-ppKNqZBY-CeaxB8ts.js"),__vite__mapDeps([111,2,3,4,5,6,7,8,13,110]),import.meta.url),icon:()=>b(()=>import("./index-CZRmpYJQ-B_ZQ2kaU.js"),__vite__mapDeps([11,2,3,4,5,6,7,8,12,13]),import.meta.url).then(e=>e.i)})}get _effectiveDisabled(){return this.disabled||this.state==="disabled"}get _effectiveOperationType(){var e;return((e=this.activeOperation)==null?void 0:e.effectiveType)||this.defaultOperationType}get activeOperation(){return this.viewModel.activeOperation}get continuousSelectionEnabled(){return this.viewModel.continuousSelectionEnabled}set continuousSelectionEnabled(e){this.viewModel.continuousSelectionEnabled=e}get defaultLassoToolOptions(){return this.viewModel.defaultLassoToolOptions}set defaultLassoToolOptions(e){this.viewModel.defaultLassoToolOptions=e}get defaultOperationType(){return this.viewModel.defaultOperationType}set defaultOperationType(e){this.viewModel.defaultOperationType=e}get defaultPointToolOptions(){return this.viewModel.defaultPointToolOptions}set defaultPointToolOptions(e){this.viewModel.defaultPointToolOptions=e}get defaultRectangleToolOptions(){return this.viewModel.defaultRectangleToolOptions}set defaultRectangleToolOptions(e){this.viewModel.defaultRectangleToolOptions=e}get effectiveSelectionManager(){return this.viewModel.effectiveSelectionManager}get effectiveSources(){return this.viewModel.effectiveSources}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get layers(){return pt(ve.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.viewModel.sources}set layers(e){pt(ve.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.viewModel.sources=e}get layerViewPreferenceEnabled(){return this.viewModel.layerViewPreferenceEnabled}set layerViewPreferenceEnabled(e){this.viewModel.layerViewPreferenceEnabled=e}get persistSelection(){return this.viewModel.persistSelection}set persistSelection(e){this.viewModel.persistSelection=e}get returnFeatureTitleFields(){return this.viewModel.returnFeatureTitleFields}set returnFeatureTitleFields(e){this.viewModel.returnFeatureTitleFields=e}get returnGeometry(){return this.viewModel.returnGeometry}set returnGeometry(e){this.viewModel.returnGeometry=e}get selectOnComplete(){return this.viewModel.selectOnComplete}set selectOnComplete(e){this.viewModel.selectOnComplete=e}get selectionManager(){return this.viewModel.selectionManager}set selectionManager(e){this.viewModel.selectionManager=e}get state(){return this.viewModel.state}get sources(){return this.viewModel.sources}set sources(e){this.viewModel.sources=e}get toolConfigs(){return this.viewModel.toolConfigs}set toolConfigs(e){this.viewModel.toolConfigs=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}get visibleToolCount(){const{visibleElements:e}=this;return this.toolConfigs.length+(e.lassoTool?1:0)+(e.rectangleTool?1:0)}activate(e){if(this.cancel(),!this._effectiveDisabled)return this.viewModel.activate(e)}activateTool(e){if(!this._effectiveDisabled)return this.viewModel.activateTool(e)}cancel(){this.viewModel.cancel()}toggleTool(e){if(!this._effectiveDisabled)return this.viewModel.toggleTool(e)}render(){return p("div",{"aria-label":this.label,class:this.classes(it.base,Pt.widget)},p("div",{class:it.container},p("calcite-action-bar",{expandDisabled:!0,layout:"horizontal",overflowActionsDisabled:!0,scale:this.scale},this._renderOperationTypeControls(),this._renderToolsGroup(),this._renderChip())))}_renderToolsGroup(){return p("calcite-action-group",{key:"tools-group"},this._renderDefaultTools(),this._renderCustomTools())}_renderDefaultTools(){return[this._renderPanAction(),this._renderPointTool(),this._renderRectangleTool(),this._renderLassoTool()]}_renderPanAction(){if(!this.visibleElements.pan)return;const e=this.messages.pan,t=`${this.id}-tool-pan`;return this._renderAction({active:!this.activeOperation,disabled:this._effectiveDisabled,icon:"pan",id:t,key:t,onclick:()=>this.cancel(),text:e,title:e})}_renderChip(){if(!this.visibleElements.chip)return;const{effectiveSelectionManager:e}=this,t=(e==null?void 0:e.count)??0,i=Do(t);return p("calcite-chip",{appearance:"outline",closable:t>0,closed:t===0,disabled:this._effectiveDisabled||t===0,label:i,scale:this.scale,slot:"actions-end",title:this.messages.clearSelection,onCalciteChipClose:()=>e==null?void 0:e.clear()},i)}_renderCustomTools(){return this.toolConfigs.map(({toolName:e,icon:t})=>this._renderToolWithTooltip(e,t))}_renderPointTool(){if(this.visibleElements.pointTool)return this._renderToolWithTooltip("point","selection-set",this.messages.selectByPoint)}_renderLassoTool(){if(this.visibleElements.lassoTool)return this._renderToolWithTooltip("lasso","lasso-select",this.messages.selectByLasso)}_renderRectangleTool(){if(this.visibleElements.rectangleTool)return this._renderToolWithTooltip("rectangle","cursor-marquee",this.messages.selectByRectangle)}_renderOperationTypeControls(){const{availableOperationTypes:e}=this;if(!this.visibleElements.operationTypeControls||!e.length)return;const{_effectiveOperationType:t,scale:i}=this,s=this._getIconForSelectionOperationType(t),l=this._getLabelForSelectionOperationType(t);return p("calcite-action-group",{key:"toggle-group"},p("calcite-dropdown",{overlayPositioning:"fixed",placement:"bottom-start",scale:i},p("calcite-action",{class:it.toolButton,disabled:this._effectiveDisabled,icon:s,scale:i,slot:"trigger",text:l,title:l},p("calcite-icon",{icon:"chevron-down",scale:"s"})),p("calcite-dropdown-group",null,e.map(n=>this._renderOperationTypeDropdownItem(n)))))}_renderOperationTypeDropdownItem(e){return p("calcite-dropdown-item",{iconStart:this._getIconForSelectionOperationType(e),selected:this.defaultOperationType===e,onCalciteDropdownItemSelect:()=>this.defaultOperationType=e},this._getLabelForSelectionOperationType(e))}_renderToolWithTooltip(e,t,i=e){var l;const s=`${this.id}-tool-${e}`;return this._renderAction({active:((l=this.activeOperation)==null?void 0:l.toolName)===e,disabled:this._effectiveDisabled,icon:t||"selection",id:s,key:s,onclick:()=>this.toggleTool(e),text:i,title:i})}_renderAction(e){return p("calcite-action",{...e,bind:this,class:it.toolButton,scale:this.scale})}_getIconForSelectionOperationType(e){switch(e){case"replace":return"overwrite-features";case"add":return"cursor-plus";case"remove":return"cursor-minus"}}_getLabelForSelectionOperationType(e){const{messages:t}=this;switch(e){case"replace":return t.replaceSelection;case"add":return t.addToSelection;case"remove":return t.removeFromSelection}}};o([r()],k.prototype,"_effectiveDisabled",null),o([r()],k.prototype,"_effectiveOperationType",null),o([r()],k.prototype,"activeOperation",null),o([r()],k.prototype,"availableOperationTypes",void 0),o([r()],k.prototype,"continuousSelectionEnabled",null),o([r()],k.prototype,"defaultLassoToolOptions",null),o([r()],k.prototype,"defaultOperationType",null),o([r()],k.prototype,"defaultPointToolOptions",null),o([r()],k.prototype,"defaultRectangleToolOptions",null),o([r()],k.prototype,"disabled",void 0),o([r()],k.prototype,"effectiveSelectionManager",null),o([r()],k.prototype,"effectiveSources",null),o([r()],k.prototype,"label",null),o([r()],k.prototype,"layers",null),o([r()],k.prototype,"layerViewPreferenceEnabled",null),o([r()],k.prototype,"layout",void 0),o([r(),_e("esri/widgets/support/SelectionToolbar/t9n/SelectionToolbar")],k.prototype,"messages",void 0),o([r()],k.prototype,"persistSelection",null),o([r()],k.prototype,"returnFeatureTitleFields",null),o([r()],k.prototype,"returnGeometry",null),o([r()],k.prototype,"selectOnComplete",null),o([r()],k.prototype,"scale",void 0),o([r()],k.prototype,"selectionManager",null),o([r()],k.prototype,"state",null),o([r()],k.prototype,"sources",null),o([r()],k.prototype,"toolConfigs",null),o([r()],k.prototype,"view",null),o([r()],k.prototype,"viewModel",void 0),o([r({type:Dt,nonNullable:!0})],k.prototype,"visibleElements",void 0),o([r()],k.prototype,"visibleToolCount",null),k=o([M("esri.widgets.support.SelectionToolbar")],k);const Yo=k,Xo={absolute:"absolute-direction",relative:"relative-direction"},yi=()=>fe({icon:()=>b(()=>import("./index-CZRmpYJQ-B_ZQ2kaU.js"),__vite__mapDeps([11,2,3,4,5,6,7,8,12,13]),import.meta.url).then(e=>e.i),label:()=>b(()=>import("./index-DhiKtjhW-kTAwhIPd.js"),__vite__mapDeps([112,2,3,4,5,6,7,8,113,12]),import.meta.url),switch:()=>b(()=>import("./index-S86CTvFw-CJ5fjnNA.js"),__vite__mapDeps([114,2,3,4,5,6,7,8,17,12,15,25,113,115,16]),import.meta.url),tooltip:()=>b(()=>import("./index-bZE3dpLT-CSjZXDJ4.js"),__vite__mapDeps([116,2,3,4,5,6,7,8,20,12,21,9,22,24,14]),import.meta.url)}),Ue="esri-labeled-switch",We={label:`${Ue}__label`,labelContent:`${Ue}__label-content`,iconInfo:`${Ue}__icon_info`,iconWarning:`${Ue}__icon_warning`,tooltip:`${Ue}__tooltip`};function Re({checked:e,disabled:t,hint:i,key:s,label:l,onChange:n,hintIcon:a,hintKind:d}){return p("calcite-label",{class:We.label,disabled:t,key:s,layout:"inline-space-between",scale:"s"},i?p("div",{class:We.labelContent,key:"label-content"},p("div",null,l),p("calcite-icon",{class:d!=="warning"?We.iconInfo:We.iconWarning,icon:a??"information",id:s,onclick:c=>c.stopPropagation(),onpointerdown:c=>{c.preventDefault(),c.stopPropagation();const h=c.target.nextElementSibling;h.open=!h.open},scale:"s",tabIndex:0}),p("calcite-tooltip",{class:We.tooltip,overlayPositioning:"fixed",referenceElement:s},i)):l,p("calcite-switch",{checked:e,disabled:t,scale:"s",onCalciteSwitchChange:c=>n(c.currentTarget.checked)}))}let Se=class extends se{constructor(e){super(e),this.directionModePicker=!1,this.header=!1,this.labelsToggle=!0,this.tooltipsToggle=!0}};o([r({type:Boolean,nonNullable:!0})],Se.prototype,"directionModePicker",void 0),o([r({type:Boolean,nonNullable:!0})],Se.prototype,"header",void 0),o([r({type:Boolean,nonNullable:!0})],Se.prototype,"labelsToggle",void 0),o([r({type:Boolean,nonNullable:!0})],Se.prototype,"tooltipsToggle",void 0),Se=o([M("esri.widgets.support.SketchTooltipControls.VisibleElements")],Se);const At=Se,ot="esri-sketch-tooltip-controls",rt={base:ot,block:`${ot}__block`,blockContent:`${ot}__block-content`,radioButtonLabelWrapper:`${ot}__radio-button-label-wrapper`};let me=class extends pe{constructor(e,t){super(e,t),this.viewModel=null,this.visibleElements=new At,this.sketchOptions=new li,this.viewType=void 0,this._onTooltipsEnabledChange=i=>{this.sketchOptions.tooltips.enabled=i},this._onLabelsEnabledChange=i=>{this.sketchOptions.labels.enabled=i},this._onDirectionModeChange=i=>{this.sketchOptions.values.directionMode=i.currentTarget.selectedItem.value}}loadDependencies(){return Promise.all([fe({block:()=>b(()=>import("./index-Cw0teFC5-DKaIKrcn.js"),__vite__mapDeps([117,1,2,3,4,5,6,7,8,9,10,118,13,12,11,107,20,21,15,25,22,108,16,0,14,17,109,110,111,119,19,23,24,26,27]),import.meta.url),label:()=>b(()=>import("./index-DhiKtjhW-kTAwhIPd.js"),__vite__mapDeps([112,2,3,4,5,6,7,8,113,12]),import.meta.url),icon:()=>b(()=>import("./index-CZRmpYJQ-B_ZQ2kaU.js"),__vite__mapDeps([11,2,3,4,5,6,7,8,12,13]),import.meta.url).then(e=>e.i),"radio-button":()=>b(()=>import("./index-CI2nLjwd--f-tneQg.js"),__vite__mapDeps([120,2,3,4,5,6,7,8,27,12,17,15,113,115,16]),import.meta.url),"radio-button-group":()=>b(()=>import("./index-Ds277fO_-DxR8D6Tq.js"),__vite__mapDeps([121,11,2,3,4,5,6,7,8,12,13,122,115,123,10,16]),import.meta.url)}),yi()])}render(){const{label:e,visibleElements:t}=this,i=this._renderContent();return p("div",{"aria-label":e,class:this.classes(rt.base,Pt.widget)},i?p("calcite-block",{class:rt.block,expanded:!0,heading:t.header?this.label:"",key:"content-block",label:this.label},p("div",{class:rt.blockContent,key:"content"},i)):void 0)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}_renderContent(){const{visibleElements:e,viewType:t}=this,i=[e.tooltipsToggle?this._renderTooltipsToggle():null,e.labelsToggle&&t!=="2d"?this._renderLabelsToggle():null,e.directionModePicker?this._renderDirectionModePicker():null].filter(be);return i.length===0?null:i}_renderTooltipsToggle(){const{messages:e,sketchOptions:t}=this;return p(Re,{checked:t.tooltips.effectiveEnabled,hint:e.tooltipsToggleHint,key:`${this.id}__tooltips`,label:e.tooltipsToggle,onChange:this._onTooltipsEnabledChange})}_renderLabelsToggle(){const{messages:e,sketchOptions:t}=this;return p(Re,{checked:t.labels.enabled,hint:e.labelsToggleHint,key:`${this.id}__labels`,label:e.labelsToggle,onChange:this._onLabelsEnabledChange})}_renderDirectionModePicker(){const{messages:e,sketchOptions:t}=this,{directionMode:i}=t.values;return p("calcite-label",{key:"direction-mode",layout:"default",scale:"s"},e.directionModePicker,p("calcite-radio-button-group",{key:"radio-button-group",layout:"horizontal",name:this.id,scale:"s",value:i,onCalciteRadioButtonGroupChange:this._onDirectionModeChange},this._renderDirectionModeOption("relative",i,e.directionModeRelative),this._renderDirectionModeOption("absolute",i,e.directionModeAbsolute)))}_renderDirectionModeOption(e,t,i){return p("calcite-label",{key:e,layout:"inline",scale:"s"},p("calcite-radio-button",{checked:e===t,scale:"s",value:e}),p("div",{class:rt.radioButtonLabelWrapper,key:"label-wrapper"},p("calcite-icon",{icon:Xo[e],scale:"s"}),i))}};o([r()],me.prototype,"label",null),o([r({type:At,nonNullable:!0})],me.prototype,"visibleElements",void 0),o([r(),_e("esri/widgets/support/SketchTooltipControls/t9n/SketchTooltipControls")],me.prototype,"messages",void 0),o([r({nonNullable:!0,type:li})],me.prototype,"sketchOptions",void 0),o([r({type:String})],me.prototype,"viewType",void 0),me=o([M("esri.widgets.support.SketchTooltipControls")],me);const Qo=me,Jo={hide:"hide"};function ut(e){return(e==null?void 0:e.listMode)??void 0}function Zo(e){return e!=null&&"minScale"in e&&e.minScale!=null?e.minScale:void 0}function er(e){return e!=null&&"maxScale"in e&&e.maxScale!=null?e.maxScale:void 0}function tr(e){if(!e)return"inherited";const t=or(vi(e)?e.layer:e);return t!=null?t?"independent":"inherited":"visibilityMode"in e&&e.visibilityMode!=null?e.visibilityMode:"independent"}function mi(e){if(e&&(!("type"in e)||e.type!=="wmts"))return"sublayers"in e?"sublayers":"layers"in e?"layers":void 0}function Rt(e){return ut(e)!==Jo.hide}function ir(e,t){if(!e||t==null||isNaN(t))return!1;const i=Zo(e),s=er(e),l=i!=null&&!isNaN(i)&&i>0&&t>i,n=s!=null&&!isNaN(s)&&s>0&&t<s;return l||n}function Zt(e){const t=e==null?void 0:e.layer;return t&&"layers"in t?t.layers:null}function vi(e){return e!=null&&"layer"in e&&e.layer!=null}function or(e){const t=rr(e);return t!=null&&"supportsSublayerVisibility"in t?t.supportsSublayerVisibility:void 0}function rr(e){return e&&"capabilities"in e&&e.capabilities!=null&&"exportMap"in e.capabilities?e.capabilities.exportMap:void 0}let $=class extends ii(pe){constructor(e,t){super(e,t),this._legend=null,this.content=null,this.flowEnabled=!1,this.image=null,this.listItem=null,this.open=!1,this.visible=!0}initialize(){this.addHandles([C(()=>this._canCreateLegend,()=>this._createLegend(),Y),C(()=>[this._legend,this._legendOptions],()=>this._updateLegend(),Y)])}destroy(){this._legend=Be(this._legend)}get _canCreateLegend(){const{content:e,listItem:t}=this;if(!t)return!1;const i="legend";return e===i||e!=null&&!!Array.isArray(e)&&e.includes(i)}get _legendOptions(){const{listItem:e,_legendLayerInfo:t}=this,i=e==null?void 0:e.view;return t&&i?{view:i,layerInfos:[t]}:{}}get _legendLayerInfo(){var n;const e=(n=this.listItem)==null?void 0:n.layer;if(!e||e.type==="subtype-sublayer")return null;const t=vi(e)?e:null,i=e==null?void 0:e.parent,s=i!=null&&"type"in i&&i.type==="map-image"?t==null?void 0:t.source:null,l="";return s&&i?{layer:i,title:l,sublayerIds:[s.mapLayerId]}:{layer:e,title:l}}get disabled(){var s;const{listItem:e,_legend:t,content:i}=this;return!e||!(Array.isArray(i)&&i.length>1)&&!!t&&(!((s=t.activeLayerInfos)!=null&&s.length)||!e.visibleAtCurrentScale||!e.visible)}set disabled(e){this._overrideIfSome("disabled",e)}get icon(){const{image:e}=this,t=this._getFirstWidget();return this._get("icon")??(!e&&t?t.icon:null)}set icon(e){this._overrideIfSome("icon",e)}get title(){var e;return this._get("title")||(((e=this._getFirstWidget())==null?void 0:e.label)??"")}set title(e){this._override("title",e)}render(){return p("div",{class:"esri-list-item-panel"},this._renderContents())}_renderContent(e){const{_legend:t,disabled:i,open:s}=this;return e&&!i&&s?e==="legend"&&t?p("div",{key:"legend-widget"},t.render()):typeof e=="string"?p("div",{innerHTML:e,key:e}):Xt(e)?p("div",{key:"content-widget"},e.render()):e instanceof HTMLElement?p("div",{afterCreate:this._attachToNode,bind:e,key:"content-element"}):null:null}_renderContents(){const{content:e,open:t}=this;return t?Array.isArray(e)?e.map(i=>this._renderContent(i)):this._renderContent(e):null}async _createLegend(){if(Be(this._legend),this._legend=null,!this._canCreateLegend)return;const{default:e}=await b(()=>import("./Legend-DkNwDTXo-B_WWqMyc.js"),__vite__mapDeps([124,3,4,2,5,6,7,8,125,126,66,67,68,127,128,129,130,131,132,133,134,135,136,137,138,139,45,140,141,142,143,74,144,145,146,147,148,149,150,151,152,52,53,153,154,47,155,156,157,158,159,75,65,160,161,104,162,71,72,73,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189]),import.meta.url),t=new e(this._legendOptions);this._legend=t}_attachToNode(e){e.appendChild(this)}_updateLegend(){const e=this._legend;e&&e.set(this._legendOptions)}_getWidget(e){return e==="legend"?this._legend:Xt(e)?e:null}_getFirstWidget(){const{content:e}=this;return Array.isArray(e)?e.map(t=>this._getWidget(t)).find(t=>t):this._getWidget(e)}};o([r()],$.prototype,"_legend",void 0),o([r()],$.prototype,"_canCreateLegend",null),o([r()],$.prototype,"_legendOptions",null),o([r()],$.prototype,"_legendLayerInfo",null),o([r()],$.prototype,"content",void 0),o([r()],$.prototype,"disabled",null),o([r()],$.prototype,"flowEnabled",void 0),o([r()],$.prototype,"icon",null),o([r()],$.prototype,"image",void 0),o([r()],$.prototype,"listItem",void 0),o([r()],$.prototype,"open",void 0),o([r()],$.prototype,"title",null),o([r()],$.prototype,"visible",void 0),$=o([M("esri.widgets.LayerList.ListItemPanel")],$);const bi=$;var Ke;const sr=de.ofType({key:"type",defaultKeyValue:"button",base:qi,typeMap:{button:ji,toggle:Ki}}),_i=de.ofType(sr),xt="layer",st="child-list-mode",lr="hide";let x=Ke=class extends ii(se){constructor(e){super(e),this.actionsSections=new _i,this.actionsOpen=!1,this.checkPublishStatusEnabled=!1,this.children=new(de.ofType(Ke)),this.childrenSortable=!0,this.hidden=!1,this.layer=null,this.listItemCreatedFunction=null,this.listModeDisabled=!1,this.open=!1,this.parent=null,this.view=null}initialize(){if(this.addHandles([C(()=>{var e;return[this.layer,(e=this.layer)==null?void 0:e.listMode,this.listModeDisabled]},()=>this._watchLayerProperties(this.layer),Y),C(()=>this.checkPublishStatusEnabled,e=>this._updateChildrenPublishing(e),Y),C(()=>this.view,e=>this._updateChildrenView(e),Y),C(()=>this.panel,e=>this._setListItemOnPanel(e),Y)]),typeof this.listItemCreatedFunction=="function"){const e={item:this};this.listItemCreatedFunction.call(null,e)}}destroy(){var e;(e=this.panel)==null||e.destroy(),this.children.destroyAll(),this.view=null}get connectionStatus(){const{layerView:e,publishing:t}=this;if(!t&&e&&"connectionStatus"in e)return e.connectionStatus}get error(){var e;return(e=this.layer)==null?void 0:e.loadError}get incompatible(){const{layerView:e}=this;return!(!e||!("spatialReferenceSupported"in e))&&!e.spatialReferenceSupported}get layerView(){const{layer:e,view:t}=this;if(!e||!t||e.type==="sublayer")return null;const i=e.type==="subtype-sublayer"?e.parent:e;return t.allLayerViews.find(s=>s.layer===i)??null}set panel(e){const t=this._get("panel");e!==t&&e&&(t==null||t.destroy()),this._set("panel",e)}castPanel(e){var t;return(t=this.panel)!=null&&t.open&&!e.hasOwnProperty("open")&&(e.open=!0),e?new bi(e):null}get sortable(){var e;return((e=this.layer)==null?void 0:e.type)!=="knowledge-graph-sublayer"&&this._get("sortable")}set sortable(e){this._set("sortable",e)}get title(){const e=et(this,"layer.layer");return(!e||e&&et(this,"layer.layer.loaded"))&&et(this,"layer.title")||et(this,"layer.attributes.title")||""}set title(e){this._override("title",e)}get publishing(){var i;const{layer:e,checkPublishStatusEnabled:t}=this;return!!(t&&e&&"publishingInfo"in e&&((i=e.publishingInfo)==null?void 0:i.status)==="publishing")}get updating(){const{layerView:e,connectionStatus:t,layer:i,publishing:s}=this;return!s&&!t&&(e?e.updating:(i==null?void 0:i.loadStatus)==="loading"||!1)}get visible(){var e;return!!((e=this.layer)!=null&&e.visible)}set visible(e){const t=this.layer;t&&(t.visible=e)}get visibleAtCurrentScale(){var e,t;return((e=this.layerView)==null?void 0:e.visibleAtCurrentScale)??!ir(this.layer,(t=this.view)==null?void 0:t.scale)}get visibleAtCurrentTimeExtent(){var e;return((e=this.layerView)==null?void 0:e.visibleAtCurrentTimeExtent)??!0}get visibilityMode(){return tr(this.layer)}clone(){return new Ke({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,checkPublishStatusEnabled:this.checkPublishStatusEnabled,children:this.children.clone(),childrenSortable:this.childrenSortable,hidden:this.hidden,layer:this.layer,listItemCreatedFunction:this.listItemCreatedFunction,listModeDisabled:this.listModeDisabled,open:this.open,panel:this.panel,parent:this.parent,sortable:this.sortable,title:this.title,view:this.view,visible:this.visible})}_setListItemOnPanel(e){e&&(e.listItem=this)}_updateChildrenPublishing(e){var t;(t=this.children)==null||t.forEach(i=>i.checkPublishStatusEnabled=e)}_updateChildrenView(e){const t=this.children;t&&t.forEach(i=>i.view=e)}_createChildren(e){const{listModeDisabled:t,children:i}=this,s=e.filter(l=>!i.some(n=>n.layer===l));i.addMany(this._createChildItems(s,t))}_destroyChildren(e){const{children:t}=this,i=t.filter(s=>!!s.layer&&!e.includes(s.layer));t.destroyMany(i)}_sortChildren(e){this.children.sort((t,i)=>e.indexOf(i.layer)-e.indexOf(t.layer))}_destroyAllChildren(){this.removeHandles(st),this.children.destroyAll()}_watchChildLayerListMode(e){this.removeHandles(st),this.listModeDisabled||this.addHandles(e.toArray().map(t=>C(()=>t.listMode,()=>this._compileChildren(e))),st)}_compileChildren(e){const t=this.listModeDisabled?e:e==null?void 0:e.filter(i=>ut(i)!==lr);e!=null&&e.length?(this._createChildren(t),this._destroyChildren(t),this._sortChildren(t),this._watchChildLayerListMode(e)):this._destroyAllChildren()}_watchSublayerChanges(e){e&&this.addHandles(e.on("change",()=>this._compileChildren(e)),xt)}_initializeChildLayers(e){this._compileChildren(e),this._watchSublayerChanges(e)}_createChildItems(e,t){return e.reverse().map(i=>t||Rt(i)?new Ke({layer:i,checkPublishStatusEnabled:this.checkPublishStatusEnabled,listItemCreatedFunction:this.listItemCreatedFunction,listModeDisabled:this.listModeDisabled,parent:this,view:this.view}):null).filter(be)}_watchLayerProperties(e){if(this.removeHandles(xt),this.removeHandles(st),!e)return;if((!this.listModeDisabled&&ut(e))==="hide-children")return void this.children.destroyAll();const t=mi(e);t&&this.addHandles(C(()=>e[t],i=>{e.hasOwnProperty(t)&&this._initializeChildLayers(i)},Y),xt)}};o([r({type:_i})],x.prototype,"actionsSections",void 0),o([r()],x.prototype,"actionsOpen",void 0),o([r()],x.prototype,"checkPublishStatusEnabled",void 0),o([r({type:de.ofType(x)})],x.prototype,"children",void 0),o([r()],x.prototype,"childrenSortable",void 0),o([r({readOnly:!0})],x.prototype,"connectionStatus",null),o([r({readOnly:!0})],x.prototype,"error",null),o([r()],x.prototype,"hidden",void 0),o([r({readOnly:!0})],x.prototype,"incompatible",null),o([r()],x.prototype,"layer",void 0),o([r({readOnly:!0})],x.prototype,"layerView",null),o([r()],x.prototype,"listItemCreatedFunction",void 0),o([r({nonNullable:!0})],x.prototype,"listModeDisabled",void 0),o([r()],x.prototype,"open",void 0),o([r({type:bi})],x.prototype,"panel",null),o([Yi("panel")],x.prototype,"castPanel",null),o([r()],x.prototype,"parent",void 0),o([r({value:!0})],x.prototype,"sortable",null),o([r()],x.prototype,"title",null),o([r({readOnly:!0})],x.prototype,"publishing",null),o([r({readOnly:!0})],x.prototype,"updating",null),o([r()],x.prototype,"view",void 0),o([r()],x.prototype,"visible",null),o([r({readOnly:!0})],x.prototype,"visibleAtCurrentScale",null),o([r({readOnly:!0})],x.prototype,"visibleAtCurrentTimeExtent",null),o([r({readOnly:!0})],x.prototype,"visibilityMode",null),x=Ke=o([M("esri.widgets.LayerList.ListItem")],x);const Vt=x,J={view:"view",viewLayers:"view-layers",mapLayers:"map-layers",layerViews:"layer-views",layerListMode:"layer-list-mode"},nr="hide",wi=de.ofType(Vt);let ie=class extends Mt{constructor(e){super(e),this.checkPublishStatusEnabled=!1,this.listItemCreatedFunction=null,this.listModeDisabled=!1,this.operationalItems=new wi,this.view=null}initialize(){this.addHandles([C(()=>{var e;return((e=this.view)==null?void 0:e.ready)===!0},()=>this._viewHandles(),Y),C(()=>[this.listItemCreatedFunction,this.checkPublishStatusEnabled,this.listModeDisabled],()=>this._recompileList()),C(()=>Yt(this.view)?this.view.inGeographicLayout:null,()=>this._compileList())],J.view)}destroy(){this._removeAllItems(),this.view=null}get state(){const{view:e}=this;return e!=null&&e.ready?"ready":e?"loading":"disabled"}get totalItems(){return this.operationalItems.flatten(e=>e.children).length}triggerAction(e,t){e&&!e.disabled&&this.emit("trigger-action",{action:e,item:t})}moveListItem(e,t,i,s){var m,O;const l=e==null?void 0:e.layer;if(!l||l.type==="subtype-sublayer"||l.type==="sublayer")return;const n=(O=(m=this.view)==null?void 0:m.map)==null?void 0:O.layers,a=t?Zt(t):n,d=i?Zt(i):n;if(!a||!d)return;const{operationalItems:c}=this,h=(t==null?void 0:t.children)||c,v=(i==null?void 0:i.children)||c,g=d.length-s;e.parent=i||null,h.remove(e),a.remove(l),v.includes(e)||v.add(e,g),d.includes(l)||d.add(l,g),this._compileList()}_createLayerViewHandles(e){this.removeHandles(J.layerViews),this._compileList(),e&&this.addHandles(e.on("change",()=>this._compileList()),J.layerViews)}_createMapLayerHandles(e){this.removeHandles(J.mapLayers),this._compileList(),e&&this.addHandles(e.on("change",()=>this._compileList()),J.mapLayers)}_createListItem(e){const{view:t,listItemCreatedFunction:i,checkPublishStatusEnabled:s,listModeDisabled:l}=this;return new Vt({checkPublishStatusEnabled:s,listModeDisabled:l,layer:e,listItemCreatedFunction:i,view:t})}_removeAllItems(){this.operationalItems.destroyAll()}_getViewableLayers(e){return e?this.listModeDisabled?e:e.filter(t=>ut(t)!==nr):void 0}_watchLayersListMode(e){this.removeHandles(J.layerListMode),e&&!this.listModeDisabled&&this.addHandles(C(()=>e.filter(t=>"listMode"in t).map(t=>t.listMode).toArray(),()=>this._compileList()),J.layerListMode)}_compileList(){var s,l;const e=(l=(s=this.view)==null?void 0:s.map)==null?void 0:l.layers,t=Yt(this.view)&&!this.view.inGeographicLayout?e==null?void 0:e.filter(({type:n})=>n==="link-chart"):e;this._watchLayersListMode(t);const i=this._getViewableLayers(t);i!=null&&i.length?(this._createNewItems(i),this._removeItems(i),this._sortItems(i)):this._removeAllItems()}_createNewItems(e){const{operationalItems:t}=this;e.forEach(i=>{t.some(s=>s.layer===i)||t.add(this._createListItem(i))})}_removeItems(e){const{operationalItems:t}=this,i=[];t.forEach(s=>{s&&e&&e.includes(s.layer)||i.push(s)}),t.destroyMany(i)}_sortItems(e){const{operationalItems:t}=this;t.sort((i,s)=>{const l=e.indexOf(i.layer),n=e.indexOf(s.layer);return l>n?-1:l<n?1:0})}_recompileList(){this._removeAllItems(),this._compileList()}_viewHandles(){const{view:e}=this;this.removeHandles([J.mapLayers,J.layerViews,J.viewLayers]),e!=null&&e.ready?this.addHandles([C(()=>{var t,i;return(i=(t=this.view)==null?void 0:t.map)==null?void 0:i.allLayers},t=>this._createMapLayerHandles(t),Y),C(()=>{var t;return(t=this.view)==null?void 0:t.allLayerViews},t=>this._createLayerViewHandles(t),Y)],J.viewLayers):this._removeAllItems()}};o([r()],ie.prototype,"checkPublishStatusEnabled",void 0),o([r()],ie.prototype,"listItemCreatedFunction",void 0),o([r({nonNullable:!0})],ie.prototype,"listModeDisabled",void 0),o([r({type:wi})],ie.prototype,"operationalItems",void 0),o([r({readOnly:!0})],ie.prototype,"state",null),o([r()],ie.prototype,"totalItems",null),o([r()],ie.prototype,"view",void 0),ie=o([M("esri.widgets.LayerList.LayerListViewModel")],ie);const ar=ie,Ft=e=>cr(e)||dr(e),cr=e=>{if(!("type"in e))return!1;switch(e.type){case"feature":case"geojson":case"csv":case"graphics":case"wfs":case"map-notes":case"oriented-imagery":case"scene":case"building-scene":case"subtype-sublayer":return!0;default:return!1}},dr=e=>{const t=mi(e);if(t!=null&&e.hasOwnProperty(t)&&e[t]!=null){for(const i of e[t])if(Ft(i))return!0}return!1},at=(e,t)=>t!=null&&e!=null&&(t.test(e.title)?"self":!!e.children.some(i=>at(i,t)!==!1)&&"children");var Et;let ce=Et=class extends Vt{constructor(e){super(e),this.children=new de,this.parent=null}get enabled(){const{children:e}=this;if(e.length===0)return this.featureSource!=null&&this.featureSource.enabled?"enabled":"disabled";let t=!1,i=!1;for(const s of e){if(s.enabled==="indeterminate")return s.enabled;if(s.enabled==="enabled"?t=!0:s.enabled==="disabled"&&(i=!0),i&&t)return"indeterminate"}return i?"disabled":"enabled"}get childLayerIds(){return this.children.toArray().flatMap(e=>{var t;return[(t=e.layer)==null?void 0:t.id,...e.childLayerIds]})}get featureSource(){const{layer:e,getFeatureSnappingSources:t}=this;return t().find(i=>i.layer===e)}_initializeChildLayers(e){if(!e)return;const t=e.filter(Ft);super._initializeChildLayers(t)}_createChildItems(e){return e.map(t=>Rt(t)?new Et({layer:t,parent:this,view:this.view,getFeatureSnappingSources:this.getFeatureSnappingSources}):null).filter(be).reverse()}};o([r()],ce.prototype,"enabled",null),o([r()],ce.prototype,"children",void 0),o([r()],ce.prototype,"childLayerIds",null),o([r()],ce.prototype,"featureSource",null),o([r({constructOnly:!0})],ce.prototype,"getFeatureSnappingSources",void 0),o([r()],ce.prototype,"parent",void 0),ce=Et=o([M("esri.widgets.support.SnappingControls.SnappingListItem")],ce);let Pe=class extends ar{constructor(){super(...arguments),this.featureSnappingSources=new de}get operationalItemsFlat(){return this.operationalItems.flatten(e=>e.children)}get selectableItems(){return this.operationalItemsFlat.filter(e=>{var t;return!((t=e.children)!=null&&t.length)})}_compileList(){var s,l;const e=(l=(s=this.view)==null?void 0:s.map)==null?void 0:l.layers;if(!e)return;const t=e.filter(Ft);this._watchLayersListMode(t);const i=this._getViewableLayers(t);i!=null&&i.length?(this._createNewItems(i),this._removeItems(i),this._sortItems(i)):this._removeAllItems()}_createListItem(e){return new ce({layer:e,view:this.view,getFeatureSnappingSources:()=>this.featureSnappingSources})}};o([r()],Pe.prototype,"featureSnappingSources",void 0),o([r()],Pe.prototype,"operationalItems",void 0),o([r()],Pe.prototype,"operationalItemsFlat",null),o([r()],Pe.prototype,"selectableItems",null),Pe=o([M("esri.widgets.support.SnappingControls.SnappingLayerListViewModel")],Pe);let oe=class extends se{constructor(e){super(e),this.layerListViewModel=new Pe,this.snappingOptions=new ni,this.view=null}initialize(){this.addHandles([C(()=>({viewModel:this.layerListViewModel,view:this.view}),({viewModel:e,view:t})=>{e.view=t},Y),C(()=>{var e;return{viewModel:this.layerListViewModel,sources:(e=this.snappingOptions)==null?void 0:e.featureSources}},({viewModel:e,sources:t})=>{e.featureSnappingSources=t},Y)])}get allLayersEnabled(){var e;return(((e=this.layerListViewModel)==null?void 0:e.selectableItems)??[]).every(t=>t.enabled==="enabled")}get allLayersDisabled(){var e;return(((e=this.layerListViewModel)==null?void 0:e.selectableItems)??[]).every(t=>!t.enabled)}get layersEnabledCount(){var e,t;return((t=(e=this.layerListViewModel)==null?void 0:e.selectableItems)==null?void 0:t.filter(i=>i.enabled==="enabled").length)??0}get state(){return this.snappingOptions?"ready":"disabled"}toggleSnappingForLayers(e,t){e==null||e.forEach(i=>t?this.enableSnappingForLayer(i):this.disableSnappingForLayer(i))}toggleSnappingForAllLayers(e){this.layerListViewModel.selectableItems.forEach(({layer:t})=>{const i=t==null?void 0:t.id;e?this.enableSnappingForLayer(i):this.disableSnappingForLayer(i)})}enableSnappingForLayer(e){const t=this._findSnappingSourceForLayer(e)??this._makeSnappingSourceForLayer(e);t&&(t.enabled=!0)}disableSnappingForLayer(e){const t=this._findSnappingSourceForLayer(e);t&&(t.enabled=!1)}updateEnabledFeatureSources(e){for(const t of this.snappingOptions.featureSources)Rt(t.layer)&&(t.enabled=e.includes(t.layer.id))}_findSnappingSourceForLayer(e){return this.snappingOptions.featureSources.find(t=>t.layer.id===e)}_makeSnappingSourceForLayer(e){var s;const t=(s=this.layerListViewModel.operationalItemsFlat.find(l=>{var n;return((n=l.layer)==null?void 0:n.id)===e}))==null?void 0:s.layer;if(!t)throw new no("snapping-controls:layer-not-found",`cannot enable snapping for layer with id ${e} because no such layer was found in the view`);if(t.type==="group")return;const i=new Mo({layer:t});return this.snappingOptions.featureSources.add(i),i}};o([r()],oe.prototype,"allLayersEnabled",null),o([r()],oe.prototype,"allLayersDisabled",null),o([r({constructOnly:!0})],oe.prototype,"layerListViewModel",void 0),o([r()],oe.prototype,"layersEnabledCount",null),o([r({type:ni,nonNullable:!0})],oe.prototype,"snappingOptions",void 0),o([r()],oe.prototype,"state",null),o([r()],oe.prototype,"view",void 0),oe=o([M("esri.widgets.support.SnappingControls.SnappingControlsViewModel")],oe);const pr=oe,te="esri-snapping-controls",Z={base:te,container:`${te}__container`,toggleBlock:`${te}__toggle-block`,layerListBlock:`${te}__layer-list-block`,layerList:`${te}__layer-list`,layerListFilter:`${te}__layer-list__filter`,layerListButton:`${te}__layer-list__button`,layerListItem:`${te}__layer-list__item`,layerListGroup:`${te}__layer-list__group`,nestedContainer:`${te}__nested-container`};let D=class extends pe{constructor(e,t){super(e,t),this._defaultViewModel=null,this._layerListFilter=null,this._gridLoadTask=null,this.layerListOpen=!0,this.gridOptionsOpen=!1,this.messages=null,this.messagesCommon=null,this.snappingManager=null,this.visibleElements=new yt,this._enableSnappingSwitchChange=n=>{this.snappingOptions.enabled=n},this._featureEnabledSwitchChange=n=>{this.snappingOptions.featureEnabled=n},this._gridEnabledSwitchChange=n=>{this.snappingOptions.gridEnabled=n,n&&this._startLoadGrid()},this._selfEnabledSwitchChange=n=>{this.snappingOptions.selfEnabled=n},this._onToggleLayersButtonClick=n=>{this.viewModel.toggleSnappingForAllLayers(!this.viewModel.allLayersEnabled),Lo(n.target)};const{snappingOptions:i,view:s,viewModel:l}=e;this.viewModel=l??(this._defaultViewModel=new pr({snappingOptions:i,view:s}))}normalizeCtorArgs(e){const{snappingOptions:t,view:i,viewModel:s,...l}=e;return l}destroy(){this.viewModel!==this._defaultViewModel&&(this._defaultViewModel=Be(this._defaultViewModel))}loadDependencies(){return Promise.all([fe({block:()=>b(()=>import("./index-Cw0teFC5-DKaIKrcn.js"),__vite__mapDeps([117,1,2,3,4,5,6,7,8,9,10,118,13,12,11,107,20,21,15,25,22,108,16,0,14,17,109,110,111,119,19,23,24,26,27]),import.meta.url),button:()=>b(()=>import("./index-DPXhoKdb-BRi0pKCq.js"),__vite__mapDeps([190,1,2,3,4,5,6,7,8,9,10,11,12,13,23,17,15,113,16]),import.meta.url),input:()=>b(()=>import("./index-QE3mrqEk-Drg93m0V.js"),__vite__mapDeps([191,11,2,3,4,5,6,7,8,12,13,122,192,193,25,14,23,17,15,113,16,115,123,10]),import.meta.url),list:()=>b(()=>import("./index-B9d-rvSv-Bh0e-KnG.js"),__vite__mapDeps([194,1,2,3,4,5,6,7,8,9,10,118,13,12,14,11,122,192,191,193,25,23,17,15,113,16,115,123,29,21,195]),import.meta.url),"list-item":()=>b(()=>import("./index-9gDPHN2D-CWPxwx81.js"),__vite__mapDeps([196,11,2,3,4,5,6,7,8,12,13,107,20,21,9,15,25,22,108,16,1,10,0,14,17,109,110,111,119,195,197]),import.meta.url),checkbox:()=>b(()=>import("./index-zXhvvqsJ-Cnhk6MuS.js"),__vite__mapDeps([198,2,3,4,5,6,7,8,12,17,15,25,113,115,10,16]),import.meta.url),loader:()=>b(()=>import("./index-B5UpFGZX-BY7UCsxA.js"),__vite__mapDeps([1,2,3,4,5,6,7,8,9,10]),import.meta.url)}),yi()])}initialize(){this.addHandles(C(()=>{var e;return((e=this.view)==null?void 0:e.type)==="2d"&&!!this.view.grid},e=>{this.visibleElements.gridControls&&(this.snappingOptions.gridEnabled=e)}))}get _openAndReady(){return this.gridOptionsOpen&&this.snappingOptions.gridEnabled&&this.snappingOptions.enabled}get icon(){return"snap-to-point"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get snappingOptions(){return this.viewModel.snappingOptions}set snappingOptions(e){this.viewModel.snappingOptions=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}set viewModel(e){e!==this._get("viewModel")&&(this._defaultViewModel!=null&&this._defaultViewModel===e||(this._defaultViewModel=Be(this._defaultViewModel)),this._set("viewModel",e))}render(){const{label:e}=this;return p("div",{"aria-label":e,class:this.classes(Z.base,Pt.widget)},p("div",{class:Z.container},this._renderContent()))}_renderContent(){var e;return[this._renderToggles(),this._renderLayerList(),((e=this.view)==null?void 0:e.type)==="2d"&&this.visibleElements.gridControls?this._renderGridOptions():null]}_renderToggles(){const{visibleElements:e,view:t}=this,i=[e.selfEnabledToggle?this._renderSelfEnabledToggle():null,e.featureEnabledToggle?this._renderFeatureEnabledToggle():null,e.gridEnabledToggle&&(t==null?void 0:t.type)==="2d"?this._renderGridEnabledToggle():null].filter(be),s=[e.enabledToggle?this._renderEnabledToggle():null,i.length>0?p("div",{class:Z.nestedContainer},i):null].filter(be);return s.length===0?null:p("calcite-block",{class:Z.toggleBlock,expanded:!0,heading:e.header?this.label:"",key:"toggle-block",label:this.label},s)}_renderEnabledToggle(){return p(Re,{checked:this.viewModel.snappingOptions.enabled,disabled:this._enabledToggleDisabled,key:`${this.id}__enabled-toggle`,label:this.messages.enableSnapping,onChange:this._enableSnappingSwitchChange})}_renderSelfEnabledToggle(){return p(Re,{checked:this.viewModel.snappingOptions.selfEnabled,disabled:this._secondaryElementsDisabled,key:`${this.id}__self-enabled-toggle`,label:this.messages.geometryGuides,onChange:this._selfEnabledSwitchChange})}_renderFeatureEnabledToggle(){return p(Re,{checked:this.viewModel.snappingOptions.featureEnabled,disabled:this._secondaryElementsDisabled,key:`${this.id}__feature-enabled-toggle`,label:this.messages.featureToFeature,onChange:this._featureEnabledSwitchChange})}_renderGridEnabledToggle(){return p(Re,{checked:this.viewModel.snappingOptions.gridEnabled,disabled:this._secondaryElementsDisabled,key:`${this.id}__grid-enabled-toggle`,label:this.messages.grid,onChange:this._gridEnabledSwitchChange})}_renderLayerList(){var a;if(!this.visibleElements.layerList)return null;const{messages:e,viewModel:t}=this,i=t.layerListViewModel.operationalItems.length>9?p("calcite-input",{class:Z.layerListFilter,clearable:!0,placeholder:e==null?void 0:e.searchLayers,onCalciteInputInput:({currentTarget:{value:d}})=>{this._layerListFilter=d===""?null:new RegExp(d,"i")}}):null,s=this._secondaryElementsDisabled,l=this.layerListOpen&&!s,n=(a=t.layerListViewModel.operationalItems)==null?void 0:a.find(d=>!!d.children.length);return p("calcite-block",{class:Z.layerListBlock,collapsible:!0,disabled:this._secondaryElementsDisabled,expanded:l,heading:e.snappingLayers,key:"list-block",onCalciteBlockToggle:d=>this.layerListOpen=d.currentTarget.expanded},i,this._renderToggleLayersButton(),p("calcite-list",{class:Z.layerList,displayMode:n?"nested":"flat",label:e==null?void 0:e.snappingLayers,selectionMode:"none"},this._renderLayerListItemCollection(t.layerListViewModel.operationalItems)))}_renderGridOptions(){var h;const{view:e,visibleElements:t,snappingManager:i,snappingOptions:s,_openAndReady:l}=this,{gridEnabled:n,enabled:a}=s;(l||(e==null?void 0:e.type)==="2d"&&e.grid)&&this._startLoadGrid();const d=(h=this._gridLoadTask)==null?void 0:h.value,c=d&&(e==null?void 0:e.type)==="2d"&&p(d,{snappingManager:i,snappingOptions:s,view:e,visibleElements:t.gridControlsElements});return p("calcite-block",{class:Z.layerListBlock,collapsible:!0,disabled:!n||!a,expanded:l,heading:this.messages.gridOptionsHeading,key:"grid-block",onCalciteBlockClose:()=>this.gridOptionsOpen=!1,onCalciteBlockOpen:()=>this.gridOptionsOpen=!0},c??p("calcite-loader",{label:this.messagesCommon.loading,scale:"s",text:this.messagesCommon.loading}))}_startLoadGrid(){var e;!this._gridLoadTask&&this.visibleElements.gridControls&&((e=this.view)==null?void 0:e.type)==="2d"&&(this._gridLoadTask=di(async()=>(await b(async()=>{const{default:t}=await import("./GridControls-BoO_W6I2-CSaimqZs.js");return{default:t}},__vite__mapDeps([199,3,4,5,6,200,96,83,2,7,8,71,72,73,74,58,59,60,129,76,77,201,202,81,203,204,205,206,207,208,50,57,48,61,62,63,64,65,66,67,68,69,44,45,70,75,43,51,78,79,80,52,53,54,55,56,82,84,85,86,87,88,89,209,210,211,212,105,213,92,93,188,214,95,215,42,46,47,49,90,91,94,97,98,99,100,33,101,31,32,34,35,36,39,37,102,103,104,41,216,157,150,151,217,218,160,219,220,221,222,223,189,224,225]),import.meta.url)).default))}_renderLayerListItemCollection(e){const t=this._layerListFilter;return e.map(i=>{switch(t?at(i,t):null){case"children":{const s=i.children.filter(l=>at(l,t)!==!1);return this._renderLayerListItemGroup(i,s)}case"self":case null:return this._renderLayerListItemOrGroup(i);case!1:return at(i.parent,t)==="self"?this._renderLayerListItemOrGroup(i):null}}).toArray().filter(be)}_renderToggleLayersButton(){if(!this.visibleElements.layerListToggleLayersButton)return null;const{viewModel:{allLayersEnabled:e},messages:t}=this,i=e?t.disableAllLayers:t.enableAllLayers;return p("calcite-button",{appearance:"transparent",class:Z.layerListButton,label:i,name:"layer-toggle",onclick:this._onToggleLayersButtonClick},i)}_renderLayerListItemOrGroup(e){if(e.children.length)return this._renderLayerListItemGroup(e);const{messages:{untitledLayer:t}}=this,i=e.title||t,s=()=>{var l;this.viewModel.toggleSnappingForLayers([(l=e.layer)==null?void 0:l.id],e.enabled!=="enabled")};return p("calcite-list-item",{class:Z.layerListItem,key:`${this.id}-list-item-${e.uid}`,label:i,onCalciteListItemSelect:l=>{l.stopPropagation(),s()}},p("calcite-checkbox",{checked:e.enabled==="enabled",slot:"actions-start",onCalciteCheckboxChange:s}))}_renderLayerListItemGroup(e,t){const{messages:i}=this,{children:s,title:l}=e,n=l||i.untitledLayer,a=l&&l!==""?l:ao(),d=!!(t!=null&&t.length),c=t??s,h=()=>{this.viewModel.toggleSnappingForLayers(e.childLayerIds,e.enabled!=="enabled")},v=c==null?void 0:c.find(g=>!!g.children.length);return p("calcite-list-item",{class:Z.layerListGroup,expanded:d,key:a,label:n,onCalciteListItemSelect:g=>{g.stopPropagation(),h()}},p("calcite-checkbox",{checked:e.enabled==="enabled",indeterminate:e.enabled==="indeterminate",slot:"actions-start",onCalciteCheckboxChange:h}),p("calcite-list",{displayMode:v?"nested":"flat",label:i==null?void 0:i.snappingLayers,selectionMode:"none"},this._renderLayerListItemCollection(c)))}get _enabledToggleDisabled(){const e=this.snappingOptions;return e.enabledToggled||e.forceDisabled}get _secondaryElementsDisabled(){return this._enabledToggleDisabled||!this.snappingOptions.enabled}};o([r()],D.prototype,"_defaultViewModel",void 0),o([r()],D.prototype,"_layerListFilter",void 0),o([r()],D.prototype,"_gridLoadTask",void 0),o([r()],D.prototype,"_openAndReady",null),o([r()],D.prototype,"label",null),o([r({type:Boolean,nonNullable:!0})],D.prototype,"layerListOpen",void 0),o([r({type:Boolean,nonNullable:!0})],D.prototype,"gridOptionsOpen",void 0),o([r(),_e("esri/widgets/support/SnappingControls/t9n/SnappingControls")],D.prototype,"messages",void 0),o([r(),_e("esri/t9n/common")],D.prototype,"messagesCommon",void 0),o([r()],D.prototype,"snappingOptions",null),o([r()],D.prototype,"snappingManager",void 0),o([r()],D.prototype,"view",null),o([r()],D.prototype,"viewModel",null),o([r({type:yt,nonNullable:!0})],D.prototype,"visibleElements",void 0),o([r()],D.prototype,"_enabledToggleDisabled",null),o([r()],D.prototype,"_secondaryElementsDisabled",null),D=o([M("esri.widgets.support.SnappingControls")],D);const ur=D,ge="esri-sketch",le={base:ge,vertical:`${ge}--vertical`,docked:`${ge}-bar`,floating:`${ge}-pad`,chipHorizontal:`${ge}__selection-count-chip--horizontal`,chipVertical:`${ge}__selection-count-chip--vertical`,chipVerticalSmall:`${ge}__selection-count-chip--vertical--s`,popoverWrapper:`${ge}__popover-wrapper`},hr={point:"pin",polyline:"line",polygon:"polygon",rectangle:"rectangle",circle:"circle",multipoint:"pins",mesh:"i3d-building",freehandPolygon:"freehand-area",freehandPolyline:"freehand",text:"add-text"};let w=class extends pe{constructor(e,t){super(e,t),this._activeCustomToolOptions=null,this._selectionToolbar=null,this._viewModelHandlesGroup=null,this.availableCreateTools=["point","polyline","polygon","rectangle","circle"],this.customToolOptions=null,this.customActions=null,this.toolbarKind="floating",this.contextualToolLocation="separate",this.groupCollapsePriorities=null,this.groupAllowCollapseOptions=null,this.messages=null,this.messagesCommon=null,this.visibleElements=new H,this._defaultViewModel=null,this._calcitePopoverReferenceElement=null,this._relativeLocation="top",this._popoverOpen=!1,this._activateCreateTool=this._activateCreateTool.bind(this),this.viewModel=(e==null?void 0:e.viewModel)||(this._defaultViewModel=new ai({creationMode:(e==null?void 0:e.creationMode)??"continuous"}))}initialize(){const{layer:e,view:t}=this,i=(t==null?void 0:t.type)==="2d",s=new Yo({persistSelection:!1,visibleElements:new Dt({chip:!1,lassoTool:i,operationTypeControls:!1,pan:!1,pointTool:!1,rectangleTool:i}),view:t,sources:e?[e]:null,scale:this.scale});this.addHandles([C(()=>this.viewModel,l=>{this._viewModelHandlesGroup=je(this._viewModelHandlesGroup),l&&(this._viewModelHandlesGroup=Ot([l.on("create",()=>this.scheduleRender()),l.on("update",()=>this.scheduleRender()),l.on("delete",n=>this.emit("delete",n)),l.on("undo",()=>this.scheduleRender()),l.on("redo",()=>this.scheduleRender()),C(()=>l.layer,n=>{this._selectionToolbar&&(this._selectionToolbar.sources=n?[n]:null)}),C(()=>l.view,n=>{this._selectionToolbar&&(this._selectionToolbar.view=n)}),C(()=>l.state,()=>this.notifyChange("state"))]))},jt),co(()=>s.activeOperation,()=>this.viewModel.cancel()),s.on("complete",l=>this._onSelectionOperationComplete(l)),C(()=>{const{view:l,visibleElements:{selectionTools:n}}=this;return{lassoTool:(l==null?void 0:l.type)!=="3d"&&!!(n!=null&&n["lasso-selection"]),rectangleTool:(l==null?void 0:l.type)!=="3d"&&!!(n!=null&&n["rectangle-selection"])}},l=>{Object.assign(s.visibleElements,l)},jt)]),this._selectionToolbar=s}loadDependencies(){return fe({action:()=>b(()=>import("./index-CPuo0G35-CrRCQ2Ya.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]),import.meta.url),chip:()=>b(()=>import("./index-Nm1hzI7x-UyMsP99p.js"),__vite__mapDeps([106,11,2,3,4,5,6,7,8,12,13,15,25,16,10]),import.meta.url),popover:()=>b(()=>import("./index-CXfSk3I4-Bs_ihh4m.js"),__vite__mapDeps([19,1,2,3,4,5,6,7,8,9,10,11,12,13,0,14,15,16,17,20,21,22,23,24,25]),import.meta.url).then(e=>e.i)})}destroy(){var e;(e=this._selectionToolbar)==null||e.destroy(),this._viewModelHandlesGroup=je(this._viewModelHandlesGroup)}get activeTool(){var l;const e=(l=this._selectionToolbar)==null?void 0:l.activeOperation;if(e)switch(e.toolName){case"lasso":return"lasso-selection";case"rectangle":return"rectangle-selection";case"default":return"custom-selection"}const t=this._effectiveAvailableCreateTools,{activeTool:i,activeCreateToolDrawMode:s}=this.viewModel;return i==="polygon"&&s==="freehand"&&(t!=null&&t.includes("freehandPolygon"))?"freehandPolygon":i==="polyline"&&s==="freehand"&&(t!=null&&t.includes("freehandPolyline"))?"freehandPolyline":this.viewModel.activeTool}get activeTooltip(){return this.viewModel.activeTooltip}get createGraphic(){return this.viewModel.createGraphic}get creationMode(){return this.viewModel.creationMode}set creationMode(e){this.viewModel.creationMode=e}get defaultCreateOptions(){return this.viewModel.defaultCreateOptions}set defaultCreateOptions(e){this.viewModel.defaultCreateOptions=e}get defaultUpdateOptions(){return this.viewModel.defaultUpdateOptions}set defaultUpdateOptions(e){this.viewModel.defaultUpdateOptions=e}get icon(){return"pencil"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get labelOptions(){return this.viewModel.labelOptions}set labelOptions(e){this.viewModel.labelOptions=e}get layer(){return this.viewModel.layer}set layer(e){this.viewModel.layer=e}set layout(e){this._set("layout",e),this._selectionToolbar&&(this._selectionToolbar.layout=e)}set scale(e){this._set("scale",e),this._selectionToolbar&&(this._selectionToolbar.scale=e)}get snappingOptions(){return this.viewModel.snappingOptions}set snappingOptions(e){this.viewModel.snappingOptions=e}get state(){var e;return(e=this._selectionToolbar)!=null&&e.activeOperation?"active":this.viewModel.state}get tooltipOptions(){return this.viewModel.tooltipOptions}set tooltipOptions(e){this.viewModel.tooltipOptions=e}get updateGraphics(){return this.viewModel.updateGraphics}get valueOptions(){return this.viewModel.valueOptions}set valueOptions(e){this.viewModel.valueOptions=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}set viewModel(e){const t=this._get("viewModel");e!==t&&(t&&t===this._defaultViewModel&&Be(t),this._set("viewModel",e))}get _effectiveAvailableCreateTools(){const{availableCreateTools:e,view:t,visibleElements:i}=this,s=e==null?void 0:e.filter(l=>{var n;return!!((n=i.createTools)!=null&&n[l])});return(t==null?void 0:t.type)==="3d"?s==null?void 0:s.filter(l=>l!=="multipoint"):s}create(e,t,i){const s=(i==null?void 0:i.createOptions)??t;return this._activeCustomToolOptions=i,dt(this.viewModel.create(e,s))}update(e,t){return dt(this.viewModel.update(e,t))}complete(){this.viewModel.complete()}cancel(){var e;(e=this._selectionToolbar)==null||e.cancel(),this.viewModel.cancel(),this._activeCustomToolOptions=null}undo(){var e;this.viewModel.undo(),(e=this.view)==null||e.focus()}redo(){var e;this.viewModel.redo(),(e=this.view)==null||e.focus()}delete(){this.viewModel.delete()}duplicate(){return this.viewModel.duplicate()}dismissFloatingElements(){this._popoverOpen=!1}render(){var l,n,a,d;const{toolbarKind:e,layout:t,scale:i}=this,s=(l=this.customActions)==null?void 0:l.filter(c=>c.position==="selection-toolbar");return p("div",null,p("div",{classes:{[le.base]:!0,[le.floating]:e==="floating",[le.docked]:e==="docked",[le.vertical]:t==="vertical"}},p(re,{barStyle:e,layout:t,scale:i},this._renderSelectionSetItemGroupInline(),p("div",{"allow-collapse":((n=this.groupAllowCollapseOptions)==null?void 0:n.get("selectionTools"))??!0,"group-kind":"split-button",key:"selection-split-button",priority:((a=this.groupCollapsePriorities)==null?void 0:a.get("selectionTools"))??0},this._renderDefaultSelectionButton(),(d=this._selectionToolbar)==null?void 0:d.render(),s==null?void 0:s.map(c=>this._renderToolbarItem(c))),this._renderCreateToolActionGroup(),this._renderUndoRedoMenuItemGroup(),this._renderSettingsMenuItemGroup()),this._renderSelectionSetToolbar(),this._renderSettingsMenuPopover()))}_renderSettingsMenuPopover(){const{messagesCommon:e,snappingOptions:t,view:i,viewModel:s,visibleElements:l}=this;if(!this._calcitePopoverReferenceElement)return;const n={directionModePicker:l.directionModePicker,labelsToggle:l.labelsToggle,tooltipsToggle:l.tooltipsToggle},a=this.layout==="horizontal"?this._relativeLocation==="top"?"bottom-end":"top-end":"right-end";return p("calcite-popover",{closable:!0,heading:e.settings,label:e.settings,open:this._popoverOpen,overlayPositioning:"fixed",placement:a,referenceElement:this._calcitePopoverReferenceElement,scale:this.scale,onCalcitePopoverBeforeClose:()=>this._popoverOpen=!1,onCalcitePopoverBeforeOpen:d=>this._remeasurePopoverSizes(d.currentTarget),onCalcitePopoverClose:()=>this._refocusOnView()},p("div",{class:le.popoverWrapper},Object.values(n).includes(!0)?p(Qo,{sketchOptions:s.sketchOptions,viewType:i==null?void 0:i.type,visibleElements:new At(n)}):void 0,l.snappingControls&&i&&t?p(ur,{snappingManager:this.viewModel.snappingManager,snappingOptions:t,view:i,visibleElements:l.snappingControlsElements}):void 0))}_renderSelectionSetToolbar(){if(this.contextualToolLocation!=="separate")return;const e=this._renderSelectionSetItemGroup();return e!=null&&e.length?p(re,{barStyle:this.toolbarKind,layout:this.layout,scale:this.scale},e):void 0}_renderSelectionSetItemGroupInline(){return this.contextualToolLocation==="separate"?[]:this._renderSelectionSetItemGroup()}_renderUndoRedoMenuItemGroup(){var e,t;return p("div",{"allow-collapse":((e=this.groupAllowCollapseOptions)==null?void 0:e.get("undoRedo"))??!0,"group-kind":"split-button",key:"undo-redo-menu",priority:((t=this.groupCollapsePriorities)==null?void 0:t.get("undoRedo"))??10,slot:"actions-end"},this._renderUndoButton(),this._renderRedoButton())}_renderSettingsMenuItemGroup(){var s,l,n;const e=[],t=[];(s=this.customActions)==null||s.forEach(a=>{a.position==="settings-before"?t.push(a):a.position==="settings-after"&&e.push(a)});const i=[...t.map(a=>this._renderToolbarItem(a)),this._renderSettingsMenuButton(),...e.map(a=>this._renderToolbarItem(a))].filter(be);if(i.length)return p("div",{"allow-collapse":((l=this.groupAllowCollapseOptions)==null?void 0:l.get("settings"))??!1,"group-kind":"overflow-group",key:"settings-menu",priority:((n=this.groupCollapsePriorities)==null?void 0:n.get("settings"))??1e3,slot:"actions-end"},i)}_renderSelectionSetItemGroup(){var l,n,a,d;if(!this.updateGraphics.length)return[];const e=this.contextualToolLocation==="inline-end"?"actions-end":void 0,t=(l=this.customActions)==null?void 0:l.filter(c=>c.position==="before-selection-set"),i=(n=this.customActions)==null?void 0:n.filter(c=>c.position==="after-selection-set"),s=((a=this.groupCollapsePriorities)==null?void 0:a.get("selectionSet"))??100;return[p("div",{"group-kind":"measured-content",key:"selection-count-chip-group",priority:s,slot:e},this._renderFeatureCountChip()),p("div",{"allow-collapse":((d=this.groupAllowCollapseOptions)==null?void 0:d.get("selectionSet"))??!1,"group-kind":"overflow-group",key:"selection-set-tool-group",priority:s,slot:e},t==null?void 0:t.map(c=>this._renderToolbarItem(c)),this._renderDuplicateButton(),this._renderDeleteButton(),i==null?void 0:i.map(c=>this._renderToolbarItem(c)))]}_renderDefaultSelectionButton(){if(!this.viewModel.updateOnGraphicClick)return[];const{messages:e,state:t}=this;return this._renderToolbarItem({id:"pointer-select",text:e.selectFeature,icon:"cursor",onclick:this._activateDefaultSelectTool,active:t==="ready"})}_renderCreateToolActionGroup(){var i,s,l,n;const e=((i=this._effectiveAvailableCreateTools)==null?void 0:i.flatMap(a=>this._renderBuiltInCreateToolItem(a)))??[],t=((s=this.customToolOptions)==null?void 0:s.flatMap(a=>this._renderCustomToolItem(a)))??[];return p("div",{"allow-collapse":((l=this.groupAllowCollapseOptions)==null?void 0:l.get("createTools"))??!0,"group-kind":"overflow-group",key:"create-tools-group",priority:((n=this.groupCollapsePriorities)==null?void 0:n.get("createTools"))??100},e,t)}_renderBuiltInCreateToolItem(e){return this._renderToolbarItem({id:`${e}-button`,text:this.messages.draw[e],icon:hr[e],onclick:()=>this._activateCreateTool(e),active:this.activeTool===e&&!this._activeCustomToolOptions})}_renderCustomToolItem(e){var i;const{toolKey:t}=e;return this._renderToolbarItem({id:`custom-${e.toolKey}`,text:e.label,icon:e.icon,onclick:()=>this._activateCreateTool(e.toolName,null,e),active:((i=this._activeCustomToolOptions)==null?void 0:i.toolKey)===t})}_renderUndoButton(){return this.visibleElements.undoRedoMenu?this._renderToolbarItem({id:"undo-button",text:this.messages.undo,icon:"undo",disabled:!this.viewModel.canUndo(),onclick:this.undo,flipRTL:!0}):[]}_renderRedoButton(){return this.visibleElements.undoRedoMenu?this._renderToolbarItem({id:"redo-button",text:this.messages.redo,icon:"redo",disabled:!this.viewModel.canRedo(),onclick:this.redo,flipRTL:!0}):[]}_renderSettingsMenuButton(){return this.visibleElements.settingsMenu?this._renderToolbarItem({id:"settings-menu-action",text:this.messagesCommon.settings,icon:"gear",active:this._popoverOpen,onclick:()=>this._popoverOpen=!this._popoverOpen,afterCreate:e=>this._calcitePopoverReferenceElement=e,afterUpdate:e=>this._calcitePopoverReferenceElement=e,afterRemoved:()=>this._calcitePopoverReferenceElement=null}):[]}_renderFeatureCountChip(){if(!this.visibleElements.selectionCountLabel)return[];const{layout:e,messages:t,scale:i,id:s,updateGraphics:{length:l}}=this,n=Qt(t.selectedCount,{count:l}),a=i==="s"?99:999,d=l>a?Qt(t.selectedCountTruncated,{truncated:a}):l,c=i==="s"&&e==="vertical",h=c?`${s}-selection-chip-small`:`${s}-selection-chip`;return[c?p("span",{classes:{[le.chipVertical]:!0,[le.chipVerticalSmall]:this.scale==="s"},id:h,tabIndex:0,title:n},d):p("calcite-chip",{appearance:"outline",class:e==="horizontal"?le.chipHorizontal:le.chipVertical,id:h,kind:"brand",label:n,scale:i==="l"?"m":"s",tabIndex:0,title:e==="vertical"?n:void 0},e==="vertical"?d:n)]}_renderDuplicateButton(){if(!this.visibleElements.duplicateButton)return[];const{messages:e}=this;return this._renderToolbarItem({id:"duplicate",text:this.updateGraphics.length>1?e.duplicateFeatures:e.duplicateFeature,icon:"copy",onclick:this._onDuplicateSelect})}_renderDeleteButton(){if(!this.visibleElements.deleteButton)return[];const{messages:e}=this,t=this.updateGraphics.length>1?e.deleteFeatures:e.deleteFeature;return this._renderToolbarItem({id:"delete",text:t,icon:"trash",onclick:this.delete})}_renderToolbarItem({id:e,text:t,icon:i,disabled:s,onclick:l,active:n,flipRTL:a,afterCreate:d,afterUpdate:c,afterRemoved:h}){const v=`${this.id}-${e}`;return[p("calcite-action",{active:n,afterCreate:d,afterRemoved:h,afterUpdate:c,bind:this,"data-testid":e,disabled:s||this.state==="disabled",icon:i,iconFlipRtl:a??!1,id:v,key:e,onclick:l,scale:this.scale,text:t,title:t})]}_remeasurePopoverSizes(e){var t,i,s,l,n,a;try{const d=e.parentElement,c=(i=(t=this==null?void 0:this.view)==null?void 0:t.container)==null?void 0:i.getBoundingClientRect(),h=d==null?void 0:d.style;if(!(d&&c&&h&&((l=(s=this.view)==null?void 0:s.container)!=null&&l.contains(d))))return;const v=this._calcitePopoverReferenceElement;if(!v)return;const{bottom:g,top:m}=v.getBoundingClientRect();if(this.layout==="horizontal"){const V=g<c.height/2;V!==(this._relativeLocation==="top")&&(this._relativeLocation=V?"top":"bottom"),V?(h==null||h.setProperty("--sketch-view-height-offset",g-c.top+"px"),h==null||h.setProperty("--sketch-view-margin-offset","30px")):(h==null||h.setProperty("--sketch-view-height-offset",c.bottom-m+"px"),h==null||h.setProperty("--sketch-view-margin-offset","15px"))}else this.layout==="vertical"&&(h.setProperty("--sketch-view-height-offset","15px"),h.setProperty("--sketch-view-margin-offset","15px"));const O=(a=(n=e.shadowRoot)==null?void 0:n.querySelector("div.header"))==null?void 0:a.getBoundingClientRect().height;h.setProperty("--sketch-popover-header-offset",`${O}px`)}catch(d){ve.getLogger(this.declaredClass).warnOnce("Sketch failed to lay out settings menu.",d)}}_activateCreateTool(e,t,i){var l;const s=this._activeCustomToolOptions;if(i||s){if((i==null?void 0:i.toolKey)===(s==null?void 0:s.toolKey))return void this.cancel()}else if(this.activeTool===e)return void this.cancel();(l=this._selectionToolbar)==null||l.cancel(),this.create(e,t,i)}_onDuplicateSelect(){const e=this.duplicate(),t=this.viewModel.activeTool;t!=="transform"&&t!=="reshape"||this.update(e,{tool:t})}_onSelectionOperationComplete(e){const{viewModel:{defaultUpdateOptions:t}}=this,{selection:i}=e;if(!e.aborted&&i.length){const s=t.tool,l=i.length>1&&s==="reshape"?"transform":s;this.update(i,{...t,tool:l})}this.notifyChange("state")}_activateDefaultSelectTool(){var e;this.cancel(),(e=this.view)==null||e.focus()}_refocusOnView(){var e;this.activeTool&&((e=this.view)==null||e.focus())}};o([r()],w.prototype,"_activeCustomToolOptions",void 0),o([r()],w.prototype,"activeTool",null),o([r({readOnly:!0})],w.prototype,"activeTooltip",null),o([r({cast:e=>{if(!(e!=null&&e.length))return null;const t=new Set(["point","polyline","polygon","rectangle","circle","multipoint","freehandPolyline","freehandPolygon","mesh","text"]);return e.filter(i=>t.has(i))}})],w.prototype,"availableCreateTools",void 0),o([r({readOnly:!0})],w.prototype,"createGraphic",null),o([r()],w.prototype,"creationMode",null),o([r()],w.prototype,"customToolOptions",void 0),o([r()],w.prototype,"customActions",void 0),o([r()],w.prototype,"defaultCreateOptions",null),o([r()],w.prototype,"defaultUpdateOptions",null),o([r()],w.prototype,"icon",null),o([r()],w.prototype,"label",null),o([r()],w.prototype,"labelOptions",null),o([r()],w.prototype,"layer",null),o([r({type:["horizontal","vertical"],value:"horizontal"})],w.prototype,"layout",null),o([r({value:"m"})],w.prototype,"scale",null),o([r()],w.prototype,"toolbarKind",void 0),o([r()],w.prototype,"contextualToolLocation",void 0),o([r()],w.prototype,"groupCollapsePriorities",void 0),o([r()],w.prototype,"groupAllowCollapseOptions",void 0),o([r(),_e("esri/widgets/Sketch/t9n/Sketch")],w.prototype,"messages",void 0),o([r(),_e("esri/t9n/common")],w.prototype,"messagesCommon",void 0),o([r()],w.prototype,"snappingOptions",null),o([r()],w.prototype,"state",null),o([r()],w.prototype,"tooltipOptions",null),o([r({readOnly:!0})],w.prototype,"updateGraphics",null),o([r({type:Eo,nonNullable:!0})],w.prototype,"valueOptions",null),o([r()],w.prototype,"view",null),o([r({type:ai}),Ao(["create","update","undo","redo"])],w.prototype,"viewModel",null),o([r({type:H,nonNullable:!0})],w.prototype,"visibleElements",void 0),o([r()],w.prototype,"_effectiveAvailableCreateTools",null),o([r()],w.prototype,"_defaultViewModel",void 0),o([r()],w.prototype,"_calcitePopoverReferenceElement",void 0),o([r()],w.prototype,"_relativeLocation",void 0),o([r()],w.prototype,"_popoverOpen",void 0),w=o([M("esri.widgets.Sketch")],w);const gr=w,yr=(e,t)=>i=>vr(i,e);var ht,qe,Ye,we,fi,Ti,ki;class mr extends uo{constructor(i,s){var h;super(i,s);$e(this,we);$e(this,ht,new Map);$e(this,qe);$e(this,Ye);new ho(i);const l=this,n=l.instance;let a=n.viewModel,d=n.visibleElements;const c=new Proxy(this.exports,{get(v,g,m){return g==="viewModel"?a:g==="visibleElements"?d:Reflect.get(v,g,m)}});if(ft(l,Ye,n),l.instance=c,l.exports=c,a){const v={component:i,get exports(){return l.instance.viewModel}};go(l).set("viewModel","viewModel"),i.addController(v),a=yo(i,new WeakRef(v),mo(i)-1,a,Qe(l,ht))}l.instance.visibleElements&&(d=Je(h=l,we,fi).call(h,n))}hostConnected(){this.instance=Qe(this,Ye),super.hostConnected()}hostLoad(){ft(this,qe,C(()=>this.component.el.view,i=>{const s=this.instance;!("view"in s)&&typeof s.viewModel=="object"?s.viewModel.view=i:s.view=i,!("map"in s)&&typeof s.viewModel=="object"?s.viewModel.map=i==null?void 0:i.map:s.map=i==null?void 0:i.map},{sync:!0,initial:!0}))}hostUpdate(i){i.has("closed")&&(this.instance.visible=!this.component.closed)}hostLoaded(){const{el:i}=this.component;i.childElem??(i.childElem=document.createElement("div")),this.instance.container=i.childElem,(this.component.el.shadowRoot??this.component.el).appendChild(this.instance.container),this.component.closed!==void 0&&this.onLifecycle(()=>C(()=>this.instance.visible,s=>this.component.closed=!s,{initial:!0}))}hostDestroy(){var i;(i=Qe(this,qe))==null||i.remove(),super.hostDestroy()}}ht=new WeakMap,qe=new WeakMap,Ye=new WeakMap,we=new WeakSet,fi=function(i){return new Proxy(i.visibleElements,{get:(s,l)=>{if(typeof l=="symbol"||l in Promise.prototype)return s[l];const n=[l],a=Je(this,we,Ti).call(this,n);return vo(this.component,d=>{const c=d;this.component[c]=!1;let h=i.visibleElements??{},v;for(const m of n.slice(0,-1))if(typeof h[m]=="object"&&h[m]!==null)h=h[m];else{v=!!h[m];break}v===void 0&&(v=!!(h[n.slice(-1)[0]]??!0));const g=c.startsWith("hide")||c.startsWith("show")?c.startsWith("hide"):v;this.onUpdate(m=>{if(m.has(c)){const O=this.component[c];Je(this,we,ki).call(this,n,O,g)}})},a)}})},Ti=function(i){const s=new Proxy({},{get:(l,n)=>{const a=Reflect.get(l,n);return typeof n=="symbol"||n in Promise.prototype?a:(i.push(n),s)}});return s},ki=function(i,s,l){let n=this.instance.visibleElements??{};for(const d of i.slice(0,-1))(typeof n[d]!="object"||n[d]===null)&&(n[d]={}),n=n[d];const a=!!(l?!s:s);n[i.at(-1)]=a};const vr=Ji(mr),br=Xi`.esri-widget__heading{color:var(--calcite-color-text-2);margin:0 0 .5rem;font-weight:var(--calcite-font-weight-semibold)}h1.esri-widget__heading{font-size:var(--calcite-font-size-xl)}h2.esri-widget__heading{font-size:var(--calcite-font-size-md)}h3.esri-widget__heading,h4.esri-widget__heading,h5.esri-widget__heading,h6.esri-widget__heading{font-size:var(--calcite-font-size)}.esri-widget{--esri-widget-padding-x: 15px;--esri-widget-padding-y: var(--calcite-spacing-md);--esri-widget-padding: var(--esri-widget-padding-y) var(--esri-widget-padding-x);box-sizing:border-box;color:var(--calcite-color-text-2);background-color:var(--calcite-color-foreground-1);font-size:var(--calcite-font-size);line-height:var(--calcite-font-line-height-relative-tight)}.esri-widget *,.esri-widget :before,.esri-widget :after{box-sizing:inherit}.esri-widget.esri-widget--disabled>*{opacity:.4;pointer-events:none}.esri-widget.esri-widget--compact{--esri-widget-padding-y: 0;--esri-widget-padding-x: 0}.esri-widget__anchor{color:var(--calcite-color-text-2)}.esri-widget__anchor:hover{color:var(--calcite-color-text-3)}.esri-widget__anchor:hover,.esri-widget__anchor:focus{text-decoration:underline}.esri-widget__anchor--disabled{opacity:.4;pointer-events:none}.esri-widget__header{background-color:var(--calcite-color-foreground-1);flex:1 0 100%;justify-content:space-between;align-items:center;width:100%;min-height:48px;padding:12px 0 12px 15px;display:flex}.esri-widget__header .esri-widget__heading{width:calc(100% - 48px);text-align:initial;color:var(--calcite-color-text-1);align-items:center;margin:0;padding:0;display:flex}.esri-widget__header-button{appearance:none;cursor:pointer;color:var(--calcite-color-text-2);background-color:var(--calcite-color-foreground-1);border:none;flex:0 0 48px;justify-content:center;align-self:stretch;align-items:center;width:48px;padding:0;display:flex}.esri-widget__footer{background-color:var(--calcite-color-foreground-1);justify-content:center;align-items:center;width:100%;min-height:48px;display:flex}.esri-widget__footer-pagination{color:var(--calcite-color-text-2);justify-content:space-between;align-items:center;display:flex}.esri-widget__footer-pagination-previous-button,.esri-widget__footer-pagination-next-button{cursor:pointer;background-color:var(--calcite-color-foreground-1);border:0;margin:0 7px;padding:12px 15px;transition:background-color .125s ease-in-out}.esri-widget__footer-pagination-previous-button:hover,.esri-widget__footer-pagination-previous-button:focus,.esri-widget__footer-pagination-next-button:hover,.esri-widget__footer-pagination-next-button:focus{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-1)}.esri-menu{visibility:hidden;z-index:1;background-clip:padding;background-color:var(--calcite-color-foreground-1);background-clip:padding-box;width:100%;max-height:0;margin:2px 0 0;padding:0;font-size:var(--calcite-font-size);line-height:var(--calcite-spacing-xl);position:absolute;top:100%;left:0;overflow:hidden;box-shadow:0 1px 2px #0000004d}.esri-menu .esri-menu__header{color:var(--calcite-color-text-inverse);background-color:var(--calcite-color-inverse);padding:6px 12px}.esri-menu__list{margin:0;padding:0;list-style:none}.esri-menu__list-item{cursor:pointer;border-top:1px solid #adadad4d;border-left:3px solid #0000;padding:.8em 1em}.esri-menu__list-item [class^=esri-icon-],.esri-menu__list-item [class*=" esri-icon-"]{padding-right:2.8px}.esri-menu__list-item:first-child{border-top:none}.esri-menu__list-item--focus,.esri-menu__list-item:hover,.esri-menu__list-item:focus{background-color:var(--calcite-color-foreground-1)}.esri-menu__list-item:active{background-color:var(--calcite-color-foreground-current)}.esri-menu__list-item--active,.esri-menu__list-item--active:hover,.esri-menu__list-item--active:focus{background-color:var(--calcite-color-foreground-1);border-left-color:var(--calcite-color-brand)}.esri-widget__table{border-collapse:collapse;color:var(--calcite-color-text-1);border:none;width:100%;line-height:var(--calcite-font-line-height-relative-tight)}.esri-widget__table tr:nth-child(odd){background-color:var(--calcite-color-transparent)}.esri-widget__table tr:nth-child(2n){background-color:var(--calcite-color-transparent-press)}.esri-widget__table tr a{color:var(--calcite-color-text-2)}.esri-widget__table tr a:hover,.esri-widget__table tr a:focus{color:var(--calcite-color-text-1)}.esri-widget__table tr td,.esri-widget__table tr th{vertical-align:top;word-break:break-word;padding:.5em .7em;font-size:var(--calcite-font-size-sm);font-weight:var(--calcite-font-weight-regular)}.esri-widget__table tr th{text-align:left;border-right:3px solid #0000000d;width:50%}.esri-widget__table tr td{width:50%}.esri-input{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-1);border:1px solid #959595;font-size:var(--calcite-font-size)}.esri-input::-ms-clear{display:none}.esri-input::placeholder{opacity:1;color:var(--calcite-color-text-2)}.esri-input:placeholder-shown{text-overflow:ellipsis}.esri-input[type=text],.esri-input[type=password],.esri-input[type=number]{height:32px;padding:0 .5em}calcite-combobox.esri-input{border:none}.esri-widget__content--empty{text-align:center;color:var(--calcite-color-border-input);flex-flow:column wrap;align-items:center;padding:18px 22px;display:flex}.esri-widget__content--empty h1.esri-widget__heading,.esri-widget__content--empty h2.esri-widget__heading,.esri-widget__content--empty h3.esri-widget__heading,.esri-widget__content--empty h4.esri-widget__heading,.esri-widget__content--empty h5.esri-widget__heading{font-weight:var(--calcite-font-weight-regular)}.esri-widget__content-illustration--empty{width:128px;padding:1rem 0}.esri-widget__content-icon--empty{width:32px;padding:.5rem 0}.esri-select{appearance:none;cursor:pointer;color:var(--calcite-color-text-2);background:var(--calcite-color-foreground-1) url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='-8 -8 32 32' width='32' height='32'%3E%3Cpath d='M8 11.207l-4-4V5.793l4 4 4-4v1.414z' fill='%23adadad' fillrule='nonzero'/%3E%3C/svg%3E") 100% no-repeat;border:1px solid #959595;border-radius:0;width:100%;height:32px;margin:0;padding:0 .5em;font-family:inherit;font-size:.85em;display:block}.esri-select[disabled]{cursor:auto}.esri-select::-ms-expand{display:none}.esri-disabled a,.esri-disabled [role=menu],.esri-disabled [role=checkbox],.esri-disabled [class^=esri-icon-],.esri-disabled [class*=" esri-icon-"]{color:var(--calcite-color-text-3)}.keynav-mode .esri-widget:focus,.keynav-mode .esri-widget :focus{z-index:1;outline-offset:2px;outline:2px solid #adadad}.esri-widget__loader-animation{border:.15em solid #adadad4d;border-top-color:var(--calcite-color-border-input);border-radius:100%;width:1em;height:1em;font-size:var(--calcite-font-size-md);animation:1.25s linear infinite esri-rotate;display:block;transform:translateZ(0)}:dir(rtl) .esri-widget__table th{text-align:right;border-left:3px solid #0000000d;border-right:none}:dir(rtl) .esri-select{background-position:0}:dir(rtl) .esri-menu__list-item{border-left:none;border-right:3px solid #0000}:dir(rtl) .esri-menu__list-item [class^=esri-icon-],:dir(rtl) .esri-menu__list-item [class*=" esri-icon-"]{padding-left:2px;padding-right:0}:dir(rtl) .esri-menu__list-item--active{border-right-color:var(--calcite-color-brand)}.esri-icon-font-fallback-text{clip:rect(0 0 0 0);width:1px;height:1px;position:absolute;overflow:hidden}.esri-rotating{animation:1.25s linear infinite esri-rotate;transform:translateZ(0)}.esri-clearfix:before,.esri-clearfix:after{content:" ";display:table}.esri-clearfix:after{clear:both}.esri-interactive{cursor:pointer}.esri-hidden{display:none!important}.esri-invisible{visibility:hidden!important}.esri-offscreen{position:absolute;top:-999em;left:-999em}.esri-match-height{flex-direction:column;flex:auto;display:flex;overflow:hidden}:host{display:flex}.arcgis-grid-controls{user-select:none;display:flex;flex-flow:column wrap;padding:var(--calcite-spacing-sm);overflow-y:auto;width:100%;.container{display:flex;flex:1 1 auto;flex-direction:column;gap:var(--calcite-spacing-sm)}.numeric-inputs-container{display:grid;grid-auto-columns:1fr;grid-auto-flow:column;gap:var(--calcite-spacing-sm)}arcgis-labeled-switch{margin-block-end:var(--calcite-spacing-sm)}.switch--bordered{border-width:0 0 var(--calcite-spacing-px) 0;border-style:solid;border-color:var(--calcite-color-border-1);padding-block-end:var(--calcite-spacing-sm)}.tile-group{display:flex;column-gap:var(--calcite-spacing-md);align-items:start;margin-bottom:calc(0px - var(--calcite-spacing-sm))}.tile{position:relative;.content{display:flex;flex-direction:column;row-gap:var(--calcite-spacing-md);align-items:center;padding:var(--calcite-spacing-md);color:var(--calcite-color-text-2)}&.disabled{opacity:var(--calcite-opacity-disabled)}&:focus-within{outline:var(--calcite-spacing-base) solid var(--calcite-color-brand);outline-offset:var(--calcite-spacing-base)}input[type=radio]{appearance:none;position:absolute;inset:0;opacity:.001;border:var(--calcite-spacing-px) solid transparent;cursor:pointer;&:checked+.content{border:var(--calcite-spacing-px) solid var(--calcite-color-brand)}+.content{border:var(--calcite-spacing-px) solid transparent;calcite-label{margin-bottom:calc(0px - var(--calcite-label-margin-bottom, .75rem));font-weight:var(--calcite-font-weight-medium)}}}}.inline-icon{margin-left:var(--calcite-spacing-xs);vertical-align:top;color:var(--calcite-color-status-warning)}}calcite-block>.esri-grid-controls{background:0 0;padding:0}.esri-grid-controls{-webkit-user-select:none;user-select:none;padding:var(--esri-widget-padding);flex-flow:column wrap;display:flex;calcite-label.esri-labeled-switch__label{margin-block-end:var(--calcite-spacing-sm, .5rem)}}.esri-grid-controls__switch--bordered{border-width:0 0 var(--calcite-spacing-px) 0;border-style:solid;border-color:var(--calcite-color-border-1)}.esri-grid-controls__container{gap:var(--calcite-spacing-sm);flex-direction:column;flex:auto;display:flex}.esri-grid-controls__tilegroup{column-gap:var(--calcite-spacing-md);align-items:start;display:flex}.esri-grid-controls__tile__content{row-gap:var(--calcite-spacing-md);padding:var(--calcite-spacing-md);color:var(--calcite-color-text-2);flex-direction:column;align-items:center;display:flex}.esri-grid-controls__tile__content calcite-label{margin-bottom:calc(0px - var(--calcite-label-margin-bottom, .75rem));font-weight:var(--calcite-font-weight-medium)}.esri-grid-controls__tile{position:relative}.esri-grid-controls__tile:focus-within{outline:2px solid var(--calcite-color-brand);outline-offset:2px}.esri-grid-controls__tile--disabled{opacity:var(--calcite-opacity-disabled)}.esri-grid-controls__tile input[type=radio]{appearance:none;opacity:.001;border:var(--calcite-spacing-px) solid transparent;cursor:pointer;position:absolute;inset:0}.esri-grid-controls__tile input[type=radio]:checked+.esri-grid-controls__tile__content{border:var(--calcite-spacing-px) solid var(--calcite-color-brand)}.esri-grid-controls__tile input[type=radio]+.esri-grid-controls__tile__content{border:var(--calcite-spacing-px) solid transparent}.esri-grid-controls__numeric-inputs__container{gap:var(--calcite-spacing-sm);grid-auto-columns:1fr;grid-auto-flow:column;display:grid}.esri-grid-controls__inline-icon{margin-left:var(--calcite-spacing-xs);vertical-align:top;color:var(--calcite-color-status-warning)}:host{--response-toolbar-vert-width: 0;--response-toolbar-vert-height: 100%;--response-toolbar-horiz-width: 100%;--response-toolbar-horiz-height: 0}.esri-responsive-toolbar__ruler{opacity:0;pointer-events:none;position:absolute}.esri-responsive-toolbar__ruler--bar{visibility:hidden;height:0;display:block;position:absolute;top:0;left:0;right:0}.esri-responsive-toolbar__ruler--bar--vertical,.esri-responsive-toolbar__ruler--pad--vertical{width:var(--response-toolbar-vert-width);height:var(--response-toolbar-vert-height)}.esri-responsive-toolbar__ruler--pad--horizontal{width:var(--response-toolbar-horiz-width);height:var(--response-toolbar-horiz-height)}.esri-responsive-toolbar__bar>div{display:contents}.esri-responsive-toolbar__bar--horizontal{min-width:100%}.esri-responsive-toolbar__bar--vertical{min-height:100%}.esri-responsive-toolbar__pad{width:min-content;display:contents}.esri-responsive-toolbar__pad>div{display:contents}.esri-responsive-toolbar__ruler--pad--vertical{width:0;height:min(100vh - 120px,100cqh - 120px)}.esri-responsive-toolbar__ruler--pad--horizontal{width:min(100vw - 60px,100cqw - 60px);height:0}.esri-split-button--split-part--vertical--s{max-height:16px}.esri-split-button--split-part--vertical--m{max-height:24px}.esri-split-button--split-part--vertical--l{max-height:40px}.esri-split-button--split-part--horizontal--s,.esri-split-button--split-part--horizontal--m{max-width:16px}.esri-split-button--split-part--horizontal--l{max-width:24px}.esri-snapping-controls__toggle-block{min-width:100%;margin:0}.esri-snapping-controls__layer-list-block{border-bottom:none;min-width:225px}.esri-snapping-controls__layer-list-block[open]{margin-block:0}.esri-snapping-controls__layer-list{overflow:auto}.esri-snapping-controls__layer-list__filter{margin-bottom:10px}.esri-snapping-controls__layer-list__button{margin-bottom:6px}.esri-snapping-controls__layer-list__item calcite-accordion-item calcite-icon,.esri-snapping-controls__layer-list__item calcite-action calcite-icon{margin-inline-start:0}.esri-snapping-controls__layer-list__item calcite-icon{color:var(--calcite-color-brand);margin-inline-start:var(--calcite-list-item-spacing-indent)}.esri-snapping-controls{flex-flow:column wrap;display:flex}.esri-snapping-controls__container{flex-direction:column;flex:auto;display:flex}.esri-snapping-controls__container :only-child{border-block-end:none}.esri-snapping-controls__panel{width:320px}.esri-snapping-controls__item{border:1px solid #adadad4d;cursor:pointer;background-color:var(--calcite-color-foreground-2);border-color:var(--calcite-color-border-1);border-radius:2px;justify-content:space-between;margin:3px 0;padding:3px;transition:border-color .125s ease-in-out;display:flex;box-shadow:0 1px #adadad4d}.esri-snapping-controls__item-action-icon{flex:0 0 16px;width:16px;height:16px;margin-top:.1em;font-size:var(--calcite-font-size-md);display:inline-block}.esri-snapping-controls__action-toggle{opacity:1;cursor:pointer;border:1px solid var(--calcite-color-border-1);flex-flow:row-reverse;justify-content:space-between;align-items:flex-start;width:100%;margin:0;padding:6px 15px;font-size:var(--calcite-font-size-sm);transition:opacity .25s ease-in-out .25s,background-color .25s ease-in-out;display:flex}.esri-snapping-controls__action-toggle .esri-snapping-controls__item-action-title{margin-left:0}.esri-snapping-controls__action-toggle .esri-snapping-controls__item-action-icon{background-color:var(--calcite-color-foreground-1);border-radius:16px;flex:0 0 28px;width:16px;height:16px;padding:0;transition:background-color .125s ease-in-out;position:relative;overflow:hidden;box-shadow:0 0 0 1px #adadad}.esri-snapping-controls__action-toggle .esri-snapping-controls__item-action-icon:before{content:"";background-color:var(--calcite-color-foreground-2);border-radius:100%;width:12px;height:12px;margin:2px;transition:background-color .125s ease-in-out,left .125s ease-in-out;display:block;position:absolute;top:0;left:0;box-shadow:0 0 0 1px #242424}.esri-snapping-controls__action-toggle--on .esri-snapping-controls__item-action-icon{background-color:var(--calcite-color-foreground-1);box-shadow:0 0 0 1px #adadad}.esri-snapping-controls__action-toggle--on .esri-snapping-controls__item-action-icon:before{background-color:var(--calcite-color-foreground-3);left:12px}.esri-snapping-controls__nested-container{flex-direction:column;gap:6px;display:flex}.esri-snapping-controls__nested-container:not(:empty){padding-top:6px;padding-inline-start:1em}.esri-labeled-switch__label{--calcite-label-margin-bottom: 0}.esri-labeled-switch__label-content{text-wrap:balance;flex:1;align-items:center;gap:7px;display:flex}.esri-labeled-switch__label-content>div{flex-grow:1}.esri-labeled-switch__icon{margin-top:-1px}.esri-labeled-switch__icon_info{color:var(--calcite-color-status-info)}.esri-labeled-switch__icon_warning{color:var(--calcite-color-status-warning)}.esri-labeled-switch__tooltip{text-wrap:wrap}:host{display:flex;max-width:100%;justify-content:flex-end;pointer-events:none;--sketch-pad-flex-flow: wrap;--sketch-view-height-offset: 63px ;--sketch-view-margin-offset: 30px;--sketch-popover-header-offset: 49px}:host([scale="s"]){--sketch-view-height-offset: 47px ;--sketch-view-margin-offset: 30px;--sketch-popover-header-offset: 33px}:host([scale="l"]){--sketch-view-height-offset: 79px ;--sketch-view-margin-offset: 30px;--sketch-popover-header-offset: 65px}div:has(>.esri-sketch){display:contents}.esri-sketch{-webkit-user-select:none;user-select:none;pointer-events:none;display:flex}.esri-sketch-pad{gap:var(--arcgis-internal-sketch-gap, var(--calcite-spacing-sm));flex-flow:var(--sketch-pad-flex-flow);justify-content:var(--arcgis-internal-sketch-justify-content, flex-start)}.esri-sketch-pad:dir(rtl){flex-flow:row-reverse wrap}.esri-sketch-pad.esri-sketch--vertical{flex-flow:var(--sketch-pad-flex-flow, column wrap);justify-content:flex-start;--sketch-view-height-offset: 30px;--sketch-view-margin-offset: 15px}.esri-sketch-pad.esri-sketch--vertical:dir(rtl){flex-flow:var(--sketch-pad-flex-flow, column wrap-reverse)}.esri-sketch-pad.esri-sketch--vertical .esri-selection-toolbar__container{flex-direction:column}.esri-sketch>*{pointer-events:initial;display:flex}.esri-sketch-bar{flex-direction:column;gap:0;margin:0;flex-basis:100%}.esri-sketch-bar.esri-sketch--vertical{flex-flow:row}.esri-sketch__popover-wrapper{inline-size:max-content;min-inline-size:300px;max-height:calc(100cqh - (var(--sketch-view-height-offset, 90px)) - var(--sketch-view-margin-offset, 15px) - var(--sketch-popover-header-offset, 1000px));-webkit-user-select:none;user-select:none;max-inline-size:400px;overflow-y:auto}.esri-sketch__popover-wrapper .esri-sketch-tooltip-controls:not(:only-child) calcite-block{border-block-end-width:1px;border-style:solid;border-color:var(--calcite-color-border-3)}.esri-sketch__selection-count-chip--horizontal{margin-block:var(--calcite-spacing-xxs);margin-inline:var(--calcite-spacing-xs);align-self:center}.esri-sketch__selection-count-chip--vertical{margin-block:calc(var(--calcite-spacing-md) * var(--sketch-chip-margin-scale-factor, 1));scale:var(--sketch-chip-rescale, 1);align-self:center;margin-inline:0}.esri-sketch__selection-count-chip--vertical--s{--sketch-chip-rescale: .8;--sketch-chip-margin-scale-factor: .5}.esri-sketch--vertical{max-height:min(100vh - 120px,100cqh - 120px)}.esri-expand__popover-content .esri-sketch{gap:0}.esri-sketch-tooltip-controls{flex-flow:column wrap;min-width:100%;display:flex}.esri-sketch-tooltip-controls__block{border-block-end:none;margin:0}.esri-sketch-tooltip-controls__block-content{flex-direction:column;gap:6px;display:flex}.esri-sketch-tooltip-controls__radio-button-label-wrapper{align-items:center;gap:2px;display:flex}.esri-sketch-tooltip-controls calcite-label:last-child{--calcite-label-margin-bottom: 0}`,_r=yr(gr),gt=class gt extends Qi{constructor(){super(),this.widget=_r(this),this.viewModel=this.widget.viewModel,this._defaultGraphicsLayer=null,this.view=this.widget.view,this.activeTool=this.widget.activeTool,this.autoDestroyDisabled=!1,this.availableCreateTools=this.widget.availableCreateTools,this.createGraphic=this.widget.createGraphic,this.creationMode=this.widget.creationMode,this.defaultCreateOptions=this.widget.defaultCreateOptions,this.defaultGraphicsLayerDisabled=!1,this.defaultUpdateOptions=this.widget.defaultUpdateOptions,this.hideCreateToolsCircle=this.widget.visibleElements.createTools.circle,this.hideCreateToolsMultipoint=this.widget.visibleElements.createTools.multipoint,this.hideCreateToolsPoint=this.widget.visibleElements.createTools.point,this.hideCreateToolsPolygon=this.widget.visibleElements.createTools.polygon,this.hideCreateToolsPolyline=this.widget.visibleElements.createTools.polyline,this.hideCreateToolsRectangle=this.widget.visibleElements.createTools.rectangle,this.hideDuplicateButton=this.widget.visibleElements.duplicateButton,this.hideDeleteButton=this.widget.visibleElements.deleteButton,this.hideSelectionCountLabel=this.widget.visibleElements.selectionCountLabel,this.hideLabelsToggle=this.widget.visibleElements.labelsToggle,this.hideSelectionToolsLassoSelection=this.widget.visibleElements.selectionTools["lasso-selection"],this.hideSelectionToolsRectangleSelection=this.widget.visibleElements.selectionTools["rectangle-selection"],this.hideSettingsMenu=this.widget.visibleElements.settingsMenu,this.hideSnappingControls=this.widget.visibleElements.snappingControls,this.hideSnappingControlsElementsEnabledToggle=this.widget.visibleElements.snappingControlsElements.enabledToggle,this.hideSnappingControlsElementsFeatureEnabledToggle=this.widget.visibleElements.snappingControlsElements.featureEnabledToggle,this.hideSnappingControlsElementsLayerList=this.widget.visibleElements.snappingControlsElements.layerList,this.hideSnappingControlsElementsSelfEnabledToggle=this.widget.visibleElements.snappingControlsElements.selfEnabledToggle,this.hideTooltipsToggle=this.widget.visibleElements.tooltipsToggle,this.hideUndoRedoMenu=this.widget.visibleElements.undoRedoMenu,this.icon=this.widget.icon,this.label=this.widget.label,this.labelOptions=this.widget.labelOptions,this.layer=this.widget.layer,this.layout=this.widget.layout,this.pointSymbol=this.viewModel.pointSymbol,this.polygonSymbol=this.viewModel.polygonSymbol,this.polylineSymbol=this.viewModel.polylineSymbol,this.scale=this.widget.scale,this.toolbarKind=this.widget.toolbarKind,this.showSnappingControlsElementsHeader=this.widget.visibleElements.snappingControlsElements.header,this.showCreateToolsFreehandPolygon=this.widget.visibleElements.createTools.freehandPolygon,this.showCreateToolsFreehandPolyline=this.widget.visibleElements.createTools.freehandPolyline,this.snappingOptions=this.widget.snappingOptions,this.state=this.widget.state,this.tooltipOptions=this.widget.tooltipOptions,this.updateGraphics=this.widget.updateGraphics,this.arcgisCreate=He(()=>this.widget,"create"),this.arcgisDelete=He(()=>this.widget,"delete"),this.arcgisPropertyChange=Zi()("state"),this.arcgisReady=eo(),this.arcgisRedo=He(()=>this.widget,"redo"),this.arcgisUndo=He(()=>this.widget,"undo"),this.arcgisUpdate=He(()=>this.widget,"update"),this.listen("arcgisReady",this._arcgisReadyHandler)}async cancel(){var t;(t=this.widget)==null||t.cancel()}async complete(){var t;(t=this.widget)==null||t.complete()}async create(t,i){var s;await((s=this.widget)==null?void 0:s.create(t,i))}async delete(){var t;(t=this.widget)==null||t.delete()}async destroy(){await this.manager.destroy()}async duplicate(){var t;(t=this.widget)==null||t.duplicate()}async redo(){var t;(t=this.widget)==null||t.redo()}async triggerUpdate(t,i){var s;(s=this.widget)==null||s.update(t,i)}async undo(){var t;(t=this.widget)==null||t.undo()}_arcgisReadyHandler(){var t,i;this.defaultGraphicsLayerDisabled||(this._defaultGraphicsLayer=new xo({title:"Sketch Layer"}),this.widget.availableCreateTools=["point","polyline","freehandPolyline","polygon","freehandPolygon","rectangle","circle"],this.widget.layer=this._defaultGraphicsLayer,(i=(t=this.el.view)==null?void 0:t.map)==null||i.add(this.widget.layer),this.manager.onLifecycle(()=>C(()=>{var s;return(s=this.el.view)==null?void 0:s.map},(s,l)=>{const n=this._defaultGraphicsLayer;!n||this.widget.layer!==n||(l!=null&&l.allLayers.includes(n)&&l.remove(n),s==null||s.add(n))})),this.manager.onDestroy(()=>{var s,l,n,a,d;this._defaultGraphicsLayer&&((l=(s=this.el.view)==null?void 0:s.map)!=null&&l.allLayers.includes(this._defaultGraphicsLayer))&&((a=(n=this.el.view)==null?void 0:n.map)==null||a.remove(this._defaultGraphicsLayer)),(d=this._defaultGraphicsLayer)==null||d.destroy(),this._defaultGraphicsLayer=null}))}};gt.properties={view:0,activeTool:3,autoDestroyDisabled:5,availableCreateTools:0,createGraphic:0,creationMode:1,defaultCreateOptions:0,defaultGraphicsLayerDisabled:5,defaultUpdateOptions:0,hideCreateToolsCircle:5,hideCreateToolsMultipoint:5,hideCreateToolsPoint:5,hideCreateToolsPolygon:5,hideCreateToolsPolyline:5,hideCreateToolsRectangle:5,hideDuplicateButton:5,hideDeleteButton:5,hideSelectionCountLabel:5,hideLabelsToggle:5,hideSelectionToolsLassoSelection:5,hideSelectionToolsRectangleSelection:5,hideSettingsMenu:5,hideSnappingControls:5,hideSnappingControlsElementsEnabledToggle:5,hideSnappingControlsElementsFeatureEnabledToggle:5,hideSnappingControlsElementsLayerList:5,hideSnappingControlsElementsSelfEnabledToggle:5,hideTooltipsToggle:5,hideUndoRedoMenu:5,icon:1,label:1,labelOptions:0,layer:0,layout:1,pointSymbol:0,polygonSymbol:0,polylineSymbol:0,position:1,referenceElement:1,scale:1,toolbarKind:1,showSnappingControlsElementsHeader:5,showCreateToolsFreehandPolygon:5,showCreateToolsFreehandPolyline:5,snappingOptions:0,state:3,tooltipOptions:0,updateGraphics:0},gt.styles=br;let Ct=gt;to("arcgis-sketch",Ct);const ct="RampDrawGraphicsLayer",wr=Ai({__name:"draw",setup(e){const{t,availableLocales:i,locale:s}=Vi(),l=u=>t(u?`draw.${u}`:"draw.unknown"),n=Fi("iApi"),a=St(),d=u=>{const _=i.length?i:[s.value],y={};for(const T of _)y[T]=t(u,{},{locale:T});return y};let c=null;const h=Bi("sketchEl");let v=null,g=null,m=null,O=null,V=!1,F=null,B=[];const Bt=Gi([]);let ue;async function xi(){const u=n.keyboardNav;if(!u){console.warn("Keyboard navigation fixture is not available; draw shortcuts are disabled.");return}ue&&(u.unregister(ue),ue=void 0),ue=u.register("D",{name:d("draw.keyboard.namespace"),activeHandler:()=>{a.setActiveTool("")},deactiveHandler:()=>{a.setActiveTool(null)},keys:[{key:"P",description:d("draw.keyboard.key.point"),handler:()=>{a.setActiveTool("point")}},{key:"L",description:d("draw.keyboard.key.polyline"),handler:()=>{a.setActiveTool("polyline")}},{key:"G",description:d("draw.keyboard.key.polygon"),handler:()=>{a.setActiveTool("polygon")}},{key:"C",description:d("draw.keyboard.key.circle"),handler:()=>{a.setActiveTool("circle")}},{key:"R",description:d("draw.keyboard.key.rectangle"),handler:()=>{a.setActiveTool("rectangle")}},{key:"E",description:d("draw.keyboard.key.edit"),handler:()=>{a.setActiveTool("edit")}}]})}const he=u=>{var y;if(O&&(g==null||g.remove(O),O=null),!u)return;let _;switch((y=u.geometry)==null?void 0:y.type){case"point":case"multipoint":_=new Wi({color:[255,255,0,.8],size:16,outline:{color:[255,165,0,1],width:3}});break;case"polyline":_=new Kt({color:[255,255,0,.8],width:6});break;default:_=new Ze({color:[255,255,0,.3],outline:{color:[255,165,0,1],width:3}})}O=new Ce({geometry:u.geometry,symbol:_}),g==null||g.add(O)};Wt(()=>a.selectedGraphicId,(u,_)=>{if(!(!c||!g)){if(!u)c.cancel(),he();else if(u!==_){const y=g.graphics.toArray().find(T=>T.attributes&&T.attributes.id===u);y&&(c.triggerUpdate([y]),he(y))}}});const Ei=async()=>{var S,ee;if(!g||!c||a.activeTool!=="edit")return;await n.geo.map.viewPromise;const u=n.geo.map.esriView,_={x:u.width/2,y:u.height/2},y={x:_.x,y:_.y,width:20,height:20},T=(await u.hitTest(y)).results.filter(G=>{var N;return!("graphic"in G)||G.graphic.layer!==g?!1:!!((N=G.graphic.attributes)!=null&&N.id)});T.length>0?(m=T[0].graphic,c.triggerUpdate([m]),(S=m.attributes)!=null&&S.id&&a.selectGraphic(m.attributes.id),n.updateAlert(t("draw.graphic.selected",{type:l((ee=m.attributes)==null?void 0:ee.type)}))):(c.cancel(),m=null,a.clearSelection())},Ci=async()=>{var E;if(!c||!a.activeTool)return;await n.geo.map.viewPromise;const u=n.geo.map.esriView,_={x:Math.floor(u.width/2),y:Math.floor(u.height/2)},y=u.toMap(_),T=u.extent,S=T.width,ee=T.height,G=Math.min(S,ee)/10;let N;switch(a.activeTool){case"point":N=new Ce({geometry:new lt({x:y.x,y:y.y,spatialReference:u.spatialReference}),symbol:c.pointSymbol});break;case"polyline":N=new Ce({geometry:new Ee({paths:[[[y.x-G/2,y.y],[y.x+G/2,y.y]]],spatialReference:u.spatialReference}),symbol:c.polylineSymbol});break;case"polygon":case"rectangle":const f=G/2;N=new Ce({geometry:new ne({rings:[[[y.x-f,y.y-f],[y.x+f,y.y-f],[y.x+f,y.y+f],[y.x-f,y.y+f],[y.x-f,y.y-f]]],spatialReference:u.spatialReference}),symbol:c.polygonSymbol||new Ze({color:[0,255,0,.3],outline:{color:[0,255,0,1],width:1}})});break;case"circle":const De=G/2,Ge=36,Ae=[];for(let Te=0;Te<=Ge;Te++){const A=Te/Ge*2*Math.PI,Xe=y.x+De*Math.cos(A),I=y.y+De*Math.sin(A);Ae.push([Xe,I])}N=new Ce({geometry:new ne({rings:[Ae],spatialReference:u.spatialReference}),symbol:c.polygonSymbol||new Ze({color:[255,0,255,.3],outline:{color:[255,0,255,1],width:1}})});break;default:console.warn("Unknown tool type:",a.activeTool);return}if(N){const f=`graphic-${Date.now()}`;N.attributes={id:f,type:a.activeTool},g==null||g.add(N),a.addGraphic({id:f,type:a.activeTool,geometry:N.geometry,attributes:N.attributes}),a.activeTool!=="point"&&(a.clearSelection(),a.setActiveTool(""),(E=n.keyboardNav)==null||E.reset(),c.cancel()),n.updateAlert(t("draw.graphic.created",{type:l(a.activeTool)}))}},Gt=u=>{var y;const _=(y=n.geo.map.esriView)==null?void 0:y.container;if(!(!document.activeElement||!(_!=null&&_.contains(document.activeElement))))switch(u.key){case"Enter":if(u.preventDefault(),a.activeTool&&a.activeTool!=="edit")if((a.activeTool==="polyline"||a.activeTool==="polygon")&&(V||B.length===0)){const S=n.geo.map.esriView,ee={x:Math.floor(S.width/2),y:Math.floor(S.height/2)},G=S.toMap(ee);V?(B.push([G.x,G.y]),a.activeTool==="polyline"?F.geometry=new Ee({paths:[B],spatialReference:S.spatialReference}):F.geometry=new ne({rings:[B],spatialReference:S.spatialReference}),n.updateAlert(t("draw.multiPoint.pointAdded",{type:l(a.activeTool),count:B.length}))):(V=!0,B=[[G.x,G.y]],a.activeTool==="polyline"?F=new Ce({geometry:new Ee({paths:[B],spatialReference:S.spatialReference}),symbol:(c==null?void 0:c.polylineSymbol)||new Kt({color:[0,0,255,1],width:2})}):F=new Ce({geometry:new ne({rings:[B],spatialReference:S.spatialReference}),symbol:(c==null?void 0:c.polygonSymbol)||new Ze({color:[0,255,0,.3],outline:{color:[0,255,0,1],width:1}})}),F.attributes={id:`temp-graphic-${Date.now()}`,type:a.activeTool},g==null||g.add(F),n.updateAlert(t("draw.multiPoint.started",{type:l(a.activeTool),count:1})))}else Ci();else Ei();break;case"Delete":case"Backspace":const T=n.geo.map.esriView;V&&B.length>1?(u.preventDefault(),B.pop(),a.activeTool==="polyline"?F.geometry=new Ee({paths:[B],spatialReference:T.spatialReference}):F.geometry=new ne({rings:[B],spatialReference:T.spatialReference}),F.set("geometry",F==null?void 0:F.geometry),n.updateAlert(t("draw.multiPoint.pointRemoved",{type:l(a.activeTool??void 0),count:B.length}))):V&&B.length===1?(u.preventDefault(),F&&(g==null||g.remove(F)),F=null,B=[],V=!1,n.updateAlert(t("draw.multiPoint.canceled"))):m&&(u.preventDefault(),c==null||c.delete(),g==null||g.remove(m),typeof a.removeGraphic=="function"&&a.removeGraphic(m.attributes.id),m=null,he(void 0),n.updateAlert(t("draw.graphic.deleted")));break;case"Escape":a.setActiveTool(null),c==null||c.cancel(),m=null,he(void 0),a.clearSelection(),n.updateAlert(t("draw.tool.canceled"));break}},zt=u=>{var Xe;const _=n.geo.map.esriView.container;if(!document.activeElement||!(_!=null&&_.contains(document.activeElement))||!m||!["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(u.key))return;u.preventDefault(),u.stopPropagation();const y=10,T=u.shiftKey,S=u.altKey,ee=n.geo.map.esriView;let G=0,N=0;u.key==="ArrowLeft"&&(G=-y),u.key==="ArrowRight"&&(G=y),u.key==="ArrowUp"&&(N=-y),u.key==="ArrowDown"&&(N=y);const E=m.geometry;let f;if(E.type==="point")f={x:E.x,y:E.y};else{const I=E.extent;f={x:(I.xmin+I.xmax)/2,y:(I.ymin+I.ymax)/2}}const De=ee.toScreen(new lt({x:f.x,y:f.y,spatialReference:ee.spatialReference}));De.x+=G,De.y+=N;const Ge=ee.toMap(De),Ae=Ge.x-f.x,Te=Ge.y-f.y;let A;if(E.type==="point")!T&&!S?A=new lt({x:E.x+Ae,y:E.y+Te,spatialReference:E.spatialReference}):T?(A=E.clone(),n.updateAlert(t("draw.point.resize.unsupported"))):S&&(A=E.clone(),n.updateAlert(t("draw.point.rotate.unsupported")));else if(E.type==="polyline"){if(!T&&!S){const I=E.paths.map(z=>z.map(([W,K])=>[W+Ae,K+Te]));A=new Ee({paths:I,spatialReference:E.spatialReference})}else if(T){const I=E,z=u.key==="ArrowUp"||u.key==="ArrowRight"?1.05:.95,W=I.paths.map(K=>K.map(([ke,xe])=>[f.x+(ke-f.x)*z,f.y+(xe-f.y)*z]));A=new Ee({paths:W,spatialReference:E.spatialReference})}else if(S){const I=E,z=u.key==="ArrowLeft"?-.05:u.key==="ArrowRight"?.05:0;if(z!==0){const W=Math.cos(z),K=Math.sin(z),ke=I.paths.map(xe=>xe.map(([mt,vt])=>{const ze=mt-f.x,Ne=vt-f.y,bt=ze*W-Ne*K,_t=ze*K+Ne*W;return[f.x+bt,f.y+_t]}));A=new Ee({paths:ke,spatialReference:E.spatialReference})}else A=E.clone()}}else if(E.type==="polygon"){if(!T&&!S){const I=E.rings.map(z=>z.map(([W,K])=>[W+Ae,K+Te]));A=new ne({rings:I,spatialReference:E.spatialReference})}else if(T){const I=E,z=u.key==="ArrowUp"||u.key==="ArrowRight"?1.05:.95,W=I.rings.map(K=>K.map(([ke,xe])=>[f.x+(ke-f.x)*z,f.y+(xe-f.y)*z]));A=new ne({rings:W,spatialReference:E.spatialReference})}else if(S){const I=E,z=u.key==="ArrowLeft"?-.05:u.key==="ArrowRight"?.05:0;if(z!==0){const W=Math.cos(z),K=Math.sin(z),ke=I.rings.map(xe=>xe.map(([mt,vt])=>{const ze=mt-f.x,Ne=vt-f.y,bt=ze*W-Ne*K,_t=ze*K+Ne*W;return[f.x+bt,f.y+_t]}));A=new ne({rings:ke,spatialReference:E.spatialReference})}else A=E.clone()}}if(A){m.geometry=A,m.set("geometry",A),he(m),(Xe=m.attributes)!=null&&Xe.id&&a.updateGraphicGeometry(m.attributes.id,A);const I=T?"resized":S?"rotated":"moved";n.updateAlert(t(`draw.graphic.${I}`))}},Mi=async u=>{const _=(await n.geo.map.esriView.hitTest(u)).results.find(y=>{var T;return"graphic"in y&&y.graphic.layer===g&&!!((T=y.graphic.attributes)!=null&&T.id)});_&&a.activeTool==="edit"?c==null||c.triggerUpdate([_.graphic]):(c==null||c.cancel(),m=null,a.clearSelection(),he())},Oi=async()=>{var u,_;await n.geo.map.viewPromise,n.geo.layer.getLayer(ct)?g=n.geo.layer.getLayer(ct).esriLayer:(g=n.geo.layer.createLayer({id:ct,layerType:Ui.GRAPHIC,cosmetic:!0,system:!0,url:""}),await n.geo.map.addLayer(g)),g!=null&&g.esriLayer&&(g=g.esriLayer),Object.assign(h.value,{view:n.geo.map.esriView,layer:g,availableCreateTools:["point","multipoint","polyline","polygon","rectangle","circle"],updateOnGraphicClick:!0,visibleElements:{createTools:{point:!0,polyline:!0,polygon:!0,rectangle:!0,circle:!0},selectionTools:{enable:!0},settingsMenu:!1},defaultUpdateOptions:{highlightOptions:{enabled:!1}}}),n.geo.map.esriView.ui.add(h.value,"bottom-right"),(u=h.value)==null||u.addEventListener("arcgisCreate",y=>$t(y.detail)),(_=h.value)==null||_.addEventListener("arcgisUpdate",y=>Si(y.detail)),v={remove:()=>{var y;return(y=h.value)==null?void 0:y.removeEventListener("arcgisCreate",T=>$t(T.detail))}},c=h.value,n.geo.map.esriView.on("click",Mi),document.addEventListener("keydown",Gt),document.addEventListener("keydown",zt,{capture:!0})},Li=()=>{if(!ue)return;const u=n.keyboardNav;if(!u){ue=void 0;return}u.unregister(ue),ue=void 0},Nt=()=>{Li(),c&&(n.geo.map.esriView&&n.geo.map.esriView.ui.remove(c),v&&v.remove(),c.destroy()),document.removeEventListener("keydown",Gt),document.removeEventListener("keydown",zt,{capture:!0}),V=!1,F=null,B=[],c=null,g=null},$t=u=>{var _;if(u.state==="complete"){const y=u.graphic,T=`graphic-${Date.now()}`;y.attributes=y.attributes||{},y.attributes.id=T,a.addGraphic({id:T,type:u.tool,geometry:y.geometry,attributes:y.attributes}),u.tool!=="point"&&(a.setActiveTool(""),(_=n.keyboardNav)==null||_.reset())}},Si=u=>{var y,T,S;const _=u.graphics[0];if(_)if(u.state==="start"){if(a.activeTool!=="edit"){c.cancel();return}m=_,(y=_.attributes)!=null&&y.id&&(a.selectGraphic(_.attributes.id),n.updateAlert(t("draw.graphic.selected",{type:l((T=_.attributes)==null?void 0:T.type)})))}else u.state==="active"?he(_):u.state==="complete"&&((S=_.attributes)!=null&&S.id)&&(a.updateGraphicGeometry(_.attributes.id,_.geometry),n.updateAlert(t("draw.graphic.updated")))};return Ni(()=>{xi(),Oi(),Bt.push(n.event.on(ti.MAP_DESTROYED,()=>{Nt()}))}),Wt(()=>a.activeTool,u=>{c.cancel(),he(),F=null,B=[],V=!1,u&&u!="edit"&&c.create(u)}),$i(()=>{Nt(),Bt.forEach(u=>n.event.off(u))}),(u,_)=>(Hi(),zi("arcgis-sketch",{ref_key:"sketchEl",ref:h,style:{display:"none"}},null,512))}}),ei=[{type:"point"},{type:"polyline"},{type:"polygon"},{type:"circle"},{type:"rectangle"}];class fr extends Ri{constructor(i,s){super(i,s);Ut(this,"store");this.store=St(this.$vApp.$pinia)}_parseConfig(i){if(!i){this.store.setSupportedTypes(ei);return}if(i.types!==void 0){const s=(i.types===null?[]:i.types).filter(l=>l.enabled!==!1);this.store.setSupportedTypes(s)}else this.store.setSupportedTypes(ei);i.defaultTool&&this.store.setActiveTool(i.defaultTool)}get graphicsLayerId(){return ct}}const Tr={en:{"draw.multiPoint.started":"{type} drawing started with 1 point","draw.multiPoint.pointAdded":"Point added {count} points total","draw.multiPoint.pointRemoved":"Point removed {count} points remaining","draw.multiPoint.canceled":"Drawing canceled","draw.multiPoint.completed":"{type} completed with {count} points","draw.multiPoint.notEnoughPoints":"Not enough points for {type} minimum {min} required","draw.graphic.created":"{type} created","draw.graphic.selected":"{type} selected","draw.graphic.deselected":"Graphic deselected","draw.graphic.deleted":"Graphic deleted","draw.graphic.updated":"Graphic updated","draw.graphic.none":"No graphic found","draw.tool.canceled":"Drawing tool canceled","draw.point.resize.unsupported":"Resizing not supported for point graphics","draw.point.rotate.unsupported":"Rotation not supported for point graphics","draw.move.up":"Moved up","draw.move.down":"Moved down","draw.move.left":"Moved left","draw.move.right":"Moved right","draw.resize.increase":"Increased size","draw.resize.decrease":"Decreased size","draw.rotate.clockwise":"Rotated clockwise","draw.rotate.counterclockwise":"Rotated counter-clockwise","draw.button.point":"Draw point","draw.button.polyline":"Draw line","draw.button.polygon":"Draw polygon","draw.button.rectangle":"Draw rectangle","draw.button.circle":"Draw circle","draw.point.tooltip":"Draw point","draw.polyline.tooltip":"Draw polyline","draw.polygon.tooltip":"Draw polygon","draw.circle.tooltip":"Draw circle","draw.rectangle.tooltip":"Draw rectangle","draw.edit.tooltip":"Edit Mode","draw.keyboard.namespace":"Draw Tools","draw.keyboard.key.point":"Draw a point","draw.keyboard.key.polyline":"Draw a line","draw.keyboard.key.polygon":"Draw a polygon","draw.keyboard.key.circle":"Draw a circle","draw.keyboard.key.rectangle":"Draw a rectangle","draw.keyboard.key.edit":"Edit geometry","draw.graphic.moved":"Graphic moved","draw.shape":"shape","draw.point":"point","draw.multipoint":"multipoint","draw.polyline":"polyline","draw.polygon":"polygon","draw.rectangle":"rectangle","draw.circle":"circle","draw.unknown":"unknown"},fr:{"draw.multiPoint.started":"Dessin de {type} commenc avec 1 point","draw.multiPoint.pointAdded":"Point ajout","draw.multiPoint.pointRemoved":"Point supprim","draw.multiPoint.canceled":"Dessin annul","draw.multiPoint.completed":"{type} termin avec {count} points","draw.multiPoint.notEnoughPoints":"Pas assez de points pour {type}","draw.graphic.created":"{type} cr","draw.graphic.selected":"{type} slectionn","draw.graphic.deselected":"Graphique dslectionn","draw.graphic.deleted":"Graphique supprim","draw.graphic.updated":"Graphique mis  jour","draw.graphic.none":"Aucun graphique trouv","draw.tool.canceled":"Outil de dessin annul","draw.point.resize.unsupported":"Le redimensionnement n'est pas pris en charge pour les points","draw.point.rotate.unsupported":"La rotation n'est pas prise en charge pour les points","draw.move.up":"Dplac vers le haut","draw.move.down":"Dplac vers le bas","draw.move.left":"Dplac vers la gauche","draw.move.right":"Dplac vers la droite","draw.resize.increase":"Taille augmente","draw.resize.decrease":"Taille rduite","draw.rotate.clockwise":"Rotation dans le sens horaire","draw.rotate.counterclockwise":"Rotation dans le sens antihoraire","draw.button.point":"Dessiner un point","draw.button.polyline":"Dessiner une ligne","draw.button.polygon":"Dessiner un polygone","draw.button.rectangle":"Dessiner un rectangle","draw.button.circle":"Dessiner un cercle","draw.point.tooltip":"Dessiner un point","draw.polyline.tooltip":"Dessiner une polyligne","draw.polygon.tooltip":"Dessiner un polygone","draw.circle.tooltip":"Dessiner un cercle","draw.rectangle.tooltip":"Dessiner un rectangle","draw.edit.tooltip":"Mode dition","draw.keyboard.namespace":"Outils de dessin","draw.keyboard.key.point":"Dessine un point","draw.keyboard.key.polyline":"Dessine une ligne","draw.keyboard.key.polygon":"Dessine un polygone","draw.keyboard.key.circle":"Dessine un cercle","draw.keyboard.key.rectangle":"Dessine un rectangle","draw.keyboard.key.edit":"Mode dition","draw.graphic.moved":"Graphique dplac","draw.shape":"forme","draw.point":"indiquer","draw.multipoint":"multipoint","draw.polyline":"polyligne","draw.polygon":"polygone","draw.rectangle":"rectangle","draw.circle":"cercle","draw.unknown":"inconnue"}};class kr extends fr{async init(){Object.entries(Tr).forEach(i=>this.$iApi.$i18n.mergeLocaleMessage(...i)),this._parseConfig(this.config),St(this.$vApp.$pinia).supportedTypes.forEach(i=>{const s=`${i.type}-icon`;this.$iApi.component(s,Di(Ro(Object.assign({"./icons/circle-icon.vue":()=>b(()=>import("./circle-icon-CY-pgLZB-DIywXXLG.js"),__vite__mapDeps([226,3,4]),import.meta.url),"./icons/edit-icon.vue":()=>b(()=>import("./edit-icon-BKw9252x-C-FG-Mbv.js"),__vite__mapDeps([227,3,4]),import.meta.url),"./icons/point-icon.vue":()=>b(()=>import("./point-icon-DkINEOM7-CEENOrUi.js"),__vite__mapDeps([228,3,4]),import.meta.url),"./icons/polygon-icon.vue":()=>b(()=>import("./polygon-icon-nxFnmVpc-ISMF6OL3.js"),__vite__mapDeps([229,3,4]),import.meta.url),"./icons/polyline-icon.vue":()=>b(()=>import("./polyline-icon-CHRNkL-v-BtITG78O.js"),__vite__mapDeps([230,3,4]),import.meta.url),"./icons/rectangle-icon.vue":()=>b(()=>import("./rectangle-icon-DSbog25R-DESFthbN.js"),__vite__mapDeps([231,3,4]),import.meta.url)}),`./icons/${i.type}-icon.vue`,3)))});const{el:t}=this.mount(wr,{app:this.$element});this.$vApp.$el.getElementsByClassName("inner-shell")[0].appendChild(t.childNodes[0])}async added(){this.$iApi.event.on(ti.MAP_CREATED,()=>{this.init()})}}const Ms=Object.freeze(Object.defineProperty({__proto__:null,default:kr},Symbol.toStringTag,{value:"Module"}));export{Ms as a,Re as c,Xo as e,yi as i,pi as r};
