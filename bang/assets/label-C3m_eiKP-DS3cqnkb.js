import{D as L,w as p,A as w}from"./dom-cV1JHjxC-ECa-LXIB.js";const h="calciteInternalLabelClick",m="calciteInternalLabelConnected",f="calciteInternalLabelDisconnected",E="calcite-label",r=new WeakMap,c=new WeakMap,d=new WeakMap,u=new WeakMap,s=new Set,k=e=>{const{id:t}=e,n=t&&L(e,{selector:`${E}[for="${t}"]`});if(n)return n;const l=p(e,E);return!l||C(l,e)?null:l};function C(e,t){let n;const l="custom-element-ancestor-check",a=o=>{o.stopImmediatePropagation();const i=o.composedPath();n=i.slice(i.indexOf(t),i.indexOf(e))};return e.addEventListener(l,a,{once:!0}),t.dispatchEvent(new CustomEvent(l,{composed:!0,bubbles:!0})),e.removeEventListener(l,a),n.filter(o=>o!==t&&o!==e).filter(o=>{var i;return(i=o.tagName)==null?void 0:i.includes("-")}).length>0}function v(e){if(!e)return;const t=k(e.el);if(c.has(t)&&t===e.labelEl||!t&&s.has(e))return;const n=x.bind(e);if(t){e.labelEl=t;const l=r.get(t)||[];l.push(e),r.set(t,l.sort(g)),c.has(e.labelEl)||(c.set(e.labelEl,b),e.labelEl.addEventListener(h,b)),s.delete(e),document.removeEventListener(m,d.get(e)),u.set(e,n),document.addEventListener(f,n)}else s.has(e)||(n(),document.removeEventListener(f,u.get(e)))}function y(e){if(!e||(s.delete(e),document.removeEventListener(m,d.get(e)),document.removeEventListener(f,u.get(e)),d.delete(e),u.delete(e),!e.labelEl))return;const t=r.get(e.labelEl);t.length===1&&(e.labelEl.removeEventListener(h,c.get(e.labelEl)),c.delete(e.labelEl)),r.set(e.labelEl,t.filter(n=>n!==e).sort(g)),e.labelEl=null}function g(e,t){return w(e.el,t.el)?-1:1}function O(e){var t,n;return e.label||((n=(t=e.labelEl)==null?void 0:t.textContent)==null?void 0:n.trim())||""}function b(e){const t=e.detail.sourceEvent.target,n=r.get(this),l=n.find(o=>o.el===t);if(n.includes(l))return;const a=n[0];a.disabled||a.onLabelClick(e)}function I(){s.has(this)&&v(this)}function x(){s.add(this);const e=d.get(this)||I.bind(this);d.set(this,e),document.addEventListener(m,e)}async function W(e){var n;if(await e.componentOnReady(),r.has(e))return;const t=(n=e.ownerDocument)==null?void 0:n.getElementById(e.for);t&&requestAnimationFrame(()=>{for(const l of s)if(l.el===t){v(l);break}})}export{y as I,O as M,W as O,v as b,m as d,f as u};
