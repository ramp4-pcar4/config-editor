import{o as m,az as c}from"./index-JysQxb7m.js";function u(e,t){return t?"xoffset"in t&&t.xoffset?Math.max(e,Math.abs(t.xoffset)):"yoffset"in t&&t.yoffset?Math.max(e,Math.abs(t.yoffset||0)):e:e}function h(e){let t=0,a=0;for(let r=0;r<e.length;r++){const i=e[r].size;typeof i=="number"&&(t+=i,a++)}return t/a}function p(e,t){var a;return typeof e=="number"?e:(a=e==null?void 0:e.stops)!=null&&a.length?h(e.stops):t}function M(e,t){if(!t)return e;const a=t.filter(o=>o.type==="size").map(o=>{const{maxSize:s,minSize:n}=o;return(p(s,e)+p(n,e))/2});let r=0;const i=a.length;if(i===0)return e;for(let o=0;o<i;o++)r+=a[o];const f=Math.floor(r/i);return Math.max(f,e)}function b(e){var f;const t=e==null?void 0:e.renderer,a=e==null?void 0:e.pointerType,r=a==="touch"?9:6;if(!t)return r;const i="visualVariables"in t?M(r,t.visualVariables):r;if(t.type==="simple")return u(i,t.symbol);if(t.type==="unique-value"){let o=i;return(f=t.uniqueValueInfos)==null||f.forEach(s=>{o=u(o,s.symbol)}),o}if(t.type==="class-breaks"){let o=i;return t.classBreakInfos.forEach(s=>{o=u(o,s.symbol)}),o}return t.type==="dot-density"||t.type,i}function z(e,t,a,r=new m){let i=0;if(a.type==="2d")i=t*(a.resolution??0);else if(a.type==="3d"){const x=a.overlayPixelSizeInMapUnits(e),l=a.basemapSpatialReference;i=l==null||l.equals(a.spatialReference)?t*x:c(l)/c(a.spatialReference)}const f=e.x-i,o=e.y-i,s=e.x+i,n=e.y+i,{spatialReference:y}=a;return r.xmin=Math.min(f,s),r.ymin=Math.min(o,n),r.xmax=Math.max(f,s),r.ymax=Math.max(o,n),r.spatialReference=y,r}function R(e,t,a){const r=a.toMap(e);return r==null?!1:z(r,b(),a,d).intersects(t)}const d=new m;export{z as x,b as y,R as z};
