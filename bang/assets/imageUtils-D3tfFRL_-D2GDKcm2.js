const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./gif-DIxzUk6g-yNBpgaWg.js","./index-JysQxb7m.js","./index-BQSptJp9.css","./apng-BHxNRwa2-B52Qf5K2.js","./_commonjsHelpers-BITg13Vk-KnjfkSck.js"])))=>i.map(i=>d[i]);
import{_ as u,e7 as d,e8 as w,N as f,aM as p,h as y}from"./index-JysQxb7m.js";let i=null,o=!0;function T(e,a,t){if(!e||!a)throw new Error("Cannot construct image data without dimensions");if(o)try{return new ImageData(e,a)}catch{o=!1}return m(e,a,t)}function E(e,a,t,r){if(!a||!t)throw new Error("Cannot construct image data without dimensions");if(o)try{return new ImageData(e,a,t)}catch{o=!1}const n=m(a,t,r);return n.data.set(e,0),n}function g(){return i||(i=document.createElement("canvas"),i.width=1,i.height=1),i}function m(e,a,t){return t||(t=g()),t.getContext("2d").createImageData(e,a)}async function h(e,a){const t=window.URL.createObjectURL(e);try{const{data:r}=await f(t,{...a,responseType:"image"});return r}catch(r){throw p(r)?r:new y("invalid-image",`Could not fetch requested image at ${t}`)}finally{window.URL.revokeObjectURL(t)}}async function v(e,a){const{arrayBuffer:t,mediaType:r}=await l(e,a),n=r==="image/png";if(r==="image/gif"){const{isAnimatedGIF:c,parseGif:s}=await u(()=>import("./gif-DIxzUk6g-yNBpgaWg.js"),__vite__mapDeps([0,1,2]),import.meta.url);if(c(t))return s(t,a)}if(n){const{isAnimatedPNG:c,parseApng:s}=await u(()=>import("./apng-BHxNRwa2-B52Qf5K2.js"),__vite__mapDeps([3,4,1,2]),import.meta.url);if(c(t))return s(t,a)}return h(new Blob([t],{type:r}),a)}async function l(e,a){var n;const t=d(e);if(t!=null&&t.isBase64)return{arrayBuffer:w(t.data),mediaType:t.mediaType};const r=await f(e,{responseType:"array-buffer",...a});return{arrayBuffer:r.data,mediaType:((n=r.getHeader)==null?void 0:n.call(r,"Content-Type"))??""}}export{v as T,E as g,T as y};
