import{jY as d,jZ as S}from"./index-BeTPrQ6f.js";import{G,V as E,Z as y,s as P,B as T}from"./Point2D-BVUQyGsf-qih0ZuJV.js";import{g as v}from"./OperatorShapePreservingLength-BW7Hyec4-DdJXcuto.js";import{H as C,J as q,b as w,m as D,A as X,T as Y,q as b,Z as j,C as L,D as A}from"./ProjectionTransformation-BXUROh_s-kKBZ5FDB.js";import"./Envelope2D-2iYexKQo-BCKocNS7.js";import"./Transformation2D-CZCvoz9N-B-IhcWnl.js";import"./SimpleGeometryCursor-DSF_YyIm-TAMgMsbK.js";import"./OperatorDefinitions-DJdq_wrt-DP7_WWTp.js";class V{getOperatorType(){return 10311}supportsCurves(){return!0}accelerateGeometry(t,r,u){return!1}canAccelerateGeometry(t){return!1}execute(t,r,u,o){if(u===4)return new v().execute(t,r,o);if(r.getCoordinateSystemType()===0&&G(""),E(t),t.isEmpty()||t.getDimension()<1)return 0;const s=r.getGCS(),a=C();s.querySpheroidData(a);const c=a.majorSemiAxis,g=a.e2,m=s.getUnit().getUnitToBaseFactor();let e;const n=t.getGeometryType();if(n===y.enumPolygon?e=t.getBoundary():n===y.enumEnvelope?e=q(t):P(n)?(e=new w({vd:t.getDescription()}),e.addSegment(t,!0)):e=t,e.hasNonLinearSegments()&&(e=new D().execute(e,0,r.getTolerance(0),0,o)),s!==r){const i=r.getSRToGCSTransform();if(r.isPannable()){e=X(e,r),n===y.enumPolyline&&e===t&&(e=t.clone());const x=new T;r.getPannableExtent().queryIntervalX(x);for(let l=0,h=e.getPointCount();l<h;l++){const p=e.getXY(l);p.x=Y(p.x,x),e.setXY(l,p)}}const f=e.createInstance();e=j(i,e,f,o)?f:new b().execute(e,i,o)}return this._ExecuteMultiPathGeodeticLength(e,u,c,g,m)}_ExecuteMultiPathGeodeticLength(t,r,u,o,s){const a={stack:[],error:void 0,hasError:!1};try{const c=d(a,new L,!1);let g=0;const m=t.querySegmentIterator();for(;m.nextPath();)for(;m.hasNextSegment();){const e=m.nextSegment(),n=e.getStartXY(),i=e.getEndXY();n.scale(s),i.scale(s),A.geodeticDistance(u,o,n.x,n.y,i.x,i.y,c,null,null,r),g+=c.val}return g}catch(c){a.error=c,a.hasError=!0}finally{S(a)}}}export{V as OperatorGeodeticLength};
