import"./index-B5UpFGZX-BY7UCsxA.js";import"./customElement-CISNft8l-BrE3a95-.js";import{N as At,h as zt}from"./jsxFactory-DN-m49_5-CUFCpKPo.js";import{hG as Tt,hK as ee,jH as k,jJ as mt,jI as _,hF as Pt,jF as vn}from"./index-BeTPrQ6f.js";import{n as Te}from"./keyed-BsTPRA5D-oS6cmwSg.js";import{P as he,b as bn}from"./dom-cV1JHjxC-ECa-LXIB.js";import"./index-CZRmpYJQ-B_ZQ2kaU.js";import"./index-DMFZlf9Z-B9K-JAa4.js";import"./customElement-R7RZTIol-BnJ-Elw1.js";import"./index-QE3mrqEk-Drg93m0V.js";import{d as Ut,p as Gt}from"./interactive-CoTGpEoh-DzPnGf4B.js";import{n as Wt}from"./useCancelable-Bx62O-42-BWQ6Sha4.js";import{t as qt}from"./useT9n-DLD4Ns9x-BMNOgwpk.js";import{y as Kt}from"./useSetFocus-BJqFX1-H-ChkfMq9o.js";import{p as Vt}from"./debounce-BgMoWmzF-DQf8_AwT.js";import{i as En}from"./observers-CAhVhbXT-D_oY9tJ5.js";import{a as De,u as Re,c as it,m as yn,l as vt,o as kt}from"./utils2-CwQdgiQl-BSIkIwiQ.js";import{Q as Lt}from"./input-CREQlp6f-MVqFAf6a.js";import{i as In}from"./guid-Dls486Er-CBh637k4.js";import"./intl-DRhjUnwt-Dihhq8dq.js";import"./messages-DQ10DjvF-6kk0dzjG.js";import"./uuid-CFz2qBzH-cIdlpVG-.js";import"./sanitizerUtils-CrdmaILo-DztC6Qnx.js";import"./static-I-rbCIK8-CmBWZ6Bh.js";import"./form-D03n6FLW-C_W96jbq.js";import"./key-CZySMiwx-kmS7VeUz.js";import"./label-C3m_eiKP-DS3cqnkb.js";import"./InternalLabel-BiuqGPFq-CpSD2G_N.js";import"./Validation-EOXLsGwz-3qHq6x6W.js";function wn(t){return t}function Sn(t){return t.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&")}const pe={container:"container",actionsStart:"actions-start",contentStart:"content-start",content:"content",contentEnd:"content-end",actionsEnd:"actions-end"},be={actionsStart:"actions-start",contentStart:"content-start",contentEnd:"content-end",actionsEnd:"actions-end"},Dn=Pt`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]) .content{cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) .content *,:host([disabled]) .content ::slotted(*){pointer-events:none}:host{display:flex;flex:1 1 0%;flex-direction:column}.container{display:flex;flex:1 1 auto;align-items:stretch;font-weight:var(--calcite-font-weight-normal);color:var(--calcite-color-text-2)}.content{display:flex;flex:1 1 auto;flex-direction:column;justify-content:center;font-size:var(--calcite-font-size--2);line-height:1.375;padding-inline:var(--calcite-stack-padding-inline, .75rem);padding-block:var(--calcite-stack-padding-block, .5rem)}.content-start{justify-content:flex-start}.content-end{justify-content:flex-end}.content-start,.content-end{flex:0 1 auto}.content-start ::slotted(calcite-icon),.content-end ::slotted(calcite-icon){margin-inline:.75rem;align-self:center}.actions-start,.actions-end,.content-start,.content-end{display:flex;align-items:center}.actions-start ::slotted(calcite-action),.actions-start ::slotted(calcite-action-menu),.actions-start ::slotted(calcite-handle),.actions-start ::slotted(calcite-dropdown),.actions-end ::slotted(calcite-action),.actions-end ::slotted(calcite-action-menu),.actions-end ::slotted(calcite-handle),.actions-end ::slotted(calcite-dropdown){align-self:stretch;color:inherit}:host([hidden]){display:none}[hidden]{display:none}`,Qe=class Qe extends Tt{constructor(){super(...arguments),this.hasActionsEnd=!1,this.hasActionsStart=!1,this.hasContentEnd=!1,this.hasContentStart=!1,this.disabled=!1}handleActionsStartSlotChange(e){this.hasActionsStart=he(e)}handleActionsEndSlotChange(e){this.hasActionsEnd=he(e)}handleContentStartSlotChange(e){this.hasContentStart=he(e)}handleContentEndSlotChange(e){this.hasContentEnd=he(e)}renderActionsStart(){const{hasActionsStart:e}=this;return Te("actions-start-container",_`<div class=${k(pe.actionsStart)} .hidden=${!e}><slot name=${be.actionsStart} @slotchange=${this.handleActionsStartSlotChange}></slot></div>`)}renderActionsEnd(){const{hasActionsEnd:e}=this;return Te("actions-end-container",_`<div class=${k(pe.actionsEnd)} .hidden=${!e}><slot name=${be.actionsEnd} @slotchange=${this.handleActionsEndSlotChange}></slot></div>`)}renderContentStart(){const{hasContentStart:e}=this;return _`<div class=${k(pe.contentStart)} .hidden=${!e}><slot name=${be.contentStart} @slotchange=${this.handleContentStartSlotChange}></slot></div>`}renderDefaultContent(){return _`<div class=${k(pe.content)}><slot></slot></div>`}renderContentEnd(){const{hasContentEnd:e}=this;return _`<div class=${k(pe.contentEnd)} .hidden=${!e}><slot name=${be.contentEnd} @slotchange=${this.handleContentEndSlotChange}></slot></div>`}render(){return _`<div class=${k(pe.container)}>${this.renderActionsStart()}${this.renderContentStart()}${this.renderDefaultContent()}${this.renderContentEnd()}${this.renderActionsEnd()}</div>`}};Qe.properties={hasActionsEnd:[16,{},{state:!0}],hasActionsStart:[16,{},{state:!0}],hasContentEnd:[16,{},{state:!0}],hasContentStart:[16,{},{state:!0}],disabled:[7,{},{reflect:!0,type:Boolean}]},Qe.styles=Dn;let bt=Qe;At("calcite-stack",bt);function Zt(t){if(t==null)return"";if(typeof t=="string")return t;if(Array.isArray(t))return t.map(Zt).join(",");const e=String(t);return e==="0"&&Object.is(Number(t),-0)?"-0":e}function xn(t,e=wn){if(t==null)return t;for(const n in t)if(e(t[n],n,t)===!1)break;return t}function Cn(t){return Sn(Zt(t))}const at=(t,e,n)=>{const i=Cn(e),a=new RegExp(i,"i");t.length===0&&console.warn(`No data was passed to the filter function.
    The data argument should be an array of objects`);const r=(o,s,l)=>{if(o!=null&&o.constant||o!=null&&o.filterDisabled)return!0;let c=!1;return xn(o,(h,u)=>{typeof h=="function"||h==null||l&&!l.includes(u)||(Array.isArray(h)||typeof h=="object"&&h!==null?r(h,s)&&(c=!0):s.test(h)&&(c=!0))}),c};return t.filter(o=>r(o,a,n))},An={container:"container"},Tn={search:"search"},Pn=Pt`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex;inline-size:100%}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.container{display:flex;inline-size:100%}:host([scale=s]) .container{padding:var(--calcite-filter-content-space, var(--calcite-spacing-sm))}:host([scale=m]) .container{padding:var(--calcite-filter-content-space, var(--calcite-spacing-md))}:host([scale=l]) .container{padding:var(--calcite-filter-content-space, var(--calcite-spacing-lg))}label{position:relative;margin-block:0px;display:flex;inline-size:100%;align-items:center;overflow:hidden}calcite-input{inline-size:100%;--calcite-input-background-color: var(--calcite-filter-input-background-color);--calcite-input-border-color: var(--calcite-filter-input-border-color);--calcite-input-corner-radius: var(--calcite-filter-input-corner-radius);--calcite-input-shadow: var(--calcite-filter-input-shadow);--calcite-input-icon-color: var(--calcite-filter-input-icon-color);--calcite-input-text-color: var(--calcite-filter-input-text-color);--calcite-input-placeholder-text-color: var(--calcite-filter-input-placeholder-text-color);--calcite-input-actions-background-color: var(--calcite-filter-input-actions-background-color);--calcite-input-actions-background-color-hover: var(--calcite-filter-input-actions-background-color-hover);--calcite-input-actions-background-color-press: var(--calcite-filter-input-actions-background-color-press);--calcite-input-actions-icon-color: var(--calcite-filter-input-actions-icon-color);--calcite-input-actions-icon-color-hover: var(--calcite-filter-input-actions-icon-color-hover);--calcite-input-actions-icon-color-press: var(--calcite-filter-input-actions-icon-color-press)}:host([hidden]){display:none}[hidden]{display:none}`,Le=class Le extends Tt{constructor(){super(...arguments),this.cancelable=Wt()(this),this.filterDebounced=Vt((e,n=!1,i)=>this.updateFiltered(at(this.items??[],e,this.filterProps),n,i),zt.filter),this.textInput=vn(),this._value="",this.messages=qt(),this.focusSetter=Kt()(this),this.disabled=!1,this.filteredItems=[],this.items=[],this.scale="m",this.calciteFilterChange=ee({cancelable:!1})}get value(){return this._value}set value(e){const n=this._value;e!==n&&(this._value=e,this.valueHandler(e))}async filter(e=this.value){return new Promise(n=>{this.value=e,this.updateFiltered(at(this.items??[],e,this.filterProps),!1,n)})}async setFocus(e){return this.focusSetter(()=>this.textInput.value,e)}connectedCallback(){super.connectedCallback(),this.cancelable.add(this.filterDebounced)}async load(){this.updateFiltered(at(this.items??[],this.value,this.filterProps))}willUpdate(e){var n;(e.has("items")&&(this.hasUpdated||((n=this.items)==null?void 0:n.length)>0)||e.has("filterProps"))&&this.filterDebounced(this.value)}updated(){Ut(this)}valueHandler(e){this.filterDebounced(e)}inputHandler(e){const n=e.target;this.value=n.value,this.filterDebounced(n.value,!0)}keyDownHandler(e){e.defaultPrevented||(e.key==="Escape"&&(this.clear(),e.preventDefault()),e.key==="Enter"&&e.preventDefault())}clear(){this.value="",this.filterDebounced("",!0),this.setFocus()}updateFiltered(e,n=!1,i){this.filteredItems=e,n&&this.calciteFilterChange.emit(),i==null||i()}render(){const{disabled:e,scale:n}=this;return Gt({disabled:e,children:_`<div class=${k(An.container)}><label><calcite-input clearable .disabled=${e} .icon=${Tn.search} .label=${this.label??this.messages.label} .messageOverrides=${{clear:this.messages.clear}} @keydown=${this.keyDownHandler} @calciteInputInput=${this.inputHandler} .placeholder=${this.placeholder} .scale=${n} type=text .value=${this.value} ${mt(this.textInput)}></calcite-input></label></div>`})}};Le.properties={disabled:[7,{},{reflect:!0,type:Boolean}],filterProps:[0,{},{attribute:!1}],filteredItems:[0,{},{attribute:!1}],items:[0,{},{attribute:!1}],label:1,messageOverrides:[0,{},{attribute:!1}],placeholder:1,scale:[3,{},{reflect:!0}],value:1},Le.shadowRootOptions={mode:"open",delegatesFocus:!0},Le.styles=Pn;let Et=Le;At("calcite-filter",Et);function Ft(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function z(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ft(Object(n),!0).forEach(function(i){_n(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ft(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function je(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?je=function(e){return typeof e}:je=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},je(t)}function _n(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function V(){return V=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},V.apply(this,arguments)}function On(t,e){if(t==null)return{};var n={},i=Object.keys(t),a,r;for(r=0;r<i.length;r++)a=i[r],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}function Mn(t,e){if(t==null)return{};var n=On(t,e),i,a;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}var kn="1.15.6";function K(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var Z=K(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Fe=K(/Edge/i),$t=K(/firefox/i),Pe=K(/safari/i)&&!K(/chrome/i)&&!K(/android/i),_t=K(/iP(ad|od|hone)/i),Jt=K(/chrome/i)&&K(/android/i),Qt={capture:!1,passive:!1};function E(t,e,n){t.addEventListener(e,n,!Z&&Qt)}function b(t,e,n){t.removeEventListener(e,n,!Z&&Qt)}function qe(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function en(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function B(t,e,n,i){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&qe(t,e):qe(t,e))||i&&t===n)return t;if(t===n)break}while(t=en(t))}return null}var Nt=/\s+/g;function N(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var i=(" "+t.className+" ").replace(Nt," ").replace(" "+e+" "," ");t.className=(i+(n?" "+e:"")).replace(Nt," ")}}function f(t,e,n){var i=t&&t.style;if(i){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in i)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),i[e]=n+(typeof n=="string"?"":"px")}}function ye(t,e){var n="";if(typeof t=="string")n=t;else do{var i=f(t,"transform");i&&i!=="none"&&(n=i+" "+n)}while(!e&&(t=t.parentNode));var a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return a&&new a(n)}function tn(t,e,n){if(t){var i=t.getElementsByTagName(e),a=0,r=i.length;if(n)for(;a<r;a++)n(i[a],a);return i}return[]}function j(){var t=document.scrollingElement;return t||document.documentElement}function C(t,e,n,i,a){if(!(!t.getBoundingClientRect&&t!==window)){var r,o,s,l,c,h,u;if(t!==window&&t.parentNode&&t!==j()?(r=t.getBoundingClientRect(),o=r.top,s=r.left,l=r.bottom,c=r.right,h=r.height,u=r.width):(o=0,s=0,l=window.innerHeight,c=window.innerWidth,h=window.innerHeight,u=window.innerWidth),(e||n)&&t!==window&&(a=a||t.parentNode,!Z))do if(a&&a.getBoundingClientRect&&(f(a,"transform")!=="none"||n&&f(a,"position")!=="static")){var I=a.getBoundingClientRect();o-=I.top+parseInt(f(a,"border-top-width")),s-=I.left+parseInt(f(a,"border-left-width")),l=o+r.height,c=s+r.width;break}while(a=a.parentNode);if(i&&t!==window){var m=ye(a||t),v=m&&m.a,y=m&&m.d;m&&(o/=y,s/=v,u/=v,h/=y,l=o+h,c=s+u)}return{top:o,left:s,bottom:l,right:c,width:u,height:h}}}function Rt(t,e,n){for(var i=ie(t,!0),a=C(t)[e];i;){var r=C(i)[n],o=void 0;if(o=a>=r,!o)return i;if(i===j())break;i=ie(i,!1)}return!1}function Ie(t,e,n,i){for(var a=0,r=0,o=t.children;r<o.length;){if(o[r].style.display!=="none"&&o[r]!==p.ghost&&(i||o[r]!==p.dragged)&&B(o[r],n.draggable,t,!1)){if(a===e)return o[r];a++}r++}return null}function Ot(t,e){for(var n=t.lastElementChild;n&&(n===p.ghost||f(n,"display")==="none"||e&&!qe(n,e));)n=n.previousElementSibling;return n||null}function H(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==p.clone&&(!e||qe(t,e))&&n++;return n}function Ht(t){var e=0,n=0,i=j();if(t)do{var a=ye(t),r=a.a,o=a.d;e+=t.scrollLeft*r,n+=t.scrollTop*o}while(t!==i&&(t=t.parentNode));return[e,n]}function Ln(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var i in e)if(e.hasOwnProperty(i)&&e[i]===t[n][i])return Number(n)}return-1}function ie(t,e){if(!t||!t.getBoundingClientRect)return j();var n=t,i=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var a=f(n);if(n.clientWidth<n.scrollWidth&&(a.overflowX=="auto"||a.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(a.overflowY=="auto"||a.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return j();if(i||e)return n;i=!0}}while(n=n.parentNode);return j()}function Fn(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function rt(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var _e;function nn(t,e){return function(){if(!_e){var n=arguments,i=this;n.length===1?t.call(i,n[0]):t.apply(i,n),_e=setTimeout(function(){_e=void 0},e)}}}function $n(){clearTimeout(_e),_e=void 0}function an(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function rn(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function on(t,e,n){var i={};return Array.from(t.children).forEach(function(a){var r,o,s,l;if(!(!B(a,e.draggable,t,!1)||a.animated||a===n)){var c=C(a);i.left=Math.min((r=i.left)!==null&&r!==void 0?r:1/0,c.left),i.top=Math.min((o=i.top)!==null&&o!==void 0?o:1/0,c.top),i.right=Math.max((s=i.right)!==null&&s!==void 0?s:-1/0,c.right),i.bottom=Math.max((l=i.bottom)!==null&&l!==void 0?l:-1/0,c.bottom)}}),i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}var F="Sortable"+new Date().getTime();function Nn(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var n=[].slice.call(this.el.children);n.forEach(function(i){if(!(f(i,"display")==="none"||i===p.ghost)){t.push({target:i,rect:C(i)});var a=z({},t[t.length-1].rect);if(i.thisAnimationDuration){var r=ye(i,!0);r&&(a.top-=r.f,a.left-=r.e)}i.fromRect=a}})}},addAnimationState:function(n){t.push(n)},removeAnimationState:function(n){t.splice(Ln(t,{target:n}),1)},animateAll:function(n){var i=this;if(!this.options.animation){clearTimeout(e),typeof n=="function"&&n();return}var a=!1,r=0;t.forEach(function(o){var s=0,l=o.target,c=l.fromRect,h=C(l),u=l.prevFromRect,I=l.prevToRect,m=o.rect,v=ye(l,!0);v&&(h.top-=v.f,h.left-=v.e),l.toRect=h,l.thisAnimationDuration&&rt(u,h)&&!rt(c,h)&&(m.top-h.top)/(m.left-h.left)===(c.top-h.top)/(c.left-h.left)&&(s=Hn(m,u,I,i.options)),rt(h,c)||(l.prevFromRect=c,l.prevToRect=h,s||(s=i.options.animation),i.animate(l,m,h,s)),s&&(a=!0,r=Math.max(r,s),clearTimeout(l.animationResetTimer),l.animationResetTimer=setTimeout(function(){l.animationTime=0,l.prevFromRect=null,l.fromRect=null,l.prevToRect=null,l.thisAnimationDuration=null},s),l.thisAnimationDuration=s)}),clearTimeout(e),a?e=setTimeout(function(){typeof n=="function"&&n()},r):typeof n=="function"&&n(),t=[]},animate:function(n,i,a,r){if(r){f(n,"transition",""),f(n,"transform","");var o=ye(this.el),s=o&&o.a,l=o&&o.d,c=(i.left-a.left)/(s||1),h=(i.top-a.top)/(l||1);n.animatingX=!!c,n.animatingY=!!h,f(n,"transform","translate3d("+c+"px,"+h+"px,0)"),this.forRepaintDummy=Rn(n),f(n,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),f(n,"transform","translate3d(0,0,0)"),typeof n.animated=="number"&&clearTimeout(n.animated),n.animated=setTimeout(function(){f(n,"transition",""),f(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},r)}}}}function Rn(t){return t.offsetWidth}function Hn(t,e,n,i){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*i.animation}var ge=[],ot={initializeByDefault:!0},$e={mount:function(t){for(var e in ot)ot.hasOwnProperty(e)&&!(e in t)&&(t[e]=ot[e]);ge.forEach(function(n){if(n.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),ge.push(t)},pluginEvent:function(t,e,n){var i=this;this.eventCanceled=!1,n.cancel=function(){i.eventCanceled=!0};var a=t+"Global";ge.forEach(function(r){e[r.pluginName]&&(e[r.pluginName][a]&&e[r.pluginName][a](z({sortable:e},n)),e.options[r.pluginName]&&e[r.pluginName][t]&&e[r.pluginName][t](z({sortable:e},n)))})},initializePlugins:function(t,e,n,i){ge.forEach(function(o){var s=o.pluginName;if(!(!t.options[s]&&!o.initializeByDefault)){var l=new o(t,e,t.options);l.sortable=t,l.options=t.options,t[s]=l,V(n,l.defaults)}});for(var a in t.options)if(t.options.hasOwnProperty(a)){var r=this.modifyOption(t,a,t.options[a]);typeof r<"u"&&(t.options[a]=r)}},getEventProperties:function(t,e){var n={};return ge.forEach(function(i){typeof i.eventProperties=="function"&&V(n,i.eventProperties.call(e[i.pluginName],t))}),n},modifyOption:function(t,e,n){var i;return ge.forEach(function(a){t[a.pluginName]&&a.optionListeners&&typeof a.optionListeners[e]=="function"&&(i=a.optionListeners[e].call(t[a.pluginName],n))}),i}};function Yn(t){var e=t.sortable,n=t.rootEl,i=t.name,a=t.targetEl,r=t.cloneEl,o=t.toEl,s=t.fromEl,l=t.oldIndex,c=t.newIndex,h=t.oldDraggableIndex,u=t.newDraggableIndex,I=t.originalEvent,m=t.putSortable,v=t.extraEventProperties;if(e=e||n&&n[F],!!e){var y,U=e.options,O="on"+i.charAt(0).toUpperCase()+i.substr(1);window.CustomEvent&&!Z&&!Fe?y=new CustomEvent(i,{bubbles:!0,cancelable:!0}):(y=document.createEvent("Event"),y.initEvent(i,!0,!0)),y.to=o||n,y.from=s||n,y.item=a||n,y.clone=r,y.oldIndex=l,y.newIndex=c,y.oldDraggableIndex=h,y.newDraggableIndex=u,y.originalEvent=I,y.pullMode=m?m.lastPutMode:void 0;var G=z(z({},v),$e.getEventProperties(i,e));for(var T in G)y[T]=G[T];n&&n.dispatchEvent(y),U[O]&&U[O].call(e,y)}}var Bn=["evt"],L=function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=n.evt,a=Mn(n,Bn);$e.pluginEvent.bind(p)(t,e,z({dragEl:d,parentEl:D,ghostEl:g,rootEl:w,nextEl:de,lastDownEl:ze,cloneEl:S,cloneHidden:ne,dragStarted:xe,putSortable:A,activeSortable:p.active,originalEvent:i,oldIndex:Ee,oldDraggableIndex:Oe,newIndex:R,newDraggableIndex:te,hideGhostForTarget:dn,unhideGhostForTarget:hn,cloneNowHidden:function(){ne=!0},cloneNowShown:function(){ne=!1},dispatchSortableEvent:function(r){M({sortable:e,name:r,originalEvent:i})}},a))};function M(t){Yn(z({putSortable:A,cloneEl:S,targetEl:d,rootEl:w,oldIndex:Ee,oldDraggableIndex:Oe,newIndex:R,newDraggableIndex:te},t))}var d,D,g,w,de,ze,S,ne,Ee,R,Oe,te,He,A,ve=!1,Ke=!1,Ve=[],se,Y,lt,st,Yt,Bt,xe,me,Me,ke=!1,Ye=!1,Ue,P,ct=[],yt=!1,Ze=[],tt=typeof document<"u",Be=_t,Xt=Fe||Z?"cssFloat":"float",Xn=tt&&!Jt&&!_t&&"draggable"in document.createElement("div"),ln=function(){if(tt){if(Z)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),sn=function(t,e){var n=f(t),i=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),a=Ie(t,0,e),r=Ie(t,1,e),o=a&&f(a),s=r&&f(r),l=o&&parseInt(o.marginLeft)+parseInt(o.marginRight)+C(a).width,c=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+C(r).width;if(n.display==="flex")return n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal";if(n.display==="grid")return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(a&&o.float&&o.float!=="none"){var h=o.float==="left"?"left":"right";return r&&(s.clear==="both"||s.clear===h)?"vertical":"horizontal"}return a&&(o.display==="block"||o.display==="flex"||o.display==="table"||o.display==="grid"||l>=i&&n[Xt]==="none"||r&&n[Xt]==="none"&&l+c>i)?"vertical":"horizontal"},jn=function(t,e,n){var i=n?t.left:t.top,a=n?t.right:t.bottom,r=n?t.width:t.height,o=n?e.left:e.top,s=n?e.right:e.bottom,l=n?e.width:e.height;return i===o||a===s||i+r/2===o+l/2},zn=function(t,e){var n;return Ve.some(function(i){var a=i[F].options.emptyInsertThreshold;if(!(!a||Ot(i))){var r=C(i),o=t>=r.left-a&&t<=r.right+a,s=e>=r.top-a&&e<=r.bottom+a;if(o&&s)return n=i}}),n},cn=function(t){function e(a,r){return function(o,s,l,c){var h=o.options.group.name&&s.options.group.name&&o.options.group.name===s.options.group.name;if(a==null&&(r||h))return!0;if(a==null||a===!1)return!1;if(r&&a==="clone")return a;if(typeof a=="function")return e(a(o,s,l,c),r)(o,s,l,c);var u=(r?o:s).options.group.name;return a===!0||typeof a=="string"&&a===u||a.join&&a.indexOf(u)>-1}}var n={},i=t.group;(!i||je(i)!="object")&&(i={name:i}),n.name=i.name,n.checkPull=e(i.pull,!0),n.checkPut=e(i.put),n.revertClone=i.revertClone,t.group=n},dn=function(){!ln&&g&&f(g,"display","none")},hn=function(){!ln&&g&&f(g,"display","")};tt&&!Jt&&document.addEventListener("click",function(t){if(Ke)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Ke=!1,!1},!0);var ce=function(t){if(d){t=t.touches?t.touches[0]:t;var e=zn(t.clientX,t.clientY);if(e){var n={};for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.target=n.rootEl=e,n.preventDefault=void 0,n.stopPropagation=void 0,e[F]._onDragOver(n)}}},Un=function(t){d&&d.parentNode[F]._isOutsideThisEl(t.target)};function p(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=V({},e),t[F]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return sn(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(r,o){r.setData("Text",o.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:p.supportPointer!==!1&&"PointerEvent"in window&&(!Pe||_t),emptyInsertThreshold:5};$e.initializePlugins(this,t,n);for(var i in n)!(i in e)&&(e[i]=n[i]);cn(e);for(var a in this)a.charAt(0)==="_"&&typeof this[a]=="function"&&(this[a]=this[a].bind(this));this.nativeDraggable=e.forceFallback?!1:Xn,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?E(t,"pointerdown",this._onTapStart):(E(t,"mousedown",this._onTapStart),E(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(E(t,"dragover",this),E(t,"dragenter",this)),Ve.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),V(this,Nn())}p.prototype={constructor:p,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(me=null)},_getDirection:function(t,e){return typeof this.options.direction=="function"?this.options.direction.call(this,t,e,d):this.options.direction},_onTapStart:function(t){if(t.cancelable){var e=this,n=this.el,i=this.options,a=i.preventOnFilter,r=t.type,o=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,s=(o||t).target,l=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||s,c=i.filter;if(Qn(n),!d&&!(/mousedown|pointerdown/.test(r)&&t.button!==0||i.disabled)&&!l.isContentEditable&&!(!this.nativeDraggable&&Pe&&s&&s.tagName.toUpperCase()==="SELECT")&&(s=B(s,i.draggable,n,!1),!(s&&s.animated)&&ze!==s)){if(Ee=H(s),Oe=H(s,i.draggable),typeof c=="function"){if(c.call(this,t,s,this)){M({sortable:e,rootEl:l,name:"filter",targetEl:s,toEl:n,fromEl:n}),L("filter",e,{evt:t}),a&&t.preventDefault();return}}else if(c&&(c=c.split(",").some(function(h){if(h=B(l,h.trim(),n,!1),h)return M({sortable:e,rootEl:h,name:"filter",targetEl:s,fromEl:n,toEl:n}),L("filter",e,{evt:t}),!0}),c)){a&&t.preventDefault();return}i.handle&&!B(l,i.handle,n,!1)||this._prepareDragStart(t,o,s)}}},_prepareDragStart:function(t,e,n){var i=this,a=i.el,r=i.options,o=a.ownerDocument,s;if(n&&!d&&n.parentNode===a){var l=C(n);if(w=a,d=n,D=d.parentNode,de=d.nextSibling,ze=n,He=r.group,p.dragged=d,se={target:d,clientX:(e||t).clientX,clientY:(e||t).clientY},Yt=se.clientX-l.left,Bt=se.clientY-l.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,d.style["will-change"]="all",s=function(){if(L("delayEnded",i,{evt:t}),p.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!$t&&i.nativeDraggable&&(d.draggable=!0),i._triggerDragStart(t,e),M({sortable:i,name:"choose",originalEvent:t}),N(d,r.chosenClass,!0)},r.ignore.split(",").forEach(function(c){tn(d,c.trim(),dt)}),E(o,"dragover",ce),E(o,"mousemove",ce),E(o,"touchmove",ce),r.supportPointer?(E(o,"pointerup",i._onDrop),!this.nativeDraggable&&E(o,"pointercancel",i._onDrop)):(E(o,"mouseup",i._onDrop),E(o,"touchend",i._onDrop),E(o,"touchcancel",i._onDrop)),$t&&this.nativeDraggable&&(this.options.touchStartThreshold=4,d.draggable=!0),L("delayStart",this,{evt:t}),r.delay&&(!r.delayOnTouchOnly||e)&&(!this.nativeDraggable||!(Fe||Z))){if(p.eventCanceled){this._onDrop();return}r.supportPointer?(E(o,"pointerup",i._disableDelayedDrag),E(o,"pointercancel",i._disableDelayedDrag)):(E(o,"mouseup",i._disableDelayedDrag),E(o,"touchend",i._disableDelayedDrag),E(o,"touchcancel",i._disableDelayedDrag)),E(o,"mousemove",i._delayedDragTouchMoveHandler),E(o,"touchmove",i._delayedDragTouchMoveHandler),r.supportPointer&&E(o,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(s,r.delay)}else s()}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){d&&dt(d),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;b(t,"mouseup",this._disableDelayedDrag),b(t,"touchend",this._disableDelayedDrag),b(t,"touchcancel",this._disableDelayedDrag),b(t,"pointerup",this._disableDelayedDrag),b(t,"pointercancel",this._disableDelayedDrag),b(t,"mousemove",this._delayedDragTouchMoveHandler),b(t,"touchmove",this._delayedDragTouchMoveHandler),b(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||t.pointerType=="touch"&&t,!this.nativeDraggable||e?this.options.supportPointer?E(document,"pointermove",this._onTouchMove):e?E(document,"touchmove",this._onTouchMove):E(document,"mousemove",this._onTouchMove):(E(d,"dragend",this),E(w,"dragstart",this._onDragStart));try{document.selection?Ge(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,e){if(ve=!1,w&&d){L("dragStarted",this,{evt:e}),this.nativeDraggable&&E(document,"dragover",Un);var n=this.options;!t&&N(d,n.dragClass,!1),N(d,n.ghostClass,!0),p.active=this,t&&this._appendGhost(),M({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(Y){this._lastX=Y.clientX,this._lastY=Y.clientY,dn();for(var t=document.elementFromPoint(Y.clientX,Y.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(Y.clientX,Y.clientY),t!==e);)e=t;if(d.parentNode[F]._isOutsideThisEl(t),e)do{if(e[F]){var n=void 0;if(n=e[F]._onDragOver({clientX:Y.clientX,clientY:Y.clientY,target:t,rootEl:e}),n&&!this.options.dragoverBubble)break}t=e}while(e=en(e));hn()}},_onTouchMove:function(t){if(se){var e=this.options,n=e.fallbackTolerance,i=e.fallbackOffset,a=t.touches?t.touches[0]:t,r=g&&ye(g,!0),o=g&&r&&r.a,s=g&&r&&r.d,l=Be&&P&&Ht(P),c=(a.clientX-se.clientX+i.x)/(o||1)+(l?l[0]-ct[0]:0)/(o||1),h=(a.clientY-se.clientY+i.y)/(s||1)+(l?l[1]-ct[1]:0)/(s||1);if(!p.active&&!ve){if(n&&Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))<n)return;this._onDragStart(t,!0)}if(g){r?(r.e+=c-(lt||0),r.f+=h-(st||0)):r={a:1,b:0,c:0,d:1,e:c,f:h};var u="matrix(".concat(r.a,",").concat(r.b,",").concat(r.c,",").concat(r.d,",").concat(r.e,",").concat(r.f,")");f(g,"webkitTransform",u),f(g,"mozTransform",u),f(g,"msTransform",u),f(g,"transform",u),lt=c,st=h,Y=a}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!g){var t=this.options.fallbackOnBody?document.body:w,e=C(d,!0,Be,!0,t),n=this.options;if(Be){for(P=t;f(P,"position")==="static"&&f(P,"transform")==="none"&&P!==document;)P=P.parentNode;P!==document.body&&P!==document.documentElement?(P===document&&(P=j()),e.top+=P.scrollTop,e.left+=P.scrollLeft):P=j(),ct=Ht(P)}g=d.cloneNode(!0),N(g,n.ghostClass,!1),N(g,n.fallbackClass,!0),N(g,n.dragClass,!0),f(g,"transition",""),f(g,"transform",""),f(g,"box-sizing","border-box"),f(g,"margin",0),f(g,"top",e.top),f(g,"left",e.left),f(g,"width",e.width),f(g,"height",e.height),f(g,"opacity","0.8"),f(g,"position",Be?"absolute":"fixed"),f(g,"zIndex","100000"),f(g,"pointerEvents","none"),p.ghost=g,t.appendChild(g),f(g,"transform-origin",Yt/parseInt(g.style.width)*100+"% "+Bt/parseInt(g.style.height)*100+"%")}},_onDragStart:function(t,e){var n=this,i=t.dataTransfer,a=n.options;if(L("dragStart",this,{evt:t}),p.eventCanceled){this._onDrop();return}L("setupClone",this),p.eventCanceled||(S=rn(d),S.removeAttribute("id"),S.draggable=!1,S.style["will-change"]="",this._hideClone(),N(S,this.options.chosenClass,!1),p.clone=S),n.cloneId=Ge(function(){L("clone",n),!p.eventCanceled&&(n.options.removeCloneOnHide||w.insertBefore(S,d),n._hideClone(),M({sortable:n,name:"clone"}))}),!e&&N(d,a.dragClass,!0),e?(Ke=!0,n._loopId=setInterval(n._emulateDragOver,50)):(b(document,"mouseup",n._onDrop),b(document,"touchend",n._onDrop),b(document,"touchcancel",n._onDrop),i&&(i.effectAllowed="move",a.setData&&a.setData.call(n,i,d)),E(document,"drop",n),f(d,"transform","translateZ(0)")),ve=!0,n._dragStartId=Ge(n._dragStarted.bind(n,e,t)),E(document,"selectstart",n),xe=!0,window.getSelection().removeAllRanges(),Pe&&f(document.body,"user-select","none")},_onDragOver:function(t){var e=this.el,n=t.target,i,a,r,o=this.options,s=o.group,l=p.active,c=He===s,h=o.sort,u=A||l,I,m=this,v=!1;if(yt)return;function y(Se,gn){L(Se,m,z({evt:t,isOwner:c,axis:I?"vertical":"horizontal",revert:r,dragRect:i,targetRect:a,canSort:h,fromSortable:u,target:n,completed:O,onMove:function(Mt,mn){return Xe(w,e,d,i,Mt,C(Mt),t,mn)},changed:G},gn))}function U(){y("dragOverAnimationCapture"),m.captureAnimationState(),m!==u&&u.captureAnimationState()}function O(Se){return y("dragOverCompleted",{insertion:Se}),Se&&(c?l._hideClone():l._showClone(m),m!==u&&(N(d,A?A.options.ghostClass:l.options.ghostClass,!1),N(d,o.ghostClass,!0)),A!==m&&m!==p.active?A=m:m===p.active&&A&&(A=null),u===m&&(m._ignoreWhileAnimating=n),m.animateAll(function(){y("dragOverAnimationComplete"),m._ignoreWhileAnimating=null}),m!==u&&(u.animateAll(),u._ignoreWhileAnimating=null)),(n===d&&!d.animated||n===e&&!n.animated)&&(me=null),!o.dragoverBubble&&!t.rootEl&&n!==document&&(d.parentNode[F]._isOutsideThisEl(t.target),!Se&&ce(t)),!o.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),v=!0}function G(){R=H(d),te=H(d,o.draggable),M({sortable:m,name:"change",toEl:e,newIndex:R,newDraggableIndex:te,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),n=B(n,o.draggable,e,!0),y("dragOver"),p.eventCanceled)return v;if(d.contains(t.target)||n.animated&&n.animatingX&&n.animatingY||m._ignoreWhileAnimating===n)return O(!1);if(Ke=!1,l&&!o.disabled&&(c?h||(r=D!==w):A===this||(this.lastPutMode=He.checkPull(this,l,d,t))&&s.checkPut(this,l,d,t))){if(I=this._getDirection(t,n)==="vertical",i=C(d),y("dragOverValid"),p.eventCanceled)return v;if(r)return D=w,U(),this._hideClone(),y("revert"),p.eventCanceled||(de?w.insertBefore(d,de):w.appendChild(d)),O(!0);var T=Ot(e,o.draggable);if(!T||Kn(t,I,this)&&!T.animated){if(T===d)return O(!1);if(T&&e===t.target&&(n=T),n&&(a=C(n)),Xe(w,e,d,i,n,a,t,!!n)!==!1)return U(),T&&T.nextSibling?e.insertBefore(d,T.nextSibling):e.appendChild(d),D=e,G(),O(!0)}else if(T&&qn(t,I,this)){var ae=Ie(e,0,o,!0);if(ae===d)return O(!1);if(n=ae,a=C(n),Xe(w,e,d,i,n,a,t,!1)!==!1)return U(),e.insertBefore(d,ae),D=e,G(),O(!0)}else if(n.parentNode===e){a=C(n);var X=0,re,we=d.parentNode!==e,ue=!jn(d.animated&&d.toRect||i,n.animated&&n.toRect||a,I),$=I?"top":"left",J=Rt(n,"top","top")||Rt(d,"top","top"),Ne=J?J.scrollTop:void 0;me!==n&&(re=a[$],ke=!1,Ye=!ue&&o.invertSwap||we),X=Vn(t,n,a,I,ue?1:o.swapThreshold,o.invertedSwapThreshold==null?o.swapThreshold:o.invertedSwapThreshold,Ye,me===n);var W;if(X!==0){var fe=H(d);do fe-=X,W=D.children[fe];while(W&&(f(W,"display")==="none"||W===g))}if(X===0||W===n)return O(!1);me=n,Me=X;var oe=n.nextElementSibling,Q=!1;Q=X===1;var le=Xe(w,e,d,i,n,a,t,Q);if(le!==!1)return(le===1||le===-1)&&(Q=le===1),yt=!0,setTimeout(Wn,30),U(),Q&&!oe?e.appendChild(d):n.parentNode.insertBefore(d,Q?oe:n),J&&an(J,0,Ne-J.scrollTop),D=d.parentNode,re!==void 0&&!Ye&&(Ue=Math.abs(re-C(n)[$])),G(),O(!0)}if(e.contains(d))return O(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){b(document,"mousemove",this._onTouchMove),b(document,"touchmove",this._onTouchMove),b(document,"pointermove",this._onTouchMove),b(document,"dragover",ce),b(document,"mousemove",ce),b(document,"touchmove",ce)},_offUpEvents:function(){var t=this.el.ownerDocument;b(t,"mouseup",this._onDrop),b(t,"touchend",this._onDrop),b(t,"pointerup",this._onDrop),b(t,"pointercancel",this._onDrop),b(t,"touchcancel",this._onDrop),b(document,"selectstart",this)},_onDrop:function(t){var e=this.el,n=this.options;if(R=H(d),te=H(d,n.draggable),L("drop",this,{evt:t}),D=d&&d.parentNode,R=H(d),te=H(d,n.draggable),p.eventCanceled){this._nulling();return}ve=!1,Ye=!1,ke=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),It(this.cloneId),It(this._dragStartId),this.nativeDraggable&&(b(document,"drop",this),b(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Pe&&f(document.body,"user-select",""),f(d,"transform",""),t&&(xe&&(t.cancelable&&t.preventDefault(),!n.dropBubble&&t.stopPropagation()),g&&g.parentNode&&g.parentNode.removeChild(g),(w===D||A&&A.lastPutMode!=="clone")&&S&&S.parentNode&&S.parentNode.removeChild(S),d&&(this.nativeDraggable&&b(d,"dragend",this),dt(d),d.style["will-change"]="",xe&&!ve&&N(d,A?A.options.ghostClass:this.options.ghostClass,!1),N(d,this.options.chosenClass,!1),M({sortable:this,name:"unchoose",toEl:D,newIndex:null,newDraggableIndex:null,originalEvent:t}),w!==D?(R>=0&&(M({rootEl:D,name:"add",toEl:D,fromEl:w,originalEvent:t}),M({sortable:this,name:"remove",toEl:D,originalEvent:t}),M({rootEl:D,name:"sort",toEl:D,fromEl:w,originalEvent:t}),M({sortable:this,name:"sort",toEl:D,originalEvent:t})),A&&A.save()):R!==Ee&&R>=0&&(M({sortable:this,name:"update",toEl:D,originalEvent:t}),M({sortable:this,name:"sort",toEl:D,originalEvent:t})),p.active&&((R==null||R===-1)&&(R=Ee,te=Oe),M({sortable:this,name:"end",toEl:D,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){L("nulling",this),w=d=D=g=de=S=ze=ne=se=Y=xe=R=te=Ee=Oe=me=Me=A=He=p.dragged=p.ghost=p.clone=p.active=null,Ze.forEach(function(t){t.checked=!0}),Ze.length=lt=st=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":d&&(this._onDragOver(t),Gn(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],e,n=this.el.children,i=0,a=n.length,r=this.options;i<a;i++)e=n[i],B(e,r.draggable,this.el,!1)&&t.push(e.getAttribute(r.dataIdAttr)||Jn(e));return t},sort:function(t,e){var n={},i=this.el;this.toArray().forEach(function(a,r){var o=i.children[r];B(o,this.options.draggable,i,!1)&&(n[a]=o)},this),e&&this.captureAnimationState(),t.forEach(function(a){n[a]&&(i.removeChild(n[a]),i.appendChild(n[a]))}),e&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return B(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var n=this.options;if(e===void 0)return n[t];var i=$e.modifyOption(this,t,e);typeof i<"u"?n[t]=i:n[t]=e,t==="group"&&cn(n)},destroy:function(){L("destroy",this);var t=this.el;t[F]=null,b(t,"mousedown",this._onTapStart),b(t,"touchstart",this._onTapStart),b(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(b(t,"dragover",this),b(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Ve.splice(Ve.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!ne){if(L("hideClone",this),p.eventCanceled)return;f(S,"display","none"),this.options.removeCloneOnHide&&S.parentNode&&S.parentNode.removeChild(S),ne=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(ne){if(L("showClone",this),p.eventCanceled)return;d.parentNode==w&&!this.options.group.revertClone?w.insertBefore(S,d):de?w.insertBefore(S,de):w.appendChild(S),this.options.group.revertClone&&this.animate(d,S),f(S,"display",""),ne=!1}}};function Gn(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function Xe(t,e,n,i,a,r,o,s){var l,c=t[F],h=c.options.onMove,u;return window.CustomEvent&&!Z&&!Fe?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=t,l.dragged=n,l.draggedRect=i,l.related=a||e,l.relatedRect=r||C(e),l.willInsertAfter=s,l.originalEvent=o,t.dispatchEvent(l),h&&(u=h.call(c,l,o)),u}function dt(t){t.draggable=!1}function Wn(){yt=!1}function qn(t,e,n){var i=C(Ie(n.el,0,n.options,!0)),a=on(n.el,n.options,g),r=10;return e?t.clientX<a.left-r||t.clientY<i.top&&t.clientX<i.right:t.clientY<a.top-r||t.clientY<i.bottom&&t.clientX<i.left}function Kn(t,e,n){var i=C(Ot(n.el,n.options.draggable)),a=on(n.el,n.options,g),r=10;return e?t.clientX>a.right+r||t.clientY>i.bottom&&t.clientX>i.left:t.clientY>a.bottom+r||t.clientX>i.right&&t.clientY>i.top}function Vn(t,e,n,i,a,r,o,s){var l=i?t.clientY:t.clientX,c=i?n.height:n.width,h=i?n.top:n.left,u=i?n.bottom:n.right,I=!1;if(!o){if(s&&Ue<c*a){if(!ke&&(Me===1?l>h+c*r/2:l<u-c*r/2)&&(ke=!0),ke)I=!0;else if(Me===1?l<h+Ue:l>u-Ue)return-Me}else if(l>h+c*(1-a)/2&&l<u-c*(1-a)/2)return Zn(e)}return I=I||o,I&&(l<h+c*r/2||l>u-c*r/2)?l>h+c/2?1:-1:0}function Zn(t){return H(d)<H(t)?1:-1}function Jn(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,i=0;n--;)i+=e.charCodeAt(n);return i.toString(36)}function Qn(t){Ze.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var i=e[n];i.checked&&Ze.push(i)}}function Ge(t){return setTimeout(t,0)}function It(t){return clearTimeout(t)}tt&&E(document,"touchmove",function(t){(p.active||ve)&&t.cancelable&&t.preventDefault()}),p.utils={on:E,off:b,css:f,find:tn,is:function(t,e){return!!B(t,e,t,!1)},extend:Fn,throttle:nn,closest:B,toggleClass:N,clone:rn,index:H,nextTick:Ge,cancelNextTick:It,detectDirection:sn,getChild:Ie,expando:F},p.get=function(t){return t[F]},p.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(i){if(!i.prototype||!i.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(i));i.utils&&(p.utils=z(z({},p.utils),i.utils)),$e.mount(i)})},p.create=function(t,e){return new p(t,e)},p.version=kn;var x=[],Ce,wt,St=!1,ht,ut,Je,Ae;function ei(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(e){var n=e.originalEvent;this.sortable.nativeDraggable?E(document,"dragover",this._handleAutoScroll):this.options.supportPointer?E(document,"pointermove",this._handleFallbackAutoScroll):n.touches?E(document,"touchmove",this._handleFallbackAutoScroll):E(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var n=e.originalEvent;!this.options.dragOverBubble&&!n.rootEl&&this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?b(document,"dragover",this._handleAutoScroll):(b(document,"pointermove",this._handleFallbackAutoScroll),b(document,"touchmove",this._handleFallbackAutoScroll),b(document,"mousemove",this._handleFallbackAutoScroll)),jt(),We(),$n()},nulling:function(){Je=wt=Ce=St=Ae=ht=ut=null,x.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,n){var i=this,a=(e.touches?e.touches[0]:e).clientX,r=(e.touches?e.touches[0]:e).clientY,o=document.elementFromPoint(a,r);if(Je=e,n||this.options.forceAutoScrollFallback||Fe||Z||Pe){ft(e,this.options,o,n);var s=ie(o,!0);St&&(!Ae||a!==ht||r!==ut)&&(Ae&&jt(),Ae=setInterval(function(){var l=ie(document.elementFromPoint(a,r),!0);l!==s&&(s=l,We()),ft(e,i.options,l,n)},10),ht=a,ut=r)}else{if(!this.options.bubbleScroll||ie(o,!0)===j()){We();return}ft(e,this.options,ie(o,!1),!1)}}},V(t,{pluginName:"scroll",initializeByDefault:!0})}function We(){x.forEach(function(t){clearInterval(t.pid)}),x=[]}function jt(){clearInterval(Ae)}var ft=nn(function(t,e,n,i){if(e.scroll){var a=(t.touches?t.touches[0]:t).clientX,r=(t.touches?t.touches[0]:t).clientY,o=e.scrollSensitivity,s=e.scrollSpeed,l=j(),c=!1,h;wt!==n&&(wt=n,We(),Ce=e.scroll,h=e.scrollFn,Ce===!0&&(Ce=ie(n,!0)));var u=0,I=Ce;do{var m=I,v=C(m),y=v.top,U=v.bottom,O=v.left,G=v.right,T=v.width,ae=v.height,X=void 0,re=void 0,we=m.scrollWidth,ue=m.scrollHeight,$=f(m),J=m.scrollLeft,Ne=m.scrollTop;m===l?(X=T<we&&($.overflowX==="auto"||$.overflowX==="scroll"||$.overflowX==="visible"),re=ae<ue&&($.overflowY==="auto"||$.overflowY==="scroll"||$.overflowY==="visible")):(X=T<we&&($.overflowX==="auto"||$.overflowX==="scroll"),re=ae<ue&&($.overflowY==="auto"||$.overflowY==="scroll"));var W=X&&(Math.abs(G-a)<=o&&J+T<we)-(Math.abs(O-a)<=o&&!!J),fe=re&&(Math.abs(U-r)<=o&&Ne+ae<ue)-(Math.abs(y-r)<=o&&!!Ne);if(!x[u])for(var oe=0;oe<=u;oe++)x[oe]||(x[oe]={});(x[u].vx!=W||x[u].vy!=fe||x[u].el!==m)&&(x[u].el=m,x[u].vx=W,x[u].vy=fe,clearInterval(x[u].pid),(W!=0||fe!=0)&&(c=!0,x[u].pid=setInterval((function(){i&&this.layer===0&&p.active._onTouchMove(Je);var Q=x[this.layer].vy?x[this.layer].vy*s:0,le=x[this.layer].vx?x[this.layer].vx*s:0;typeof h=="function"&&h.call(p.dragged.parentNode[F],le,Q,t,Je,x[this.layer].el)!=="continue"||an(x[this.layer].el,le,Q)}).bind({layer:u}),24))),u++}while(e.bubbleScroll&&I!==l&&(I=ie(I,!1)));St=c}},30),un=function(t){var e=t.originalEvent,n=t.putSortable,i=t.dragEl,a=t.activeSortable,r=t.dispatchSortableEvent,o=t.hideGhostForTarget,s=t.unhideGhostForTarget;if(e){var l=n||a;o();var c=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,h=document.elementFromPoint(c.clientX,c.clientY);s(),l&&!l.el.contains(h)&&(r("spill"),this.onSpill({dragEl:i,putSortable:n}))}};function Dt(){}Dt.prototype={startIndex:null,dragStart:function(t){var e=t.oldDraggableIndex;this.startIndex=e},onSpill:function(t){var e=t.dragEl,n=t.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var i=Ie(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(e,i):this.sortable.el.appendChild(e),this.sortable.animateAll(),n&&n.animateAll()},drop:un},V(Dt,{pluginName:"revertOnSpill"});function pt(){}pt.prototype={onSpill:function(t){var e=t.dragEl,n=t.putSortable,i=n||this.sortable;i.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),i.animateAll()},drop:un},V(pt,{pluginName:"removeOnSpill"}),p.mount(new ei),p.mount(pt,Dt);const nt=new Set,ti={ghostClass:"calcite-sortable--ghost",chosenClass:"calcite-sortable--chosen",dragClass:"calcite-sortable--drag",fallbackClass:"calcite-sortable--fallback"};function ni(t){if(pn(t))return;fn(t),nt.add(t);const e="id",{group:n,handleSelector:i,dragSelector:a,sortDisabled:r}=t;t.sortable=p.create(t.el,{dataIdAttr:e,swapThreshold:.5,...ti,...!!a&&{draggable:a},...!!n&&{sort:!r,group:{name:n,...!!t.canPull&&{pull:(o,s,l,{newDraggableIndex:c,oldDraggableIndex:h})=>t.canPull({toEl:o.el,fromEl:s.el,dragEl:l,newIndex:c,oldIndex:h})},...!!t.canPut&&{put:(o,s,l,{newDraggableIndex:c,oldDraggableIndex:h})=>t.canPut({toEl:o.el,fromEl:s.el,dragEl:l,newIndex:c,oldIndex:h})}}},onMove:({from:o,dragged:s,to:l,related:c})=>{t.onDragMove&&t.onDragMove({fromEl:o,dragEl:s,toEl:l,relatedEl:c})},handle:i,filter:`${i}[disabled]`,onStart:({from:o,item:s,to:l,newDraggableIndex:c,oldDraggableIndex:h})=>{xt.active=!0,ii(),t.onDragStart({fromEl:o,dragEl:s,toEl:l,newIndex:c,oldIndex:h})},onEnd:({from:o,item:s,to:l,newDraggableIndex:c,oldDraggableIndex:h})=>{xt.active=!1,ai(),t.onDragEnd({fromEl:o,dragEl:s,toEl:l,newIndex:c,oldIndex:h})},onSort:({from:o,item:s,to:l,newDraggableIndex:c,oldDraggableIndex:h})=>{t.onDragSort({fromEl:o,dragEl:s,toEl:l,newIndex:c,oldIndex:h})}})}function fn(t){var e;pn(t)||(nt.delete(t),(e=t.sortable)==null||e.destroy(),t.sortable=null)}const xt={active:!1};function pn(t){return t.dragEnabled&&xt.active}function ii(){Array.from(nt).forEach(t=>t.onGlobalDragStart())}function ai(){Array.from(nt).forEach(t=>t.onGlobalDragEnd())}const q={container:"container",table:"table",scrim:"scrim",stack:"stack",tableContainer:"table-container",sticky:"sticky-pos",assistiveText:"assistive-text",containerHeight:"container-height"},gt={filterNoResults:"filter-no-results",filterActionsStart:"filter-actions-start",filterActionsEnd:"filter-actions-end"},ri=Pt`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:block}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.container{position:relative;background-color:var(--calcite-list-background-color, var(--calcite-color-foreground-1))}.container-height{block-size:100%}.table-container{box-sizing:border-box;display:flex;inline-size:100%;flex-direction:column;background-color:transparent}.table-container *{box-sizing:border-box}.table{inline-size:100%}.stack{--calcite-stack-padding-inline: 0;--calcite-stack-padding-block: 0}.sticky-pos{position:sticky;inset-block-start:0px;z-index:var(--calcite-z-index-sticky);background-color:var(--calcite-list-background-color, var(--calcite-color-foreground-1))}.assistive-text{position:absolute;inline-size:1px;block-size:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}:host([hidden]){display:none}[hidden]{display:none}`,oi=`${vt}, ${De}`,et=class et extends Tt{constructor(){super(),this.dragSelector=De,this.focusableItems=[],this.handleSelector="calcite-sort-handle",this.listItems=[],this.listItemGroups=[],this.mutationObserver=En("mutation",()=>{this.willPerformFilter=!0,this.updateListItemsDebounced()}),this.cancelable=Wt()(this),this.updateListItemsDebounced=Vt(this.updateListItems,zt.nextTick),this.visibleItems=[],this.willFilterEmit=!1,this.willPerformFilter=!1,this.messages=qt({blocking:!0}),this.focusSetter=Kt()(this),this.dataForFilter=[],this.hasFilterActionsEnd=!1,this.hasFilterActionsStart=!1,this.hasFilterNoResults=!1,this.sortHandleMenuItems=[],this.disabled=!1,this.dragEnabled=!1,this.filterEnabled=!1,this.filteredData=[],this.filteredItems=[],this.interactionMode="interactive",this.loading=!1,this.displayMode="flat",this.scale="m",this.selectedItems=[],this.selectionAppearance="icon",this.selectionMode="none",this.sortDisabled=!1,this.calciteInternalListDefaultSlotChange=ee({cancelable:!1}),this.calciteListChange=ee({cancelable:!1}),this.calciteListDragEnd=ee({cancelable:!1}),this.calciteListDragStart=ee({cancelable:!1}),this.calciteListFilter=ee({cancelable:!1}),this.calciteListMoveHalt=ee({cancelable:!1}),this.calciteListOrderChange=ee({cancelable:!1}),this.listen("calciteInternalListItemToggle",this.handleCalciteListItemToggle),this.listen("calciteInternalFocusPreviousItem",this.handleCalciteInternalFocusPreviousItem),this.listen("calciteInternalListItemActive",this.handleCalciteInternalListItemActive),this.listen("calciteListItemSelect",this.handleCalciteListItemSelect),this.listen("calciteInternalAssistiveTextChange",this.handleCalciteInternalAssistiveTextChange),this.listen("calciteListItemSortHandleBeforeOpen",this.updateListItemsDebounced),this.listen("calciteSortHandleReorder",this.handleSortReorder),this.listen("calciteSortHandleMove",this.handleSortMove),this.listen("calciteSortHandleAdd",this.handleSortAdd),this.listen("calciteInternalListItemSelect",this.handleCalciteInternalListItemSelect),this.listen("calciteInternalListItemSelectMultiple",this.handleCalciteInternalListItemSelectMultiple),this.listen("calciteInternalListItemChange",this.handleCalciteInternalListItemChange),this.listen("calciteInternalListItemGroupDefaultSlotChange",this.handleCalciteInternalListItemGroupDefaultSlotChange)}get hasActiveFilter(){return this.filterEnabled&&this.filterText&&this.filteredItems.length!==this.visibleItems.length}get showNoResultsContainer(){return this.filterEnabled&&this.filterText&&this.hasFilterNoResults&&this.visibleItems.length&&!this.filteredItems.length}async setFocus(e){return this.focusSetter(()=>this.filterEnabled?this.filterEl:this.focusableItems.find(n=>n.active),e)}emitOrderChangeEvent(e){this.calciteListOrderChange.emit(e)}connectedCallback(){super.connectedCallback(),this.connectObserver(),this.willPerformFilter=!0,this.updateListItemsDebounced(),this.setUpSorting(),this.setParentList(),this.setListItemGroups(),this.cancelable.add(this.updateListItemsDebounced)}async load(){this.handleInteractionModeWarning()}willUpdate(e){(e.has("filterText")||e.has("filterProps")||e.has("filterPredicate"))&&this.performFilter(),(e.has("filterEnabled")&&(this.hasUpdated||this.filterEnabled!==!1)||e.has("group")||e.has("sortDisabled")&&(this.hasUpdated||this.sortDisabled!==!1)||e.has("dragEnabled")&&(this.hasUpdated||this.dragEnabled!==!1)||e.has("selectionMode")&&(this.hasUpdated||this.selectionMode!=="none")||e.has("selectionAppearance")&&(this.hasUpdated||this.selectionAppearance!=="icon")||e.has("displayMode")&&this.hasUpdated||e.has("scale")&&this.hasUpdated||e.has("canPull")&&this.hasUpdated||e.has("canPut")&&this.hasUpdated||e.has("filterPredicate")&&this.hasUpdated)&&this.handleListItemChange()}updated(){Ut(this)}disconnectedCallback(){super.disconnectedCallback(),this.disconnectObserver(),fn(this)}updateListItems(){this.updateGroupItems();const{selectionAppearance:e,selectionMode:n,interactionMode:i,dragEnabled:a,el:r,filterEl:o,displayMode:s,scale:l,sortDisabled:c,sortHandleMenuItems:h}=this,u=Array.from(this.el.querySelectorAll(De)),I=r,m=Array.from(I.children).filter(Re);if(u.forEach(v=>{v.scale=l,v.selectionAppearance=e,v.selectionMode=n,v.interactionMode=i,v.closest(it)===r&&(v.moveToItems=h.filter(y=>this.validateSortMenuItem({type:"move",fromEl:I,toEl:y.element,dragEl:v,newIndex:0,oldIndex:m.indexOf(v)})),v.addToItems=this.sortHandleMenuItems.filter(y=>this.validateSortMenuItem({type:"add",fromEl:I,toEl:y.element,dragEl:v,newIndex:0,oldIndex:m.indexOf(v)})),v.dragHandle=a,v.displayMode=s,v.sortDisabled=c)}),this.parentListEl){this.setUpSorting();return}this.listItems=u,this.filterEnabled&&this.willPerformFilter&&(this.willPerformFilter=!1,this.dataForFilter=this.getItemData(),o&&(o.items=this.dataForFilter,this.filterAndUpdateData())),this.visibleItems=this.listItems.filter(v=>!v.closed&&!v.hidden),this.updateFilteredItems(),this.borderItems(),this.focusableItems=this.filteredItems.filter(v=>!v.disabled),this.setActiveListItem(),this.updateSelectedItems(),this.setUpSorting()}handleListItemChange(){this.willPerformFilter=!0,this.updateListItemsDebounced()}handleCalciteListItemToggle(e){this.parentListEl||(e.stopPropagation(),this.borderItems())}handleCalciteInternalFocusPreviousItem(e){if(this.parentListEl)return;e.stopPropagation();const{focusableItems:n}=this,i=n.findIndex(a=>a.active)-1;n[i]&&this.focusRow(n[i])}handleCalciteInternalListItemActive(e){if(this.parentListEl)return;e.stopPropagation();const n=e.target,{listItems:i}=this;i.forEach(a=>{a.active=a===n})}handleCalciteListItemSelect(){this.parentListEl||this.updateSelectedItems(!0)}handleCalciteInternalAssistiveTextChange(e){this.assistiveText=e.detail.message,e.stopPropagation()}handleSortReorder(e){this.parentListEl||e.defaultPrevented||(e.preventDefault(),this.handleReorder(e))}handleSortAdd(e){this.parentListEl||e.defaultPrevented||(e.preventDefault(),this.handleAdd(e))}handleSortMove(e){this.parentListEl||e.defaultPrevented||(e.preventDefault(),this.handleMove(e))}handleCalciteInternalListItemSelect(e){if(this.parentListEl)return;e.stopPropagation();const n=e.target,{listItems:i,selectionMode:a}=this;n.selected&&(a==="single"||a==="single-persist")&&i.forEach(r=>r.selected=r===n),this.updateSelectedItems()}handleCalciteInternalListItemSelectMultiple(e){if(this.parentListEl)return;e.stopPropagation();const{target:n,detail:i}=e,{focusableItems:a,lastSelectedInfo:r}=this,o=n;if(i.selectMultiple&&r){const s=a.indexOf(o),l=a.indexOf(r.selectedItem),c=Math.min(l,s),h=Math.max(l,s);a.slice(c,h+1).forEach(u=>u.selected=r.selected)}else this.lastSelectedInfo={selectedItem:o,selected:o.selected}}handleCalciteInternalListItemChange(e){this.parentListEl||(e.stopPropagation(),this.updateListItemsDebounced())}handleCalciteInternalListItemGroupDefaultSlotChange(e){e.stopPropagation()}connectObserver(){var e;(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0})}disconnectObserver(){var e;(e=this.mutationObserver)==null||e.disconnect()}setUpSorting(){const{dragEnabled:e,defaultSlotEl:n}=this;e&&(n&&yn(n),ni(this))}onGlobalDragStart(){this.disconnectObserver()}onGlobalDragEnd(){this.connectObserver()}onDragEnd(e){this.calciteListDragEnd.emit(e)}onDragStart(e){e.dragEl.sortHandleOpen=!1,this.calciteListDragStart.emit(e)}onDragSort(e){this.setParentList(),this.updateListItemsDebounced(),this.calciteListOrderChange.emit(e)}setParentList(){var e;this.parentListEl=(e=this.el.parentElement)==null?void 0:e.closest(it)}handleDefaultSlotChange(){this.parentListEl&&this.calciteInternalListDefaultSlotChange.emit()}setListItemGroups(){this.listItemGroups=Array.from(this.el.querySelectorAll(vt))}handleFilterActionsStartSlotChange(e){this.hasFilterActionsStart=he(e)}handleFilterActionsEndSlotChange(e){this.hasFilterActionsEnd=he(e)}handleFilterNoResultsSlotChange(e){this.hasFilterNoResults=he(e)}setActiveListItem(){const{focusableItems:e}=this;e.some(n=>n.active)||e[0]&&(e[0].active=!0)}async updateSelectedItems(e=!1){await this.updateComplete,this.selectedItems=this.visibleItems.filter(n=>n.selected),e&&this.calciteListChange.emit()}filterElements({el:e,filteredItems:n,visibleParents:i}){const a=!i.has(e)&&!n.includes(e);e.filterHidden=a;const r=e.parentElement.closest(oi);r&&(a||i.add(r),this.filterElements({el:r,filteredItems:n,visibleParents:i}))}allParentListItemsExpanded(e){var i;const n=(i=e.parentElement)==null?void 0:i.closest(De);if(n){if(!n.expanded)return!1}else return!0;return this.allParentListItemsExpanded(n)}borderItems(){const e=this.visibleItems.filter(n=>!n.filterHidden&&this.allParentListItemsExpanded(n));e.forEach(n=>n.bordered=n!==e[e.length-1])}updateFilteredItems(){const{visibleItems:e,filteredData:n,filterText:i,filterPredicate:a}=this,r=e==null?void 0:e.filter(l=>e.every(c=>c===l||!l.contains(c))),o=a?e.filter(a):i?n.map(l=>l.el):e||[],s=new WeakSet;r.forEach(l=>this.filterElements({el:l,filteredItems:o,visibleParents:s})),this.filteredItems=o,this.willFilterEmit&&(this.willFilterEmit=!1,this.calciteListFilter.emit())}updateFilteredData(){const{filterEl:e}=this;e&&(e.filteredItems&&(this.filteredData=e.filteredItems),this.updateListItemsDebounced())}async filterAndUpdateData(){var e;await((e=this.filterEl)==null?void 0:e.filter(this.filterText)),this.updateFilteredData()}get effectiveFilterProps(){return this.filterProps?this.filterProps.filter(e=>e!=="el"):["description","label","metadata","heading"]}performFilter(){const{filterEl:e,filterText:n,effectiveFilterProps:i}=this;e&&(e.value=n,e.filterProps=i,this.filterAndUpdateData())}setDefaultSlotEl(e){this.defaultSlotEl=e}setFilterEl(e){this.filterEl=e,this.performFilter()}handleFilterChange(e){e.stopPropagation();const{value:n}=e.currentTarget;this.filterText=n,this.willFilterEmit=!0,this.updateFilteredData()}getItemData(){return this.listItems.map(e=>({label:e.label,description:e.description,metadata:e.metadata,heading:this.getGroupHeading(e),el:e}))}getGroupHeading(e){return this.listItemGroups.filter(n=>n.contains(e)).map(n=>n.heading)}updateGroupItems(){const{el:e,group:n,scale:i}=this,a=bn(e),r=n?Array.from(a.querySelectorAll(`${it}[group="${n}"]`)).filter(o=>!o.disabled&&o.dragEnabled):[];this.sortHandleMenuItems=r.map(o=>({element:o,label:o.label??o.id,id:In()})),Array.from(this.el.querySelectorAll(vt)).forEach(o=>{o.scale=i})}focusRow(e){const{focusableItems:n}=this;e&&(n.forEach(i=>i.active=i===e),e.setFocus())}isNavigable(e){var i;const n=(i=e.parentElement)==null?void 0:i.closest(De);return n?n.expanded&&this.isNavigable(n):!0}handleListKeydown(e){if(e.defaultPrevented||this.parentListEl)return;const{key:n}=e,i=this.focusableItems.filter(r=>this.isNavigable(r)),a=i.findIndex(r=>r.active);if(n==="ArrowDown"){e.preventDefault();const r=e.target===this.filterEl?0:a+1;i[r]&&this.focusRow(i[r])}else if(n==="ArrowUp"){if(e.preventDefault(),a===0&&this.filterEnabled){this.filterEl.setFocus();return}const r=a-1;i[r]&&this.focusRow(i[r])}else if(n==="Home"){e.preventDefault();const r=i[0];r&&this.focusRow(r)}else if(n==="End"){e.preventDefault();const r=i[i.length-1];r&&this.focusRow(r)}}handleInteractionModeWarning(){this.interactionMode==="static"&&this.selectionMode!=="none"&&this.selectionAppearance==="border"&&console.warn('selection-appearance="border" requires interaction-mode="interactive"')}validateSortMenuItem({fromEl:e,toEl:n,dragEl:i,newIndex:a,oldIndex:r,type:o}){var c,h;if(!e||!n||n===e||i.contains(n))return!1;const s=((c=e.canPull)==null?void 0:c.call(e,{toEl:n,fromEl:e,dragEl:i,newIndex:a,oldIndex:r}))??!0,l=((h=n.canPut)==null?void 0:h.call(n,{toEl:n,fromEl:e,dragEl:i,newIndex:a,oldIndex:r}))??!0;return(o==="add"?s==="clone":s===!0)&&l}handleAdd(e){const{addTo:n}=e.detail,i=e.target,a=i==null?void 0:i.parentElement,r=n.element,o=Array.from(a.children).filter(Re).indexOf(i),s=0;if(!this.validateSortMenuItem({type:"add",fromEl:a,toEl:r,dragEl:i,newIndex:s,oldIndex:o}))return;i.sortHandleOpen=!1,this.disconnectObserver();const l=i.cloneNode();r.prepend(l),kt(i),this.updateListItemsDebounced(),this.connectObserver();const c={dragEl:i,fromEl:a,toEl:r,newIndex:s,oldIndex:o};this.calciteListOrderChange.emit(c),r.emitOrderChangeEvent(c)}handleMove(e){const{moveTo:n}=e.detail,i=e.target,a=i==null?void 0:i.parentElement,r=n.element,o=Array.from(a.children).filter(Re).indexOf(i),s=0;if(!this.validateSortMenuItem({type:"move",fromEl:a,toEl:r,dragEl:i,newIndex:s,oldIndex:o}))return;i.sortHandleOpen=!1,this.disconnectObserver(),r.prepend(i),kt(i),this.updateListItemsDebounced(),this.connectObserver();const l={dragEl:i,fromEl:a,toEl:r,newIndex:s,oldIndex:o};this.calciteListOrderChange.emit(l),r.emitOrderChangeEvent(l)}handleReorder(e){const{reorder:n}=e.detail,i=e.target,a=i==null?void 0:i.parentElement;if(!a)return;i.sortHandleOpen=!1;const r=Array.from(a.children).filter(Re),o=r.length-1,s=r.indexOf(i);let l=s;switch(n){case"top":l=0;break;case"bottom":l=o;break;case"up":l=s===0?0:s-1;break;case"down":l=s===o?o:s+1;break}this.disconnectObserver();const c=n==="up"||n==="top"?r[l]:r[l].nextSibling;a.insertBefore(i,c),this.updateListItemsDebounced(),this.connectObserver(),this.calciteListOrderChange.emit({dragEl:i,fromEl:a,toEl:a,newIndex:l,oldIndex:s})}render(){const{loading:e,label:n,disabled:i,dataForFilter:a,filterEnabled:r,filterPlaceholder:o,filterText:s,filterLabel:l,hasFilterActionsStart:c,hasFilterActionsEnd:h,effectiveFilterProps:u}=this;return Gt({disabled:this.disabled,children:_`<div class=${k({[q.container]:!0,[q.containerHeight]:this.listItems.length<1&&e})}>${this.dragEnabled?_`<span aria-live=assertive class=${k(q.assistiveText)}>${this.assistiveText}</span>`:null}${this.renderItemAriaLive()}${e?_`<calcite-scrim class=${k(q.scrim)} .loading=${e}></calcite-scrim>`:null}<div .ariaBusy=${e} .ariaLabel=${n||""} class=${k(q.table)} @keydown=${this.handleListKeydown} role=treegrid>${r||c||h?_`<div class=${k(q.sticky)} role=rowgroup><div role=row><div role=columnheader><calcite-stack class=${k(q.stack)}><slot name=${gt.filterActionsStart} @slotchange=${this.handleFilterActionsStartSlotChange} slot=${be.actionsStart}></slot><calcite-filter .ariaLabel=${o} .disabled=${i} .filterProps=${u} .items=${a} .label=${l} @calciteFilterChange=${this.handleFilterChange} .placeholder=${o} .scale=${this.scale} .value=${s} ${mt(this.setFilterEl)}></calcite-filter><slot name=${gt.filterActionsEnd} @slotchange=${this.handleFilterActionsEndSlotChange} slot=${be.actionsEnd}></slot></calcite-stack></div></div></div>`:null}<div class=${k(q.tableContainer)} role=rowgroup><slot @slotchange=${this.handleDefaultSlotChange} ${mt(this.setDefaultSlotEl)}></slot></div></div><div aria-live=polite data-test-id=no-results-container .hidden=${!this.showNoResultsContainer}><slot name=${gt.filterNoResults} @slotchange=${this.handleFilterNoResultsSlotChange}></slot></div></div>`})}renderItemAriaLive(){const{messages:e,filteredItems:n,parentListEl:i,messages:{_lang:a},numberingSystem:r}=this;return Lt.numberFormatOptions={locale:a,numberingSystem:r},i?null:_`<div aria-live=polite class=${k(q.assistiveText)}>${this.hasActiveFilter?Te("aria-filter-enabled",_`<div>${e.filterEnabled}</div>`):null}${Te("aria-item-count",_`<div>${e.total.replace("{count}",Lt.localize(n.length.toString()))}</div>`)}${n.length?Te("aria-item-list",_`<ol>${n.map(o=>_`<li>${o.label}</li>`)}</ol>`):null}</div>`}};et.properties={assistiveText:[16,{},{state:!0}],dataForFilter:[16,{},{state:!0}],hasFilterActionsEnd:[16,{},{state:!0}],hasFilterActionsStart:[16,{},{state:!0}],hasFilterNoResults:[16,{},{state:!0}],sortHandleMenuItems:[16,{},{state:!0}],canPull:[0,{},{attribute:!1}],canPut:[0,{},{attribute:!1}],disabled:[7,{},{reflect:!0,type:Boolean}],dragEnabled:[7,{},{reflect:!0,type:Boolean}],filterEnabled:[7,{},{reflect:!0,type:Boolean}],filterPredicate:[0,{},{attribute:!1}],filterLabel:[3,{},{reflect:!0}],filterPlaceholder:[3,{},{reflect:!0}],filterProps:[0,{},{attribute:!1}],filterText:[3,{},{reflect:!0}],filteredData:[0,{},{attribute:!1}],filteredItems:[0,{},{attribute:!1}],group:[3,{},{reflect:!0}],interactionMode:[3,{},{reflect:!0}],label:1,loading:[7,{},{reflect:!0,type:Boolean}],messageOverrides:[0,{},{attribute:!1}],displayMode:[3,{},{reflect:!0}],numberingSystem:1,scale:[3,{},{reflect:!0}],selectedItems:[0,{},{attribute:!1}],selectionAppearance:[3,{},{reflect:!0}],selectionMode:[3,{},{reflect:!0}],sortDisabled:[7,{},{reflect:!0,type:Boolean}]},et.styles=ri;let Ct=et;At("calcite-list",Ct);export{Ct as List};
