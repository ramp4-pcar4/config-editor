import{v as n,I as p,t as m,c9 as S,dD as x,Y as C,J as k,U as P,aa as H,W as K,a5 as W,X as G,eu as N}from"./index-BcWBQvu1.js";import{a as D}from"./labelingInfo-D9WqyhOx-D7dpFku2.js";import{i as V}from"./Field-Cj6Pz3TI-Cf5yuLDE.js";const _=[["binary","application/octet-stream","bin",""]];function At(t,e){return L(e.name,(t==null?void 0:t.supportedFormats)??[])!=null}function Rt(t,e){if(!t)return!1;const s=J(e,t.supportedFormats??[]);return s!=null&&t.editFormats.includes(s)}function M(t,e){return b(X(t,e))}function O(t,e){return b(L(t,e))}function St(t,e){return z(Z(t,e))}function J(t,e){return O(t.name,e)??M(t.type,e)}function T(t,e,s){return M(t,s)??O(e,s)}function j({supportedFormats:t}){return T("model/gltf-binary","glb",t)}function xt(t){const e=j(t);return e!=null&&t.editFormats.includes(e)}function Y({supportedFormats:t}){return T("model/gltf+json","gltf",t)}function $(t){if(!t)return null;const e=j(t),s=Y(t);let o=null;for(const i of t.queryFormats){if(i===e)return i;i===s&&(o=i)}return o}function Qt({supportedFormats:t}){return T("application/esri3do-SR_world","wld",t)}function bt({supportedFormats:t}){return T("application/esri3do-SR_prj","prj",t)}function Q(t){return[..._,...t]}function Z(t,e){return Q(e).find(s=>b(s)===t)}function X(t,e){const s=t.toLowerCase();return Q(e).find(o=>z(o)===s)}function L(t,e){const s=t.toLowerCase();return Q(e).find(o=>tt(o).some(i=>s.endsWith(i)))}function b(t){return t==null?void 0:t[0]}function z(t){return t==null?void 0:t[1].toLowerCase()}function tt(t){return(t==null?void 0:t[2].split(",").map(e=>e.toLowerCase()))??[]}function Et(t){var e;return(e=t.tables)==null?void 0:e.find(s=>s.role==="assetMaps")}function et(t){return"portalItem"in t}const It=t=>{let e=class extends t{get apiKey(){var s;return this._isOverridden("apiKey")?this._get("apiKey"):et(this)?(s=this.portalItem)==null?void 0:s.apiKey:null}set apiKey(s){s!=null?this._override("apiKey",s):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return n([p({type:String})],e.prototype,"apiKey",null),e=n([m("esri.layers.mixins.APIKeyMixin")],e),e};var R;let y=R=class extends C{constructor(t){super(t),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new H}clone(){return new R({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};n([p({type:String,json:{write:{isRequired:!0}}})],y.prototype,"floorField",void 0),n([p({json:{read:!1,write:!1}})],y.prototype,"viewAllMode",void 0),n([p({json:{read:!1,write:!1}})],y.prototype,"viewAllLevelIds",void 0),y=R=n([m("esri.layers.support.LayerFloorInfo")],y);const Bt=y,E=new S({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),I=new S({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let a=class extends x.ClonableMixin(C){constructor(t){super(t),this.cardinality=null,this.catalogId=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};n([p({json:{read:E.read,write:E.write}})],a.prototype,"cardinality",void 0),n([p({json:{name:"catalogID"}})],a.prototype,"catalogId",void 0),n([p({json:{read:!0,write:!0}})],a.prototype,"composite",void 0),n([p({json:{read:!0,write:!0}})],a.prototype,"id",void 0),n([p({json:{read:!0,write:!0}})],a.prototype,"keyField",void 0),n([p({json:{read:!0,write:!0}})],a.prototype,"keyFieldInRelationshipTable",void 0),n([p({json:{read:!0,write:!0}})],a.prototype,"name",void 0),n([p({json:{read:!0,write:!0}})],a.prototype,"relatedTableId",void 0),n([p({json:{read:!0,write:!0}})],a.prototype,"relationshipTableId",void 0),n([p({json:{read:I.read,write:I.write}})],a.prototype,"role",void 0),a=n([m("esri.layers.support.Relationship")],a);const Dt=a;function r(t,e,s){return!!q(t,e,s)}function w(t,e,s){return q(t,e,s)}function q(t,e,s){return t&&t.hasOwnProperty(e)?t[e]:s}const st={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function rt(t){var s;const e=(s=t==null?void 0:t.supportedSpatialAggregationStatistics)==null?void 0:s.map(o=>o.toLowerCase());return{envelope:!!(e!=null&&e.includes("envelopeaggregate")),centroid:!!(e!=null&&e.includes("centroidaggregate")),convexHull:!!(e!=null&&e.includes("convexhullaggregate"))}}function g(t,e){var s,o;return!!((o=(s=t==null?void 0:t.supportedOperationsWithCacheHint)==null?void 0:s.map(i=>i.toLowerCase()))!=null&&o.includes(e.toLowerCase()))}function ot(t){var s;const e=(s=t==null?void 0:t.supportedStatisticTypes)==null?void 0:s.map(o=>o.toLowerCase());return{count:!!(e!=null&&e.includes("count")),sum:!!(e!=null&&e.includes("sum")),min:!!(e!=null&&e.includes("min")),max:!!(e!=null&&e.includes("max")),avg:!!(e!=null&&e.includes("avg")),var:!!(e!=null&&e.includes("var")),stddev:!!(e!=null&&e.includes("stddev")),percentileContinuous:!!(e!=null&&e.includes("percentile_continuous")),percentileDiscrete:!!(e!=null&&e.includes("percentile_discrete")),envelope:!!(e!=null&&e.includes("envelopeaggregate")),centroid:!!(e!=null&&e.includes("centroidaggregate")),convexHull:!!(e!=null&&e.includes("convexhullaggregate"))}}function nt(t){var s;const e=(s=t==null?void 0:t.supportedNormalizationTypes)==null?void 0:s.map(o=>o.toLowerCase());return{field:!!(e!=null&&e.includes("field")),log:!!(e!=null&&e.includes("log")),naturalLog:!!(e!=null&&e.includes("naturallog")),percentOfTotal:!!(e!=null&&e.includes("percentoftotal")),squareRoot:!!(e!=null&&e.includes("squareroot"))}}function Mt(t,e){return{analytics:it(t),attachment:pt(t),data:at(t),metadata:ut(t),operations:lt(t.capabilities,t,e),query:dt(t,e),queryAttributeBins:mt(t),queryRelated:ct(t),queryTopFeatures:yt(t),editing:ft(t)}}function it(t){return{supportsCacheHint:g(t.advancedQueryCapabilities,"queryAnalytics")}}function pt(t){const e=t.attachmentProperties,s={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:g(t.advancedQueryCapabilities,"queryAttachments"),supportsOrderByFields:r(t.advancedQueryCapabilities,"supportsQueryAttachmentOrderByFields",!1),supportsResize:r(t,"supportsAttachmentsResizing",!1)};return e&&Array.isArray(e)&&e.forEach(o=>{const i=st[o.name];i&&(s[i]=!!o.isEnabled)}),s}function at(t){return{isVersioned:r(t,"isDataVersioned",!1),isBranchVersioned:r(t,"isDataBranchVersioned",!1),supportsAttachment:r(t,"hasAttachments",!1),supportsM:r(t,"hasM",!1),supportsZ:r(t,"hasZ",!1)}}function ut(t){return{supportsAdvancedFieldProperties:r(t,"supportsFieldDescriptionProperty",!1)}}function lt(t,e,s){const o=t?t.toLowerCase().split(",").map(U=>U.trim()):[],i=s?K(s):null,d=o.includes(i!=null&&i.serverType==="MapServer"?"data":"query"),c=o.includes("editing")&&!e.datesInUnknownTimezone;let f=c&&o.includes("create"),h=c&&o.includes("delete"),v=c&&o.includes("update");const A=o.includes("changetracking"),F=e.advancedQueryCapabilities;return c&&!(f||h||v)&&(f=h=v=!0),{supportsCalculate:r(e,"supportsCalculate",!1),supportsTruncate:r(e,"supportsTruncate",!1),supportsValidateSql:r(e,"supportsValidateSql",!1),supportsAdd:f,supportsDelete:h,supportsEditing:c,supportsChangeTracking:A,supportsQuery:d,supportsQueryAnalytics:r(F,"supportsQueryAnalytic",!1),supportsQueryAttachments:r(F,"supportsQueryAttachments",!1),supportsQueryBins:r(F,"supportsQueryBins",!1),supportsQueryTopFeatures:r(F,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:r(e,"supportsAttachmentsResizing",!1),supportsSync:o.includes("sync"),supportsUpdate:v,supportsExceedsLimitStatistics:r(e,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:r(e,"supportsAsyncConvert3D",!1)}}function dt(t,e){const s=t.advancedQueryCapabilities,o=t.ownershipBasedAccessControlForFeatures,i=t.archivingInfo,d=t.currentVersion,c=e==null?void 0:e.includes("MapServer"),f=!c||d>=W("mapserver-pbf-version-support"),h=G(e),v=new Set((t.supportedQueryFormats??"").split(",").map(A=>A.toLowerCase().trim()));return{maxRecordCount:w(t,"maxRecordCount",void 0),maxRecordCountFactor:w(t,"maxRecordCountFactor",void 0),standardMaxRecordCount:w(t,"standardMaxRecordCount",void 0),supportedSpatialAggregationStatistics:rt(s),supportsCacheHint:r(s,"supportsQueryWithCacheHint",!1)||g(s,"query"),supportsCentroid:r(s,"supportsReturningGeometryCentroid",!1),supportsCompactGeometry:h,supportsCurrentUser:r(s,"supportsCurrentUserQueries",!1),supportsDefaultSpatialReference:r(s,"supportsDefaultSR",!1),supportsDisjointSpatialRelationship:r(s,"supportsDisjointSpatialRel",!1),supportsDistance:r(s,"supportsQueryWithDistance",!1),supportsDistinct:r(s,"supportsDistinct",t.supportsAdvancedQueries),supportsExtent:r(s,"supportsReturningQueryExtent",!1),supportsFormatPBF:f&&v.has("pbf"),supportsFullTextSearch:r(s,"supportsFullTextSearch",!1),supportsGeometryProperties:r(s,"supportsReturningGeometryProperties",!1),supportsHavingClause:r(s,"supportsHavingClause",!1),supportsHistoricMoment:r(i,"supportsQueryWithHistoricMoment",!1),supportsMaxRecordCountFactor:r(s,"supportsMaxRecordCountFactor",!1),supportsOrderBy:r(s,"supportsOrderBy",t.supportsAdvancedQueries),supportsPagination:r(s,"supportsPagination",!1),supportsPercentileStatistics:r(s,"supportsPercentileStatistics",!1),supportsQuantization:r(t,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:r(t,"supportsQuantizationEditMode",!1),supportsQueryByAnonymous:r(o,"allowAnonymousToQuery",!0),supportsQueryByOthers:r(o,"allowOthersToQuery",!0),supportsQueryGeometry:r(t,"supportsReturningQueryGeometry",!1),supportsResultType:r(s,"supportsQueryWithResultType",!1),supportsReturnMesh:!!$(t.infoFor3D),supportsSpatialAggregationStatistics:r(s,"supportsSpatialAggregationStatistics",!1),supportsSqlExpression:r(s,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:r(t,"useStandardizedQueries",!1),supportsStatistics:r(s,"supportsStatistics",t.supportsStatistics),supportsTopFeaturesQuery:r(s,"supportsTopFeaturesQuery",!1),supportsTrueCurve:r(s,"supportsTrueCurve",!1),tileMaxRecordCount:w(t,"tileMaxRecordCount",void 0)}}function ct(t){const e=t.advancedQueryCapabilities,s=r(e,"supportsAdvancedQueryRelated",!1);return{supportsPagination:r(e,"supportsQueryRelatedPagination",!1),supportsCount:s,supportsOrderBy:s,supportsCacheHint:g(e,"queryRelated")}}function yt(t){return{supportsCacheHint:g(t.advancedQueryCapabilities,"queryTopFilter")}}function mt(t){const e=t?t.queryBinsCapabilities:void 0;return{supportsDate:r(e,"supportsDateBin",!1),supportsFixedInterval:r(e,"supportsFixedIntervalBin",!1),supportsAutoInterval:r(e,"supportsAutoIntervalBin",!1),supportsFixedBoundaries:r(e,"supportsFixedBoundariesBin",!1),supportsStackBy:r(e,"supportsStackBy",!1),supportsSplitBy:r(e,"supportsSplitBy",!1),supportsSnapToData:r(e,"supportsSnapToData",!1),supportsReturnFullIntervalBin:r(e,"supportsReturnFullIntervalBin",!1),supportsFirstDayOfWeek:r(e,"supportsFirstDayOfWeek",!1),supportsNormalization:r(e,"supportsNormalization",!1),supportedStatistics:ot(e),supportedNormalizationTypes:nt(e)}}function ft(t){const e=t.ownershipBasedAccessControlForFeatures,s=t?t.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:r(t,"allowGeometryUpdates",!0),supportsGlobalId:r(t,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:r(t,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:r(t,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:r(t,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:r(t,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:r(e,"allowAnonymousToDelete",!0),supportsDeleteByOthers:r(e,"allowOthersToDelete",!0),supportsUpdateByAnonymous:r(e,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:r(e,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:r(s,"supportsAsyncApplyEdits",!1),zDefault:w(t,"zDefault",void 0)}}function Ot(t){var e;return{operations:{supportsAppend:r(t,"supportsAppend",!1),supportsCoverageQuery:((e=t==null?void 0:t.playbackInfo)==null?void 0:e.klv["0601"])??!1,supportsExportClip:r(t,"supportsExportClip",!1),supportsExportFrameset:r(t,"supportsExportFrameset",!1),supportsMensuration:r(t,"supportsMensuration",!1),supportsUpdate:r(t,"supportsUpdate",!1)}}}function ht(t,e,s){if(!t)return null;const o=t.find(d=>!!d.field);if(!o)return null;const i=new D;return i.read(o,s),[i]}function vt(t,e,s,o){const i=t.find(d=>!!d.field);i&&N(s,[i.toJSON()],e)}const wt={type:[D],json:{origins:{"web-scene":{write:!1,read:!1}},name:"layerDefinition.orderBy",read:{reader:ht},write:{writer:vt}}},jt=t=>{let e=class extends t{constructor(){super(...arguments),this.orderBy=null}};return n([p(wt)],e.prototype,"orderBy",void 0),e=n([m("esri.layers.mixins.OrderedLayer")],e),e},B=new S({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let l=class extends x.ClonableMixin(C){constructor(t){super(t),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};n([p({json:{write:!0}})],l.prototype,"name",void 0),n([p({json:{write:!0}})],l.prototype,"description",void 0),n([p({json:{read:B.read,write:B.write}})],l.prototype,"drawingTool",void 0),n([p({json:{write:!0}})],l.prototype,"prototype",void 0),n([p({json:{write:!0}})],l.prototype,"thumbnail",void 0),l=n([m("esri.layers.support.FeatureTemplate")],l);const gt=l;let u=class extends x.ClonableMixin(C){constructor(t){super(t),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(t){const e={};for(const s of Object.keys(t))e[s]=V(t[s]);return e}writeDomains(t,e){var o;const s={};for(const i of Object.keys(t))t[i]&&(s[i]=(o=t[i])==null?void 0:o.toJSON());e.domains=s}};n([p({json:{write:!0}})],u.prototype,"id",void 0),n([p({json:{write:!0}})],u.prototype,"name",void 0),n([p({json:{write:!0}})],u.prototype,"domains",void 0),n([k("domains")],u.prototype,"readDomains",null),n([P("domains")],u.prototype,"writeDomains",null),n([p({type:[gt],json:{write:!0}})],u.prototype,"templates",void 0),u=n([m("esri.layers.support.FeatureType")],u);const Lt=u;export{Ot as B,jt as I,gt as K,Lt as M,ht as P,wt as U,J as a,j as b,It as c,Rt as e,T as g,bt as i,$ as j,Et as l,Dt as m,Qt as n,xt as r,St as s,At as t,Mt as w,M as x,Bt as y};
