import{ar as O,as as T,av as j,aK as z,az as c,aL as w,aC as s,aM as S,aE as p,aQ as $,aD as A,aY as B,aB as _,aN as I,hK as J,aF as q,aw as V,gZ as F,ax as G,aG as x,aS as N,aH as Q,aJ as U,ay as W,aA as E,gW as X,hm as D,hL as Y,hr as Z,hq as P,aW as ee,aV as ae,ho as ne}from"./index-DiOGazkl.js";import{u as L}from"./marked.esm-DgqJBp_S-BMQxW5MS.js";const te={key:0},le=["content"],se={class:"text-lg text-left flex-grow"},oe=["innerHTML"],re=O({__name:"section",props:{helpSection:{type:Object,required:!0}},setup(r){const{t:g}=j();return(y,o)=>{const u=z("tippy");return r.helpSection.drawn?(c(),w("div",te,[s("div",null,[S((c(),w("button",{type:"button",class:"help-section-header flex items-center py-15 px-25 hover:bg-gray-200 cursor-pointer select-none w-full",onClick:o[0]||(o[0]=i=>y.$emit("expand")),content:p(g)(r.helpSection.expanded?"help.section.collapse":"help.section.expand")},[s("span",se,$(r.helpSection.header),1),s("div",{class:A(["dropdown-icon",{"transform -rotate-180":r.helpSection.expanded}])},o[1]||(o[1]=[s("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},[s("path",{d:"M0 0h24v24H0V0z",fill:"none"}),s("path",{d:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"})],-1)]),2)],8,le)),[[u,{placement:"top-end",hideOnClick:!1}]]),B(J,{name:"help-item",mode:"out-in"},{default:_(()=>[S(s("div",{innerHTML:r.helpSection.info,class:"ramp-markdown section-body px-20 pt-5 ml-10 overflow-hidden"},null,8,oe),[[I,r.helpSection.expanded]])]),_:1})])])):q("",!0)}}}),pe=T(re,[["__scopeId","data-v-7dc61532"]]),ie={class:"h-26 mb-8 mx-8"},de=["placeholder","aria-label"],ce={key:0},fe=O({__name:"screen",props:{panel:{type:Object,required:!0}},setup(r){const g=V("iApi"),y=F(),{t:o}=j(),u=G(()=>y.location),i=x([]),b=x([]),k=x([]),C=x(!1);let h,f;function H(e,t){const a=t.info.split(/(<[^>]*>)/);for(const[n,l]of a.entries())if(n%2===0&&l.toLowerCase().indexOf(e.toLowerCase())>-1)return!0;return!1}function M(e,t){const a=b.value[t].split(/(<[^>]*>)/);let n="";for(const[l,d]of a.entries())l%2===0?n+=d.replace(new RegExp(e,"gi"),v=>`<mark>${v}</mark>`):n+=d;i.value[t].info=n}function R(e,t){h=0,t.forEach((a,n)=>{a.info=b.value[n],a.drawn=H(e,a)||a.header.toLowerCase().indexOf(e.toLowerCase())>-1,h=a.drawn?h+1:h,a.expanded=a.drawn&&e.length>2,a.drawn&&e.length>2&&M(e,n)}),C.value=h===0}function K(e){e.expanded=!e.expanded}return N(()=>{k.value.push(Q(()=>g.language,(e,t)=>{if(e===t)return;const a=new L.Renderer,n=u.value.slice(-1)==="/"?u.value:`${u.value}/`;a.image=(l,d,v)=>(l.indexOf("http")===-1&&(l=`${n}images/`+l),`<img src="${l}" alt="${v}">`),ne.get(`${n}${e}.md`).then(l=>{const d=/^#\s(.*)\n{2}(?:.+|\n(?!\n{2,}))*/gm,v=l.data.replace(new RegExp("\r","g"),"");i.value=[];let m;for(;m=d.exec(v);)i.value.push({header:m[1],info:L(m[0].split(`
`).splice(2).join(`
`),{renderer:a}),drawn:!0,expanded:!1}),b.value.push(L(m[0].split(`
`).splice(2).join(`
`),{renderer:a}))})},{immediate:!0}))}),U(()=>{k.value.forEach(e=>e())}),(e,t)=>{const a=W("panel-screen");return c(),E(a,{panel:r.panel},{header:_(()=>[X($(p(o)("help.title")),1)]),content:_(()=>[s("div",ie,[S(s("input",{type:"search",class:"rv-help-search-bar border-b w-full text-base py-8 outline-none focus:shadow-outline border-gray-600 h-full min-w-0",placeholder:p(o)("help.search"),"onUpdate:modelValue":t[0]||(t[0]=n=>Y(f)?f.value=n:f=n),"aria-label":p(o)("help.search"),onInput:t[1]||(t[1]=n=>R(p(f),i.value)),onKeypress:t[2]||(t[2]=Z(P(()=>{},["prevent"]),["enter"])),enterkeyhint:"done"},null,40,de),[[D,p(f)]])]),C.value?(c(),w("div",ce,[s("p",null,$(p(o)("help.noResults")),1)])):q("",!0),(c(!0),w(ae,null,ee(i.value,(n,l)=>(c(),E(pe,{helpSection:n,key:l,onExpand:d=>K(n)},null,8,["helpSection","onExpand"]))),128))]),_:1},8,["panel"])}}});export{fe as default};
