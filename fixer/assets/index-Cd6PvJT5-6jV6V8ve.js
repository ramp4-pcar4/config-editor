import{fv as p,fw as d,hv as r,fz as f,fA as v,fK as h,fB as u,fM as g,fx as $,fN as m,fD as A,fP as w,fG as _,fU as b,fI as y,g2 as C}from"./index-aQr1pzMk.js";const E={en:{"scrollguard.instructions":"Use ctrl + scroll to zoom the map"},fr:{"scrollguard.instructions":"Utilisez les touches Ctrl et + pour faire un zoom de la carte"}},L={class:"sg-label"},x=p({__name:"map-scrollguard",setup(o){const e=r(),{t:l}=f(),a=v("iApi"),i=h(),c=u(()=>e.enabled);g(()=>{var s;(s=a.$vApp.$el.querySelector(".inner-shell + .esri-view"))==null||s.addEventListener("wheel",n,{capture:!0}),a.event.on($.MAP_CREATED,()=>{var t;(t=a.$vApp.$el.querySelector(".inner-shell + .esri-view"))==null||t.addEventListener("wheel",n,{capture:!0})})}),m(()=>{var s;(s=a.$vApp.$el.querySelector(".inner-shell + .esri-view"))==null||s.removeEventListener("wheel",n,{capture:!0})});const n=s=>{if(!c.value)return;const t=i.value.classList;s.ctrlKey?(t.remove("sg-active"),t.add("sg-scrolling")):(s.stopPropagation(),t.remove("sg-scrolling"),t.add("sg-active"),window.setTimeout(()=>t.remove("sg-active"),2e3))};return(s,t)=>(A(),w("div",{class:"sg",ref_key:"scrollGuard",ref:i},[_("p",L,b(y(l)("scrollguard.instructions")),1)],512))}}),z=d(x,[["__scopeId","data-v-bf6386a4"]]);class q extends C{setEnabled(e){r(this.$vApp.$pinia).enabled=e}_parseConfig(e){r(this.$vApp.$pinia).enabled=(e==null?void 0:e.enabled)||!1}get config(){return super.config}}class S extends q{added(){Object.entries(E).forEach(i=>this.$iApi.$i18n.mergeLocaleMessage(...i)),this._parseConfig(this.config);const e=this.$vApp.$watch(()=>this.config,i=>this._parseConfig(i)),{destroy:l,el:a}=this.mount(z,{app:this.$element});this.$vApp.$el.getElementsByClassName("inner-shell")[0].appendChild(a.childNodes[0]),this.removed=()=>{e(),l(),r(this.$vApp.$pinia).$reset()}}}export{S as default};
