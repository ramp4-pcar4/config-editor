import{fY as g,H as p,b}from"./index-V75RkAZg.js";import{a as N,g as v}from"./FeatureType-MZ846Ius-BEM8LIUn.js";class m{constructor(r,e,s){this.assetName=r,this.assetMimeType=e,this.parts=s}equals(r){return this===r||this.assetName===r.assetName&&this.assetMimeType===r.assetMimeType&&g(this.parts,r.parts,(e,s)=>e.equals(s))}isOnService(r){return this.parts.every(e=>e.isOnService(r))}makeHash(){let r="";for(const e of this.parts)r+=e.partHash;return r}async toBlob(r){const{parts:e}=this;if(e.length===1)return e[0].toBlob(r);const s=await Promise.all(e.map(a=>a.toBlob(r)));return p(r),new Blob(s)}}class B{constructor(r,e){this.partUrl=r,this.partHash=e}equals(r){return this===r||this.partUrl===r.partUrl&&this.partHash===r.partHash}isOnService(r){return this.partUrl.startsWith(`${r.path}/assets/`)}async toBlob(r){const{data:e}=await b(this.partUrl,{responseType:"blob"});return p(r),e}}function U(t){return A(t==null?void 0:t.source)}function u(t){return Array.isArray(t)?t.every(r=>r instanceof m):!1}const c=/^(model\/gltf\+json)|(model\/gltf-binary)$/,l=/\.(gltf|glb)/i;function A(t){return t?Array.isArray(t)?t.some(f):f(t):!1}function f(t){if(t instanceof File){const{type:r,name:e}=t;return c.test(r)||l.test(e)}return c.test(t.assetMimeType)||l.test(t.assetName)}function q(t,r){if(!t)return!1;const{source:e}=t;return H(e,r)}function O(t,r){if(t===r)return!0;const{source:e}=t,{source:s}=r;if(e===s)return!0;if(u(e)&&u(s)){if(e.length!==s.length)return!1;const a=(n,o)=>n.assetName<o.assetName?-1:n.assetName>o.assetName?1:0,i=[...e].sort(a),y=[...s].sort(a);for(let n=0;n<i.length;++n)if(!i[n].equals(y[n]))return!1;return!0}return!1}function H(t,r){if(Array.isArray(t)){const e=t;return e.length>0&&e.every(s=>h(s,r))}return h(t,r)}function h(t,r){return t instanceof m&&t.isOnService(r)}function S(t,r){return t instanceof File?N(t,r):v(t.assetMimeType,t.assetName,r)}function d(t){return Array.isArray(t)?t:[t]}function w(t){return!!t.original}export{S as B,U as H,d as O,w as S,q as T,O as U,m as i,B as v};
