import{ar as E,as as w,a_ as _,av as A,aw as T,aG as d,gl as l,aI as y,at as i,aJ as M,az as x,aL as R,aC as C,aQ as I,aE as L}from"./index-Bq7Udiuc.js";const S={en:{"panguard.instructions":"Use two fingers to pan the map"},fr:{"panguard.instructions":"Utilisez deux doigts pour faire un panoramique de la carte"}},P={class:"pg-label"},$=E({__name:"map-panguard",setup(h){const{t:p}=A(),a=T("iApi"),t=d(),r=d(-1),o=l([]),n=l([]);y(()=>{u(),n.push(a.event.on(i.MAP_CREATED,()=>{u()})),n.push(a.event.on(i.MAP_DESTROYED,()=>{o.forEach(e=>e.remove())})),n.push(a.event.on(i.MAP_REFRESH_START,()=>{o.forEach(e=>e.remove())})),n.push(a.event.on(i.MAP_REFRESH_END,()=>{u()}))}),M(()=>{n.forEach(e=>a.event.off(e)),o.forEach(e=>e.remove())});const u=()=>{const e=new Map;a.geo.map.viewPromise.then(()=>{o.push(a.geo.map.esriView.on("pointer-down",s=>{s.pointerType==="touch"&&e.set(s.pointerId,{x:s.x,y:s.y})})),o.push(a.geo.map.esriView.on(["pointer-up","pointer-leave"],s=>{s.pointerType==="touch"&&window.setTimeout(()=>{e.delete(s.pointerId)},200)})),o.push(a.geo.map.esriView.on("pointer-move",s=>{const{pointerId:v,pointerType:m,x:g,y:f}=s,c=e.get(v);if(!c||m!=="touch"||e.size!==1){t.value.classList.remove("pg-active");return}Math.sqrt(Math.pow(g-c.x,2)+Math.pow(f-c.y,2))<20||(t.value.classList.add("pg-active"),r.value!==-1&&clearTimeout(r.value),r.value=window.setTimeout(()=>{t.value.classList.remove("pg-active")},2e3))}))})};return(e,s)=>(x(),R("div",{class:"pg",ref_key:"panGuard",ref:t},[C("p",P,I(L(p)("panguard.instructions")),1)],512))}}),z=w($,[["__scopeId","data-v-22ab9ef7"]]);class J extends _{added(){Object.entries(S).forEach(t=>this.$iApi.$i18n.mergeLocaleMessage(...t));const{destroy:p,el:a}=this.mount(z,{app:this.$element});this.$vApp.$el.getElementsByClassName("inner-shell")[0].appendChild(a.childNodes[0]),this.removed=()=>{p()}}}export{J as default};
