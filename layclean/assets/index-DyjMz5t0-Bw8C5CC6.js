import{ar as p,as as d,hl as r,av as v,aw as h,aG as u,ax as g,aI as $,at as m,aJ as f,az as A,aL as _,aC as w,aQ as C,aE as E,a_ as b}from"./index-CBMEoBe1.js";const y={en:{"scrollguard.instructions":"Use ctrl + scroll to zoom the map"},fr:{"scrollguard.instructions":"Utilisez les touches Ctrl et + pour faire un zoom de la carte"}},L={class:"sg-label"},x=p({__name:"map-scrollguard",setup(o){const e=r(),{t:l}=v(),t=h("iApi"),i=u(),c=g(()=>e.enabled);$(()=>{var s;(s=t.$vApp.$el.querySelector(".inner-shell + .esri-view"))==null||s.addEventListener("wheel",n,{capture:!0}),t.event.on(m.MAP_CREATED,()=>{var a;(a=t.$vApp.$el.querySelector(".inner-shell + .esri-view"))==null||a.addEventListener("wheel",n,{capture:!0})})}),f(()=>{var s;(s=t.$vApp.$el.querySelector(".inner-shell + .esri-view"))==null||s.removeEventListener("wheel",n,{capture:!0})});const n=s=>{if(!c.value)return;const a=i.value.classList;s.ctrlKey?(a.remove("sg-active"),a.add("sg-scrolling")):(s.stopPropagation(),a.remove("sg-scrolling"),a.add("sg-active"),window.setTimeout(()=>a.remove("sg-active"),2e3))};return(s,a)=>(A(),_("div",{class:"sg",ref_key:"scrollGuard",ref:i},[w("p",L,C(E(l)("scrollguard.instructions")),1)],512))}}),z=d(x,[["__scopeId","data-v-bf6386a4"]]);class S extends b{setEnabled(e){r(this.$vApp.$pinia).enabled=e}_parseConfig(e){r(this.$vApp.$pinia).enabled=(e==null?void 0:e.enabled)||!1}get config(){return super.config}}class J extends S{added(){Object.entries(y).forEach(i=>this.$iApi.$i18n.mergeLocaleMessage(...i)),this._parseConfig(this.config);const e=this.$vApp.$watch(()=>this.config,i=>this._parseConfig(i)),{destroy:l,el:t}=this.mount(z,{app:this.$element});this.$vApp.$el.getElementsByClassName("inner-shell")[0].appendChild(t.childNodes[0]),this.removed=()=>{e(),l(),r(this.$vApp.$pinia).$reset()}}}export{J as default};
