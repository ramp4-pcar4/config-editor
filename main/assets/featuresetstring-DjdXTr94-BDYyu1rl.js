import{v as d,I as u,E as w,_ as m,U as a,ab as y,H as b,A as f,X as l,K as h,ac as A,Q as T,ad as I,D as g,y as x,G as D}from"./Dictionary-B0UU8VOj-BnHchtFP.js";import{c}from"./enum-D3e-PyKo-Bl5V5br5.js";import{h as v}from"./shared-DXZ65waB-BM-XH3jC.js";import"./TimeOnly-BFfVS_ja-C4MPGwCM.js";import"./index-BeTPrQ6f.js";import"./UnknownTimeZone-DzO8gKMe-d6rtFXqm.js";import"./ImmutableArray-CiJxhY8_-Kqx7aWRu.js";import"./number-BsNxu9Ry-D0lLRJTw.js";import"./Field-Dn1Bgq7n-CJCGLoNR.js";import"./fieldType-DvW5hpfa-DYUbIy_X.js";function p(i,t){return i&&i.domain?i.domain.type==="coded-value"||i.domain.type==="codedValue"?f.convertObjectToArcadeDictionary({type:"codedValue",name:i.domain.name,dataType:v[i.field.type],codedValues:i.domain.codedValues.map(e=>({name:e.name,code:e.code}))},l(t)):f.convertObjectToArcadeDictionary({type:"range",name:i.domain.name,dataType:v[i.field.type],min:i.domain.minValue,max:i.domain.maxValue},l(t)):null}function S(i){i.mode==="async"&&(i.functions.domain=function(t,e){return i.standardFunctionAsync(t,e,async(r,s,n)=>{if(d(n,2,3,t,e),u(n[0]))return p(w(n[0],m(n[1]),n[2]===void 0?void 0:n[2]),t);if(a(n[0]))return await n[0]._ensureLoaded(),p(y(m(n[1]),n[0],null,n[2]===void 0?void 0:n[2]),t);throw new c(t,"InvalidParameter",e)})},i.functions.subtypes=function(t,e){return i.standardFunctionAsync(t,e,async(r,s,n)=>{if(d(n,1,1,t,e),u(n[0])){const o=b(n[0]);return o?f.convertObjectToArcadeDictionary(o,l(t)):null}if(a(n[0])){await n[0]._ensureLoaded();const o=n[0].subtypeMetaData();return o?f.convertObjectToArcadeDictionary(o,l(t)):null}throw new c(t,"InvalidParameter",e)})},i.functions.domainname=function(t,e){return i.standardFunctionAsync(t,e,async(r,s,n)=>{if(d(n,2,4,t,e),u(n[0]))return h(n[0],m(n[1]),n[2],n[3]===void 0?void 0:n[3]);if(a(n[0])){await n[0]._ensureLoaded();const o=y(m(n[1]),n[0],null,n[3]===void 0?void 0:n[3]);return A(o,n[2])}throw new c(t,"InvalidParameter",e)})},i.signatures.push({name:"domainname",min:2,max:4}),i.functions.domaincode=function(t,e){return i.standardFunctionAsync(t,e,async(r,s,n)=>{if(d(n,2,4,t,e),u(n[0]))return T(n[0],m(n[1]),n[2],n[3]===void 0?void 0:n[3]);if(a(n[0])){await n[0]._ensureLoaded();const o=y(m(n[1]),n[0],null,n[3]===void 0?void 0:n[3]);return I(o,n[2])}throw new c(t,"InvalidParameter",e)})},i.signatures.push({name:"domaincode",min:2,max:4}),i.functions.text=function(t,e){return i.standardFunctionAsync(t,e,async(r,s,n)=>{if(d(n,1,2,t,e),a(n[0])){const o=g(n[1],"");if(o==="")return n[0].castToText();if(o.toLowerCase()==="schema")return n[0].convertToText("schema",r.abortSignal);if(o.toLowerCase()==="featureset")return n[0].convertToText("featureset",r.abortSignal);throw new c(t,"InvalidParameter",e)}return x(n[0],n[1])})},i.functions.gdbversion=function(t,e){return i.standardFunctionAsync(t,e,async(r,s,n)=>{if(d(n,1,1,t,e),u(n[0]))return n[0].gdbVersion();if(a(n[0]))return(await n[0].load()).gdbVersion;throw new c(t,"InvalidParameter",e)})},i.functions.schema=function(t,e){return i.standardFunctionAsync(t,e,async(r,s,n)=>{if(d(n,1,1,t,e),a(n[0]))return await n[0].load(),f.convertObjectToArcadeDictionary(n[0].schema(),l(t));if(u(n[0])){const o=D(n[0]);return o?f.convertObjectToArcadeDictionary(o,l(t)):null}throw new c(t,"InvalidParameter",e)})})}export{S as registerFunctions};
