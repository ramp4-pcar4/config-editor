import{m as O,n as f,cd as g,c9 as u,dX as M,bE as N,dY as p,dZ as w,d_ as m,ce as E,q as d,aj as v}from"./index-BeTPrQ6f.js";class _{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(p),this._values=new Map,this.multipleOriginsSupported=!0}clone(s){const e=new _,t=this._originStores[0];t&&t.forEach((i,r)=>{e.set(r,d(i),0)});for(let i=2;i<p;i++){const r=this._originStores[i];r&&r.forEach((o,n)=>{s&&s.has(n)||e.set(n,d(o),i)})}return e}get(s,e){const t=e===void 0?this._values:this._originStores[e];return t?t.get(s):void 0}keys(s){const e=s==null?this._values:this._originStores[s];return e?[...e.keys()]:[]}set(s,e,t=7){let i=this._originStores[t];if(i||(i=new Map,this._originStores[t]=i),i.set(s,e),!this._values.has(s)||this._propertyOriginMap.get(s)<=t){const r=this._values.get(s);return this._values.set(s,e),this._propertyOriginMap.set(s,t),r!==e}return!1}delete(s,e=7){const t=this._originStores[e];if(!t)return;const i=t.get(s);if(t.delete(s),this._values.has(s)&&this._propertyOriginMap.get(s)===e){this._values.delete(s);for(let r=e-1;r>=0;r--){const o=this._originStores[r];if(o&&o.has(s)){this._values.set(s,o.get(s)),this._propertyOriginMap.set(s,r);break}}}return i}has(s,e){const t=e===void 0?this._values:this._originStores[e];return!!t&&t.has(s)}revert(s,e){for(;e>0&&!this.has(s,e);)--e;const t=this._originStores[e],i=t==null?void 0:t.get(s),r=this._values.get(s);return this._values.set(s,i),this._propertyOriginMap.set(s,e),r!==i}originOf(s){return this._propertyOriginMap.get(s)||0}isAtOrigin(s,e){return this.has(s,e)&&this.originOf(s)===e}isBelowOrigin(s,e){return!this.has(s)||this.originOf(s)<e}forEach(s){this._values.forEach(s)}}const y=a=>{const s=a;let e=class extends s{constructor(...t){super(...t);const i=g(this),r=i.store,o=new _;i.store=o,w(i,r,o)}read(t,i){m(this,t,i)}getAtOrigin(t,i){const r=l(this),o=u(i);if(typeof t=="string")return r.get(t,o);const n={};return t.forEach(h=>{n[h]=r.get(h,o)}),n}originOf(t){return E(this.originIdOf(t))}originIdOf(t){return l(this).originOf(t)}revert(t,i){const r=l(this),o=u(i),n=g(this);let h;h=typeof t=="string"?t==="*"?r.keys(o):[t]:t,h.forEach(c=>{n.invalidate(c),r.revert(c,o),n.commit(c)})}};return e=O([f("esri.core.ReadOnlyMultiOriginJSONSupport")],e),e};function l(a){return g(a).store}y(v);const J=a=>{const s=a;let e=class extends s{constructor(...t){super(...t)}clear(t,i="user"){g(this).clearOrigin(t,u(i))}write(t,i){return M(this,t=t||{},i),t}setAtOrigin(t,i,r){g(this).setAtOrigin(t,i,u(r))}removeOrigin(t){const i=S(this),r=u(t),o=i.keys(r);for(const n of o)i.originOf(n)===r&&i.set(n,i.get(n,r),7)}updateOrigin(t,i){const r=S(this),o=u(i),n=N(this,t);for(let h=o+1;h<p;++h)r.delete(t,h);r.set(t,n,o)}toJSON(t){return this.write({},t)}};return e=O([f("esri.core.MultiOriginJSONSupport.WriteableMultiOriginJSONSupport")],e),e.prototype.toJSON.isDefaultToJSON=!0,e};function S(a){return g(a).store}const k=a=>{const s=J(y(a));let e=class extends s{};return e=O([f("esri.core.MultiOriginJSONSupport")],e),e},x=k(v);export{x as A,k as M};
