const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./operators-Cw6qbLnZ-ay1rSQOm.js","./index-BeTPrQ6f.js","./index-BlWAJbpo.css","./OperatorDefinitions-DJdq_wrt-DP7_WWTp.js","./affineTransformOperator-8K2UkJ8a-DPQSRcb1.js","./SimpleGeometryCursor-DSF_YyIm-TAMgMsbK.js","./Point2D-BVUQyGsf-qih0ZuJV.js","./apiConverter-Djde5pBD-Dr3vspB4.js","./Envelope2D-2iYexKQo-BCKocNS7.js","./ProjectionTransformation-BXUROh_s-kKBZ5FDB.js","./Transformation2D-CZCvoz9N-B-IhcWnl.js","./jsonConverter-CiKBkr5U-C590VlCu.js","./operatorGeodesicBuffer-BxfeJ6n7-xXv8MWm6.js","./geodeticCurveType-D_etKnbP-CirnHLSB.js","./geodeticAreaOperator-BDyQy0ZB-CyE_NqA1.js","./geodeticDensifyOperator-qN_9XVZU-BFyR6QQY.js","./operatorGeodeticDensify-BFYOT-9w-C4xAxPOk.js","./geodeticLengthOperator-CMi-Z1ZN-WUImro4E.js","./simplifyOGCOperator-Dbsu-y0W-B5eTtJHX.js","./OperatorSimplifyOGC-LxORArjZ-CAWJzjpM.js","./Transformation-iG4zrQmt-Dgw1FxrI.js","./areaOperator-Ckls68R4-AcYhduMX.js","./operatorBuffer-our-NvtH-3WYMuITD.js","./Bufferer-Dw9Qi4T1-b7ZqVDFH-EKBPZRq9.js","./GeometryCleaner-BEJM7I4l-D17pxNCQ-DWXxThGT.js","./OperatorGeneralize-D1zTV4Nc-6bRWAUT6.js","./centroidOperator-DfaZCnaV-C7n-1aGY.js","./Centroid-DZi-eb9F-DPWB_-En-4bb_hXHb.js","./clipOperator---QfuF-7-Bs9GC0H6.js","./containsOperator-BlGSPZO6-DkFragCI.js","./operatorConvexHull-9kcotdG_-zE-Yh9hK.js","./OperatorCrosses-BYGOixOi-CwHAWObF.js","./cutOperator-m995d7Qd-q8NS3Icc.js","./densifyOperator-BHu30UIi-B0l7RzcC.js","./differenceOperator-DM4qBgat-D8Te2DyZ.js","./distanceOperator-C3n_j88h-CjjOO0Zj.js","./Distance2DCalculator-CXhBP-8I-CW7HDKXX-kSux2duE.js","./equalsOperator-CSD40ihh-BJcSEE8T.js","./generalizeOperator-Ckn1gl-F-BFzFzpr_.js","./operatorGeneralize-y5HJd6VF-CgQ8QA4m.js","./intersectionOperator-DBbIX-3T-B-Daa2MC.js","./operatorIntersection-CQAMPydt-D8fes_2e.js","./intersectsOperator-CJZC9CBi-BzN4JHuK.js","./OperatorIntersects-D3hvPVgP-DsdTZPTQ.js","./labelPointOperator-DHsTrdrG-CCMMdDip.js","./OperatorProximity-BK5Wkstl-DGLNakeV.js","./lengthOperator-BGZzaL7w-DRGNcDGP.js","./OperatorOverlaps-B15SFklF-CX28iUIz.js","./proximityOperator-D2d6T5vq-n3EQLz_w.js","./relateOperator-K3PLPdjn-DMiRVRZh.js","./simplifyOperator-CK8t6p1S-COLMjdqn.js","./operatorSimplify-BRKLCaj2-DisWK8Yh.js","./symmetricDifferenceOperator-DPI0asl9-CrkH4QPI.js","./OperatorTouches-BGI2rDjD-DkrhaVAD.js","./operatorUnion-D8qEBA5Q-R-q4i1vN.js","./OperatorWithin-Du8FizQE-UvGsWnSD.js","./offset-BzJITPd1-CS7dxZr0.js","./unitConversion-Dsm_H0Dm-eZfwiAJA.js","./enum-D3e-PyKo-Bl5V5br5.js","./operatorOffset-0i881SKG-CAnXNGFi.js","./geodeticDistanceOperator-pEgXxoUT-67nD4cnx.js","./geomasync-UH-KK5b6-BQMxpqBg.js","./Dictionary-B0UU8VOj-BnHchtFP.js","./TimeOnly-BFfVS_ja-C4MPGwCM.js","./UnknownTimeZone-DzO8gKMe-d6rtFXqm.js","./ImmutableArray-CiJxhY8_-Kqx7aWRu.js","./shared-DXZ65waB-BM-XH3jC.js","./Field-Dn1Bgq7n-CJCGLoNR.js","./fieldType-DvW5hpfa-DYUbIy_X.js","./number-BsNxu9Ry-D0lLRJTw.js","./portalUtils-BQqUZtd_-DC5noOca.js","./operatorsWorkerConnection-BI0u3kJm-CDhqefZJ.js","./workers-CixlqDQM-CMoJ1YZN.js","./Queue-CK6TduSr-C-T211SM.js","./intl-DRhjUnwt-Dihhq8dq.js","./messages-DQ10DjvF-6kk0dzjG.js","./arcadeEnvironment-CGtXgdl9-Db3WjmFu.js","./Feature-DEFbFbhW-MI6BQTTC.js","./featureConversionUtils-CZmIxyv5-DHwRSztU.js","./OptimizedFeature-C33SioFK-sn7DeAq-.js","./memoryEstimations-C_GUL8g_-JniNFd5l.js","./OptimizedGeometry-BYxlP_oK-DvAqrgO1.js","./OptimizedFeatureSet-Dz5hF8Qm-CgsRgxJh.js","./FieldsIndex-Ds4D9xP7-BiTuE5Z3.js","./timeZoneUtils-CdK7eU4Y-fyhJ3EFx.js","./aiServices-BhAKf1Iw-D6L8gru6.js","./commonProperties-D1Pjvz5u-DHiB1uzW.js","./utils-CRANtbnc-C6zyufvL.js","./WhereClause-DrmAQ3eI-CwdMrUuP.js","./streamLayerUtils-CcwO9-27-DFlbJ4P1.js","./uuid-CFz2qBzH-cIdlpVG-.js","./arcadeAsyncRuntime-CwVF5GE8-DkdlarfO.js","./featureSetUtils-Djc8epG7-B0kYnZBI.js","./SpatialFilter-mqvhBV6T-COxCgKHY.js","./MD5-CXHDUqXT-CMrYdOi6.js","./FeatureLayer-CCD4d2TK-D-vTdTyl.js","./MultiOriginJSONSupport-DNNJhlNT-Bm4fcG4m.js","./layerContainerType-CJrPp4UB-BIF7XAYP.js","./FormTemplate-VNQ04sPR-DwlQPeuM.js","./GraphicOrigin-BZpgptRb-BMZxic91.js","./editsZScale-DcYeqiDn-O8ivdk-A.js","./queryZScale-B66ZWsfS-D7Zc2_Zh.js","./zscale-PLuFqpaL-BIEnWBsg.js","./FeatureSet-BIUKCqNW-D9YRl-VE.js","./APIKeyMixin-DYy2zfLn-D3z7LonQ.js","./ArcGISService-CytDmkiZ-emNrPdED.js","./BlendLayer-D8oJmNCO-A0sTzbOF.js","./jsonUtils-Bl9MVnOR-Be8hf0yA.js","./parser-CXoJuqeV-C7irlk5U.js","./mat4f32-BdRMyjXW-CWt6U0BP.js","./mat4-R0VY9B_E-DoEP887i.js","./CustomParametersMixin-CqtpZgix-ZCd9Um94.js","./DisplayFilteredLayer-Ce0lf91Z-D_UnOF-a.js","./scaleUtils-Ckma21r5-DhwWQymd.js","./displayFilterUtils-BCW-UeaE-CnjPWjFU.js","./EditBusLayer-B5fJK8S9-BfKLF1l7.js","./FeatureEffectLayer-Bw8pqFtl-COIpRlV8.js","./FeatureEffect-xxDa5IRG-DfQBGcCi.js","./FeatureFilter-D0iZ4sKI-BBZH0Xo9.js","./Query-DKLDaFaA-I4zhlfzt.js","./FeatureLayerBase-Ca6xrS5x-bGdb6Ysq.js","./HeightModelInfo-Cjals-AI-DMpn5Tsh.js","./OperationalLayer-Ds0FQSCg-DEUbTcjK.js","./ElevationInfo-tlrAM5SV-D86C1F9d.js","./lengthUtils-CopeXEyE-DjCEitlq.js","./labelingInfo-jIy5P_vY-D8rEl7NY.js","./asyncUtils-Cu__bxqs-ecCTUaGV.js","./SimpleRenderer-DSyBXxyY-CGNZcXII.js","./commonProperties-CYpRbAZr-PcmW9U_y.js","./colorRamps-C5pnMn-A-BSSJ2zvJ.js","./ColorStop-CBXZUZ6o-_LZdJKea.js","./visualVariableUtils-DzY4BXXy-D_1S-x1B.js","./UniqueValueRenderer-4zUMozui-C0Y5GPGV.js","./diffUtils-D3O4EfgX-CznKxD4n.js","./RendererLegendOptions-_ue7FeM0-ROeRce-g.js","./styleUtils-DoTsJ8ze-DHY40A2q.js","./RelationshipQuery-Cf-_aN1Z-mThKQ0J2.js","./NormalizationBinParametersMixin-DuEmpnQx-abBJwXnQ.js","./labelUtils-BLNYRrPe-Cv1ZZjAO.js","./LayerFloorInfo-krwL5pHA-C-NgvUlX.js","./multiLayerServiceUtils-DET2KhOE-Bw336UOx.js","./Relationship-YLK2X_M_-G1AF1PCW.js","./serviceCapabilitiesUtils-Cm1_ZgDe-BkUSvtE4.js","./infoFor3D-BeWnZejW-CnXQECJx.js","./portalItemUtils-C12I5owR-Iiaf4oEu.js","./projectionUtils-CsX1UTBu-DsZaU4xz.js","./projectBuffer-CMNsPBq1-CMpE7Jo3.js","./FeatureReductionLayer-fRVzjp_G-BAykrsM3.js","./FeatureReductionSelection-BYDlwJ5u-CQfZ-i0-.js","./jsonUtils-5anAqpiW-BnpEYfRl.js","./typeUtils-BTAsL08--B1VjqkPN.js","./ClassBreaksRenderer-AH_lBYRG-CIe34emV.js","./LRUCache-CvGiiws0-B3io5Jp4.js","./MemCache-TG-MhOJy-BkjKRNR7.js","./DictionaryScriptEvaluator-DrG0wIBl-D15kCKMK.js","./Version-DSJSGSLA-Cg87msWM.js","./ArcadeExpression-BGPPS6z--7N6gsB31.js","./utils-CIm5uQvO-CtKf129F.js","./defaultCIMValues-BWu-APou-XI-Li77m.js","./heatmapUtils-Bf2yRyEN-BAQJ1IRB.js","./vec42-DHp-FUwt-Br7hmYJs.js","./vec4f64-DD-nkcCV-CSNWKRqG.js","./OrderedLayer-BpzV2gVo-B7bag0TS.js","./OrderByInfo-D0eImi6z-Dv2CatL0.js","./PortalLayer-B52AUJ7S-DLZhjKpz.js","./PortalItem-BrQqKoE_-zs2bKsCH.js","./RefreshableLayer-BEBm0YMm-CEdeDwog.js","./ScaleRangeLayer-DkZwCH6_-C95kTMqN.js","./TemporalLayer-D43PzGI2-BVfMl_Wx.js","./TimeInfo-BoebCPJB-ubr6IA4W.js","./TrackableLayer-B6TLWZyJ-CFqD-uca.js","./FeatureTemplate-DN-lMS1p-caqKKpFl.js","./FeatureType-BaXpcfS--CXOAiC-Q.js","./fieldProperties-B4tOVJmv-DQSPMAAi.js","./TitleCreator-BrV1DW5U-CU3Ke3Vx.js","./sanitizerUtils-CrdmaILo-DztC6Qnx.js","./versionUtils-DTdDMzVZ-DiRjVmBE.js","./styleUtils-BQqoMgIA-U43o5V_5.js","./popupUtils-D0h6TFFF-Bch8GtRu.js","./featuresetbase-BKsM454t-Cb9lQ5YO.js","./NetworkElement-Dj3I3Jn3-9bqqwBZw.js","./featuresetgeom-fxpf-YMD-DWMoyBCr.js","./featuresetstats-oafxe6NR-Dqwcq1Ah.js","./featuresetstring-DjdXTr94-BDYyu1rl.js","./knowledgegraph-3-CWvzvg-DXUm1KuC.js","./project-DVSYTwmh-D1oJHtjg.js","./utils-t279O251-BBk6rV0U.js","./Relationship-CxaLXN7a-hGAJ5x7P.js"])))=>i.map(i=>d[i]);
import{ao as Ei,_ as Fe,ah as vi,bW as Qn,v as qa,be as Gt,c$ as bi,s as v,r as k,z as W,P as mr,d0 as Ja,d1 as Qa,d2 as Ii,b5 as P,w as H,aR as Me,aj as Xa,cB as qt,bf as Ya,cX as kn,B as z,d3 as es,C as pe,bm as le,H as fe,D as ct,F as Ge,d4 as ts,a4 as Et,d5 as ns,b8 as Si,d6 as pt,d7 as Pt,d8 as et,d9 as pr,da as rs,db as Dr,dc as gr,dd as Wr,de as Zr,df as wr,dg as yr,dh as is,l as ki,di as Qe,dj as as,dk as Bi,dl as un,dm as Ti,dn as Ni,dp as ss,dq as os,dr as us,ds as ls,dt as $e}from"./index-BeTPrQ6f.js";import{e as B,n as yn}from"./arcadeEnvironment-CGtXgdl9-Db3WjmFu.js";import{S as Dt,C as Y,k as xr,u as Xn,F as K,x as ae,a as xn,A as b,_ as A,L as Pe,$ as Re,b as Oe,w as R,c as Mi,J as Pi,g as E,I as J,e as m,R as Ri,h as Ce,f as Oi,i as Li,n as ln,q as gt,M as _i,t as Hr,v as p,X as I,j as q,l as Ee,m as Z,P as ne,D as j,o as cs,p as fs,r as Ui,s as cn,y as Jt,z as Yn,B as hs,E as ds,Q as ms,K as ps,G as Ds,H as Bn,N as Q,Y as tt,T as M,O as gs,V as ws,Z as ys,a0 as Tn,a1 as qe,a2 as Nn,a3 as nt,a4 as $i,U as xs,W as Fs,a5 as Kr}from"./Dictionary-B0UU8VOj-BnHchtFP.js";import{c as f,m as Mn,d as V,E as Le,b as As,s as Cs,p as Es}from"./enum-D3e-PyKo-Bl5V5br5.js";import{I as se,a as be}from"./Feature-DEFbFbhW-MI6BQTTC.js";import{T as vs}from"./aiServices-BhAKf1Iw-D6L8gru6.js";import{n as bs}from"./ImmutableArray-CiJxhY8_-Kqx7aWRu.js";import{i as $,u as Ie,I as Se,m as Qt,H as we}from"./TimeOnly-BFfVS_ja-C4MPGwCM.js";import{h as qr}from"./shared-DXZ65waB-BM-XH3jC.js";import{L as Is,i as Ss}from"./WhereClause-DrmAQ3eI-CwdMrUuP.js";import{i as Jr}from"./streamLayerUtils-CcwO9-27-DFlbJ4P1.js";import{convertFromSpatialReferenceUnit as kt,toAreaUnit as Qr,convert as Bt,squareMeters as ks,toLengthUnit as he,meters as Xt,convertToSpatialReferenceUnit as Pn}from"./unitConversion-Dsm_H0Dm-eZfwiAJA.js";import{M as Bs}from"./number-BsNxu9Ry-D0lLRJTw.js";import{r as Yt}from"./uuid-CFz2qBzH-cIdlpVG-.js";import"./UnknownTimeZone-DzO8gKMe-d6rtFXqm.js";import"./featureConversionUtils-CZmIxyv5-DHwRSztU.js";import"./OptimizedFeature-C33SioFK-sn7DeAq-.js";import"./memoryEstimations-C_GUL8g_-JniNFd5l.js";import"./OptimizedGeometry-BYxlP_oK-DvAqrgO1.js";import"./OptimizedFeatureSet-Dz5hF8Qm-CgsRgxJh.js";import"./FieldsIndex-Ds4D9xP7-BiTuE5Z3.js";import"./timeZoneUtils-CdK7eU4Y-fyhJ3EFx.js";import"./commonProperties-D1Pjvz5u-DHiB1uzW.js";import"./utils-CRANtbnc-C6zyufvL.js";import"./Field-Dn1Bgq7n-CJCGLoNR.js";import"./fieldType-DvW5hpfa-DYUbIy_X.js";let Fn=class{constructor(e,t){this._moduleSingletons=e,this._syntaxModules=t}loadLibrary(e){if(this._syntaxModules==null)return null;const t=this._syntaxModules[e];return t?{syntax:t.script,uri:t.uri}:null}};const zi=()=>mr.getLogger("esri.arcade.compilerUtils");function de(e,t,n){var r;switch(e.type){case"VariableDeclaration":for(const a of e.declarations)t.add(B(a.id));return;case"BlockStatement":for(const a of e.body)de(a,t,n);return;case"ExportNamedDeclaration":{const a=new Set;de(e.declaration,a,n);for(const u of a)t.add(u),n.add(u);return}case"ForInStatement":case"ForOfStatement":return e.left.type==="VariableDeclaration"&&de(e.left,t,n),void de(e.body,t,n);case"ForStatement":return((r=e.init)==null?void 0:r.type)==="VariableDeclaration"&&de(e.init,t,n),void de(e.body,t,n);case"FunctionDeclaration":return void t.add(B(e.id));case"IfStatement":return de(e.consequent,t,n),void(e.alternate&&de(e.alternate,t,n));case"ImportDeclaration":for(const a of e.specifiers)t.add(B(a.local));return;case"WhileStatement":return void de(e.body,t,n);case"BreakStatement":case"ContinueStatement":case"EmptyStatement":case"ExpressionStatement":case"ReturnStatement":return}}function Fr(e){const t=new Set,n=new Set;for(const r of e.body)de(r,t,n);if(!Ja(n,t))throw zi().error(`Internal error: exported undeclared symbols {${Array.from(Qa(n,t)).join(", ")}}`),new V(null,"NeverReach",null);return{globals:t,exports:n}}function ji(e){const t=new Set,n=new Set;if(de(e.body,t,n),n.size>0)throw zi().error(`Internal error: cannot export locals {${Array.from(n.values()).join(", ")}}`),new V(null,"NeverReach",null);return t}const Ts={point:["hasZ","hasM","spatialReference","type","x","y","z","m"],multipoint:["hasZ","hasM","spatialReference","type","points"],polyline:["hasZ","hasM","spatialReference","type","paths"],polygon:["hasZ","hasM","spatialReference","type","rings"],extent:["hasZ","hasM","spatialReference","type","xmin","xmax","ymin","ymax","zmin","zmax","mmin","mmax"]};function Ar(e){return Ts[e.type]}let ke=0;function Xe(e,t,n,r,a=1){let u;switch(t=t.toLowerCase()){case"hasz":{const i=e.hasZ;return i!==void 0&&i}case"hasm":{const i=e.hasM;return i!==void 0&&i}case"spatialreference":{let i=e.spatialReference._arcadeCacheId;if(i===void 0){let o=!0;Xa.isFrozen(e.spatialReference)&&(o=!1),o&&(ke++,e.spatialReference._arcadeCacheId=ke,i=ke)}const s=new b({__proto__:null,wkt:e.spatialReference.wkt,wkid:e.spatialReference.wkid});return i!==void 0&&(s._arcadeCacheId="SPREF"+i.toString()),s}}switch(e.type){case"extent":switch(t){case"xmin":case"xmax":case"ymin":case"ymax":case"zmin":case"zmax":case"mmin":case"mmax":{const i=e[t];return i!==void 0?i:null}case"type":return"Extent"}break;case"polygon":switch(t){case"rings":return u=e.cache._arcadeCacheId,u===void 0&&(ke++,u=ke,e.cache._arcadeCacheId=u),new Hr(e.rings,e.spatialReference,e.hasZ===!0,e.hasM===!0,u);case"type":return"Polygon"}break;case"point":switch(t){case"x":case"y":case"z":case"m":return e[t]??null;case"type":return"Point"}break;case"polyline":switch(t){case"paths":return u=e.cache._arcadeCacheId,u===void 0&&(ke++,u=ke,e.cache._arcadeCacheId=u),new Hr(e.paths,e.spatialReference,e.hasZ===!0,e.hasM===!0,u);case"type":return"Polyline"}break;case"multipoint":switch(t){case"points":return u=e.cache._arcadeCacheId,u===void 0&&(ke++,u=ke,e.cache._arcadeCacheId=u),new _i(e.points,e.spatialReference,e.hasZ===!0,e.hasM===!0,u,1);case"type":return"Multipoint"}}if(a===1)throw new f(n,"InvalidIdentifier",r);return a===2?{keystate:"notfound"}:null}function Cr(e,t){let n,r=e;if(r==null)return null;if(k(t))n=t;else if(R(t))n=t.toArray();else{if(t==null)return null;n=[t]}for(const a of n){if(Oe(r)){if(v(a)===!1||!r.hasField(a))return null;r=r.field(a)}else if(Pe(r)){if(v(a)===!1)return null;r=Xe(r,a,null,null,0)}else if(k(r)){if(W(a)===!1)return null;r=a>=0?r[a]:r[r.length+a]}else{if(!R(r)||W(a)===!1)return null;r=a>=0?r.get(a):r.get(r.length()+a)}if(r==null)return null}return r}function Ns(e){return!!Pi(e)||(k(e)?e.length===0:R(e)?e.length()===0:!!Oe(e)&&e.isEmpty())}const Xr={all:{min:2,max:2},time:{min:0,max:4},dateonly:{min:0,max:3},getenvironment:{min:0,max:0},none:{min:2,max:2},any:{min:2,max:2},reduce:{min:2,max:3},map:{min:2,max:2},filter:{min:2,max:2},fromcodepoint:{min:1,max:-1},fromcharcode:{min:1,max:-1},tocodepoint:{min:1,max:2},tocharcode:{min:1,max:2},concatenate:{min:0,max:-1},expects:{min:1,max:-1},getfeatureset:{min:1,max:2},week:{min:1,max:2},fromjson:{min:1,max:1},length3d:{min:1,max:2},tohex:{min:1,max:1},hash:{min:1,max:1},timezone:{min:1,max:1},timezoneoffset:{min:1,max:1},changetimezone:{min:2,max:2},isoweek:{min:1,max:1},isoweekday:{min:1,max:1},hasvalue:{min:2,max:2},isomonth:{min:1,max:1},isoyear:{min:1,max:1},resize:{min:2,max:3},slice:{min:0,max:-1},splice:{min:0,max:-1},push:{min:2,max:2},pop:{min:1,max:1},includes:{min:2,max:2},array:{min:0,max:2},front:{min:1,max:1},back:{min:1,max:1},insert:{min:3,max:3},erase:{min:2,max:2},split:{min:2,max:4},guid:{min:0,max:1},standardizeguid:{min:2,max:2},today:{min:0,max:0},angle:{min:2,max:3},bearing:{min:2,max:3},urlencode:{min:1,max:1},now:{min:0,max:0},timestamp:{min:0,max:0},day:{min:1,max:1},month:{min:1,max:1},year:{min:1,max:1},hour:{min:1,max:1},second:{min:1,max:1},millisecond:{min:1,max:1},minute:{min:1,max:1},weekday:{min:1,max:1},toutc:{min:1,max:1},tolocal:{min:1,max:1},date:{min:0,max:8},datediff:{min:2,max:4},dateadd:{min:2,max:3},trim:{min:1,max:1},text:{min:1,max:2},left:{min:2,max:2},right:{min:2,max:2},mid:{min:2,max:3},upper:{min:1,max:1},proper:{min:1,max:2},lower:{min:1,max:1},find:{min:2,max:3},iif:{min:3,max:3},decode:{min:2,max:-1},when:{min:2,max:-1},defaultvalue:{min:2,max:3},isempty:{min:1,max:1},domaincode:{min:2,max:4},domainname:{min:2,max:4},polygon:{min:1,max:1},point:{min:1,max:1},polyline:{min:1,max:1},extent:{min:1,max:1},multipoint:{min:1,max:1},ringisclockwise:{min:1,max:1},geometry:{min:1,max:1},count:{min:0,max:-1},number:{min:1,max:2},acos:{min:1,max:1},asin:{min:1,max:1},atan:{min:1,max:1},atan2:{min:2,max:2},ceil:{min:1,max:2},floor:{min:1,max:2},round:{min:1,max:2},cos:{min:1,max:1},exp:{min:1,max:1},log:{min:1,max:1},min:{min:0,max:-1},constrain:{min:3,max:3},console:{min:0,max:-1},max:{min:0,max:-1},pow:{min:2,max:2},random:{min:0,max:0},sqrt:{min:1,max:1},sin:{min:1,max:1},tan:{min:1,max:1},abs:{min:1,max:1},isnan:{min:1,max:1},stdev:{min:0,max:-1},average:{min:0,max:-1},mean:{min:0,max:-1},sum:{min:0,max:-1},variance:{min:0,max:-1},distinct:{min:0,max:-1},first:{min:1,max:1},top:{min:2,max:2},boolean:{min:1,max:1},dictionary:{min:0,max:-1},typeof:{min:1,max:1},reverse:{min:1,max:1},replace:{min:3,max:4},sort:{min:1,max:2},feature:{min:1,max:-1},haskey:{min:2,max:2},indexof:{min:2,max:2},disjoint:{min:2,max:2},intersects:{min:2,max:2},touches:{min:2,max:2},crosses:{min:2,max:2},within:{min:2,max:2},contains:{min:2,max:2},overlaps:{min:2,max:2},equals:{min:2,max:2},relate:{min:3,max:3},intersection:{min:2,max:2},union:{min:1,max:2},difference:{min:2,max:2},symmetricdifference:{min:2,max:2},clip:{min:2,max:2},cut:{min:2,max:2},area:{min:1,max:2},areageodetic:{min:1,max:2},length:{min:1,max:2},lengthgeodetic:{min:1,max:2},distancegeodetic:{min:2,max:3},distance:{min:2,max:3},densify:{min:2,max:3},densifygeodetic:{min:2,max:3},generalize:{min:2,max:4},buffer:{min:2,max:3},buffergeodetic:{min:2,max:3},offset:{min:2,max:6},rotate:{min:2,max:3},issimple:{min:1,max:1},simplify:{min:1,max:1},convexhull:{min:1,max:1},centroid:{min:1,max:1},nearestcoordinate:{min:2,max:2},nearestvertex:{min:2,max:2},isselfintersecting:{min:1,max:1},multiparttosinglepart:{min:1,max:1},setgeometry:{min:2,max:2},portal:{min:1,max:1},getuser:{min:0,max:2},subtypes:{min:1,max:1},subtypecode:{min:1,max:1},subtypename:{min:1,max:1},domain:{min:2,max:3},convertdirection:{min:3,max:3},sqltimestamp:{min:1,max:3},schema:{min:1,max:1},measuretocoordinate:{min:2,max:2},distancetocoordinate:{min:2,max:2},pointtocoordinate:{min:2,max:2}},An={functionDefinitions:new Map,constantDefinitions:new Map},Cn={functionDefinitions:new Map,constantDefinitions:new Map};for(const e of["pi","infinity"])Cn.constantDefinitions.set(e,{type:"constant"}),An.constantDefinitions.set(e,{type:"constant"});Cn.constantDefinitions.set("textformatting",{type:"namespace",key:"textformatting",members:[{key:"backwardslash",type:"constant"},{key:"doublequote",type:"constant"},{key:"forwardslash",type:"constant"},{key:"tab",type:"constant"},{key:"singlequote",type:"constant"},{key:"newline",type:"constant"}]}),An.constantDefinitions.set("textformatting",{type:"namespace",key:"textformatting",members:[{key:"backwardslash",type:"constant"},{key:"tab",type:"constant"},{key:"singlequote",type:"constant"},{key:"doublequote",type:"constant"},{key:"forwardslash",type:"constant"},{key:"newline",type:"constant"}]});for(const e in Xr){const t=Xr[e];Cn.functionDefinitions.set(e,{overloads:[{type:"function",parametersInfo:{min:t.min,max:t.max}}]}),An.functionDefinitions.set(e,{overloads:[{type:"function",parametersInfo:{min:t.min,max:t.max}}]})}const Ms=new Set(["attachments","featureset","featuresetbyassociation","featuresetbyid","featuresetbyname","featuresetbyportalitem","featuresetbyrelationshipname","featuresetbyurl","filterbysubtypecode","getfeatureset","getfeaturesetinfo","getuser","knowledgegraphbyportalitem","querygraph"]),Ps=new Set(["translatetext"]),Rs=new Set(["area","areageodetic","buffer","buffergeodetic","centroid","clip","contains","convexhull","crosses","cut","densify","densifygeodetic","difference","disjoint","distance","distancegeodetic","distancetocoordinate","equals","generalize","intersection","intersects","isselfintersecting","issimple","length","length3d","lengthgeodetic","measuretocoordinate","multiparttosinglepart","nearestcoordinate","nearestvertex","offset","overlaps","pointtocoordinate","relate","rotate","simplify","symmetricdifference","touches","union","within"]);function Vi(e,t){var r;const n=t==="sync"?An:Cn;n.functionDefinitions.has(e.name.toLowerCase())?(r=n.functionDefinitions.get(e.name.toLowerCase()))==null||r.overloads.push({type:"function",parametersInfo:{min:e.min,max:e.max}}):n.functionDefinitions.set(e.name.toLowerCase(),{overloads:[{type:"function",parametersInfo:{min:e.min,max:e.max}}]})}function Be(e,t){if(e)for(const n of e)U(n,t)}function U(e,t){if(e&&t(e)!==!1)switch(e.type){case"ImportDeclaration":Be(e.specifiers,t),U(e.source,t);break;case"ExportNamedDeclaration":U(e.declaration,t);break;case"ArrayExpression":Be(e.elements,t);break;case"AssignmentExpression":case"BinaryExpression":case"LogicalExpression":U(e.left,t),U(e.right,t);break;case"BlockStatement":case"Program":Be(e.body,t);break;case"BreakStatement":case"ContinueStatement":case"EmptyStatement":case"Identifier":case"Literal":break;case"CallExpression":U(e.callee,t),Be(e.arguments,t);break;case"ExpressionStatement":U(e.expression,t);break;case"ForInStatement":case"ForOfStatement":U(e.left,t),U(e.right,t),U(e.body,t);break;case"ForStatement":U(e.init,t),U(e.test,t),U(e.update,t),U(e.body,t);break;case"WhileStatement":U(e.test,t),U(e.body,t);break;case"FunctionDeclaration":U(e.id,t),Be(e.params,t),U(e.body,t);break;case"IfStatement":U(e.test,t),U(e.consequent,t),U(e.alternate,t);break;case"MemberExpression":U(e.object,t),U(e.property,t);break;case"ObjectExpression":Be(e.properties,t);break;case"Property":U(e.key,t),U(e.value,t);break;case"ReturnStatement":case"UnaryExpression":case"UpdateExpression":U(e.argument,t);break;case"VariableDeclaration":Be(e.declarations,t);break;case"VariableDeclarator":U(e.id,t),U(e.init,t);break;case"TemplateLiteral":Be(e.expressions,t),Be(e.quasis,t)}}function en(e){return(e==null?void 0:e.type)==="Literal"&&typeof e.value=="string"}function Gi(e,t){let n=!1;const r=t.toLowerCase();return U(e,a=>!n&&(a.type==="Identifier"&&a.name&&a.name.toLowerCase()===r&&(n=!0),!0)),n}function Wi(e){const t=[];return U(e,n=>(n.type==="ImportDeclaration"&&n.source&&n.source.value&&t.push({libname:B(n.specifiers[0].local),source:n.source.value}),!0)),t}function Os(e,t){let n=!1;const r=t.toLowerCase();return U(e,a=>!n&&(a.type!=="CallExpression"||a.callee.type!=="Identifier"||!a.callee.name||a.callee.name.toLowerCase()!==r||(n=!0,!1))),n}function Zi(e){const t=[];return U(e,n=>n.type!=="MemberExpression"||n.object.type!=="Identifier"||((n.property.type==="Identifier"||n.property.type==="Literal"&&typeof n.property.value=="string")&&t.push({varId:B(n.object),memberId:B(n.property)}),!1)),t}function Ls(e){const t=[];return U(e,n=>{if(n.type==="CallExpression"&&n.callee.type==="Identifier")switch(B(n.callee)){case"expects":if(n.arguments.length>1){const[r,...a]=n.arguments;if((r==null?void 0:r.type)==="Identifier"){const u=B(r);for(const i of a)en(i)&&t.push({varId:u,memberNamePattern:i.value})}}return!1;case"domainname":case"domaincode":case"domain":case"haskey":case"hasvalue":if(n.arguments.length>=2){const[r,a]=n.arguments;(r==null?void 0:r.type)==="Identifier"&&en(a)&&t.push({varId:B(r),memberNamePattern:a.value})}return!0;case"defaultvalue":if(n.arguments.length>2){const[r,a]=n.arguments;(r==null?void 0:r.type)==="Identifier"&&en(a)&&t.push({varId:B(r),memberNamePattern:a.value})}return!0;default:return!0}return n.type!=="MemberExpression"||n.object.type!=="Identifier"||(n.computed?!!en(n.property)&&(t.push({varId:B(n.object),memberNamePattern:n.property.value}),!1):(t.push({varId:B(n.object),memberNamePattern:n.property.name}),!1))}),t}function ft(e){const t=[];return U(e,n=>(n.type==="CallExpression"&&n.callee.type==="Identifier"&&t.push(B(n.callee)),!0)),t}function Wt(e,t=[]){let n=null;if(e.usesFeatureSet===void 0){n===null&&(n=ft(e)),e.usesFeatureSet=!1;for(let r=0;r<n.length;r++)Ms.has(n[r])&&(e.usesFeatureSet=!0,e.isAsync=!0);if(e.usesFeatureSet===!1&&t&&t.length>0){for(const r of t)if(Gi(e,r)){e.usesFeatureSet=!0,e.isAsync=!0;break}}}if(e.isAsync===void 0&&(n===null&&(n=ft(e)),n.some(r=>Ps.has(r))&&(e.isAsync=!0)),e.usesModules===void 0&&(e.usesModules=!1,Wi(e).length>0&&(e.usesModules=!0)),e.usesGeometry===void 0){e.usesGeometry=!1,n===null&&(n=ft(e));for(let r=0;r<n.length;r++)Rs.has(n[r])&&(e.usesGeometry=!0)}}function _s(e){function t(s,o,l){if(s instanceof bs)return s.toArray();if(k(s))return s;throw new f(o,"InvalidParameter",l)}function n(s,o){const l=s.length,h=Math.floor(l/2);return l===0?[]:l===1?[s[0]]:r(n(s.slice(0,h),o),n(s.slice(h,l),o),o)}function r(s,o,l){const h=[];for(;s.length>0||o.length>0;)if(s.length>0&&o.length>0){let c=l(s[0],o[0]);isNaN(c)&&(c=0),c<=0?(h.push(s[0]),s=s.slice(1)):(h.push(o[0]),o=o.slice(1))}else s.length>0?(h.push(s[0]),s=s.slice(1)):o.length>0&&(h.push(o[0]),o=o.slice(1));return h}async function a(s,o){const l=s.length,h=Math.floor(l/2);if(l===0)return[];if(l===1)return[s[0]];const c=[await a(s.slice(0,h),o),await a(s.slice(h,l),o)];return u(c[0],c[1],o,[])}async function u(s,o,l,h){const c=h;if(s.length>0||o.length>0){if(s.length>0&&o.length>0){let d=await l(s[0],o[0]);return isNaN(d)&&(d=1),d<=0?(c.push(s[0]),s=s.slice(1)):(c.push(o[0]),o=o.slice(1)),u(s,o,l,h)}return s.length>0?(c.push(s[0]),u(s=s.slice(1),o,l,h)):(c.push(o[0]),u(s,o=o.slice(1),l,h))}return h}function i(s,o,l,h){p(l,1,2,s,o);let c=l[0];if(R(c)&&(c=c.toArray()),k(c)===!1)throw new f(s,"InvalidParameter",o);if(l.length>1){if(K(l[1])===!1)throw new f(s,"InvalidParameter",o);let y=c;const N=l[1].createFunction(s);return h?a(y,N):(y=n(y,(G,_e)=>N(G,_e)),y)}let d=c;if(d.length===0)return[];const D={};for(let y=0;y<d.length;y++){const N=Ui(d[y]);N!==""&&(D[N]=!0)}if(D.Array===!0||D.Dictionary===!0||D.Feature===!0||D.Voxel===!0||D.Pixel===!0||D.Point===!0||D.Polygon===!0||D.Polyline===!0||D.Multipoint===!0||D.Extent===!0||D.Function===!0)return d.slice();let g=0,w="";for(const y in D)g++,w=y;return d=g>1||w==="String"?n(d,(y,N)=>{if(y==null||y===E)return N==null||N===E?0:1;if(N==null||N===E)return-1;const G=A(y),_e=A(N);return G<_e?-1:G===_e?0:1}):w==="Number"?n(d,(y,N)=>y-N):w==="Boolean"?n(d,(y,N)=>y===N?0:N?-1:1):w==="Date"?n(d,(y,N)=>y.toNumber()-N.toNumber()):d.slice(),d}e.functions.array=function(s,o){return e.standardFunction(s,o,(l,h,c)=>{if(p(c,0,2,s,o),c.length===0)return[];if(c.length===1&&c[0]===null)return[];if(k(c[0])){if(c.length===2&&H(c[1])===!1)throw new f(s,"InvalidParameter",o);return j(c[1],!1)===!0?Kr(c[0]):c[0].slice()}if(R(c[0])){if(c.length===2&&H(c[1])===!1)throw new f(s,"InvalidParameter",o);return j(c[1],!1)===!0?Kr(c[0]):c[0].toArray().slice()}const d=m(c[0]);if(isNaN(d)||$e(d)===!1)throw new f(s,"InvalidParameter",o);const D=j(c[1],null),g=new Array(d);return g.fill(D),g})},e.functions.front=function(s,o){return e.standardFunction(s,o,(l,h,c)=>{if(p(c,1,1,s,o),R(c[0])){if(c[0].length()<=0)throw new f(s,"OutOfBounds",o);return c[0].get(0)}if(k(c[0])){if(c[0].length<=0)throw new f(s,"OutOfBounds",o);return c[0][0]}throw new f(s,"InvalidParameter",o)})},e.functions.back=function(s,o){return e.standardFunction(s,o,(l,h,c)=>{if(p(c,1,1,s,o),R(c[0])){if(c[0].length()<=0)throw new f(s,"OutOfBounds",o);return c[0].get(c[0].length()-1)}if(k(c[0])){if(c[0].length<=0)throw new f(s,"OutOfBounds",o);return c[0][c[0].length-1]}throw new f(s,"InvalidParameter",o)})},e.functions.push=function(s,o){return e.standardFunction(s,o,(l,h,c)=>{if(p(c,1,2,s,o),k(c[0]))return c[0][c[0].length]=c[1],c[0].length;throw new f(s,"InvalidParameter",o)})},e.functions.pop=function(s,o){return e.standardFunction(s,o,(l,h,c)=>{if(p(c,1,1,s,o),k(c[0])){if(c[0].length<=0)throw new f(s,"OutOfBounds",o);const d=c[0][c[0].length-1];return c[0].length=c[0].length-1,d}throw new f(s,"InvalidParameter",o)})},e.functions.erase=function(s,o){return e.standardFunction(s,o,(l,h,c)=>{if(p(c,2,2,s,o),k(c[0])){let d=m(c[1]);if(isNaN(d)||$e(d)===!1)throw new f(s,"InvalidParameter",o);const D=c[0];if(D.length<=0)throw new f(s,"OutOfBounds",o);if(d<0&&(d=D.length+d),d<0)throw new f(s,"OutOfBounds",o);if(d>=D.length)throw new f(s,"OutOfBounds",o);return D.splice(d,1),E}if(Re(c[0]))return c[0].eraseField(A(c[1])),E;throw new f(s,"InvalidParameter",o)})},e.functions.insert=function(s,o){return e.standardFunction(s,o,(l,h,c)=>{if(p(c,3,3,s,o),k(c[0])){const d=m(c[1]);if(isNaN(d)||$e(d)===!1)throw new f(s,"InvalidParameter",o);const D=c[2],g=c[0];if(d>g.length)throw new f(s,"OutOfBounds",o);if(d<0&&d<-1*g.length)throw new f(s,"OutOfBounds",o);return d===g.length?(g[d]=D,E):(g.splice(d,0,D),E)}if(Re(c[0]))return c[0].setField(A(c[1]),c[2]),E;throw new f(s,"InvalidParameter",o)})},e.functions.getkeys=function(s,o){return e.standardFunction(s,o,(l,h,c)=>{if(p(c,1,1,l,h),c[0]==null)return[];if(Re(c[0]))return c[0].keys();throw new f(l,"InvalidParameter",h)})},e.functions.getvalues=function(s,o){return e.standardFunction(s,o,(l,h,c)=>{if(p(c,1,1,l,h),c[0]==null)return[];if(Re(c[0]))return c[0].values();throw new f(l,"InvalidParameter",h)})},e.functions.resize=function(s,o){return e.standardFunction(s,o,(l,h,c)=>{if(p(c,2,3,s,o),k(c[0])){const d=m(c[1]);if(isNaN(d)||$e(d)===!1)throw new f(s,"InvalidParameter",o);if(d<0)throw new f(s,"InvalidParameter",o);const D=j(c[2],null),g=c[0];if(g.length>=d)return g.length=d,E;const w=g.length;g.length=d;for(let y=w;y<g.length;y++)g[y]=D;return E}throw new f(s,"InvalidParameter",o)})},e.functions.includes=function(s,o){return e.standardFunction(s,o,(l,h,c)=>{if(p(c,2,2,s,o),k(c[0])){const d=c[1];return!!c[0].some(D=>Ce(D,d))}if(R(c[0])){const d=c[1];return!!c[0].toArray().some(D=>Ce(D,d))}throw new f(s,"InvalidParameter",o)})},e.functions.slice=function(s,o){return e.standardFunction(s,o,(l,h,c)=>{if(p(c,1,3,s,o),k(c[0])){const d=m(j(c[1],0)),D=m(j(c[2],c[0].length));if(isNaN(d)||$e(d)===!1)throw new f(s,"InvalidParameter",o);if(isNaN(D)||$e(D)===!1)throw new f(s,"InvalidParameter",o);return c[0].slice(d,D)}if(R(c[0])){const d=c[0],D=m(j(c[1],0)),g=m(j(c[2],d.length()));if(isNaN(D)||$e(D)===!1)throw new f(s,"InvalidParameter",o);if(isNaN(g)||$e(g)===!1)throw new f(s,"InvalidParameter",o);return d.toArray().slice(D,g)}throw new f(s,"InvalidParameter",o)})},e.functions.splice=function(s,o){return e.standardFunction(s,o,(l,h,c)=>{const d=[];for(let D=0;D<c.length;D++)k(c[D])?d.push(...c[D]):R(c[D])?d.push(...c[D].toArray()):d.push(c[D]);return d})},e.functions.top=function(s,o){return e.standardFunction(s,o,(l,h,c)=>{if(p(c,2,2,s,o),k(c[0]))return m(c[1])>=c[0].length?c[0].slice():c[0].slice(0,m(c[1]));if(R(c[0]))return m(c[1])>=c[0].length()?c[0].slice():c[0].slice(0,m(c[1]));throw new f(s,"InvalidParameter",o)})},e.functions.first=function(s,o){return e.standardFunction(s,o,(l,h,c)=>(p(c,1,1,s,o),k(c[0])?c[0].length===0?null:c[0][0]:R(c[0])?c[0].length()===0?null:c[0].get(0):null))},e.mode==="sync"&&(e.functions.sort=function(s,o){return e.standardFunction(s,o,(l,h,c)=>i(s,h,c,!1))},e.functions.any=function(s,o){return e.standardFunction(s,o,(l,h,c)=>{p(c,2,2,s,h);const d=c[1].createFunction(s),D=t(c[0],s,h);for(const g of D){const w=d(g);if(H(w)&&w===!0)return!0}return!1})},e.functions.all=function(s,o){return e.standardFunction(s,o,(l,h,c)=>{p(c,2,2,s,h);const d=c[1].createFunction(s),D=t(c[0],s,h);for(const g of D)if(d(g)!==!0)return!1;return!0})},e.functions.none=function(s,o){return e.standardFunction(s,o,(l,h,c)=>{p(c,2,2,s,h);const d=c[1].createFunction(s),D=t(c[0],s,h);for(const g of D)if(d(g)===!0)return!1;return!0})},e.functions.reduce=function(s,o){return e.standardFunction(s,o,(l,h,c)=>{p(c,2,3,s,h);const d=c[1].createFunction(s),D=t(c[0],s,h);return c.length===2?D.length===0?null:D.reduce((g,w)=>{const y=d(g,w);return g=y!==void 0&&y!==E?y:null}):D.reduce((g,w)=>{const y=d(g,w);return g=y!==void 0&&y!==E?y:null},c[2])})},e.functions.map=function(s,o){return e.standardFunction(s,o,(l,h,c)=>{p(c,2,2,s,h);const d=c[1].createFunction(s),D=t(c[0],s,h),g=[];for(const w of D){const y=d(w);y!==void 0&&y!==E?g.push(y):g.push(null)}return g})},e.functions.filter=function(s,o){return e.standardFunction(s,o,(l,h,c)=>{p(c,2,2,s,h);const d=c[1].createFunction(s),D=t(c[0],s,h),g=[];for(const w of D)d(w)===!0&&g.push(w);return g})}),e.mode==="async"&&(e.functions.sort=function(s,o){return e.standardFunctionAsync(s,o,async(l,h,c)=>i(s,h,c,!0))},e.functions.any=function(s,o){return e.standardFunctionAsync(s,o,async(l,h,c)=>{p(c,2,2,s,h);const d=c[1].createFunction(s),D=t(c[0],s,h);for(const g of D){const w=await d(g);let y=null;if(y=Me(y)?await w:w,H(y)&&y===!0)return!0}return!1})},e.functions.all=function(s,o){return e.standardFunctionAsync(s,o,async(l,h,c)=>{p(c,2,2,s,h);const d=c[1].createFunction(s),D=t(c[0],s,h);for(const g of D){const w=await d(g);let y=null;if(y=Me(y)?await w:w,y!==!0)return!1}return!0})},e.functions.none=function(s,o){return e.standardFunctionAsync(s,o,async(l,h,c)=>{p(c,2,2,s,h);const d=c[1].createFunction(s),D=t(c[0],s,h);for(const g of D){const w=await d(g);let y=null;if(y=Me(y)?await w:w,y===!0)return!1}return!0})},e.functions.filter=function(s,o){return e.standardFunctionAsync(s,o,async(l,h,c)=>{p(c,2,2,s,h);const d=c[1].createFunction(s),D=t(c[0],s,h),g=[];for(const w of D){const y=await d(w);let N=null;N=Me(N)?await y:y,N===!0&&g.push(w)}return g})},e.functions.reduce=function(s,o){return e.standardFunctionAsync(s,o,async(l,h,c)=>{p(c,2,3,s,h);const d=c[1].createFunction(s),D=t(c[0],s,h);let g;if(c.length>2){const w=j(c[2],null);g=D.reduce(async(y,N)=>{let G=await y;return G!==void 0&&G!==E||(G=null),d(G,N)},Promise.resolve(w))}else{if(D.length===0)return null;g=D.reduce(async(w,y,N)=>{if(N<=1)return d(w,y);let G=await w;return G!==void 0&&G!==E||(G=null),d(G,y)})}return g.then(w=>w!==void 0&&w!==E?w:null)})},e.functions.map=function(s,o){return e.standardFunctionAsync(s,o,async(l,h,c)=>{p(c,2,2,s,h);const d=c[1].createFunction(s),D=t(c[0],s,h),g=[];for(const w of D){const y=await d(w);let N=null;N=Me(N)?await y:y,N!==void 0&&N!==E?g.push(N):g.push(null)}return g})})}const er=Object.freeze(Object.defineProperty({__proto__:null,registerFunctions:_s},Symbol.toStringTag,{value:"Module"}));function Us(e,t,n){return e+($s(n)?js:zs)[t]}function $s(e){return e%4==0&&(e%100!=0||e%400==0)}const zs=[0,31,59,90,120,151,181,212,243,273,304,334],js=[0,31,60,91,121,152,182,213,244,274,305,335];function ye(e){return e===null?e:e.isValid===!1?null:e}function Tt(e,t){switch(Cs(e)){case"":case"default":return I(t);case"z":return"UTC";default:return e}}function Te(e,t){return Z(e)?e.toArcadeDate():ne(e,I(t))}const Vs=new Le(["days","months","minutes","seconds","hours","years","milliseconds"],[["day","days"],["d","days"],["month","months"],["minute","minutes"],["m","minutes"],["second","seconds"],["s","seconds"],["hour","hours"],["h","hours"],["year","years"],["y","years"],["millisecond","milliseconds"],["ms","milliseconds"]]);function Yr(e){return e==="M"?"months":Vs.lookup(A(e))??"milliseconds"}function Hi(e,t){e.today=function(n,r){return t(n,r,(a,u,i)=>{p(i,0,0,n,r);const s=new Date;return s.setHours(0,0,0,0),$.dateJSAndZoneToArcadeDate(s,I(n))})},e.time=function(n,r){return t(n,r,(a,u,i)=>{switch(p(i,0,4,n,r),i.length){case 0:{const s=$.nowToArcadeDate(I(n));return new Ie(s.hour,s.minute,s.second,s.millisecond)}case 1:{if(q(i[0]))return i[0].clone();if(Ee(i[0]))return new Ie(i[0].hour,i[0].minute,i[0].second,i[0].millisecond);if(Z(i[0]))return new Ie(0,0,0,0);if(v(i[0]))return Ie.fromString(i[0]);const s=m(i[0]);return isNaN(s)===!1?Ie.fromMilliseconds(s):null}case 2:return v(i[0])&&v(i[1])?Ie.fromString(i[0],i[1]):Ie.fromParts(m(i[0]),m(i[1]),0,0);case 3:return Ie.fromParts(m(i[0]),m(i[1]),m(i[2]),0);case 4:return Ie.fromParts(m(i[0]),m(i[1]),m(i[2]),m(i[3]))}throw new f(n,"InvalidParameter",r)})},e.dateonly=function(n,r){return t(n,r,(a,u,i)=>{if(p(i,0,3,n,r),i.length===3)return Se.fromParts(m(i[0]),m(i[1])+1,m(i[2]));if(i.length===2){const s=A(i[1]);return s===""?null:s==="X"?Se.fromSeconds(m(i[0])):s==="x"?Se.fromMilliseconds(m(i[0])):Se.fromString(A(i[0]),s)}if(i.length===1){if(v(i[0])){if(i[0].replaceAll(/^\s+|\s+$/g,"")==="")return null;if(/^[0-9][0-9][0-9][0-9]$/.test(i[0])===!0)return Se.fromString(i[0]+"-01-01")}if(Z(i[0]))return i[0].clone();if(Ee(i[0]))return Se.fromParts(i[0].year,i[0].monthJS+1,i[0].day);const s=m(i[0]);return isNaN(s)===!1?Se.fromMilliseconds(s):v(i[0])?Se.fromString(i[0]):null}if(i.length===0){const s=$.nowToArcadeDate(I(n));return s.isValid===!1?null:Se.fromParts(s.year,s.monthJS+1,s.day)}return null})},e.changetimezone=function(n,r){return t(n,r,(a,u,i)=>{if(p(i,2,2,n,r),i[0]===null)return null;if(Z(i[0]))throw new f(n,"CannotChangeTimeZoneDateOnly",r);if(Z(i[0]))throw new f(n,"CannotChangeTimeZoneTime",r);const s=ne(i[0],I(n));if(s===null)throw new f(n,"InvalidParameter",r);const o=Qt(Tt(A(i[1]),n),!1);if(o===null)return null;const l=$.arcadeDateAndZoneToArcadeDate(s,o);return l.isValid===!1?null:l})},e.timezone=function(n,r){return t(n,r,(a,u,i)=>{if(p(i,1,2,n,r),q(i[0])||Z(i[0]))return"Unknown";const s=ne(i[0],I(n));if(s===null)return null;const o=s.timeZone;return o==="system"?$.systemTimeZoneCanonicalName:o.toLowerCase()==="utc"?"UTC":o.toLowerCase()==="unknown"?"Unknown":o})},e.timezoneoffset=function(n,r){return t(n,r,(a,u,i)=>{p(i,1,1,n,r);const s=ne(i[0],I(n));return s===null?null:60*s.timeZoneOffset*1e3})},e.now=function(n,r){return t(n,r,(a,u,i)=>{p(i,0,0,n,r);const s=$.nowToArcadeDate(I(n));return s.isValid===!1?null:s})},e.timestamp=function(n,r){return t(n,r,(a,u,i)=>{p(i,0,0,n,r);const s=$.nowUTCToArcadeDate();return s.isValid===!1?null:s})},e.toutc=function(n,r){return t(n,r,(a,u,i)=>{p(i,1,1,n,r);const s=ne(i[0],I(n));return s===null?null:s.toUTC()})},e.tolocal=function(n,r){return t(n,r,(a,u,i)=>{p(i,1,1,n,r);const s=ne(i[0],I(n));return s===null?null:s.toLocal()})},e.day=function(n,r){return t(n,r,(a,u,i)=>{p(i,1,1,n,r);const s=Te(i[0],I(n));return s===null?NaN:s.day})},e.month=function(n,r){return t(n,r,(a,u,i)=>{p(i,1,1,n,r);const s=Te(i[0],I(n));return s===null?NaN:s.monthJS})},e.year=function(n,r){return t(n,r,(a,u,i)=>{p(i,1,1,n,r);const s=Te(i[0],I(n));return s===null?NaN:s.year})},e.hour=function(n,r){return t(n,r,(a,u,i)=>{if(p(i,1,1,n,r),q(i[0]))return i[0].hour;const s=ne(i[0],I(n));return s===null?NaN:s.hour})},e.second=function(n,r){return t(n,r,(a,u,i)=>{if(p(i,1,1,n,r),q(i[0]))return i[0].second;const s=ne(i[0],I(n));return s===null?NaN:s.second})},e.millisecond=function(n,r){return t(n,r,(a,u,i)=>{if(p(i,1,1,n,r),q(i[0]))return i[0].millisecond;const s=ne(i[0],I(n));return s===null?NaN:s.millisecond})},e.minute=function(n,r){return t(n,r,(a,u,i)=>{if(p(i,1,1,n,r),q(i[0]))return i[0].minute;const s=ne(i[0],I(n));return s===null?NaN:s.minute})},e.week=function(n,r){return t(n,r,(a,u,i)=>{p(i,1,2,n,r);const s=Te(i[0],I(n));if(s===null)return NaN;const o=m(j(i[1],0));if(o<0||o>6)throw new f(n,"InvalidParameter",r);const l=s.day,h=s.monthJS,c=s.year,d=s.dayOfWeekJS,D=Us(l,h,c)-1,g=Math.floor(D/7);return d-o+(d-o<0?7:0)<D-7*g?g+1:g})},e.weekday=function(n,r){return t(n,r,(a,u,i)=>{p(i,1,1,n,r);const s=Te(i[0],I(n));return s===null?NaN:s.dayOfWeekJS})},e.isoweekday=function(n,r){return t(n,r,(a,u,i)=>{p(i,1,1,n,r);const s=Te(i[0],I(n));return s===null?NaN:s.dayOfWeekISO})},e.isomonth=function(n,r){return t(n,r,(a,u,i)=>{p(i,1,1,n,r);const s=Te(i[0],I(n));return s===null?NaN:s.monthISO})},e.isoweek=function(n,r){return t(n,r,(a,u,i)=>{p(i,1,1,n,r);const s=Te(i[0],I(n));return s===null?NaN:s.weekISO})},e.isoyear=function(n,r){return t(n,r,(a,u,i)=>{p(i,1,1,n,r);const s=Te(i[0],I(n));return s===null?NaN:s.yearISO})},e.date=function(n,r){return t(n,r,(a,u,i)=>{if(p(i,0,8,n,r),i.length===3){if(Z(i[0])&&q(i[1])&&v(i[2])){const s=Qt(Tt(A(i[2])??"unknown",n),!1);return s===null?null:ye($.fromParts(i[0].year,i[0].month,i[0].day,i[1].hour,i[1].minute,i[1].second,i[1].millisecond,s))}return ye($.fromParts(m(i[0]),m(i[1])+1,m(i[2]),0,0,0,0,I(n)))}if(i.length===4)return ye($.fromParts(m(i[0]),m(i[1])+1,m(i[2]),m(i[3]),0,0,0,I(n)));if(i.length===5)return ye($.fromParts(m(i[0]),m(i[1])+1,m(i[2]),m(i[3]),m(i[4]),0,0,I(n)));if(i.length===6)return ye($.fromParts(m(i[0]),m(i[1])+1,m(i[2]),m(i[3]),m(i[4]),m(i[5]),0,I(n)));if(i.length===7)return ye($.fromParts(m(i[0]),m(i[1])+1,m(i[2]),m(i[3]),m(i[4]),m(i[5]),m(i[6]),I(n)));if(i.length===8){const s=Qt(Tt(A(i[7])??"unknown",n),!1);return s===null?null:ye($.fromParts(m(i[0]),m(i[1])+1,m(i[2]),m(i[3]),m(i[4]),m(i[5]),m(i[6]),s))}if(i.length===2){if(Z(i[0])&&v(i[1])){const l=Qt(Tt(A(i[1])??"unknown",n),!1);return l===null?null:ye($.fromParts(i[0].year,i[0].month,i[0].day,0,0,0,0,l))}if(Z(i[0])&&q(i[1]))return ye($.fromParts(i[0].year,i[0].month,i[0].day,i[1].hour,i[1].minute,i[1].second,i[1].millisecond,"unknown"));let s,o=A(i[1]);return o===""?null:(o=cs(o,!0),s=o==="X"?qt.fromSeconds(m(i[0])):o==="x"?qt.fromMillis(m(i[0])):qt.fromFormat(A(i[0]),o,{locale:Ya(),numberingSystem:"latn"}),s.isValid?$.dateTimeToArcadeDate(s):null)}if(i.length===1){if(Z(i[0]))return ye($.fromParts(i[0].year,i[0].month,i[0].day,0,0,0,0,"unknown"));if(v(i[0])){if(i[0].replaceAll(/^\s+|\s+$/g,"")==="")return null;if(/^[0-9][0-9][0-9][0-9]$/.test(i[0])===!0)return ne(i[0]+"-01-01",I(n))}const s=m(i[0]);if(isNaN(s)===!1){const o=qt.fromMillis(s);return o.isValid?$.dateTimeAndZoneToArcadeDate(o,I(n)):null}return ne(i[0],I(n))}return i.length===0?$.nowToArcadeDate(I(n)):null})},e.datediff=function(n,r){return t(n,r,(a,u,i)=>{if(p(i,2,4,n,r),q(i[0]))return q(i[1])?i[0].difference(i[1],A(i[2])):NaN;if(q(i[1]))return NaN;if(Z(i[0]))return Z(i[1])?i[0].difference(i[1],A(i[2])):NaN;if(Z(i[1]))return NaN;let s=ne(i[0],I(n)),o=ne(i[1],I(n));if(s===null||o===null)return NaN;let l=j(i[3],"");return l!==""&&l!==null?(l=Tt(A(l),n),s=$.arcadeDateAndZoneToArcadeDate(s,l),o=$.arcadeDateAndZoneToArcadeDate(o,l)):s.timeZone!==o.timeZone&&(s.isUnknownTimeZone?s=$.arcadeDateAndZoneToArcadeDate(s,o.timeZone):o=(o.isUnknownTimeZone,$.arcadeDateAndZoneToArcadeDate(o,s.timeZone))),s.diff(o,Yr(i[2]))})},e.dateadd=function(n,r){return t(n,r,(a,u,i)=>{p(i,2,3,n,r);let s=m(i[1]);if(isNaN(s)||s===1/0||s===-1/0)return q(i[0])||Z(i[0])?i[0].clone():ne(i[0],I(n));const o=Yr(i[2]);if(o!=="days"&&o!=="months"||(s=Z(i[0])?s:fs(s)),q(i[0])||Z(i[0]))return i[0].plus(o,s);const l=ne(i[0],I(n));return l===null?null:l.plus({[o]:s})})}}function Gs(e){const t=e==null?void 0:e.fullSchema();return t!=null&&t.datesInUnknownTimezone?"unknown":(t==null?void 0:t.dateFieldsTimeZone)||"UTC"}function Ki(e){var n;const t=(n=e.fullSchema())==null?void 0:n.fieldsIndex;return t==null&&e instanceof se?e.fieldsIndex:t}const Ws={getAttributeSQL(e,t){var r,a;const n=e.field(t);if(n==null)return n;if(Ee(n)){const u=n.toDateTime(),i=(a=(r=Ki(e))==null?void 0:r.get(t))==null?void 0:a.type;return i==="esriFieldTypeTimestampOffset"||i==="timestamp-offset"?Ss.fromDateTime(u):u}return n}};function qi(e,t,n){e.domain=function(r,a){return t(r,a,(u,i,s)=>{if(p(s,2,3,r,a),J(s[0])){const o=ds(s[0],A(s[1]),s[2]===void 0?void 0:s[2]);return o&&o.domain?o.domain.type==="coded-value"||o.domain.type==="codedValue"?b.convertObjectToArcadeDictionary({type:"codedValue",name:o.domain.name,dataType:qr[o.field.type],codedValues:o.domain.codedValues.map(l=>({name:l.name,code:l.code}))},I(r)):b.convertObjectToArcadeDictionary({type:"range",name:o.domain.name,dataType:qr[o.field.type],min:o.domain.minValue,max:o.domain.maxValue},I(r)):null}throw new f(r,"InvalidParameter",a)})},e.domaincode=function(r,a){return t(r,a,(u,i,s)=>{if(p(s,2,4,r,a),J(s[0]))return ms(s[0],A(s[1]),s[2],s[3]===void 0?void 0:s[3]);throw new f(r,"InvalidParameter",a)})},e.domainname=function(r,a){return t(r,a,(u,i,s)=>{if(p(s,2,4,r,a),J(s[0]))return ps(s[0],A(s[1]),s[2],s[3]===void 0?void 0:s[3]);throw new f(r,"InvalidParameter",a)})},e.expects=function(r,a){return t(r,a,(u,i,s)=>{if(s.length<1)throw new f(r,"WrongNumberOfParameters",a);return E})},e.featureinfilter=function(r,a){return t(r,a,(u,i,s)=>{p(s,2,2,u,i);const[o,l]=s;if(o==null)return!1;if(l===""||l==null)return!0;if(!J(o)||!v(l))throw new f(u,"InvalidParameter",i);const h=Is.create(l,{fieldsIndex:Ki(o),timeZone:Gs(o)}),c=h.getVariables();for(const d of c)h.parameters[d]=n(u,{name:d});return h.testFeature(o,Ws)})},e.gdbversion=function(r,a){return t(r,a,(u,i,s)=>{if(p(s,1,1,r,a),J(s[0]))return s[0].gdbVersion();throw new f(r,"InvalidParameter",a)})},e.schema=function(r,a){return t(r,a,(u,i,s)=>{if(J(s[0])){const o=Ds(s[0]);return o?b.convertObjectToArcadeDictionary(o,I(r)):null}throw new f(r,"InvalidParameter",a)})},e.subtypecode=function(r,a){return t(r,a,(u,i,s)=>{if(p(s,1,1,r,a),J(s[0])){const o=Bn(s[0]);if(!o)return null;if(o.subtypeField&&s[0].hasField(o.subtypeField)){const l=s[0].field(o.subtypeField);for(const h of o.subtypes)if(h.code===l)return h.code;return null}return null}throw new f(r,"InvalidParameter",a)})},e.subtypename=function(r,a){return t(r,a,(u,i,s)=>{if(p(s,1,1,r,a),J(s[0])){const o=Bn(s[0]);if(!o)return"";if(o.subtypeField&&s[0].hasField(o.subtypeField)){const l=s[0].field(o.subtypeField);for(const h of o.subtypes)if(h.code===l)return h.name;return""}return""}throw new f(r,"InvalidParameter",a)})},e.subtypes=function(r,a){return t(r,a,(u,i,s)=>{if(p(s,1,1,r,a),J(s[0])){const o=Bn(s[0]);return o?b.convertObjectToArcadeDictionary(o,I(r)):null}throw new f(r,"InvalidParameter",a)})},e[B("TimeReceived")]=function(r,a){return t(r,a,(u,i,s)=>{if(p(s,1,1,u,i),J(s[0])){if(s[0].hasField(Jr)){const o=s[0].field(Jr);return W(o)?$.epochToArcadeDate(o,u.timeZone??"system"):Ee(o)?o:null}return null}throw new f(u,"InvalidParameter",i)})}}function We(e,t,n){return Math.sqrt((e[0]-t[0])**2+(e[1]-t[1])**2+(e[2]!==void 0&&t[2]!==void 0?(e[2]*n-t[2]*n)**2:0))}function Zs(e,t,n){return(e[0]-t[0])**2+(e[1]-t[1])**2+(e[2]!==void 0&&t[2]!==void 0?(e[2]*n-t[2]*n)**2:0)}const Rt=[];for(const e of[[9002,56146130,6131,6132,8050,8051,8228],[9003,5702,6358,6359,6360,8052,8053],[9095,5754]]){const t=e[0];for(let n=1;n<e.length;n++)Rt[e[n]]=t}const Ut=[];function vt(e){return e.vcsWkid&&Rt[e.vcsWkid]!==void 0?Ut[Rt[e.vcsWkid]]:e.latestVcsWkid&&Rt[e.latestVcsWkid]!==void 0?Ut[Rt[e.latestVcsWkid]]:1}function Er(e,t,n){const r=t[0]-e[0],a=t[1]-e[1];return Math.sqrt(r*r+a*a)}function Hs(e,t,n){const r=t[0]-e[0],a=t[1]-e[1];return r*r+a*a}function Ks(e,t){return e.x*t.x+e.y*t.y}function qs(e,t){return e.x*t.y-t.x*e.y}function En(e,t,n=0){for(;e<n;)e+=t;const r=n+t;for(;e>=r;)e-=t;return e}function Ji(e,t){return Math.atan2(t.y-e.y,t.x-e.x)}function Js(e,t){return En(Ji(e,t),2*Math.PI)*(180/Math.PI)}function Qs(e,t){return En(Math.PI/2-Ji(e,t),2*Math.PI)*(180/Math.PI)}function Qi(e,t,n){const r={x:e.x-t.x,y:e.y-t.y},a={x:n.x-t.x,y:n.y-t.y};return Math.atan2(qs(r,a),Ks(r,a))}function Xs(e,t,n){return Si(En(Qi(e,t,n),2*Math.PI))}function Ys(e,t,n){return Si(En(-1*Qi(e,t,n),2*Math.PI))}function eo(e,t,n){return Math.max(t,Math.min(n,e))}function to(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function no(e){return e[0]*e[0]+e[1]*e[1]+e[2]*e[2]}function ro(e,t,n){const r=[n[0]-t[0],n[1]-t[1],n[2]-t[2]],a=eo(to(r,[e[0]-t[0],e[1]-t[1],e[2]-t[2]])/no(r),0,1);return[t[0]+(n[0]-t[0])*a,t[1]+(n[1]-t[1])*a,t[2]+(n[2]-t[2])*a]}function io(e,t,n){let r=0;const a=n[0]-t[0],u=n[1]-t[1],i=a*a+u*u;return i===0?r=.5:(r=((e[0]-t[0])*a+(e[1]-t[1])*u)/i,r<0?r=0:r>1&&(r=1)),r<=.5?[t[0]+(n[0]-t[0])*r,t[1]+(n[1]-t[1])*r]:[n[0]-(n[0]-t[0])*(1-r),n[1]-(n[1]-t[1])*(1-r)]}Ut[9002]=.3048,Ut[9003]=.3048006096012192,Ut[9095]=.3048007491;function Xi(e,t){e.ringisclockwise=function(n,r){return t(n,r,(a,u,i)=>{p(i,1,1,n,r);let s=[];if(i[0]===null)return!1;if(k(i[0]))for(const o of i[0]){if(!(o instanceof z))throw new f(n,"InvalidParameter",r);s.push(o.hasZ?o.hasM?[o.x,o.y,o.z,o.m]:[o.x,o.y,o.z]:[o.x,o.y])}else if(i[0]instanceof _i)s=i[0]._elements;else{if(!R(i[0]))throw new f(n,"InvalidParameter",r);for(const o of i[0].toArray()){if(!(o instanceof z))throw new f(n,"InvalidParameter",r);s.push(o.hasZ?o.hasM?[o.x,o.y,o.z,o.m]:[o.x,o.y,o.z]:[o.x,o.y])}}return!(s.length<3)&&es(s)})},e.polygon=function(n,r){return t(n,r,(a,u,i)=>{let s;if(p(i,1,1,n,r),i[0]instanceof b){const o=Q(be(i[0],n.spatialReference,"polygon"),n.spatialReference);if(o==null)return null;s=o}else if(i[0]instanceof pe)s=le(i[0].toJSON());else{const o=JSON.parse(i[0]);o&&!o.spatialReference&&(o.spatialReference=n.spatialReference),s=Q(new pe(o),n.spatialReference)}if(s!==null&&s.spatialReference.equals(n.spatialReference)===!1)throw new f(n,"WrongSpatialReference",r);return tt(s)})},e.polyline=function(n,r){return t(n,r,(a,u,i)=>{let s;if(p(i,1,1,n,r),i[0]instanceof b){const o=Q(be(i[0],n.spatialReference,"polyline"),n.spatialReference);if(o==null)return null;s=o}else if(i[0]instanceof fe)s=le(i[0].toJSON());else{const o=JSON.parse(i[0]);o&&!o.spatialReference&&(o.spatialReference=n.spatialReference),s=Q(new fe(o),n.spatialReference)}if(s!==null&&s.spatialReference.equals(n.spatialReference)===!1)throw new f(n,"WrongSpatialReference",r);return tt(s)})},e.point=function(n,r){return t(n,r,(a,u,i)=>{let s;if(p(i,1,1,n,r),i[0]instanceof b){const o=Q(be(i[0],n.spatialReference,"point"),n.spatialReference);if(o==null)return null;s=o}else if(i[0]instanceof z)s=le(i[0].toJSON());else{const o=JSON.parse(i[0]);o&&!o.spatialReference&&(o.spatialReference=n.spatialReference),s=Q(new z(o),n.spatialReference)}if(s!==null&&s.spatialReference.equals(n.spatialReference)===!1)throw new f(n,"WrongSpatialReference",r);return tt(s)})},e.multipoint=function(n,r){return t(n,r,(a,u,i)=>{let s;if(p(i,1,1,n,r),i[0]instanceof b){const o=Q(be(i[0],n.spatialReference,"multipoint"),n.spatialReference);if(o==null)return null;s=o}else if(i[0]instanceof ct)s=le(i[0].toJSON());else{const o=JSON.parse(i[0]);o&&!o.spatialReference&&(o.spatialReference=n.spatialReference),s=Q(new ct(o),n.spatialReference)}if(s!==null&&s.spatialReference.equals(n.spatialReference)===!1)throw new f(n,"WrongSpatialReference",r);return tt(s)})},e.extent=function(n,r){return t(n,r,(a,u,i)=>{var o,l,h;i=M(i),p(i,1,1,n,r);let s=null;if(i[0]instanceof b)s=Q(be(i[0],n.spatialReference),n.spatialReference);else if(i[0]instanceof z){const c={xmin:i[0].x,ymin:i[0].y,xmax:i[0].x,ymax:i[0].y,spatialReference:i[0].spatialReference.toJSON()},d=i[0];d.hasZ&&(c.zmin=d.z,c.zmax=d.z),d.hasM&&(c.mmin=d.m,c.mmax=d.m),s=le(c)}else if(i[0]instanceof pe)s=le((o=i[0].extent)==null?void 0:o.toJSON());else if(i[0]instanceof fe)s=le((l=i[0].extent)==null?void 0:l.toJSON());else if(i[0]instanceof ct)s=le((h=i[0].extent)==null?void 0:h.toJSON());else if(i[0]instanceof Ge)s=le(i[0].toJSON());else{const c=JSON.parse(i[0]);c&&!c.spatialReference&&(c.spatialReference=n.spatialReference),s=Q(new Ge(c),n.spatialReference)}if(s!==null&&s.spatialReference.equals(n.spatialReference)===!1)throw new f(n,"WrongSpatialReference",r);return tt(s)})},e.geometry=function(n,r){return t(n,r,(a,u,i)=>{p(i,1,1,n,r);let s=null;if(i[0]===null)return null;if(J(i[0]))s=Q(i[0].geometry(),n.spatialReference);else if(i[0]instanceof b)s=Q(be(i[0],n.spatialReference),n.spatialReference);else{const o=JSON.parse(i[0]);o&&!o.spatialReference&&(o.spatialReference=n.spatialReference),s=Q(le(o),n.spatialReference)}if(s!==null&&s.spatialReference.equals(n.spatialReference)===!1)throw new f(n,"WrongSpatialReference",r);return tt(s)})},e.setgeometry=function(n,r){return t(n,r,(a,u,i)=>{if(p(i,2,2,n,r),!J(i[0]))throw new f(n,"InvalidParameter",r);if(i[0].immutable===!0)throw new f(n,"Immutable",r);if(!(i[1]instanceof P||i[1]===null))throw new f(n,"InvalidParameter",r);return i[0]._geometry=i[1],E})},e.feature=function(n,r){return t(n,r,(a,u,i)=>{if(i.length===0)throw new f(n,"WrongNumberOfParameters",r);let s;if(i.length===1)if(v(i[0]))s=se.fromJson(JSON.parse(i[0]),n.timeZone);else if(J(i[0]))s=se.createFromArcadeFeature(i[0]);else if(i[0]instanceof P)s=se.createFromGraphicLikeObject(i[0],null,null,n.timeZone);else{if(!(i[0]instanceof b))throw new f(n,"InvalidParameter",r);{const o=i[0].hasField("geometry")?i[0].field("geometry"):null,l=i[0].hasField("attributes")?i[0].field("attributes"):null;let h,c;if(Re(o))h=be(o,n.spatialReference);else{if(o!=null&&!Pe(o))throw new f(n,"InvalidParameter",r);h=o}if(Re(l))c=se.parseAttributesFromDictionary(l);else{if(l!=null)throw new f(n,"InvalidParameter",r);c=null}s=se.createFromGraphicLikeObject(h,c,null,n.timeZone)}}else if(i.length===2){let o=null,l=null;if(i[0]!==null)if(i[0]instanceof P)o=i[0];else{if(!(i[0]instanceof b))throw new f(n,"InvalidParameter",r);o=be(i[0],n.spatialReference)}if(i[1]!==null){if(!(i[1]instanceof b))throw new f(n,"InvalidParameter",r);l=se.parseAttributesFromDictionary(i[1])}s=se.createFromGraphicLikeObject(o,l,null,n.timeZone)}else{let o=null;const l={};if(i[0]!==null)if(i[0]instanceof P)o=i[0];else{if(!(i[0]instanceof b))throw new f(n,"InvalidParameter",r);o=be(i[0],n.spatialReference)}for(let h=1;h<i.length;h+=2){const c=A(i[h]),d=i[h+1];if(!(d==null||v(d)||isNaN(d)||Ee(d)||W(d)||q(d)||Z(d)||H(d)))throw new f(n,"InvalidParameter",r);if(K(d)||gs(d)===!1)throw new f(n,"InvalidParameter",r);l[c]=d===E?null:d}s=se.createFromGraphicLikeObject(o,l,null,n.timeZone)}return s._geometry=Q(s.geometry(),n.spatialReference),s.immutable=!1,s})},e.dictionary=function(n,r){return t(n,r,(a,u,i)=>{if(i.length===0||i.length===1&&i[0]===null){const l=new b;return l.immutable=!1,l}if(i.length===1&&v(i[0]))try{const l=JSON.parse(i[0]),h=b.convertObjectToArcadeDictionary(l,I(n),!1);return h.immutable=!1,h}catch{throw new f(n,"InvalidParameter",r)}if(i.length===1&&i[0]instanceof P)try{const l=i[0].toJSON();l.hasZ=i[0].hasZ===!0,l.hasM=i[0].hasM===!0;const h=b.convertObjectToArcadeDictionary(l,I(n),!1);return h.immutable=!1,h}catch{throw new f(n,"InvalidParameter",r)}if(i.length===1&&J(i[0]))try{const l=new b;l.immutable=!1,l.setField("geometry",i[0].geometry());const h=new b;h.immutable=!1,l.setField("attributes",h);for(const c of i[0].keys())h.setField(c,i[0].field(c));return l}catch{throw new f(n,"InvalidParameter",r)}if(i.length===1&&(Re(i[0])||ws(i[0])||ys(i[0])))try{const l=new b;l.immutable=!1;for(const h of i[0].keys())l.setField(h,i[0].field(h));return l}catch{throw new f(n,"InvalidParameter",r)}if(i.length===2&&i[0]instanceof b&&H(i[1]))try{if(i[1]!==!0){const l=new b;l.immutable=!1;for(const h of i[0].keys())l.setField(h,i[0].field(h));return l}return i[0].deepClone()}catch{throw new f(n,"InvalidParameter",r)}if(i.length%2!=0)throw new f(n,"WrongNumberOfParameters",r);const s=Object.create(null);for(let l=0;l<i.length;l+=2){const h=A(i[l]),c=i[l+1];if(!(c==null||v(c)||isNaN(c)||Ee(c)||W(c)||H(c)||Z(c)||q(c)||k(c)||R(c)))throw new f(n,"InvalidParameter",r);if(K(c))throw new f(n,"InvalidParameter",r);s[h]=c===E?null:c}const o=new b(s);return o.immutable=!1,o})},e.haskey=function(n,r){return t(n,r,(a,u,i)=>{p(i,2,2,n,r);const s=A(i[1]);if(Oe(i[0])||i[0]instanceof b)return i[0].hasField(s);if(i[0]instanceof P){const o=Xe(i[0],s,null,null,2);return!o||o.keystate!=="notfound"}throw new f(n,"InvalidParameter",r)})},e.hasvalue=function(n,r){return t(n,r,(a,u,i)=>(p(i,2,2,n,r),Cr(i[0],i[1])!=null))},e.indexof=function(n,r){return t(n,r,(a,u,i)=>{p(i,2,2,n,r);const s=i[1];if(k(i[0])){for(let o=0;o<i[0].length;o++)if(Ce(s,i[0][o]))return o;return-1}if(R(i[0])){const o=i[0].length();for(let l=0;l<o;l++)if(Ce(s,i[0].get(l)))return l;return-1}throw new f(n,"InvalidParameter",r)})},e.angle=function(n,r){return t(n,r,(a,u,i)=>{if(i=M(i),p(i,2,3,n,r),!(i[0]instanceof z))throw new f(n,"InvalidParameter",r);if(!(i[1]instanceof z))throw new f(n,"InvalidParameter",r);if(i.length>2&&!(i[2]instanceof z))throw new f(n,"InvalidParameter",r);return i.length===2?Js(i[0],i[1]):Xs(i[0],i[1],i[2])})},e.bearing=function(n,r){return t(n,r,(a,u,i)=>{if(i=M(i),p(i,2,3,n,r),!(i[0]instanceof z))throw new f(n,"InvalidParameter",r);if(!(i[1]instanceof z))throw new f(n,"InvalidParameter",r);if(i.length>2&&!(i[2]instanceof z))throw new f(n,"InvalidParameter",r);return i.length===2?Qs(i[0],i[1]):Ys(i[0],i[1],i[2])})}}function ao(e,t,n){if(pt(t))return as(e,t,n);if(pr(t)){const a=Bi(e,t,n)[0];if(a==null)throw new ki("closestPointOnCurve:unexpected-error","Failed to find close point on bezier curve");return a}if(Dr(t)){const a=gr(e,t);return un(a,n)}if(wr(t)){const a=yr(e,t);return un(a,n)}const r=Ti(e,t);return Ni(r,n)}function so(e,t,n=1){if(pr(t))return rs(e,t,n);if(Dr(t)){const r=gr(e,t);return r.isInvalid?Math.sqrt(Zr(e,t.c[0])):Wr(r)}if(wr(t)){const r=yr(e,t);return r.isInvalid?Math.sqrt(Zr(e,t.a[0])):Wr(r)}return is(e,t,n)}const ei=1e-6;function oo(e,t,n,r){const a=Bi(e,t,n).filter(({distance:o})=>o<=r),u=[];let i=0,s=t;for(const{t:o}of a){const l=(o-i)/(1-i);if(l<ei||1-l<ei)continue;const[h,c]=ss(e,s,o);u.push(h),s=c,i=o}return u.push(s),u}function uo(e,t,n,r){const a=gr(e,t);if(a.isInvalid)return[Qe(t)];const{t:u,distance:i}=un(a,n);return i<=r?os(a,t,u):[Qe(t)]}function lo(e,t,n,r){const a=yr(e,t);if(a.isInvalid)return[Qe(t)];const{t:u,distance:i}=un(a,n);return i<=r?us(a,t,u):[Qe(t)]}function co(e,t,n,r){const a=Ti(e,t);if(a.isInvalid)return[Qe(t)];const{t:u,distance:i}=Ni(a,n);return i<=r?ls(a,t,u):[Qe(t)]}function fo(e,t,n,r){return pt(t)?[Qe(t)]:pr(t)?oo(e,t,n,r):Dr(t)?uo(e,t,n,r):wr(t)?lo(e,t,n,r):co(e,t,n,r)}function ho(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2])}function mo(e){const t=ho(e);return[e[0]/t,e[1]/t,e[2]/t]}function Yi(e,t,n,r){const a=mo([t[0]-e[0],t[1]-e[1],t[2]*r-e[2]*r]);return[e[0]+a[0]*n,e[1]+a[1]*n,e[2]+a[2]*n]}function tr(e,t,n,r){return e+(t-e)/n*r}function ea(e,t,n){let r=t[0]-e[0],a=t[1]-e[1];const u=Math.sqrt(r*r+a*a);return r/=u,a/=u,r*=n,a*=n,[e[0]+r,e[1]+a]}function po(e,t){if(!e)return null;switch(e.type){case"extent":case"multipoint":case"mesh":case"point":return null}const n=e.type==="polygon"?e.rings:e.paths;let r=1;if((e.spatialReference.vcsWkid||e.spatialReference.latestVcsWkid)&&(r=vt(e.spatialReference)/Et(e.spatialReference)),n.length===0||n[0].length===0||e.hasM===!1)return null;let a=-1,u=0;const{hasM:i,hasZ:s}=e,o=s?3:2,l=2;for(const h of n){if(a++,h.length>0&&h[0][o]===t)return{partId:a,distanceAlong:u,coordinate:new z({hasZ:s,hasM:i,spatialReference:e.spatialReference,x:h[0][0],y:h[0][1],...s?{z:h[0][l]}:{},...i?{m:h[0][o]}:{}}),segmentId:0};let c=-1;for(let d=1;d<h.length;d++){const D=Je(h[d-1],h[d],s,r);c++;const g=h[d][o]-h[d-1][o],w=h[d][o];if(w===t)return{partId:a,distanceAlong:D+u,coordinate:new z({hasZ:s,hasM:i,spatialReference:e.spatialReference,x:h[d][0],y:h[d][1],...s?{z:h[d][l]}:{},...i?{m:h[d][o]}:{}}),segmentId:c};if(w>t&&t>h[d-1][o]){const y=(t-h[d-1][o])/g*D;let N=s?Yi(h[d-1],h[d],y,r):ea(h[d-1],h[d],y);N=[...N,t];const G=new z({hasZ:s,hasM:i,spatialReference:e.spatialReference,x:N[0],y:N[1],...s?{z:N[l]}:{},...i?{m:N[o]}:{}});return{partId:a,distanceAlong:u+Je(h[d-1],[G.x,G.y,...s?[G.z]:[],...i?[G.m]:[]],s,r),coordinate:G,segmentId:c}}u+=D}}return null}function Do(e,t){if(!e)return null;switch(e.type){case"extent":case"multipoint":case"mesh":case"point":return null}const n=e.type==="polygon"?e.rings:e.paths;if(t<0)return null;let r=1;(e.spatialReference.vcsWkid||e.spatialReference.latestVcsWkid)&&(r=vt(e.spatialReference)/Et(e.spatialReference));let a=0;const{hasZ:u,hasM:i}=e,s=u?3:2,o=2;let l=-1;if(t===0)return n.length===0||n[0].length===0?null:{partId:0,coordinate:new z({hasZ:u,hasM:i,spatialReference:e.spatialReference,x:n[0][0][0],y:n[0][0][1],...u?{z:n[0][0][o]}:{},...i?{m:n[0][0][s]}:{}}),segmentId:0};for(const h of n){l++;let c=-1;for(let d=1;d<h.length;d++){c++;const D=Je(h[d-1],h[d],u,r),g=a+D;if(g===t)return{partId:l,coordinate:new z({hasZ:u,hasM:i,spatialReference:e.spatialReference,x:h[d][0],y:h[d][1],...u?{z:h[d][o]}:{},...i?{m:h[d][s]}:{}}),segmentId:c};if(g>t){let w=u?Yi(h[d-1],h[d],t-a,r):ea(h[d-1],h[d],t-a);return w=[...w,tr(h[d-1][s],h[d][s],D,t-a)],{partId:l,coordinate:new z({hasZ:u,hasM:i,spatialReference:e.spatialReference,x:w[0],y:w[1],...u?{z:w[o]}:{},...i?{m:w[s]}:{}}),segmentId:c}}a=g}}return null}function go(e,t){if(!e||!t)return null;let n=1;(t.spatialReference.vcsWkid||t.spatialReference.latestVcsWkid)&&(n=vt(t.spatialReference)/Et(t.spatialReference));let r=null,a=0;return r=e,a=e.hasZ&&t.hasZ?We([t.x,t.y,t.z],[e.x,e.y,e.z],n):Er([t.x,t.y],[e.x,e.y]),{coordinate:r,distance:a}}function wo(e,t){if(!e||!t)return null;let n=1;(t.spatialReference.vcsWkid||t.spatialReference.latestVcsWkid)&&(n=vt(t.spatialReference)/Et(t.spatialReference));let r=null,a=0,u=Number.MAX_VALUE,i=-1,s=-1;for(const o of e.points||[]){s++;const l=e.hasZ&&t.hasZ?Zs([o[0],o[1],o[2]],[t.x,t.y,t.z],n):Hs([o[0],o[1]],[t.x,t.y]);l<u&&(u=l,i=s)}return i<0?null:(a=u,r=e.getPoint(i),{coordinate:r,distance:Math.sqrt(a)})}function yo(e,t){if(!e||!t)return null;const n=e.type==="polygon"?e.curveRings??e.rings:e.curvePaths??e.paths;let r=1;(t.spatialReference.vcsWkid||t.spatialReference.latestVcsWkid)&&(r=vt(t.spatialReference)/Et(t.spatialReference));let a=Number.MAX_VALUE,u=-1,i=-1,s=-1;const o=e.hasZ&&t.hasZ;let l=null;const h=o?[t.x,t.y,t.z]:[t.x,t.y];for(const Ue of n){i++;for(let ve=1;ve<Ue.length;ve++){const St=xo(h,Ue[ve-1],Ue[ve],o,r);St.distance<a&&(a=St.distance,l=St.closestPoint,s=i,u=ve-1)}}if(u<0||!l)return null;const c=e.hasM&&e.hasZ?3:2,d=2,D=n[s][u],g=Pt(D),w=n[s][u+1],y=Pt(w);let N=null,G=null,_e=o?l[2]:null;const Zt=pt(w)?l:fo(g,w,l,.001)[0];let Ht=Je(g,Zt,o,r);const Gr=Je(g,w,o,r);e.hasM&&(G=tr(g[c],y[c],Gr,Ht)),!e.hasZ||t.hasZ!==!1&&pt(Zt)||(_e=tr(g[d],y[d],Gr,Ht),Pt(Zt)[d]=_e,Ht=Je(g,Zt,!0,r)),N=new z({hasZ:o,hasM:e.hasM,spatialReference:t.spatialReference,x:l[0],y:l[1],...e.hasZ?{z:_e}:{},...e.hasM?{m:G}:{}});let Sn=0;for(let Ue=0;Ue<=s;Ue++){const ve=n[Ue],St=Ue===s?u:ve.length-1;for(let Kt=1;Kt<=St;Kt++)Sn+=Je(Pt(ve[Kt-1]),ve[Kt],e.hasZ,r)}return Sn+=Ht,{partId:s,segmentId:u,coordinate:N,distance:a,distanceAlong:Sn}}function xo(e,t,n,r,a){const u=Pt(t);if(pt(n)){const s=r?ro(e,u,n):io(e,u,n);return{closestPoint:s,distance:r?We(s,e,a):Er(s,e)}}const i=ao(u,n,e);if(!i)throw new ki("arcade:closestPointOnSegment","The given point is not on the curve");return{closestPoint:i.curvePoint,distance:i.distance}}function Je(e,t,n,r){return pt(t)?n?We(e,t,r):Er(e,t):so(e,t,.001)}function Fo(e,t){if(!e||!t)return null;if(e.type==="extent"){const n=e;e=new pe({spatialReference:e.spatialReference,rings:[[[n.xmin,n.ymin],[n.xmin,n.ymax],[n.xmax,n.ymax],[n.xmax,n.ymin],[n.xmin,n.ymin]]]})}switch(e.type){case"point":return go(e,t)??null;case"multipoint":return wo(e,t)??null;case"polygon":case"polyline":return yo(e,t)??null;default:return null}}function xe(e,t,n){if(p(e,2,2,t,n),!(e[0]instanceof P&&e[1]instanceof P)&&!(e[0]instanceof P&&e[1]===null)&&!(e[1]instanceof P&&e[0]===null)&&(e[0]!==null||e[1]!==null))throw new f(t,"InvalidParameter",n)}function Ao(e){if(e.type!=="polygon"&&e.type!=="polyline"&&e.type!=="extent")return 0;let t=1;(e.spatialReference.vcsWkid||e.spatialReference.latestVcsWkid)&&(t=vt(e.spatialReference)/Et(e.spatialReference));let n=0;if(e.type==="polyline")for(const r of e.paths)for(let a=1;a<r.length;a++)n+=We(r[a],r[a-1],t);else if(e.type==="polygon")for(const r of e.rings){for(let a=1;a<r.length;a++)n+=We(r[a],r[a-1],t);(r[0][0]!==r[r.length-1][0]||r[0][1]!==r[r.length-1][1]||r[0][2]!==void 0&&r[0][2]!==r[r.length-1][2])&&(n+=We(r[0],r[r.length-1],t))}else e.type==="extent"&&(n+=2*We([e.xmin,e.ymin,0],[e.xmax,e.ymin,0],t),n+=2*We([e.xmin,e.ymin,0],[e.xmin,e.ymax,0],t),n*=2,n+=4*Math.abs(j(e.zmax,0)*t-j(e.zmin,0)*t));return n}const Co=(e,t,n)=>{if(n=M(n),p(n,2,2,e,t),n[0]===null)return null;let r=n[0];if((k(n[0])||R(n[0]))&&(r=qe(n[0],e.spatialReference)),r===null)return null;if(!(r instanceof P))throw new f(e,"InvalidParameter",t);if(!(r instanceof fe))throw new f(e,"InvalidParameter",t);if(!W(n[1]))throw new f(e,"InvalidParameter",t);const a=po(r,n[1]);return a?b.convertObjectToArcadeDictionary(a,I(e),!1,!0):null},Eo=(e,t,n)=>{if(n=M(n),p(n,2,2,e,t),n[0]===null)return null;let r=n[0];if((k(n[0])||R(n[0]))&&(r=qe(n[0],e.spatialReference)),r===null)return null;if(!(r instanceof P))throw new f(e,"InvalidParameter",t);if(!(r instanceof fe))throw new f(e,"InvalidParameter",t);const a=n[1];if(a===null)return null;if(!(a instanceof z))throw new f(e,"InvalidParameter",t);const u=Fo(r,a);return u?b.convertObjectToArcadeDictionary(u,I(e),!1,!0):null},vo=(e,t,n)=>{if(n=M(n),p(n,2,2,e,t),n[0]===null)return null;let r=n[0];if((k(n[0])||R(n[0]))&&(r=qe(n[0],e.spatialReference)),r===null)return null;if(!(r instanceof P))throw new f(e,"InvalidParameter",t);if(!(r instanceof fe))throw new f(e,"InvalidParameter",t);if(!W(n[1]))throw new f(e,"InvalidParameter",t);const a=Do(r,n[1]);return a?b.convertObjectToArcadeDictionary(a,I(e),!1,!0):null},bo=new Le(["geodesic","great-elliptic","loxodrome","normal-section","shape-preserving"]);function Nt(e){return e==null?"geodesic":bo.get(A(e))}const Io=new Le(["geometric","labelPoint"]);function So(e){return e==null?"geometric":Io.get(A(e))}const ko=new Le(["round","bevel","miter","square"]);function Bo(e){return e==null?"round":ko.lookup(A(e))??"round"}let L;async function To(){L==null&&(L=await Fe(()=>import("./operators-Cw6qbLnZ-ay1rSQOm.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59]),import.meta.url),await L.loadAll())}function ta(e,t){e.disjoint=function(n,r){return t(n,r,(a,u,i)=>(i=M(i),xe(i,n,r),i[0]===null||i[1]===null||L.disjoint.execute(i[0],i[1])))},e.intersects=function(n,r){return t(n,r,(a,u,i)=>(i=M(i),xe(i,n,r),i[0]!==null&&i[1]!==null&&L.intersects.execute(i[0],i[1])))},e.touches=function(n,r){return t(n,r,(a,u,i)=>(i=M(i),xe(i,n,r),i[0]!==null&&i[1]!==null&&L.touches.execute(i[0],i[1])))},e.crosses=function(n,r){return t(n,r,(a,u,i)=>(i=M(i),xe(i,n,r),i[0]!==null&&i[1]!==null&&L.crosses.execute(i[0],i[1])))},e.within=function(n,r){return t(n,r,(a,u,i)=>(i=M(i),xe(i,n,r),i[0]!==null&&i[1]!==null&&L.within.execute(i[0],i[1])))},e.contains=function(n,r){return t(n,r,(a,u,i)=>(i=M(i),xe(i,n,r),i[0]!==null&&i[1]!==null&&L.contains.execute(i[0],i[1])))},e.overlaps=function(n,r){return t(n,r,(a,u,i)=>(i=M(i),xe(i,n,r),i[0]!==null&&i[1]!==null&&L.overlaps.execute(i[0],i[1])))},e.equals=function(n,r){return t(n,r,(a,u,i)=>(p(i,2,2,n,r),i[0]===i[1]||(i[0]instanceof P&&i[1]instanceof P?L.equals.execute(i[0],i[1]):(Ee(i[0])&&Ee(i[1])||q(i[0])&&q(i[1])||!(!Z(i[0])||!Z(i[1])))&&i[0].equals(i[1]))))},e.relate=function(n,r){return t(n,r,(a,u,i)=>{if(i=M(i),p(i,3,3,n,r),i[0]instanceof P&&i[1]instanceof P)return L.relate.execute(i[0],i[1],A(i[2]));if(i[0]instanceof P&&i[1]===null||i[1]instanceof P&&i[0]===null||i[0]===null&&i[1]===null)return!1;throw new f(n,"InvalidParameter",r)})},e.intersection=function(n,r){return t(n,r,(a,u,i)=>(i=M(i),xe(i,n,r),i[0]===null||i[1]===null?null:L.intersection.execute(i[0],i[1])))},e.union=function(n,r){return t(n,r,(a,u,i)=>{if((i=M(i)).length===0)throw new f(n,"WrongNumberOfParameters",r);const s=[];if(i.length===1)if(k(i[0])){for(const o of M(i[0]))if(o!==null){if(!(o instanceof P))throw new f(n,"InvalidParameter",r);s.push(o)}}else{if(!R(i[0])){if(i[0]instanceof P)return Q(we(i[0]),n.spatialReference);if(i[0]===null)return null;throw new f(n,"InvalidParameter",r)}for(const o of M(i[0].toArray()))if(o!==null){if(!(o instanceof P))throw new f(n,"InvalidParameter",r);s.push(o)}}else for(const o of i)if(o!==null){if(!(o instanceof P))throw new f(n,"InvalidParameter",r);s.push(o)}return s.length===0?null:L.union.executeMany(s)})},e.difference=function(n,r){return t(n,r,(a,u,i)=>(i=M(i),xe(i,n,r),i[0]===null?null:i[1]===null?we(i[0]):L.difference.execute(i[0],i[1])))},e.symmetricdifference=function(n,r){return t(n,r,(a,u,i)=>(i=M(i),xe(i,n,r),i[0]===null&&i[1]===null?null:i[0]===null?we(i[1]):i[1]===null?we(i[0]):L.symmetricDifference.execute(i[0],i[1])))},e.clip=function(n,r){return t(n,r,(a,u,i)=>{if(i=M(i),p(i,2,2,n,r),!(i[1]instanceof Ge)&&i[1]!==null)throw new f(n,"InvalidParameter",r);if(i[0]===null)return null;if(!(i[0]instanceof P))throw new f(n,"InvalidParameter",r);return i[1]===null?null:L.clip.execute(i[0],i[1])})},e.cut=function(n,r){return t(n,r,(a,u,i)=>{if(i=M(i),p(i,2,2,n,r),!(i[1]instanceof fe)&&i[1]!==null)throw new f(n,"InvalidParameter",r);if(i[0]===null)return[];if(!(i[0]instanceof P))throw new f(n,"InvalidParameter",r);return i[1]===null?[we(i[0])]:L.cut.execute(i[0],i[1])})},e.area=function(n,r){return t(n,r,(a,u,i)=>{p(i,1,2,n,r);let s=(i=M(i))[0];if((k(i[0])||R(i[0]))&&(s=Tn(i[0],n.spatialReference)),s===null)return 0;if(!(s instanceof P))throw new f(n,"InvalidParameter",r);return kt(s.spatialReference,Qr(i[1]),L.area.execute(s))})},e.areageodetic=function(n,r){return t(n,r,(a,u,i)=>{p(i,1,3,n,r);let s=(i=M(i))[0];(k(s)||R(s))&&(s=Tn(s,n.spatialReference));const o=Qr(i[1]),l=Nt(i[2]);if(s==null)return 0;if(!Pe(s))throw new f(n,"InvalidParameter",r);return Bt(ks,o,L.geodeticArea.execute(s,{curveType:l}))})},e.length=function(n,r){return t(n,r,(a,u,i)=>{p(i,1,2,n,r);let s=(i=M(i))[0];if((k(i[0])||R(i[0]))&&(s=qe(i[0],n.spatialReference)),s===null)return 0;if(!(s instanceof P))throw new f(n,"InvalidParameter",r);return kt(s.spatialReference,he(i[1]),L.length.execute(s))})},e.length3d=function(n,r){return t(n,r,(a,u,i)=>{p(i,1,2,n,r);let s=(i=M(i))[0];if((k(i[0])||R(i[0]))&&(s=qe(i[0],n.spatialReference)),s===null)return 0;if(!(s instanceof P))throw new f(n,"InvalidParameter",r);return s.hasZ===!0?kt(s.spatialReference,he(i[1]),Ao(s)):kt(s.spatialReference,he(i[1]),L.length.execute(s))})},e.lengthgeodetic=function(n,r){return t(n,r,(a,u,i)=>{p(i,1,3,n,r);let s=(i=M(i))[0];(k(i[0])||R(i[0]))&&(s=qe(i[0],n.spatialReference));const o=Nt(i[2]);if(s==null)return 0;if(s!=null&&!Pe(s))throw new f(n,"InvalidParameter",r);const l=he(i[1]);return Bt(Xt,l,L.geodeticLength.execute(s,{curveType:o}))})},e.distance=function(n,r){return t(n,r,(a,u,i)=>{i=M(i),p(i,2,3,n,r);let s=i[0];if((k(i[0])||R(i[0]))&&(s=Nn(i[0],n.spatialReference)),!(s instanceof P))throw new f(n,"InvalidParameter",r);let o=i[1];if((k(i[1])||R(i[1]))&&(o=Nn(i[1],n.spatialReference)),!(o instanceof P))throw new f(n,"InvalidParameter",r);return kt(s.spatialReference,he(i[2]),L.distance.execute(s,o))})},e.distancegeodetic=function(n,r){return t(n,r,(a,u,i)=>{i=M(i),p(i,2,4,n,r);const s=i[0];if(!(s instanceof z))throw new f(n,"InvalidParameter",r);const o=i[1];if(!(o instanceof z))throw new f(n,"InvalidParameter",r);const l=he(i[2]),h=Nt(i[3]),c=new fe({paths:[],spatialReference:s.spatialReference});return c.addPath([s,o]),Bt(Xt,l,L.geodeticLength.execute(c,{curveType:h}))})},e.densify=function(n,r){return t(n,r,(a,u,i)=>{if(i=M(i),p(i,2,3,n,r),i[0]===null)return null;if(!(i[0]instanceof P))throw new f(n,"InvalidParameter",r);const s=m(i[1]);if(isNaN(s))throw new f(n,"InvalidParameter",r);if(s<=0)throw new f(n,"InvalidParameter",r);const o=Pn(he(i[2]),i[0].spatialReference,s);switch(i[0].type){case"polygon":case"polyline":case"extent":return L.densify.execute(i[0],o);default:return i[0]}})},e.densifygeodetic=function(n,r){return t(n,r,(a,u,i)=>{i=M(i),p(i,2,4,n,r);const s=i[0];if(s==null)return null;if(!Pe(s))throw new f(n,"InvalidParameter",r);const o=m(i[1]);if(isNaN(o))throw new f(n,"InvalidParameter",r);if(o<=0)throw new f(n,"InvalidParameter",r);const l=he(i[2]),h=Nt(i[3]),c=Bt(l,Xt,o);switch(s.type){case"polygon":case"polyline":case"extent":return L.geodeticDensify.execute(s,c,{curveType:h});default:return s}})},e.generalize=function(n,r){return t(n,r,(a,u,i)=>{if(i=M(i),p(i,2,4,n,r),i[0]===null)return null;if(!(i[0]instanceof P))throw new f(n,"InvalidParameter",r);const s=m(i[1]);if(isNaN(s))throw new f(n,"InvalidParameter",r);const o=Pn(he(i[3]),i[0].spatialReference,s);return L.generalize.execute(i[0],o,{removeDegenerateParts:cn(j(i[2],!0))})})},e.buffer=function(n,r){return t(n,r,(a,u,i)=>{if(i=M(i),p(i,2,3,n,r),i[0]===null)return null;if(!(i[0]instanceof P))throw new f(n,"InvalidParameter",r);const s=m(i[1]);if(isNaN(s))throw new f(n,"InvalidParameter",r);return s===0?we(i[0]):L.buffer.execute(i[0],Pn(he(i[2]),i[0].spatialReference,s))})},e.buffergeodetic=function(n,r){return t(n,r,(a,u,i)=>{i=M(i),p(i,2,4,n,r);const s=i[0];if(s==null)return null;if(!Pe(s))throw new f(n,"InvalidParameter",r);const o=m(i[1]);if(isNaN(o))throw new f(n,"InvalidParameter",r);if(o===0)return we(s);const l=he(i[2]),h=Nt(i[3]);return L.geodesicBuffer.execute(s,Bt(l,Xt,o),{curveType:h})})},e.offset=function(n,r){return t(n,r,(a,u,i)=>{i=M(i),p(i,2,6,n,r);const s=i[0];if(s===null)return null;if(!(s instanceof pe||s instanceof fe))throw new f(n,"InvalidParameter",r);const o=m(i[1]);if(isNaN(o))throw new f(n,"InvalidParameter",r);const l=i[2],h=Bo(i[3]),c=m(j(i[4],10));if(isNaN(c))throw new f(n,"InvalidParameter",r);const d=m(j(i[5],0));if(isNaN(d))throw new f(n,"InvalidParameter",r);return L.executeOffset(s,o,l,h,c,d)})},e.rotate=function(n,r){return t(n,r,(a,u,i)=>{var h;if(i=M(i),p(i,2,3,n,r),i[0]===null)return null;if(!(i[0]instanceof P))throw new f(n,"InvalidParameter",r);const s=i[0]instanceof Ge?pe.fromExtent(i[0]):i[0],o=m(i[1]);if(isNaN(o))throw new f(n,"InvalidParameter",r);const l=j(i[2],null);if(l===null){const c=s.type==="point"?s:(h=s.extent)==null?void 0:h.center;return L.rotate(s,o,c==null?void 0:c.x,c==null?void 0:c.y)}if(l instanceof z)return L.rotate(s,o,l.x,l.y);throw new f(n,"InvalidParameter",r)})},e.centroid=function(n,r){return t(n,r,(a,u,i)=>{if(i=M(i),p(i,1,2,a,u),i[0]===null)return null;const s=So(i[1]);let o=i[0];if((k(i[0])||R(i[0]))&&(o=s==="geometric"?Nn(i[0],a.spatialReference):Tn(i[0],a.spatialReference),o===null))return null;if(!(o instanceof P))throw new f(a,"InvalidParameter",u);return s==="geometric"?L.centroid.execute(o):L.labelPoint.execute(o)})},e.measuretocoordinate=function(n,r){return t(n,r,Co)},e.pointtocoordinate=function(n,r){return t(n,r,Eo)},e.distancetocoordinate=function(n,r){return t(n,r,vo)},e.multiparttosinglepart=function(n,r){return t(n,r,(a,u,i)=>{if(i=M(i),p(i,1,1,n,r),i[0]===null)return null;if(!(i[0]instanceof P))throw new f(n,"InvalidParameter",r);if(i[0]instanceof z)return[Q(we(i[0]),n.spatialReference)];if(i[0]instanceof Ge)return[Q(we(i[0]),n.spatialReference)];const s=L.simplify.execute(i[0]);if(s instanceof pe){const o=[],l=[];for(let h=0;h<s.rings.length;h++)if(s.isClockwise(s.rings[h])){const c=le({rings:[s.rings[h]],hasZ:s.hasZ===!0,hasM:s.hasM===!0,spatialReference:s.spatialReference.toJSON()});o.push(c)}else l.push({ring:s.rings[h],pt:s.getPoint(h,0)});for(let h=0;h<l.length;h++)for(let c=0;c<o.length;c++)if(o[c].contains(l[h].pt)){o[c].addRing(l[h].ring);break}return o}if(s instanceof fe){const o=[];for(let l=0;l<s.paths.length;l++){const h=le({paths:[s.paths[l]],hasZ:s.hasZ===!0,hasM:s.hasM===!0,spatialReference:s.spatialReference.toJSON()});o.push(h)}return o}if(i[0]instanceof ct){const o=[],l=Q(we(i[0]),n.spatialReference);for(let h=0;h<l.points.length;h++)o.push(l.getPoint(h));return o}return null})},e.isselfintersecting=function(n,r){return t(n,r,(a,u,i)=>{p(i,1,1,a,u);let s=(i=M(i))[0];if((k(i[0])||R(i[0]))&&(s=qe(i[0],a.spatialReference)),s instanceof ct){const o=s.points;for(let l=0;l<o.length;l++)for(let h=l+1;h<o.length;h++)if(ts(o[l],o[h]))return!0;return!1}return(s instanceof fe||s instanceof pe)&&L.isSelfIntersecting(s)})},e.issimple=function(n,r){return t(n,r,(a,u,i)=>{if(i=M(i),p(i,1,1,n,r),i[0]===null)return!0;if(!(i[0]instanceof P))throw new f(n,"InvalidParameter",r);return L.simplify.isSimple(i[0])})},e.simplify=function(n,r){return t(n,r,(a,u,i)=>{if(i=M(i),p(i,1,1,n,r),i[0]===null)return null;if(!(i[0]instanceof P))throw new f(n,"InvalidParameter",r);return L.simplify.execute(i[0])})},e.convexhull=function(n,r){return t(n,r,(a,u,i)=>{if(i=M(i),p(i,1,1,n,r),i[0]===null)return null;if(!(i[0]instanceof P))throw new f(n,"InvalidParameter",r);return L.convexHull.execute(i[0])})},e.nearestcoordinate=function(n,r){return t(n,r,(a,u,i)=>{if(i=M(i),p(i,2,2,n,r),!(i[0]instanceof P||i[0]===null))throw new f(n,"InvalidParameter",r);if(!(i[1]instanceof z||i[1]===null))throw new f(n,"InvalidParameter",r);if(i[0]===null||i[1]===null)return null;const s=i[0]instanceof Ge?pe.fromExtent(i[0]):i[0],o=L.proximity.getNearestCoordinate(s,i[1],{calculateLeftRightSide:!0});return o===null||o.isEmpty?null:b.convertObjectToArcadeDictionary({coordinate:o.coordinate,distance:o.distance,sideOfLine:o.distance===0?"straddle":o.isRightSide?"right":"left"},I(n),!1,!0)})},e.nearestvertex=function(n,r){return t(n,r,(a,u,i)=>{if(i=M(i),p(i,2,2,n,r),!(i[0]instanceof P||i[0]===null))throw new f(n,"InvalidParameter",r);if(!(i[1]instanceof z||i[1]===null))throw new f(n,"InvalidParameter",r);if(i[0]===null||i[1]===null)return null;const s=i[0]instanceof Ge?pe.fromExtent(i[0]):i[0],o=L.proximity.getNearestVertex(s,i[1]);return o===null||o.isEmpty?null:b.convertObjectToArcadeDictionary({coordinate:o.coordinate,distance:o.distance,sideOfLine:o.distance===0?"straddle":o.isRightSide?"right":"left"},I(n),!1,!0)})}}function na(e,t){function n(r,a,u){const i=m(r);return isNaN(i)?i:isNaN(a)||isNaN(u)||a>u?NaN:i<a?a:i>u?u:i}e.number=function(r,a){return t(r,a,(u,i,s)=>{p(s,1,2,r,a);const o=s[0];if(W(o))return o;if(o===null)return 0;if(Ee(o)||q(o)||Z(o))return o.toNumber();if(H(o))return Number(o);if(k(o))return NaN;if(o===""||o===void 0)return Number(o);if(v(o)){if(s[1]!==void 0){let l=Yn(s[1],"","");return l=Yn(l,"",""),Bs(o,{pattern:l})}return Number(o.trim())}return Number(o)})},e.abs=function(r,a){return t(r,a,(u,i,s)=>(p(s,1,1,r,a),Math.abs(m(s[0]))))},e.acos=function(r,a){return t(r,a,(u,i,s)=>(p(s,1,1,r,a),Math.acos(m(s[0]))))},e.asin=function(r,a){return t(r,a,(u,i,s)=>(p(s,1,1,r,a),Math.asin(m(s[0]))))},e.atan=function(r,a){return t(r,a,(u,i,s)=>(p(s,1,1,r,a),Math.atan(m(s[0]))))},e.atan2=function(r,a){return t(r,a,(u,i,s)=>(p(s,2,2,r,a),Math.atan2(m(s[0]),m(s[1]))))},e.ceil=function(r,a){return t(r,a,(u,i,s)=>{if(p(s,1,2,r,a),s.length===2){let o=m(s[1]);return isNaN(o)&&(o=0),kn("ceil",m(s[0]),-1*o)}return Math.ceil(m(s[0]))})},e.round=function(r,a){return t(r,a,(u,i,s)=>{if(p(s,1,2,r,a),s.length===2){let o=m(s[1]);return isNaN(o)&&(o=0),kn("round",m(s[0]),-1*o)}return Math.round(m(s[0]))})},e.floor=function(r,a){return t(r,a,(u,i,s)=>{if(p(s,1,2,r,a),s.length===2){let o=m(s[1]);return isNaN(o)&&(o=0),kn("floor",m(s[0]),-1*o)}return Math.floor(m(s[0]))})},e.cos=function(r,a){return t(r,a,(u,i,s)=>(p(s,1,1,r,a),Math.cos(m(s[0]))))},e.isnan=function(r,a){return t(r,a,(u,i,s)=>(p(s,1,1,r,a),typeof s[0]=="number"&&isNaN(s[0])))},e.exp=function(r,a){return t(r,a,(u,i,s)=>(p(s,1,1,r,a),Math.exp(m(s[0]))))},e.log=function(r,a){return t(r,a,(u,i,s)=>(p(s,1,1,r,a),Math.log(m(s[0]))))},e.pow=function(r,a){return t(r,a,(u,i,s)=>(p(s,2,2,r,a),m(s[0])**m(s[1])))},e.random=function(r,a){return t(r,a,(u,i,s)=>(p(s,0,0,r,a),Math.random()))},e.sin=function(r,a){return t(r,a,(u,i,s)=>(p(s,1,1,r,a),Math.sin(m(s[0]))))},e.sqrt=function(r,a){return t(r,a,(u,i,s)=>(p(s,1,1,r,a),Math.sqrt(m(s[0]))))},e.tan=function(r,a){return t(r,a,(u,i,s)=>(p(s,1,1,r,a),Math.tan(m(s[0]))))},e.isempty=function(r,a){return t(r,a,(u,i,s)=>{if(p(s,1,2,u,i),s.length>=2&&!H(s[1]))throw new f(u,"InvalidParameter",i);return j(s[1],!1)?Ns(s[0]):Pi(s[0])})},e.boolean=function(r,a){return t(r,a,(u,i,s)=>{p(s,1,1,r,a);const o=s[0];return cn(o)})},e.constrain=function(r,a){return t(r,a,(u,i,s)=>{p(s,3,3,r,a);const o=m(s[1]),l=m(s[2]);if(k(s[0])){const h=[];for(const c of s[0])h.push(n(c,o,l));return h}if(R(s[0])){const h=[];for(let c=0;c<s[0].length();c++)h.push(n(s[0].get(c),o,l));return h}return n(s[0],o,l)})}}function ra(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t/e.length}function ti(e){const t=ra(e);let n=0;for(let r=0;r<e.length;r++)n+=(t-e[r])**2;return n/e.length}function No(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t}function Mo(e,t){const n=[],r={},a=[];for(let u=0;u<e.length;u++){if(e[u]!==void 0&&e[u]!==null&&e[u]!==E){const i=e[u];if(W(i)||v(i))r[i]===void 0&&(n.push(i),r[i]=1);else{let s=!1;for(let o=0;o<a.length;o++)Ce(a[o],i)===!0&&(s=!0);s===!1&&(a.push(i),n.push(i))}}if(n.length>=t&&t!==-1)return n}return n}function Rn(e,t,n=1e3){switch(e.toLowerCase()){case"distinct":return Mo(t,n);case"avg":case"mean":return ra(nt(t));case"min":return Math.min.apply(Math,nt(t));case"sum":return No(nt(t));case"max":return Math.max.apply(Math,nt(t));case"stdev":case"stddev":return Math.sqrt(ti(nt(t)));case"var":case"variance":return ti(nt(t));case"count":return t.length}return 0}function ze(e,t){if(t.length===1){if(k(t[0]))return Rn(e,t[0],-1);if(R(t[0]))return Rn(e,t[0].toArray(),-1)}return Rn(e,t,-1)}function ia(e,t){e.stdev=function(n,r){return t(n,r,(a,u,i)=>ze("stdev",i))},e.variance=function(n,r){return t(n,r,(a,u,i)=>ze("variance",i))},e.average=function(n,r){return t(n,r,(a,u,i)=>ze("mean",i))},e.mean=function(n,r){return t(n,r,(a,u,i)=>ze("mean",i))},e.sum=function(n,r){return t(n,r,(a,u,i)=>ze("sum",i))},e.min=function(n,r){return t(n,r,(a,u,i)=>ze("min",i))},e.max=function(n,r){return t(n,r,(a,u,i)=>ze("max",i))},e.distinct=function(n,r){return t(n,r,(a,u,i)=>ze("distinct",i))},e.count=function(n,r){return t(n,r,(a,u,i)=>{if(p(i,1,1,n,r),i[0]==null)return 0;if(k(i[0])||v(i[0]))return i[0].length;if(R(i[0]))return i[0].length();if(Re(i[0]))return i[0].entryCount();throw new f(n,"InvalidParameter",r)})}}let nr=class extends b{constructor(e){super(),this.declaredClass="esri.arcade.Portal",this.immutable=!1,this.setField("url",e),this.immutable=!0}},Po=class aa extends b{constructor(t,n,r,a,u,i,s){super(),this.attachmentUrl=u,this.declaredClass="esri.arcade.Attachment",this.immutable=!1,this.setField("id",t),this.setField("name",n),this.setField("contenttype",r),this.setField("size",a),this.setField("exifinfo",i),this.setField("keywords",s),this.immutable=!0}deepClone(){var t;return new aa(this.field("id"),this.field("name"),this.field("contenttype"),this.field("size"),this.attachmentUrl,((t=this.field("exifinfo"))==null?void 0:t.deepClone())??null,this.field("keywords"))}};const vr=e=>(t,n,r=14)=>+e(t,n).toFixed(r),Ro=(e,t)=>e+t,Oo=(e,t)=>e*t,Lo=(e,t)=>e/t,ni=(e,t,n)=>vr(Ro)(e,t,n),ht=(e,t,n)=>vr(Oo)(e,t,n),fn=(e,t,n)=>vr(Lo)(e,t,n),hn=360,_o=400,Uo=2*Math.PI,De=3600,ri=3240,$t=60,Ze=60,ii=180*De/Math.PI,Ot=hn*$t*Ze,On=90*De,rt=180*De,$o=270*De,sa="",Lt="";function Mt(e){if(v(e)===!1)throw new f(null,"InvalidParameter",null);return e}function rr(e,t){const n=10**t;return Math.round(e*n)/n}function zo(e,t){return e%t}function it(e){const t=parseFloat(e.toString().replace(Math.trunc(e).toString(),"0"))*Math.sign(e);return e<0?{fraction:t,integer:Math.ceil(e)}:{fraction:t,integer:Math.floor(e)}}function lt(e,t){switch(e){case 0:return t==="SHORT"?"N":"North";case 1:return t==="SHORT"?"E":"East";case 2:return t==="SHORT"?"S":"South";case 3:return t==="SHORT"?"W":"West"}}function Ln(e,t){return e-Math.floor(e/t)*t}function _n(e){switch(e){case 6:case 1:return hn;case 4:return Uo;case 5:return _o;case 2:return Ot;case 7:return $t;case 8:return Ze;default:throw new f(null,"LogicError",null,{reason:"unsupported evaluations"})}}const jo=new Le([],[["NORTH",1],["NORTH AZIMUTH",1],["POLAR",2],["QUADRANT",3],["SOUTH",4],["SOUTH AZIMUTH",4]]);function ai(e){const t=jo.lookup(e);if(t==null)throw new f(null,"LogicError",null,{reason:"unsupported directionType"});return t}const Vo=new Le([],[["D",1],["DD",1],["DECIMAL DEGREE",1],["DEGREE",1],["DECIMAL DEGREES",1],["DEGREES",1],["DMS",3],["DEGREES MINUTES SECONDS",3],["R",4],["RAD",4],["RADS",4],["RADIAN",4],["RADIANS",4],["G",5],["GON",5],["GONS",5],["GRAD",5],["GRADS",5],["GRADIAN",5],["GRADIANS",5]]);function si(e){const t=Vo.lookup(e);if(t==null)throw new f(null,"LogicError",null,{reason:"unsupported units"});return t}let wt=class rn{constructor(t,n,r){this.m_degrees=t,this.m_minutes=n,this.m_seconds=r}getField(t){switch(t){case 1:case 6:return this.m_degrees;case 7:return this.m_minutes;case 2:case 8:return this.m_seconds;default:throw new f(null,"LogicError",null,{reason:"unexpected evaluation"})}}static secondsToDMS(t){const n=it(t).fraction;let r=it(t).integer;const a=Math.floor(r/De);r-=a*De;const u=Math.floor(r/Ze);return r-=u*Ze,new rn(a,u,r+n)}static numberToDms(t){const n=it(t).fraction,r=it(t).integer,a=ht(it(100*n).fraction,100),u=it(100*n).integer;return new rn(r,u,a)}format(t,n){let r=rr(this.m_seconds,n),a=this.m_minutes,u=this.m_degrees;if(t===2||t===8)Ze<=r&&(r-=Ze,++a),$t<=a&&(a=0,++u),hn<=u&&(u=0);else if(t===7)r=0,a=30<=this.m_seconds?this.m_minutes+1:this.m_minutes,u=this.m_degrees,$t<=a&&(a=0,++u),hn<=u&&(u=0);else if(t===1||t===6){const i=fn(this.m_seconds,De),s=fn(this.m_minutes,$t);u=Math.round(this.m_degrees+s+i),a=0,r=0}return new rn(u,a,r)}static dmsToSeconds(t,n,r){return t*De+n*Ze+r}},Go=class{constructor(e,t,n){this.meridian=e,this.angle=t,this.direction=n}fetchAzimuth(e){return e===0?this.meridian:this.direction}},Ve=class Ne{constructor(t){this._angle=t}static createFromAngleAndDirection(t,n){return new Ne(new Ae(Ne._convertDirectionFormat(t.extractAngularUnits(2),n,1)))}getAngle(t){const n=this._angle.extractAngularUnits(2);switch(t){case 1:case 4:case 2:return new Ae(Ne._convertDirectionFormat(n,1,t));case 3:{const r=Ne.secondsNorthAzimuthToQuadrant(n);return new Ae(r.angle)}}}getMeridian(t){const n=this._angle.extractAngularUnits(2);switch(t){case 1:return 0;case 4:return 2;case 2:return 1;case 3:return Ne.secondsNorthAzimuthToQuadrant(n).meridian}}getDirection(t){const n=this._angle.extractAngularUnits(2);switch(t){case 1:return 1;case 4:return 3;case 2:return 0;case 3:return Ne.secondsNorthAzimuthToQuadrant(n).direction}}static secondsNorthAzimuthToQuadrant(t){const n=t<=On||t>=$o?0:2,r=n===0?Math.min(Ot-t,t):Math.abs(t-rt);return new Go(n,r,t>rt?3:1)}static createFromAngleMeridianAndDirection(t,n,r){return new Ne(new Ae(Ne.secondsQuadrantToNorthAzimuth(t.extractAngularUnits(2),n,r)))}static secondsQuadrantToNorthAzimuth(t,n,r){return n===0?r===1?t:Ot-t:r===1?rt-t:rt+t}static _convertDirectionFormat(t,n,r){let a=0;switch(n){case 1:a=t;break;case 2:a=On-t;break;case 3:throw new f(null,"LogicError",null,{reason:"unexpected evaluation"});case 4:a=t+rt}let u=0;switch(r){case 1:u=a;break;case 2:u=On-a;break;case 3:throw new f(null,"LogicError",null,{reason:"unexpected evaluation"});case 4:u=a-rt}return u=zo(u,Ot),u<0?Ot+u:u}};function oi(e,t,n){let r=null;switch(t){case 1:r=ht(e,De);break;case 2:r=e;break;case 5:r=ht(e,ri);break;case 4:r=ht(e,ii);break;default:throw new f(null,"LogicError",null,{reason:"unexpected evaluation"})}switch(n){case 1:return fn(r,De);case 2:return r;case 5:return fn(r,ri);case 4:return r/ii;default:throw new f(null,"LogicError",null,{reason:"unexpected evaluation"})}}let Ae=class ir{constructor(t){this._seconds=t}static createFromAngleAndUnits(t,n){return new ir(oi(t,n,2))}extractAngularUnits(t){return oi(this._seconds,2,jt(t))}static createFromDegreesMinutesSeconds(t,n,r){return new ir(ni(ni(ht(t,De),ht(n,Ze)),r))}};function jt(e){switch(Ei(e),e){case 1:case 6:case 3:return 1;case 5:return 5;case 7:return 7;case 4:return 4;case 2:case 8:return 2}}let Wo=class oa{constructor(t,n,r,a){this.view=t,this.angle=n,this.merdian=r,this.direction=a,this._dms=null,this._formattedDms=null}static createFromStringAndBearing(t,n,r){return new oa(t,n.getAngle(r),n.getMeridian(r),n.getDirection(r))}fetchAngle(){return this.angle}fetchMeridian(){return this.merdian}fetchDirection(){return this.direction}fetchView(){return this.view}fetchDms(){return this._dms===null&&this._calculateDms(),this._dms}fetchFormattedDms(){return this._formattedDms===null&&this._calculateDms(),this._formattedDms}_calculateDms(){let t=null,n=6,r=0;for(let a=0;a<this.view.length;a++){const u=this.view[a];switch(u){case"m":t=ar(this.view,a,u),n=n===6?7:n,a=t.newpos;continue;case"s":t=ar(this.view,a,u),n=8,r=r<t.rounding?t.rounding:r,a=t.newpos;continue;default:continue}}this._dms=wt.secondsToDMS(this.angle.extractAngularUnits(2)),this._formattedDms=wt.secondsToDMS(this.angle.extractAngularUnits(2)).format(n,r)}};function Zo(e,t,n,r,a){let u=null;switch(t){case 1:case 4:case 5:return u=Ln(rr(e.extractAngularUnits(t),r),_n(t)),u.toFixed(r).padStart(n+r+(r>0?1:0),"0");case 6:case 7:return u=Ln(a.fetchFormattedDms().getField(t),_n(t)),u.toFixed(r).padStart(n+r+(r>0?1:0),"0");case 8:return u=Ln(rr(a.fetchDms().getField(t),r),_n(t)),u.toFixed(r).padStart(n+r+(r>0?1:0),"0");default:throw new f(null,"LogicError",null,{reason:"unexpected evaluation"})}}function Ho(e,t,n){if(n===3)throw new f(null,"LogicError",null,{reason:"conversion error"});if(t===3){const r=wt.numberToDms(e);return Ve.createFromAngleAndDirection(Ae.createFromDegreesMinutesSeconds(r.m_degrees,r.m_minutes,r.m_seconds),n)}return Ve.createFromAngleAndDirection(Ae.createFromAngleAndUnits(e,jt(t)),n)}function Ko(e){switch(m(e)){case 1:return{first:0,second:1};case 2:return{first:2,second:1};case 3:return{first:2,second:3};case 4:return{first:0,second:3}}return null}function ui(e){switch(e.toUpperCase().trim()){case"N":case"NORTH":return 0;case"E":case"EAST":return 1;case"S":case"SOUTH":return 2;case"W":case"WEST":return 3}return null}function at(e){const t=parseFloat(e);if(W(t)){if(isNaN(t))throw new f(null,"LogicError",null,{reason:"invalid conversion"});return t}throw new f(null,"LogicError",null,{reason:"invalid conversion"})}function Un(e,t,n){const r=n===3;let a=null,u=null,i=0,s=0,o=0;if(r){if(e.length<2)throw new f(null,"LogicError",null,{reason:"conversion error"});o=1;const l=Ko(A(e[e.length-1]));if(l?(a=l.first,u=l.second):(i=1,a=ui(A(e[0])),u=ui(A(e[e.length-1]))),a===null||u===null)throw new f(null,"LogicError",null,{reason:"invalid conversion"})}switch(t){case 1:case 4:case 5:if(e.length===0)throw new f(null,"LogicError",null,{reason:"invalid conversion"});return r?Ve.createFromAngleMeridianAndDirection(Ae.createFromAngleAndUnits(at(e[i]),jt(t)),a,u):Ve.createFromAngleAndDirection(Ae.createFromAngleAndUnits(at(e[i]),jt(t)),n);case 3:if(s=e.length-o-i,s===3){const l=Ae.createFromDegreesMinutesSeconds(at(e[i]),at(e[i+1]),at(e[i+2]));return r?Ve.createFromAngleMeridianAndDirection(l,a,u):Ve.createFromAngleAndDirection(l,n)}if(s===1){const l=at(e[i]),h=wt.numberToDms(l),c=Ae.createFromDegreesMinutesSeconds(h.m_degrees,h.m_minutes,h.m_seconds);return r?Ve.createFromAngleMeridianAndDirection(c,a,u):Ve.createFromAngleAndDirection(c,n)}}throw new f(null,"LogicError",null,{reason:"invalid conversion"})}function qo(e){const t=new Set([" ","-","/","'",'"',"\\","^",Lt,sa,"	","\r",`
`,"*"]);let n="";for(let r=0;r<e.length;r++){const a=e.charAt(r);t.has(a)?n+="RRSPLITRRSPLITRR":n+=a}return n.split("RRSPLITRRSPLITRR").filter(r=>r!=="")}function Jo(e,t,n){if(W(e))return Ho(m(e),t,n);if(v(e))return Un(qo(e),t,n);if(k(e))return Un(e,t,n);if(R(e))return Un(e.toArray(),t,n);throw new f(null,"LogicError",null,{reason:"conversion error"})}function Qo(e,t,n){const r=jt(n);if(r&&n!==3)return e.getAngle(t).extractAngularUnits(r);throw new f(null,"LogicError",null,{reason:"conversion error"})}function Xo(e,t,n){const r=e.getAngle(t);if(t===3&&n===3){const a=wt.secondsToDMS(r.extractAngularUnits(2));return[lt(e.getMeridian(t),"SHORT"),a.m_degrees,a.m_minutes,a.m_seconds,lt(e.getDirection(t),"SHORT")]}if(n===3){const a=wt.secondsToDMS(r.extractAngularUnits(2));return[a.m_degrees,a.m_minutes,a.m_seconds]}return t===3?[lt(e.getMeridian(t),"SHORT"),r.extractAngularUnits(n),lt(e.getDirection(t),"SHORT")]:[r.extractAngularUnits(n)]}function Yo(e,t){let n="";switch(e){case 1:n=t===3?"DD.DD"+Lt:"DDD.DD"+Lt;break;case 3:n=t===3?"dd"+Lt+` mm' ss"`:"ddd"+Lt+` mm' ss.ss"`;break;case 4:n="R.RR";break;case 5:n="GGG.GG"+sa;break;default:throw new f(null,"LogicError",null,{reason:"conversion error"})}return t===3&&(n="p "+n+" b"),n}function ar(e,t,n){const r={padding:0,rounding:0,newpos:t};let a=!1;for(;t<e.length;){const u=e[t];if(u===n)a?r.rounding++:r.padding++,t++;else{if(u!==".")break;a=!0,t++}}return r.newpos=t-1,r}function eu(e,t,n){const r={escaped:"",newpos:t};for(t++;t<e.length;){const a=e[t];if(t++,a==="]")break;r.escaped+=a}return r.newpos=t-1,r}function tu(e,t,n){let r="",a=null,u=null;const i=Wo.createFromStringAndBearing(t,e,n),s={D:1,d:6,m:7,s:8,R:4,G:5};for(let o=0;o<t.length;o++){const l=t[o];switch(l){case"[":a=eu(t,o),r+=a.escaped,o=a.newpos;continue;case"D":case"d":case"m":case"s":case"R":case"G":a=ar(t,o,l),u=e.getAngle(n),r+=Zo(u,s[l],a.padding,a.rounding,i),o=a.newpos;continue;case"P":case"p":r+=lt(i.fetchMeridian(),l==="p"?"SHORT":"LONG");continue;case"B":case"b":r+=lt(i.fetchDirection(),l==="b"?"SHORT":"LONG");continue;default:r+=l}}return r}const nu=new Le(["TEXT","VALUE"]);function ru(e,t,n){if(!(t instanceof b))throw new f(null,"InvalidParameter",null);if(t.hasField("directionType")===!1)throw new f(null,"LogicError",null,{reason:"missing directionType"});if(t.hasField("angleType")===!1)throw new f(null,"LogicError",null,{reason:"missing angleType"});const r=ai(Mt(t.field("directiontype"))),a=Jo(e,si(Mt(t.field("angletype"))),r);if(!(n instanceof b))throw new f(null,"InvalidParameter",null);if(n.hasField("directionType")===!1)throw new f(null,"LogicError",null,{reason:"missing directionType"});if(n.hasField("outputType")===!1)throw new f(null,"LogicError",null,{reason:"missing angleType"});const u=ai(Mt(n.field("directiontype"))),i=n.hasField("angleType")?si(Mt(n.field("angletype"))):null,s=nu.get(Mt(n.field("outputType")));if(!u||!s)throw new f(null,"LogicError",null,{reason:"conversion error"});if(!(i||s==="TEXT"&&n.hasField("format")))throw new f(null,"LogicError",null,{reason:"invalid unit"});switch(s){case"VALUE":return u===3||i===3?Xo(a,u,i):Qo(a,u,i);case"TEXT":{let o="";return n.hasField("format")&&(o=A(n.field("format"))),o!==null&&o!==""||(o=Yo(i,u)),tu(a,o,u)}default:throw new f(null,"InvalidParameter",null)}}const st=2654435761,ot=2246822519,tn=3266489917,li=668265263,ci=374761393;function fi(e){const t=[];for(let n=0,r=e.length;n<r;n++){let a=e.charCodeAt(n);a<128?t.push(a):a<2048?t.push(192|a>>6,128|63&a):a<55296||a>=57344?t.push(224|a>>12,128|a>>6&63,128|63&a):(n++,a=65536+((1023&a)<<10|1023&e.charCodeAt(n)),t.push(240|a>>18,128|a>>12&63,128|a>>6&63,128|63&a))}return new Uint8Array(t)}let iu=class{constructor(e){this._seed=e,this._totallen=0,this._bufs=[],this.init()}init(){return this._bufs=[],this._totallen=0,this}updateFloatArray(e){const t=[];for(const n of e)isNaN(n)?t.push("NaN"):n===1/0?t.push("Infinity"):n===-1/0?t.push("-Infinity"):n===0?t.push("0"):t.push(n.toString(16));this.update(fi(t.join("")))}updateIntArray(e){const t=Int32Array.from(e);this.update(new Uint8Array(t.buffer))}updateUint8Array(e){this.update(Uint8Array.from(e))}updateWithString(e){return this.update(fi(e))}update(e){return this._bufs.push(e),this._totallen+=e.length,this}digest(){const e=new Uint8Array(this._totallen);let t=0;for(const n of this._bufs)e.set(n,t),t+=n.length;return this.init(),this._xxHash32(e,this._seed)}_xxHash32(e,t=0){const n=e;let r=t+ci&4294967295,a=0;if(n.length>=16){const i=[t+st+ot&4294967295,t+ot&4294967295,t+0&4294967295,t-st&4294967295],s=e,o=s.length-16;let l=0;for(a=0;(4294967280&a)<=o;a+=4){const h=a,c=s[h]+(s[h+1]<<8),d=s[h+2]+(s[h+3]<<8),D=c*ot+(d*ot<<16);let g=i[l]+D&4294967295;g=g<<13|g>>>19;const w=65535&g,y=g>>>16;i[l]=w*st+(y*st<<16)&4294967295,l=l+1&3}r=(i[0]<<1|i[0]>>>31)+(i[1]<<7|i[1]>>>25)+(i[2]<<12|i[2]>>>20)+(i[3]<<18|i[3]>>>14)&4294967295}r=r+e.length&4294967295;const u=e.length-4;for(;a<=u;a+=4){const i=a,s=n[i]+(n[i+1]<<8),o=n[i+2]+(n[i+3]<<8);r=r+(s*tn+(o*tn<<16))&4294967295,r=r<<17|r>>>15,r=(65535&r)*li+((r>>>16)*li<<16)&4294967295}for(;a<n.length;++a)r+=n[a]*ci,r=r<<11|r>>>21,r=(65535&r)*st+((r>>>16)*st<<16)&4294967295;return r^=r>>>15,r=((65535&r)*ot&4294967295)+((r>>>16)*ot<<16),r^=r>>>13,r=((65535&r)*tn&4294967295)+((r>>>16)*tn<<16),r^=r>>>16,r<0?r+4294967296:r}};function au(e){var t;return e.loadStatus==="loaded"&&((t=e.user)!=null&&t.sourceJSON)?e.user.sourceJSON:null}function su(e,t){return!!e&&ns(e,(t==null?void 0:t.restUrl)||"")}function hi(e,t){if(!e||!t)return e===t;if(e.x===t.x&&e.y===t.y){if(e.hasZ){if(e.z!==t.z)return!1}else if(t.hasZ)return!1;if(e.hasM){if(e.m!==t.m)return!1}else if(t.hasM)return!1;return!0}return!1}function ue(e,t,n){if(e!==null)if(k(e)){if(t.updateUint8Array([61]),n.map.has(e)){const r=n.map.get(e);t.updateIntArray([61237541^r])}else{n.map.set(e,n.currentLength++);for(const r of e)ue(r,t,n);n.map.delete(e),n.currentLength--}t.updateUint8Array([199])}else if(R(e)){if(t.updateUint8Array([61]),n.map.has(e)){const r=n.map.get(e);t.updateIntArray([61237541^r])}else{n.map.set(e,n.currentLength++);for(const r of e.toArray())ue(r,t,n);n.map.delete(e),n.currentLength--}t.updateUint8Array([199])}else{if(Ee(e))return t.updateIntArray([e.toNumber()]),void t.updateUint8Array([241]);if(Z(e))return t.updateIntArray([e.toNumber()]),void t.updateIntArray([257]);if(q(e))return t.updateIntArray([e.toNumber()]),void t.updateIntArray([263]);if(v(e))return t.updateIntArray([e.length]),t.updateWithString(e),void t.updateUint8Array([41]);if(H(e))t.updateUint8Array([e===!0?1:0,113]);else{if(W(e))return t.updateFloatArray([e]),void t.updateUint8Array([173]);if(e instanceof Po)throw new f(n.context,"UnsupportedHashType",n.node);if(e instanceof nr)throw new f(n.context,"UnsupportedHashType",n.node);if(!(e instanceof b)){if(J(e))throw new f(n.context,"UnsupportedHashType",n.node);if(e instanceof z)return t.updateIntArray([3833836621]),t.updateIntArray([0]),t.updateFloatArray([e.x]),t.updateIntArray([1]),t.updateFloatArray([e.y]),e.hasZ&&(t.updateIntArray([2]),t.updateFloatArray([e.z])),e.hasM&&(t.updateIntArray([3]),t.updateFloatArray([e.m])),t.updateIntArray([3765347959]),void ue(e.spatialReference.wkid,t,n);if(e instanceof pe){t.updateIntArray([1266616829]);for(let r=0;r<e.rings.length;r++){const a=e.rings[r],u=[];let i=null,s=null;for(let o=0;o<a.length;o++){const l=e.getPoint(r,o);if(o===0)i=l;else if(hi(s,l))continue;s=l,o===a.length-1&&hi(i,l)||u.push(l)}t.updateIntArray([1397116793,u.length]);for(let o=0;o<u.length;o++){const l=u[o];t.updateIntArray([3962308117,o]),ue(l,t,n),t.updateIntArray([2716288009])}t.updateIntArray([2278822459])}return t.updateIntArray([3878477243]),void ue(e.spatialReference.wkid,t,n)}if(e instanceof fe){t.updateIntArray([4106883559]);for(let r=0;r<e.paths.length;r++){const a=e.paths[r];t.updateIntArray([1397116793,a.length]);for(let u=0;u<a.length;u++)t.updateIntArray([3962308117,u]),ue(e.getPoint(r,u),t,n),t.updateIntArray([2716288009]);t.updateIntArray([2278822459])}return t.updateIntArray([2568784753]),void ue(e.spatialReference.wkid,t,n)}if(e instanceof ct){t.updateIntArray([588535921,e.points.length]);for(let r=0;r<e.points.length;r++){const a=e.getPoint(r);t.updateIntArray([r]),ue(a,t,n)}return t.updateIntArray([1700171621]),void ue(e.spatialReference.wkid,t,n)}if(e instanceof Ge)return t.updateIntArray([3483648373]),t.updateIntArray([0]),t.updateFloatArray([e.xmax]),t.updateIntArray([1]),t.updateFloatArray([e.xmin]),t.updateIntArray([2]),t.updateFloatArray([e.ymax]),t.updateIntArray([3]),t.updateFloatArray([e.ymin]),e.hasZ&&(t.updateIntArray([4]),t.updateFloatArray([e.zmax]),t.updateIntArray([5]),t.updateFloatArray([e.zmin])),e.hasM&&(t.updateIntArray([6]),t.updateFloatArray([e.mmax]),t.updateIntArray([7]),t.updateFloatArray([e.mmin])),t.updateIntArray([3622027469]),void ue(e.spatialReference.wkid,t,n);if(e instanceof Gt)return t.updateIntArray([14]),e.wkid!==void 0&&e.wkid!==null&&t.updateIntArray([e.wkid]),e.wkt&&t.updateWithString(e.wkt),void(e.wkt2&&t.updateWithString(e.wkt2));throw K(e)?new f(n.context,"UnsupportedHashType",n.node):xs(e)?new f(n.context,"UnsupportedHashType",n.node):Fs(e)?new f(n.context,"UnsupportedHashType",n.node):e===E?new f(n.context,"UnsupportedHashType",n.node):new f(n.context,"UnsupportedHashType",n.node)}if(t.updateUint8Array([223]),n.map.has(e)){const r=n.map.get(e);t.updateIntArray([61237541^r])}else{n.map.set(e,n.currentLength++);for(const r of e.keys())t.updateIntArray([r.length]),t.updateWithString(r),t.updateUint8Array([251]),ue(e.field(r),t,n),t.updateUint8Array([239]);n.map.delete(e),n.currentLength--}t.updateUint8Array([73])}}else t.updateUint8Array([0,139])}function ua(e,t){e.portal=function(a,u){return t(a,u,(i,s,o)=>(p(o,1,1,a,u),new nr(A(o[0]))))},e.typeof=function(a,u){return t(a,u,(i,s,o)=>{p(o,1,1,a,u);const l=Ui(o[0]);if(l==="Unrecognized Type")throw new f(a,"UnrecognizedType",u);return l})},e.trim=function(a,u){return t(a,u,(i,s,o)=>(p(o,1,1,a,u),A(o[0]).trim()))},e.tohex=function(a,u){return t(a,u,(i,s,o)=>{p(o,1,1,a,u);const l=m(o[0]);return isNaN(l)?l:l.toString(16)})},e.upper=function(a,u){return t(a,u,(i,s,o)=>(p(o,1,1,a,u),A(o[0]).toUpperCase()))};const n=new Le(["every-word","first-word"]);e.proper=function(a,u){return t(a,u,(i,s,o)=>{p(o,1,2,a,u);const l=(o.length>=2?n.lookup(A(o[1])):null)??"every-word",h=/\s/,c=A(o[0]);let d="",D=!0;for(let g=0;g<c.length;g++){let w=c[g];h.test(w)?l==="every-word"&&(D=!0):w.toUpperCase()!==w.toLowerCase()&&(D?(w=w.toUpperCase(),D=!1):w=w.toLowerCase()),d+=w}return d})},e.lower=function(a,u){return t(a,u,(i,s,o)=>(p(o,1,1,a,u),A(o[0]).toLowerCase()))};const r=new Le(["digits","digits-hyphen","digits-hyphen-braces","digits-hyphen-parentheses"]);e.guid=function(a,u){return t(a,u,(i,s,o)=>{switch(p(o,0,1,a,u),o.length>0?r.lookup(A(o[0])):null){case"digits":return Yt().replace("-","").replace("-","").replace("-","").replace("-","");case"digits-hyphen":return Yt();case"digits-hyphen-parentheses":return"("+Yt()+")";default:return"{"+Yt()+"}"}})},e.standardizeguid=function(a,u){return t(a,u,(i,s,o)=>{p(o,2,2,a,u);let l=A(o[0]);if(l===""||l===null)return"";const h=/^(\{|\()?(?<partA>[0-9a-z]{8})(-?)(?<partB>[0-9a-z]{4})(-?)(?<partC>[0-9a-z]{4})(-?)(?<partD>[0-9a-z]{4})(-?)(?<partE>[0-9a-z]{12})(\}|\))?$/gim.exec(l);if(!h)return"";const c=h.groups;switch(l=c.partA+"-"+c.partB+"-"+c.partC+"-"+c.partD+"-"+c.partE,r.lookup(A(o[1]))){case"digits":return l.replace("-","").replace("-","").replace("-","").replace("-","");case"digits-hyphen":return l;case"digits-hyphen-parentheses":return"("+l+")";default:return"{"+l+"}"}})},e.console=function(a,u){return t(a,u,(i,s,o)=>(o.length===0||(o.length===1?a.console(A(o[0])):a.console(A(o))),E))},e.mid=function(a,u){return t(a,u,(i,s,o)=>{p(o,2,3,a,u);let l=m(o[1]);if(isNaN(l))return"";if(l=Math.max(0,l),o.length===2)return A(o[0]).slice(l);let h=m(o[2]);return isNaN(h)?"":(h<0&&(h=0),A(o[0]).slice(l,l+h))})},e.find=function(a,u){return t(a,u,(i,s,o)=>{p(o,2,3,a,u);let l=0;if(o.length>2){if(l=m(j(o[2],0)),isNaN(l))return-1;l<0&&(l=0)}return A(o[1]).indexOf(A(o[0]),l)})},e.left=function(a,u){return t(a,u,(i,s,o)=>{p(o,2,2,a,u);let l=m(o[1]);return isNaN(l)?"":(l<0&&(l=0),A(o[0]).slice(0,l))})},e.right=function(a,u){return t(a,u,(i,s,o)=>{p(o,2,2,a,u);const l=m(o[1]);return isNaN(l)||l<=0?"":A(o[0]).slice(-l)})},e.split=function(a,u){return t(a,u,(i,s,o)=>{let l;p(o,2,4,a,u);let h=m(j(o[2],-1));const c=cn(j(o[3],!1));if(h===-1||h===null||c===!0?l=A(o[0]).split(A(o[1])):(isNaN(h)&&(h=-1),h<-1&&(h=-1),l=A(o[0]).split(A(o[1]),h)),c===!1)return l;const d=[];for(let D=0;D<l.length&&!(h!==-1&&d.length>=h);D++)l[D]!==""&&l[D]!==void 0&&d.push(l[D]);return d})},e.text=function(a,u){return t(a,u,(i,s,o)=>(p(o,1,2,a,u),Jt(o[0],o[1])))},e.concatenate=function(a,u){return t(a,u,(i,s,o)=>{const l=[];if(o.length<1)return"";if(k(o[0])){const h=j(o[2],"");for(let c=0;c<o[0].length;c++)l[c]=Jt(o[0][c],h);return o.length>1?l.join(o[1]):l.join("")}if(R(o[0])){const h=j(o[2],"");for(let c=0;c<o[0].length();c++)l[c]=Jt(o[0].get(c),h);return o.length>1?l.join(o[1]):l.join("")}for(let h=0;h<o.length;h++)l[h]=Jt(o[h]);return l.join("")})},e.reverse=function(a,u){return t(a,u,(i,s,o)=>{if(p(o,1,1,a,u),k(o[0])){const l=o[0].slice();return l.reverse(),l}if(R(o[0])){const l=o[0].toArray().slice();return l.reverse(),l}throw new f(a,"InvalidParameter",u)})},e.replace=function(a,u){return t(a,u,(i,s,o)=>{p(o,3,4,a,u);const l=A(o[0]),h=A(o[1]),c=A(o[2]);return o.length!==4||cn(o[3])?Yn(l,h,c):l.replace(h,c)})},e.urlencode=function(a,u){return t(a,u,(i,s,o)=>{if(p(o,1,1,a,u),o[0]===null)return"";if(o[0]instanceof b){let l="";for(const h of o[0].keys()){const c=o[0].field(h);l!==""&&(l+="&"),l+=c===null?encodeURIComponent(h)+"=":encodeURIComponent(h)+"="+encodeURIComponent(c)}return l}return encodeURIComponent(A(o[0]))})},e.hash=function(a,u){return t(a,u,(i,s,o)=>{p(o,1,1,a,u);const l=new iu(0);return ue(o[0],l,{context:a,node:u,map:new Map,currentLength:0}),l.digest()})},e.convertdirection=function(a,u){return t(a,u,(i,s,o)=>(p(o,3,3,a,u),ru(o[0],o[1],o[2])))},e.fromjson=function(a,u){return t(a,u,(i,s,o)=>{if(p(o,1,1,a,u),v(o[0])===!1)throw new f(a,"InvalidParameter",u);return b.convertJsonToArcade(JSON.parse(A(o[0])),I(a))})},e.tocharcode=function(a,u){return t(a,u,(i,s,o)=>{p(o,1,2,a,u);const l=m(j(o[1],0)),h=A(o[0]);if(h.length===0&&o.length===1)return null;if(h.length<=l||l<0)throw new f(a,"OutOfBounds",u);return h.charCodeAt(l)})},e.tocodepoint=function(a,u){return t(a,u,(i,s,o)=>{p(o,1,2,a,u);const l=m(j(o[1],0)),h=A(o[0]);if(h.length===0&&o.length===1)return null;if(h.length<=l||l<0)throw new f(a,"OutOfBounds",u);return h.codePointAt(l)})},e.fromcharcode=function(a,u){return t(a,u,(i,s,o)=>{if(o.length<1)throw new f(a,"WrongNumberOfParameters",u);const l=o.map(h=>Math.trunc(m(h))).filter(h=>h>=0&&h<=65535);return l.length===0?null:String.fromCharCode.apply(null,l)})},e.fromcodepoint=function(a,u){return t(a,u,(i,s,o)=>{if(o.length<1)throw new f(a,"WrongNumberOfParameters",u);let l;try{l=o.map(h=>Math.trunc(m(h))).filter(h=>h<=1114111&&h>>>0===h)}catch{return null}return l.length===0?null:String.fromCodePoint.apply(null,l)})},e.getuser=function(a,u){return t(a,u,(i,s,o)=>{var h;p(o,0,2,a,u);let l=j(o[1],"");if(l=l===!0||l===!1?"":A(l),l!==null&&l!=="")return null;if(o.length===0||o[0]instanceof nr){let c=null;if(c=(h=a.services)!=null&&h.portal?a.services.portal:Qn.getDefault(),o.length>0&&!su(o[0].field("url"),c)||!c)return null;if(l===""){const d=au(c);if(d){const D=JSON.parse(JSON.stringify(d));for(const g of["lastLogin","created","modified"])D[g]!==void 0&&D[g]!==null&&(D[g]=new Date(D[g]));return b.convertObjectToArcadeDictionary(D,I(a))}}return null}throw new f(a,"InvalidParameter",u)})},e.getenvironment=function(a,u){return t(a,u,(i,s,o)=>(p(o,0,0,a,u),b.convertObjectToArcadeDictionary(hs(I(a),a.spatialReference),I(a),!0)))},e.standardizefilename=function(a,u){return t(a,u,(i,s,o)=>{p(o,1,1,i,s);const[l]=o;if(l==null)return"";if(!v(l))throw new f(i,"InvalidParameter",s);return l.replaceAll(/[<>"?*]/g,"_").replaceAll(/[/\\|]/g,"-").replaceAll(":",", ")})}}let an;async function ou(){an==null&&(an=await Fe(()=>import("./geodeticDistanceOperator-pEgXxoUT-67nD4cnx.js"),__vite__mapDeps([60,1,2,13]),import.meta.url),await an.load())}function ee(e){const t=e.track;if(t==null)throw new f(e,"InvalidParameter",null);return t}function ut(e,t,n,r){const a=Math.max(0,sr(e,t)),u=Math.max(0,sr(e,n));return e.observations.slice(a,u).map((i,s)=>r(i,s+a))}function sr(e,t){return e.currentObservationIndex+t}function $n(e,t){const n=sr(e,t);if(n<0||n>=e.observations.length)throw new f(null,"InvalidParameter",null);return n}function zn(e,t){const{stats:n}=e.observations[t];if(n.totalDistance!=null)return n.totalDistance;if(t===0)return n.totalDistance=0;let r,a=0;for(r=t-1;r>0;r--){const u=e.observations[r].stats;if(u.totalDistance!=null){a=u.totalDistance;break}}for(let u=r+1;u<=t;u++){const i=e.observations[u];a+=la(e,u),i.stats.totalDistance=a}return a}function la(e,t){const n=e.observations[t],r=n.stats;if(r.distance!=null)return r.distance;if(t===0)return r.distance=0;const a=e.observations[t-1];return r.distance=an.execute(a.feature.geometry(),n.feature.geometry())}function zt(e,t){const n=e.observations[t],r=n.stats;if(r.speed!=null)return r.speed;if(t===0)return r.speed=0;const a=e.observations[t-1],u=n.endTime-a.startTime;if(u<=0)return r.speed=0;const i=la(e,t);return r.speed=i/(u/1e3)}function jn(e,t){const n=e.observations[t],r=n.stats;if(r.acceleration!=null)return r.acceleration;if(t===0)return r.acceleration=0;const a=e.observations[t-1],u=n.endTime-a.startTime;if(u<=0)return r.acceleration=0;const i=zt(e,t),s=zt(e,t-1);return r.acceleration=(i-s)/(u/1e3)}function ca(e,t){e[B("TrackIndex")]=function(n,r){return t(n,r,(a,u,i)=>(p(i,0,0,a,u),ee(a).currentObservationIndex))},e[B("TrackWindow")]=function(n,r){return t(n,r,(a,u,i)=>{p(i,2,2,a,u);const s=m(i[0]),o=m(i[1]);return ut(ee(a),s,o,l=>l.feature)})},e[B("TrackFieldWindow")]=function(n,r){return t(n,r,(a,u,i)=>{p(i,3,3,a,u);const s=A(i[0]),o=m(i[1]),l=m(i[2]);return ut(ee(a),o,l,h=>h.feature.field(s))})},e[B("TrackGeometryWindow")]=function(n,r){return t(n,r,(a,u,i)=>{p(i,2,2,a,u);const s=m(i[0]),o=m(i[1]);return ut(ee(a),s,o,l=>l.feature.geometry())})},e[B("TrackStartTime")]=function(n,r){return t(n,r,(a,u,i)=>(p(i,0,0,a,u),$.epochToArcadeDate(ee(a).observations[0].startTime,a.timeZone??"system")))},e[B("TrackCurrentTime")]=function(n,r){return t(n,r,(a,u,i)=>{p(i,0,0,a,u);const s=ee(a);return $.epochToArcadeDate(s.observations[s.currentObservationIndex].startTime,a.timeZone??"system")})},e[B("TrackDuration")]=function(n,r){return t(n,r,(a,u,i)=>{p(i,0,0,a,u);const s=ee(a);return s.observations[s.currentObservationIndex].startTime-s.observations[0].startTime})},e[B("TrackCurrentDistance")]=function(n,r){return t(n,r,(a,u,i)=>{p(i,0,0,a,u);const s=ee(a);return zn(s,s.currentObservationIndex)})},e[B("TrackDistanceAt")]=function(n,r){return t(n,r,(a,u,i)=>{p(i,1,1,a,u);const s=m(i[0]),o=ee(a);return zn(o,$n(o,s))})},e[B("TrackDistanceWindow")]=function(n,r){return t(n,r,(a,u,i)=>{p(i,2,2,a,u);const s=m(i[0]),o=m(i[1]),l=ee(a);return ut(l,s,o,(h,c)=>zn(l,c))})},e[B("TrackCurrentSpeed")]=function(n,r){return t(n,r,(a,u,i)=>{p(i,0,0,a,u);const s=ee(a);return zt(s,s.currentObservationIndex)})},e[B("TrackSpeedAt")]=function(n,r){return t(n,r,(a,u,i)=>{p(i,1,1,a,u);const s=m(i[0]),o=ee(a);return zt(o,$n(o,s))})},e[B("TrackSpeedWindow")]=function(n,r){return t(n,r,(a,u,i)=>{p(i,2,2,a,u);const s=m(i[0]),o=m(i[1]),l=ee(a);return ut(l,s,o,(h,c)=>zt(l,c))})},e[B("TrackCurrentAcceleration")]=function(n,r){return t(n,r,(a,u,i)=>{p(i,0,0,a,u);const s=ee(a);return jn(s,s.currentObservationIndex)})},e[B("TrackAccelerationAt")]=function(n,r){return t(n,r,(a,u,i)=>{p(i,1,1,a,u);const s=m(i[0]),o=ee(a);return jn(o,$n(o,s))})},e[B("TrackAccelerationWindow")]=function(n,r){return t(n,r,(a,u,i)=>{p(i,2,2,a,u);const s=m(i[0]),o=m(i[1]),l=ee(a);return ut(l,s,o,(h,c)=>jn(l,c))})}}const or=()=>mr.getLogger("esri.arcade.arcadeCompiler");let uu=class{constructor(){this._symbolCounter=0}nextVarId(){return this._symbolCounter+=1,`_T${this._symbolCounter}`}nextTempVarId(){return this._symbolCounter+=1,`_Tvar${this._symbolCounter}`}nextLocalsSymbolMapId(){return this._symbolCounter+=1,`_Locals${this._symbolCounter}`}};function fa(e,t){var a;const n=(a=e.localScope)==null?void 0:a.get(t);if(n!=null)return{scope:"local",name:t,var:n};const r=e.globalScope.get(t);return r!=null?{scope:"global",name:t,var:r}:e.standardGlobals.has(t)?{scope:"global",name:t,var:t}:null}function bt(e,t,n="InvalidIdentifier"){const r=fa(e,B(t));if(r!=null)return r;throw new V(null,n,t)}function yt(e,t,n){const r=fa(e,B(t));if(r==null)throw or().error(`Internal error: Symbol "${t.name}" not declared.`),new V(null,"NeverReach",t);if(n!=null&&r.scope!==n)throw or().error(`Internal error: Expected to resolve "${t.name}" in the ${n} scope but is in the ${r.scope} scope.`),new V(null,"NeverReach",t);return r}function ha(e,t){const n=B(t),r=e.symbolMetadata;if(e.localStack.length>0){const u=e.localStack[e.localStack.length-1],i=r.locals.get(u._SymbolsMapId);if(i==null)return void or().error(`Internal error: no reflection metadata for ${u._SymbolsMapId}`);const s=i.get(n);if(s!=null)return dt.requireInitialized(u[s])}const a=r.globals.get(n);if(a!=null)return dt.requireInitialized(e.globalScope[a]);if(r.standardGlobals.has(n))return dt.requireInitialized(e.globalScope[n]);throw new f(null,"InvalidIdentifier",null)}let lu=class extends Li{constructor(e,t){super(),this.paramCount=t,this.fn=e}createFunction(e){return(...t)=>{if(t.length!==this.paramCount)throw new f(e,"WrongNumberOfParameters",null);return this.fn(...t)}}call(e,t){return this.fn(...t.arguments)}marshalledCall(e,t,n,r){return r(e,t,(a,u,i)=>{i=i.map(o=>!K(o)||o instanceof gt?o:ln(o,e,r));const s=this.call(n,{arguments:i});return Me(s)?s.then(o=>ln(o,n,r)):s})}};function ce(e,t,n){try{return n(e,null,t.arguments)}catch(r){throw r}}function da(e,t,n,r,a,u){const{globals:i,exports:s}=Fr(e);Ii(i,n);const o=new uu,l=[],h=new Map;for(const g of i)if(n.has(g)||t.has(g))h.set(g,g);else{const w=o.nextVarId();h.set(g,w),l.push(`gscope[${JSON.stringify(w)}] = ${Da};`)}const c=new Map,d=Object.create(null),D={isAsync:r,symbols:o,standardGlobals:t,globalScope:h,exports:s,localScope:null,allLocalSymbolMetadata:c,moduleFactory:u,moduleFactoryMap:d,libraryResolver:a};return{body:[...l,"var lastStatement = lc.voidOperation;",br(D,e),"return lastStatement;"].join(`
`),symbolMetadata:{standardGlobals:t,exports:s,globals:h,locals:c},moduleFactoryMap:d}}function S(e,t){switch(t.type){case"AssignmentExpression":return Du(e,t);case"UpdateExpression":return mu(e,t);case"TemplateLiteral":return bu(e,t);case"Identifier":return ku(e,t);case"MemberExpression":return Cu(e,t);case"Literal":return t.value===null||t.value===void 0?"null":JSON.stringify(t.value);case"CallExpression":return Bu(e,t);case"UnaryExpression":return Eu(e,t);case"BinaryExpression":return Iu(e,t);case"LogicalExpression":return Su(e,t);case"ArrayExpression":return vu(e,t);case"ObjectExpression":return cu(e,t);default:throw new V(null,"Unrecognized",t)}}function ie(e,t){switch(t.type){case"EmptyStatement":return"lc.voidOperation";case"VariableDeclaration":return Fu(e,t);case"BlockStatement":return br(e,t);case"FunctionDeclaration":return xu(e,t);case"ImportDeclaration":return yu(e,t);case"ExportNamedDeclaration":return ie(e,t.declaration);case"ReturnStatement":return wu(e,t);case"IfStatement":return pa(e,t);case"ExpressionStatement":return gu(e,t);case"BreakStatement":return"break";case"ContinueStatement":return"continue";case"ForStatement":return du(e,t);case"ForInStatement":return fu(e,t);case"ForOfStatement":return hu(e,t);case"WhileStatement":return pu(e,t);default:throw new V(null,"Unrecognized",t)}}function cu(e,t){let n="lang.dictionary([";for(let r=0;r<t.properties.length;r++){const a=t.properties[r];let u;u=a.key.type==="Identifier"?"'"+a.key.name+"'":S(e,a.key),r>0&&(n+=","),n+="lang.strCheck("+u+",'ObjectExpression'),lang.aCheck("+S(e,a.value)+", 'ObjectExpression')"}return n+="])",n}function dn(e,t,n,r,a=(u,i)=>`${u} = ${i}`){const u=e.symbols.nextTempVarId(),i=e.symbols.nextTempVarId();return[`var ${u} = ${n};`,`for (var ${i} = 0; ${i} < ${u}; ${i}++) {`,`  ${a(t,i)}`,`  ${ie(e,r)}`,"}","lastStatement = lc.voidOperation;"].join(`
`)}function mn(e,t,n,r,a=u=>u){const u=e.symbols.nextTempVarId(),i=e.symbols.nextTempVarId();return[`var ${u} = ${n};`,`for (var ${i} of ${u}) {`,`  ${t} = ${a(i)};`,`  ${ie(e,r)}`,"}","lastStatement = lc.voidOperation;"].join(`
`)}function ma(e,t,n,r){const a=e.symbols.nextTempVarId();return[`var ${a} = ${n}.iterator(runtimeCtx.abortSignal);`,`while ((${t} = lang.graphicToFeature(yield ${a}.next(), ${n}, runtimeCtx)) != null) {`,`  ${ie(e,r)}`,"}","lastStatement = lc.voidOperation;"].join(`
`)}function fu(e,t){const n=e.symbols.nextTempVarId();let r,a,u="var "+n+" = "+S(e,t.right)+`;
`;switch(t.left.type==="VariableDeclaration"?(r=yt(e,t.left.declarations[0].id),u+=ie(e,t.left)):r=bt(e,t.left),r.scope){case"local":a=`lscope['${r.var}']`;break;case"global":a=`gscope['${r.var}']`;break;default:throw et(r.scope),new V(null,"NeverReach",t.left)}return u+="if ("+n+`===null) {  lastStatement = lc.voidOperation; }
 `,u+="else if (lc.isArray("+n+") || lc.isString("+n+`)) {
`,u+=dn(e,a,`${n}.length`,t.body),u+=`}
`,u+="else if (lc.isImmutableArray("+n+`)) {
`,u+=dn(e,a,`${n}.length()`,t.body),u+=`}
`,u+="else if (( "+n+" instanceof lang.Dictionary) || lc.isDictionaryLike("+n+`)) {
`,u+=mn(e,a,`${n}.keys()`,t.body),u+=`}
`,e.isAsync&&(u+="else if (lc.isFeatureSet("+n+`)) {
`,u+=ma(e,a,n,t.body),u+=`}
`),u+=`else if (lc.isGeometry(${n})) {
`,u+=mn(e,a,`lang.getGeometryKeys(${n})`,t.body),u+=`}
`,u+=`else { lastStatement = lc.voidOperation; } 
`,u}function hu(e,t){const n=e.symbols.nextTempVarId();let r,a,u="var "+n+" = "+S(e,t.right)+`;
`;switch(t.left.type==="VariableDeclaration"?(r=yt(e,t.left.declarations[0].id),u+=ie(e,t.left)):r=bt(e,t.left),r.scope){case"local":a=`lscope['${r.var}']`;break;case"global":a=`gscope['${r.var}']`;break;default:throw et(r.scope),new V(null,"NeverReach",t.left)}return u+="if ("+n+`===null) {  lastStatement = lc.voidOperation; }
 `,u+="else if (lc.isArray("+n+") || lc.isString("+n+`)) {
`,u+=dn(e,a,`${n}.length`,t.body,(i,s)=>[`if (${s} >= ${n}.length) {`,"  lang.error('OutOfBounds');","}",`${i} = ${n}[${s}];`].join(`
`)),u+=`}
`,u+="else if (lc.isImmutableArray("+n+`)) {
`,u+=dn(e,a,`${n}.length()`,t.body,(i,s)=>`${i} = ${n}.get(${s});`),u+=`}
`,u+="else if (( "+n+" instanceof lang.Dictionary) || lc.isDictionaryLike("+n+`)) {
`,u+=mn(e,a,`${n}.keys()`,t.body,i=>`lang.entry(${i}, ${n}.field(${i}))`),u+=`}
`,e.isAsync&&(u+="else if (lc.isFeatureSet("+n+`)) {
`,u+=ma(e,a,n,t.body),u+=`}
`),u+=`else if (lc.isGeometry(${n})) {
`,u+=mn(e,a,`lang.getGeometryKeys(${n})`,t.body,i=>`lang.entry(${i}, lang.geometryMember(${n}, ${i}, runtimeCtx, null, 1))`),u+=`}
`,u+=`else { lastStatement = lc.voidOperation; } 
`,u}function du(e,t){let n=`lastStatement = lc.voidOperation; 
`;t.init!==null&&(t.init.type==="VariableDeclaration"?n+=ie(e,t.init):n+=S(e,t.init)+"; ");const r=e.symbols.nextTempVarId(),a=e.symbols.nextTempVarId();return n+="var "+r+" = true; ",n+=`
 do { `,t.update!==null&&(n+=" if ("+r+`===false) {
 `+S(e,t.update)+`  
}
 `+r+`=false; 
`),t.test!==null&&(n+="var "+a+" = "+S(e,t.test)+"; ",n+="if ("+a+"===false) { break; } else if ("+a+`!==true) { lang.error('BooleanConditionRequired');   }
`),n+=ie(e,t.body),t.update!==null&&(n+=`
 `+S(e,t.update)),n+=`
`+r+` = true; 
} while(true);  lastStatement = lc.voidOperation; `,n}function mu(e,t){if(t.argument.type==="CallExpression")throw new V(null,"NeverReach",t);let n;if(t.argument.type==="MemberExpression"){const a=S(e,t.argument.object);return n=t.argument.computed===!0?S(e,t.argument.property):"'"+t.argument.property.name+"'","lang.memberupdate("+a+","+n+",'"+t.operator+"',"+t.prefix+")"}const r=bt(e,t.argument);switch(Ye(r),r.scope){case"local":return`lang.update(lscope, '${r.var}', '${t.operator}', ${t.prefix})`;case"global":return`lang.update(gscope, '${r.var}', '${t.operator}', ${t.prefix})`;default:throw et(r.scope),new V(null,"NeverReach",t.argument)}}function pu(e,t){let n=`lastStatement = lc.voidOperation; 
`;const r=e.symbols.nextTempVarId();return n+=`
  var ${r} = true;
    do {
      ${r} = ${S(e,t.test)};
      if (${r}==false) {
        break;
      }
      if (${r}!==true) {
        lang.error('BooleanConditionRequired');
      }
      ${ie(e,t.body)}
    }
    while (${r} !== false);
    lastStatement = lc.voidOperation;
  `,n}function Du(e,t){const n=S(e,t.right);if(t.left.type==="MemberExpression"){let a;const u=S(e,t.left.object);return a=t.left.computed===!0?S(e,t.left.property):"'"+t.left.property.name+"'","lang.assignmember("+u+","+a+",'"+t.operator+"',"+n+")"}const r=bt(e,t.left);switch(Ye(r),r.scope){case"local":return`lscope['${r.var}']=lang.assign(${n},'${t.operator}', ${t.operator==="="?"null":At(`lscope['${r.var}']`)})`;case"global":return`gscope['${r.var}']=lang.assign(${n},'${t.operator}', ${t.operator==="="?"null":At(`gscope['${r.var}']`)})`;default:throw et(r.scope),new V(null,"NeverReach",t.left)}}function gu(e,t){return t.expression.type==="AssignmentExpression"?"lastStatement = lc.voidOperation; "+S(e,t.expression)+`; 
 `:"lastStatement = "+S(e,t.expression)+"; "}function di(e,t){return t.type==="BlockStatement"?ie(e,t):t.type==="ReturnStatement"||t.type==="BreakStatement"||t.type==="ContinueStatement"?ie(e,t)+"; ":t.type==="ExpressionStatement"?ie(e,t):ie(e,t)+"; "}function pa(e,t){return`if (lang.mustBoolean(${S(e,t.test)}, runtimeCtx) === true) {
    ${di(e,t.consequent)}
  } `+(t.alternate!==null?t.alternate.type==="IfStatement"?" else "+pa(e,t.alternate):` else {
      ${di(e,t.alternate)}
    }
`:` else {
      lastStatement = lc.voidOperation;
    }
`)}function br(e,t){let n="";for(let r=0;r<t.body.length;r++)t.body[r].type!=="EmptyStatement"&&(t.body[r].type==="ReturnStatement"||t.body[r].type==="BreakStatement"||t.body[r].type==="ContinueStatement"?n+=ie(e,t.body[r])+`; 
`:n+=ie(e,t.body[r])+` 
`);return n}function wu(e,t){return t.argument===null?"return lc.voidOperation":"return "+S(e,t.argument)}function yu(e,t){var i;const n=yt(e,t.specifiers[0].local,"global"),r=(i=e.libraryResolver)==null?void 0:i.loadLibrary(n.name),a=e.symbols.nextVarId();e.moduleFactory[r.uri]===void 0&&(e.moduleFactory[r.uri]=Lu(r.syntax,e.moduleFactory,e.isAsync)),e.moduleFactoryMap[a]=r.uri;let u="";return u=e.isAsync?"(yield lang.loadModule('"+a+"', runtimeCtx) ); ":"lang.loadModule('"+a+"', runtimeCtx); ",Ye(n),`gscope['${n.var}']=${u}`}function Ye(e){if(e.scope==="global")switch(e.name){case"iif":case"when":case"defaultvalue":case"decode":throw new Es}}function xu(e,t){const n=new Set(t.params.map(D=>B(D))),r=ji(t);Ii(r,n);const a=e.symbols,u=new Map;for(const D of r)u.set(D,a.nextVarId());const i=a.nextLocalsSymbolMapId();e.allLocalSymbolMetadata.set(i,u);const s={...e,localScope:u},o=[`lscope._SymbolsMapId = ${JSON.stringify(i)};`];for(let D=0;D<t.params.length;D++){const g=yt(s,t.params[D],"local");Ye(g),o.push(`lscope['${g.var}'] = arguments[${D}];`)}for(const[D,g]of u)n.has(D)||o.push(`lscope['${g}'] = ${Da};`);const l=br(s,t.body),h=e.isAsync===!0?["return lang.__awaiter(this, void 0, void 0, function* () {",`  ${l}`,"  return lastStatement;","});"]:[l,"return lastStatement;"],c=["new lang.UserDefinedCompiledFunction(","  lang.functionDepthchecker(","    function() {","      var lastStatement = lc.voidOperation;","      var lscope = runtimeCtx.localStack[runtimeCtx.localStack.length-1];",...o,...h,"    },","    runtimeCtx,","  ),",`  ${t.params.length},`,")"].join(`
`),d=yt(e,t.id,"global");return Ye(d),`gscope['${d.var}']=${c}; lastStatement = lc.voidOperation;`}function Fu(e,t){const n=[];for(let r=0;r<t.declarations.length;r++)n.push(Au(e,t.declarations[r]));return n.join(`
`)+` 
 lastStatement=  lc.voidOperation; 
`}function Au(e,t){const n=t.init===null?"null":S(e,t.init),r=yt(e,t.id);switch(Ye(r),r.scope){case"local":return`lscope['${r.var}']=${n};`;case"global":return`gscope['${r.var}']=${n};`;default:throw et(r.scope),new V(null,"NeverReach",t.id)}}function Cu(e,t){try{let n;return n=t.computed===!0?S(e,t.property):"'"+t.property.name+"'","lang.member("+S(e,t.object)+","+n+")"}catch(n){throw n}}function Eu(e,t){try{return"lang.unary("+S(e,t.argument)+",'"+t.operator+"')"}catch(n){throw n}}function vu(e,t){try{const n=[];for(let r=0;r<t.elements.length;r++)t.elements[r].type==="Literal"?n.push(S(e,t.elements[r])):n.push("lang.aCheck("+S(e,t.elements[r])+",'ArrayExpression')");return"["+n.join(",")+"]"}catch(n){throw n}}function bu(e,t){try{const n=[];let r=0;for(const a of t.quasis)n.push(a.value?JSON.stringify(a.value.cooked):JSON.stringify("")),a.tail===!1&&(n.push(t.expressions[r]?"lang.castString(lang.aCheck("+S(e,t.expressions[r])+", 'TemplateLiteral'))":""),r++);return"(["+n.join(",")+"]).join('')"}catch(n){throw n}}function Iu(e,t){try{return"lang.binary("+S(e,t.left)+","+S(e,t.right)+",'"+t.operator+"')"}catch(n){throw n}}function Su(e,t){try{if(t.left.type==="AssignmentExpression"||t.left.type==="UpdateExpression")throw new V(null,"LogicalExpressionOnlyBoolean",t);if(t.right.type==="AssignmentExpression"||t.right.type==="UpdateExpression")throw new V(null,"LogicalExpressionOnlyBoolean",t);if(t.operator==="&&"||t.operator==="||")return"(lang.logicalCheck("+S(e,t.left)+") "+t.operator+" lang.logicalCheck("+S(e,t.right)+"))";throw new V(null,"LogicExpressionOrAnd",null)}catch(n){throw n}}function ku(e,t){const n=bt(e,t);switch(Ye(n),n.scope){case"local":return At(`lscope['${n.var}']`);case"global":return At(`gscope['${n.var}']`);default:throw et(n.scope),new V(null,"NeverReach",t)}}function Bu(e,t){try{if(t.callee.type==="MemberExpression"){let u;u=t.callee.computed===!0?S(e,t.callee.property):"'"+t.callee.property.name+"'";let i="[";for(let s=0;s<t.arguments.length;s++)s>0&&(i+=", "),i+=S(e,t.arguments[s]);return i+="]",e.isAsync?"(yield lang.callModuleFunction("+S(e,t.callee.object)+","+i+","+u+",runtimeCtx))":"lang.callModuleFunction("+S(e,t.callee.object)+","+i+","+u+",runtimeCtx)"}if(t.callee.type!=="Identifier")throw new V(null,"FunctionNotFound",t);const n=bt(e,t.callee,"FunctionNotFound");if(n.scope==="global")switch(n.name){case"iif":return Tu(e,t);case"when":return Mu(e,t);case"defaultvalue":return Nu(e,t);case"decode":return Pu(e,t)}let r;switch(n.scope){case"local":r=At(`lscope['${n.var}']`);break;case"global":r=At(`gscope['${n.var}']`);break;default:throw et(n.scope),new V(null,"NeverReach",t.callee)}let a="[";for(let u=0;u<t.arguments.length;u++)u>0&&(a+=", "),a+=S(e,t.arguments[u]);return a+="]",e.isAsync?"(yield lang.callfunc("+r+","+a+",runtimeCtx) )":"lang.callfunc("+r+","+a+",runtimeCtx)"}catch(n){throw n}}function Tu(e,t){try{if(t.arguments.length!==3)throw new V(null,"WrongNumberOfParameters",t);const n=e.symbols.nextTempVarId();return`${e.isAsync?`(yield (function() { 
 return lang.__awaiter(this, void 0, void 0, function* () {`:"function() {"}
        var ${n} = ${S(e,t.arguments[0])};

        if (${n} === true) {
          return  ${S(e,t.arguments[1])};
        }
        else if (${n} === false) {
          return ${S(e,t.arguments[2])};
        }
        else {
          lang.error('ExecutionErrorCodes.BooleanConditionRequired');
        }
      ${e.isAsync?"})}()))":"}()"}`}catch(n){throw n}}function Nu(e,t){try{if(t.arguments.length<2||t.arguments.length>3)throw new V(null,"WrongNumberOfParameters",t);const n=e.symbols.nextTempVarId(),r=e.symbols.nextTempVarId();return t.arguments.length===3?`${e.isAsync?`(yield (function() { 
 return lang.__awaiter(this, void 0, void 0, function* () {`:"function() {"}
      var ${n} = ${S(e,t.arguments[0])};
      var ${r} = ${S(e,t.arguments[1])};
      ${n} = lang.getNestedOptionalValue(${n}, ${r});
      return ${n} != null && ${n} !== "" ? ${n} : ${S(e,t.arguments[2])};
      ${e.isAsync?"})}()))":"}()"}`:`${e.isAsync?`(yield (function() { 
 return lang.__awaiter(this, void 0, void 0, function* () {`:"function() {"}
        var ${n} = ${S(e,t.arguments[0])};
        if (${n} === null) {
          return  ${S(e,t.arguments[1])};
        }
        if (${n} === "") {
          return  ${S(e,t.arguments[1])};
        }
        if (${n} === undefined) {
          return  ${S(e,t.arguments[1])};
        }
        return ${n};
      ${e.isAsync?"})}()))":"}()"}`}catch(n){throw n}}function Mu(e,t){try{if(t.arguments.length<3)throw new V(null,"WrongNumberOfParameters",t);if(t.arguments.length%2==0)throw new V(null,"WrongNumberOfParameters",t);const n=e.symbols.nextTempVarId();let r="var ";for(let a=0;a<t.arguments.length-1;a+=2)r+=`${n} = lang.mustBoolean(${S(e,t.arguments[a])}, runtimeCtx);
      if (${n} === true ) {
        return ${S(e,t.arguments[a+1])}
      }
`;return`${e.isAsync?`(yield (function() { 
 return lang.__awaiter(this, void 0, void 0, function* () {`:"function() {"}
        ${r}
        return ${S(e,t.arguments[t.arguments.length-1])}
        ${e.isAsync?"})}()))":"}()"}`}catch(n){throw n}}function Pu(e,t){try{if(t.arguments.length<2)throw new V(null,"WrongNumberOfParameters",t);if(t.arguments.length===2)return`(${S(e,t.arguments[1])})`;if((t.arguments.length-1)%2==0)throw new V(null,"WrongNumberOfParameters",t);const n=e.symbols.nextTempVarId(),r=e.symbols.nextTempVarId();let a="var ";for(let u=1;u<t.arguments.length-1;u+=2)a+=`${r} = ${S(e,t.arguments[u])};
      if (lang.binary(${r}, ${n}, "==") === true ) {
        return ${S(e,t.arguments[u+1])}
      }
`;return`${e.isAsync?`(yield (function() { 
 return lang.__awaiter(this, void 0, void 0, function* () {`:"function() {"}
        var ${n} = ${S(e,t.arguments[0])};
        ${a}
        return ${S(e,t.arguments[t.arguments.length-1])}
        ${e.isAsync?"})}()))":"}()"}`}catch(n){throw n}}function nn(e,t){try{return ce(e,t,(n,r)=>{throw new f(n,"Unrecognized",r)})}catch(n){throw n}}function mi(e){const t=function(){this.textformatting=b.textFormatting()};t.prototype=Object.create(null),t.provided=new Set(["textformatting","infinity","pi"]),t.prototype.infinity=Number.POSITIVE_INFINITY,t.prototype.pi=Math.PI;for(const[n,r]of Object.entries(e))t.prototype[n]=new Dt(r),t.provided.add(n);return t}function Ru(){const e=Object.create(null);Hi(e,ce),ua(e,ce),qi(e,ce,ha),na(e,ce),Xi(e,ce),ia(e,ce),ca(e,ce),e.iif=nn,e.decode=nn,e.when=nn,e.defaultvalue=nn;const t=mi(e);return ta(e,ce),{ScopeSync:mi(e),ScopeAsync:t}}const{ScopeSync:xt,ScopeAsync:Ft}=Ru();function He(e,t){const n={mode:t,compiled:!0,functions:Object.create(null),signatures:[],standardFunction:ce,standardFunctionAsync:ce,evaluateIdentifier:ha};for(const r of e)r.registerFunctions(n);if(t==="sync")for(const[r,a]of Object.entries(n.functions))xt.prototype[r]=new Dt(a),xt.provided.add(r);else for(const[r,a]of Object.entries(n.functions))Ft.prototype[r]=new Dt(a),Ft.provided.add(r);for(const r of n.signatures)Vi(r,t)}He([er],"sync"),He([er],"async"),He([vs],"async");const pn=Symbol("uninitialized"),Da="lang.uninitialized";function At(e){return`lang.requireInitialized(${e})`}const dt={uninitialized:pn,requireInitialized(e){if(e===pn)throw new f(null,"InvalidIdentifier",null);return e},isNumber:e=>W(e),isArray:e=>k(e),isImmutableArray:e=>R(e),isDictionaryLike:e=>Oe(e),isString:e=>v(e),isDictionary:e=>Re(e),isGeometry:e=>Pe(e),getGeometryKeys:e=>Ar(e),geometryMember:(e,t,n,r,a=1)=>Xe(e,t,n,r,a),error(e){throw new f(null,e,null)},__awaiter(e,t,n,r){const a=r.apply(e,t||[]);let u=a.next();for(;!u.done&&!Me(u.value);)u=a.next(u.value);return u.done?u.value:new Promise((i,s)=>{function o(l){for(;!l.done;){if(Me(l.value))return void Promise.resolve(l.value).then(h=>{try{o(a.next(h))}catch(c){s(c)}},h=>{try{o(a.throw(h))}catch(c){s(c)}});try{l=a.next(l.value)}catch(h){return void s(h)}}i(l.value)}o(u)})},functionDepthchecker:(e,t)=>function(){if(t.depthCounter.depth++,t.localStack.push({}),t.depthCounter.depth>64)throw new f(null,"MaximumCallDepth",null);const n=e.apply(this,arguments);return Me(n)?n.then(r=>(t.depthCounter.depth--,t.localStack.length=t.localStack.length-1,r)):(t.depthCounter.depth--,t.localStack.length=t.localStack.length-1,n)},mustBoolean(e,t){if(e===!0||e===!1)return e;throw new f(t,"BooleanConditionRequired",null)},castString:e=>A(e),aCheck(e,t){if(K(e))throw t==="ArrayExpression"?new f(null,"NoFunctionInArray",null):t==="ObjectExpression"?new f(null,"NoFunctionInDictionary",null):new f(null,"NoFunctionInTemplateLiteral",null);return e===E?null:e},Dictionary:b,Feature:se,UserDefinedCompiledFunction:lu,dictionary(e){const t=Object.create(null),n=new Map;for(let a=0;a<e.length;a+=2){if(K(e[a+1]))throw new f(null,"NoFunctionInDictionary",null);if(v(e[a])===!1)throw new f(null,"KeyMustBeString",null);let u=e[a].toString();const i=u.toLowerCase();n.has(i)?u=n.get(i):n.set(i,u),e[a+1]===E?t[u]=null:t[u]=e[a+1]}const r=new b(t);return r.immutable=!1,r},entry:(e,t)=>b.containerEntry(e,t),strCheck(e){if(v(e)===!1)throw new f(null,"KeyMustBeString",null);return e},unary(e,t){if(H(e)){if(t==="!")return!e;if(t==="-")return-1*m(e);if(t==="+")return 1*m(e);if(t==="~")return~m(e);throw new f(null,"UnsupportUnaryOperator",null)}if(t==="-")return-1*m(e);if(t==="+")return 1*m(e);if(t==="~")return~m(e);throw new f(null,"UnsupportUnaryOperator",null)},logicalCheck(e){if(H(e)===!1)throw new f(null,"LogicExpressionOrAnd",null);return e},logical(e,t,n){if(H(e)&&H(t))switch(n){case"||":return e||t;case"&&":return e&&t;default:throw new f(null,"LogicExpressionOrAnd",null)}throw new f(null,"LogicExpressionOrAnd",null)},binary(e,t,n){switch(n){case"|":case"<<":case">>":case">>>":case"^":case"&":return Oi(m(e),m(t),n);case"==":case"=":return Ce(e,t);case"!=":return!Ce(e,t);case"<":case">":case"<=":case">=":return Ri(e,t,n);case"+":return v(e)||v(t)?A(e)+A(t):m(e)+m(t);case"-":return m(e)-m(t);case"*":return m(e)*m(t);case"/":return m(e)/m(t);case"%":return m(e)%m(t);default:throw new f(null,"UnsupportedOperator",null)}},assign(e,t,n){switch(t){case"=":return e===E?null:e;case"/=":return m(n)/m(e);case"*=":return m(n)*m(e);case"-=":return m(n)-m(e);case"+=":return v(n)||v(e)?A(n)+A(e):m(n)+m(e);case"%=":return m(n)%m(e);default:throw new f(null,"UnsupportedOperator",null)}},update(e,t,n,r){const a=m(this.requireInitialized(e[t]));return e[t]=n==="++"?a+1:a-1,r===!1?a:n==="++"?a+1:a-1},graphicToFeature:(e,t,n)=>e===null?null:se.createFromGraphicLikeObject(e.geometry,e.attributes,t,n.timeZone),memberupdate(e,t,n,r){let a;if(k(e)){if(!W(t))throw new f(null,"ArrayAccessMustBeNumber",null);if(t<0&&(t=e.length+t),t<0||t>=e.length)throw new f(null,"OutOfBounds",null);a=m(e[t]),e[t]=n==="++"?a+1:a-1}else if(e instanceof b){if(v(t)===!1)throw new f(null,"KeyAccessorMustBeString",null);if(e.hasField(t)!==!0)throw new f(null,"FieldNotFound",null,{key:t});a=m(e.field(t)),e.setField(t,n==="++"?a+1:a-1)}else if(J(e)){if(v(t)===!1)throw new f(null,"KeyAccessorMustBeString",null);if(e.hasField(t)!==!0)throw new f(null,"FieldNotFound",null);a=m(e.field(t)),e.setField(t,n==="++"?a+1:a-1)}else{if(R(e))throw new f(null,"Immutable",null);if(!(e instanceof _t))throw new f(null,"InvalidIdentifier",null);if(v(t)===!1)throw new f(null,"ModuleAccessorMustBeString",null);if(e.hasGlobal(t)!==!0)throw new f(null,"ModuleExportNotFound",null);a=m(e.global(t)),e.setGlobal(t,n==="++"?a+1:a-1)}return r===!1?a:n==="++"?a+1:a-1},assignmember(e,t,n,r){if(k(e)){if(!W(t))throw new f(null,"ArrayAccessMustBeNumber",null);if(t<0&&(t=e.length+t),t<0||t>e.length)throw new f(null,"OutOfBounds",null);if(t===e.length){if(n!=="=")throw new f(null,"OutOfBounds",null);e[t]=this.assign(r,n,e[t])}else e[t]=this.assign(r,n,e[t])}else if(e instanceof b){if(v(t)===!1)throw new f(null,"KeyAccessorMustBeString",null);if(e.hasField(t)===!0)e.setField(t,this.assign(r,n,e.field(t)));else{if(n!=="=")throw new f(null,"FieldNotFound",null);e.setField(t,this.assign(r,n,null))}}else if(J(e)){if(v(t)===!1)throw new f(null,"KeyAccessorMustBeString",null);if(e.hasField(t)===!0)e.setField(t,this.assign(r,n,e.field(t)));else{if(n!=="=")throw new f(null,"FieldNotFound",null);e.setField(t,this.assign(r,n,null))}}else{if(R(e))throw new f(null,"Immutable",null);if(!(e instanceof _t))throw new f(null,"InvalidIdentifier",null);if(v(t)===!1)throw new f(null,"ModuleAccessorMustBeString",null);if(!e.hasGlobal(t))throw new f(null,"ModuleExportNotFound",null);e.setGlobal(t,this.assign(r,n,e.global(t)))}},member(e,t){if(e===null)throw new f(null,"MemberOfNull",null);if(e instanceof b||Oe(e)){if(v(t))return e.field(t);throw new f(null,"InvalidMemberAccessKey",null)}if(e instanceof P){if(v(t))return Xe(e,t,null,null);throw new f(null,"InvalidMemberAccessKey",null)}if(k(e)){if(W(t)&&isFinite(t)&&Math.floor(t)===t){if(t<0&&(t=e.length+t),t>=e.length||t<0)throw new f(null,"OutOfBounds",null);return e[t]}throw new f(null,"InvalidMemberAccessKey",null)}if(v(e)){if(W(t)&&isFinite(t)&&Math.floor(t)===t){if(t<0&&(t=e.length+t),t>=e.length||t<0)throw new f(null,"OutOfBounds",null);return e[t]}throw new f(null,"InvalidMemberAccessKey",null)}if(R(e)){if(W(t)&&isFinite(t)&&Math.floor(t)===t){if(t<0&&(t=e.length()+t),t>=e.length()||t<0)throw new f(null,"OutOfBounds",null);return e.get(t)}throw new f(null,"InvalidMemberAccessKey",null)}if(e instanceof _t){if(v(t))return e.global(t);throw new f(null,"InvalidMemberAccessKey",null)}throw new f(null,"InvalidMemberAccessKey",null)},callfunc:(e,t,n)=>e.call(n,{arguments:t,preparsed:!0}),loadModule(e,t){const n=t.moduleFactoryMap[e];if(t.moduleSingletons[n])return t.moduleSingletons[n];const r=t.moduleFactory[n]({moduleSingletons:t.moduleSingletons,depthCounter:t.depthCounter,lrucache:t.lrucache,interceptor:t.interceptor,services:t.services,console:t.console,abortSignal:t.abortSignal,timeZone:t.timeZone??null,spatialReference:t.spatialReference});return t.moduleSingletons[n]=r,r},callModuleFunction(e,t,n,r){if(!(e instanceof _t))throw new f(null,"FunctionNotFound",null);const a=e.global(n);if(K(a)===!1)throw new f(null,"CallNonFunction",null);return a.call(r,{preparsed:!0,arguments:t})},getNestedOptionalValue:(e,t)=>Cr(e,t)};function ga(e){console.log(e)}function wa(e,t,n=!1){let r=null;e.usesModules&&(r=new Fn(null,e.loadedModules));const a=Object.create(null),u=new Set(Object.keys((t==null?void 0:t.vars)||{}).map(d=>B(d))),i=new Set(Object.keys((t==null?void 0:t.customfunctions)||{}).map(d=>B(d))),s=da(e,n?Ft.provided:xt.provided,new Set([...u,...i]),n,r,a);let o;o=n?["var runtimeCtx = this.prepare(context, true);","var lc = this.lc;","var lang = this.lang;","var gscope = runtimeCtx.globalScope;","return lang.__awaiter(this, void 0, void 0, function* () {","  function mainBody() {","    return lang.__awaiter(this, void 0, void 0, function* () {",`      ${s.body}`,"    });","  }","  return this.postProcess(yield mainBody());","});"].join(`
`):["var runtimeCtx = this.prepare(context, false);","var lc = this.lc;","var lang = this.lang;","var gscope = runtimeCtx.globalScope;","function mainBody() {",`  ${s.body}`,"}","return this.postProcess(mainBody());"].join(`
`);const{symbolMetadata:l,moduleFactoryMap:h}=s,c={lc:Mi,lang:dt,postProcess(d){if(Xn(d))return null;if(K(d))throw new f(null,"IllegalResult",null);return d},prepare(d,D){const g=d.spatialReference??Gt.WebMercator,w=D?new Ft:new xt;for(const y of i)d.customfunctions!=null&&y in d.customfunctions?w[y]=d.customfunctions[y]??null:w[y]=pn;for(const y of u){if(d.vars==null||!(y in d.vars)){y in w||(w[y]=pn);continue}const N=d.vars[y]??null;bi(N)?w[y]=se.createFromGraphic(N,d.timeZone??null):w[y]=N}return{lrucache:d.lrucache,interceptor:d.interceptor,services:d.services,console:d.console??ga,abortSignal:d.abortSignal??yn,timeZone:d.timeZone??null,spatialReference:g,track:d.track,globalScope:w,localStack:[],depthCounter:{depth:1},symbolMetadata:l,moduleFactory:a,moduleFactoryMap:h,moduleSingletons:Object.create(null)}}};return new Function("context",o).bind(c)}async function Ou(){return He([await Fe(()=>import("./geomasync-UH-KK5b6-BQMxpqBg.js"),__vite__mapDeps([61,1,2,62,63,58,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,57,90]),import.meta.url)],"async"),!0}class _t extends $i{constructor(t){super(),this.moduleContext=t}hasGlobal(t){const n=this.moduleContext.symbolMetadata.exports;return n.has(t)||n.has(B(t))}setGlobal(t,n){if(K(n))throw new f(null,"AssignModuleFunction",null);const r=this.moduleContext.symbolMetadata.globals.get(B(t));if(r==null)throw new f(null,"ModuleExportNotFound",null);this.moduleContext.globalScope[r]=n}global(t){const n=this.moduleContext.symbolMetadata.globals.get(B(t));if(n==null)throw new f(null,"ModuleExportNotFound",null);const r=this.moduleContext.globalScope,a=dt.requireInitialized(r[n]);if(K(a)&&!(a instanceof gt)){const u=new gt;return u.fn=a,u.parameterEvaluator=ce,u.context=this.moduleContext,r[n]=u,u}return a}}function Lu(e,t,n){const r=new Fn(null,e.loadedModules),a=da(e,n?Ft.provided:xt.provided,new Set,n,r,t);let u;u=n?["var runtimeCtx = this.prepare(context, true);","var lc = this.lc;","var lang = this.lang;","var gscope = runtimeCtx.globalScope;","return lang.__awaiter(this, void 0, void 0, function* () {","  function mainBody() {","    return lang.__awaiter(this, void 0, void 0, function* () {",`      ${a.body}`,"    });","  }","  yield mainBody();","  return this.prepareModule(runtimeCtx);","});"].join(`
`):["var runtimeCtx = this.prepare(context, false);","var lc = this.lc;","var lang = this.lang;","var gscope = runtimeCtx.globalScope;","function mainBody() {",`  ${a.body}`,"}","mainBody();","return this.prepareModule(runtimeCtx);"].join(`
`);const{symbolMetadata:i,moduleFactoryMap:s}=a,o={lc:Mi,lang:dt,prepareModule:l=>new _t(l),prepare(l,h){const c=l.spatialReference??Gt.WebMercator,d=h?new Ft:new xt;return{lrucache:l.lrucache,interceptor:l.interceptor,services:l.services,console:l.console??ga,abortSignal:l.abortSignal??yn,timeZone:l.timeZone??null,spatialReference:c,track:null,globalScope:d,localStack:[],depthCounter:l.depthCounter,symbolMetadata:i,moduleFactory:t,moduleFactoryMap:s,moduleSingletons:l.moduleSingletons}}};return new Function("context",u).bind(o)}const sn={False:"false",Null:"null",True:"true"},_={Break:"break",Continue:"continue",Else:"else",For:"for",Function:"function",If:"if",Import:"import",Export:"export",In:"in",Return:"return",Var:"var",While:"while"},Vn={From:"from",Of:"of"},x={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockComment:"BlockComment",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",ContinueStatement:"ContinueStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ExportNamedDeclaration:"ExportNamedDeclaration",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",Identifier:"Identifier",IfStatement:"IfStatement",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",LineComment:"LineComment",Literal:"Literal",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement"},ur=["++","--"],ya=["-","+","!","~"],xa=["=","/=","*=","%=","+=","-="],Fa=["||","&&"],_u=["|","&",">>","<<",">>>","^","==","!=","<","<=",">",">=","+","-","*","/","%"],pi={"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10},C={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,Template:10},Uu=["Unknown","Boolean","<end>","Identifier","Keyword","Null","Numeric","Punctuator","String","RegularExpression","Template"],F={InvalidModuleUri:"InvalidModuleUri",ForInOfLoopInitializer:"ForInOfLoopInitializer",IdentifierExpected:"IdentifierExpected",InvalidEscapedReservedWord:"InvalidEscapedReservedWord",InvalidExpression:"InvalidExpression",InvalidFunctionIdentifier:"InvalidFunctionIdentifier",InvalidHexEscapeSequence:"InvalidHexEscapeSequence",InvalidLeftHandSideInAssignment:"InvalidLeftHandSideInAssignment",InvalidLeftHandSideInForIn:"InvalidLeftHandSideInForIn",InvalidTemplateHead:"InvalidTemplateHead",InvalidVariableAssignment:"InvalidVariableAssignment",KeyMustBeString:"KeyMustBeString",NoFunctionInsideBlock:"NoFunctionInsideBlock",NoFunctionInsideFunction:"NoFunctionInsideFunction",ModuleExportRootOnly:"ModuleExportRootOnly",ModuleImportRootOnly:"ModuleImportRootOnly",PunctuatorExpected:"PunctuatorExpected",TemplateOctalLiteral:"TemplateOctalLiteral",UnexpectedBoolean:"UnexpectedBoolean",UnexpectedEndOfScript:"UnexpectedEndOfScript",UnexpectedIdentifier:"UnexpectedIdentifier",UnexpectedKeyword:"UnexpectedKeyword",UnexpectedNull:"UnexpectedNull",UnexpectedNumber:"UnexpectedNumber",UnexpectedPunctuator:"UnexpectedPunctuator",UnexpectedString:"UnexpectedString",UnexpectedTemplate:"UnexpectedTemplate",UnexpectedToken:"UnexpectedToken"},$u={[F.InvalidModuleUri]:"Module uri must be a text literal.",[F.ForInOfLoopInitializer]:"for-in loop variable declaration may not have an initializer.",[F.IdentifierExpected]:"'${value}' is an invalid identifier.",[F.InvalidEscapedReservedWord]:"Keyword cannot contain escaped characters.",[F.InvalidExpression]:"Invalid expression.",[F.InvalidFunctionIdentifier]:"'${value}' is an invalid function identifier.",[F.InvalidHexEscapeSequence]:"Invalid hexadecimal escape sequence.",[F.InvalidLeftHandSideInAssignment]:"Invalid left-hand side in assignment.",[F.InvalidLeftHandSideInForIn]:"Invalid left-hand side in for-in.",[F.InvalidTemplateHead]:"Invalid template structure.",[F.InvalidVariableAssignment]:"Invalid variable assignment.",[F.KeyMustBeString]:"Object property keys must be a word starting with a letter.",[F.NoFunctionInsideBlock]:"Functions cannot be declared inside of code blocks.",[F.NoFunctionInsideFunction]:"Functions cannot be declared inside another function.",[F.ModuleExportRootOnly]:"Module exports cannot be declared inside of code blocks.",[F.ModuleImportRootOnly]:"Module import cannot be declared inside of code blocks.",[F.PunctuatorExpected]:"'${value}' expected.",[F.TemplateOctalLiteral]:"Octal literals are not allowed in template literals.",[F.UnexpectedBoolean]:"Unexpected boolean literal.",[F.UnexpectedEndOfScript]:"Unexpected end of Arcade expression.",[F.UnexpectedIdentifier]:"Unexpected identifier.",[F.UnexpectedKeyword]:"Unexpected keyword.",[F.UnexpectedNull]:"Unexpected null literal.",[F.UnexpectedNumber]:"Unexpected number.",[F.UnexpectedPunctuator]:"Unexpected punctuator.",[F.UnexpectedString]:"Unexpected text literal.",[F.UnexpectedTemplate]:"Unexpected quasi '${value}'.",[F.UnexpectedToken]:"Unexpected token '${value}'."};let Vt=class Aa extends Error{constructor({code:t,index:n,line:r,column:a,len:u=0,description:i,data:s}){var o;super(i??t),this.declaredRootClass="esri.arcade.lib.diagnostic",this.name="ParsingError",this.code=t,this.index=n,this.line=r,this.column=a,this.len=u,this.data=s,this.description=i,this.range={start:{line:r,column:a-1},end:{line:r,column:a+u}},(o=Error.captureStackTrace)==null||o.call(Error,this,Aa)}};function zu(e){return!!e&&typeof e=="object"&&"type"in e&&e.type===x.Program}function Di(e){return!!e&&typeof e=="object"&&"type"in e&&e.type===x.BlockStatement}function ju(e){return!!e&&typeof e=="object"&&"type"in e&&e.type===x.BlockComment}function Vu(e){return!!e&&typeof e=="object"&&"type"in e&&e.type===x.EmptyStatement}function Gu(e){return!!e&&typeof e=="object"&&"type"in e&&e.type===x.VariableDeclarator}function Gn(e,t){return t.loc.end.line===e.loc.start.line&&t.loc.end.column<=e.loc.start.column}function gi(e,t){return e.range[0]>=t.range[0]&&e.range[1]<=t.range[1]}let Wu=class{constructor(){this.comments=[],this._nodeStack=[],this._newComments=[]}insertInnerComments(e){if(!Di(e)||e.body.length!==0)return;const t=[];for(let n=this._newComments.length-1;n>=0;n--){const r=this._newComments[n];e.range[1]>=r.range[0]&&(t.unshift(r),this._newComments.splice(n,1))}t.length&&(e.innerComments=t)}attachTrailingComments(e){const t=this._nodeStack.at(-1);if(!t)return;if(Di(e)&&gi(t,e))for(let r=this._newComments.length-1;r>=0;r--){const a=this._newComments[r];gi(a,e)&&(t.trailingComments=[...t.trailingComments??[],a],this._newComments.splice(r,1))}let n=[];if(this._newComments.length>0)for(let r=this._newComments.length-1;r>=0;r--){const a=this._newComments[r];Gn(a,t)?(t.trailingComments=[...t.trailingComments??[],a],this._newComments.splice(r,1)):Gn(a,e)&&(n.unshift(a),this._newComments.splice(r,1))}t.trailingComments&&Gn(t.trailingComments[0],e)&&(n=[...n,...t.trailingComments],delete t.trailingComments),n.length>0&&(e.trailingComments=n)}attachLeadingComments(e){let t;for(;this._nodeStack.length>0;){const a=this._nodeStack[this._nodeStack.length-1];if(!(e.range[0]<=a.range[0]))break;t=a,this._nodeStack.pop()}const n=[],r=[];if(t!=null){if(!t.leadingComments)return;for(let a=t.leadingComments.length-1;a>=0;a--){const u=t.leadingComments[a];e.range[0]>=u.range[1]?(n.unshift(u),t.leadingComments.splice(a,1)):Gu(e)&&!ju(u)&&(r.unshift(u),t.leadingComments.splice(a,1))}return t.leadingComments.length===0&&delete t.leadingComments,n.length&&(e.leadingComments=n),void(r.length&&(e.trailingComments=[...r,...e.trailingComments??[]]))}for(let a=this._newComments.length-1;a>=0;a--){const u=this._newComments[a];e.range[0]>=u.range[0]&&(n.unshift(u),this._newComments.splice(a,1))}n.length&&(e.leadingComments=n)}attachComments(e){if(zu(e)&&e.body.length>0){const t=this._nodeStack.at(-1);return t?(t.trailingComments=[...t.trailingComments??[],...this._newComments],this._newComments.length=0,void this._nodeStack.pop()):(e.trailingComments=[...this._newComments],void(this._newComments.length=0))}this.attachTrailingComments(e),this.attachLeadingComments(e),this.insertInnerComments(e),this._nodeStack.push(e)}collectComment(e){this.comments.push(e),this._newComments.push(e)}};const Zu=/\$\{(.*?)\}/gu;function lr(e,t){const n=$u[e];return t?n.replace(Zu,(r,a)=>{var u;return((u=t[a])==null?void 0:u.toString())??""}):n}class Hu{constructor(t=!1){this.tolerant=t,this.errors=[]}recordError(t){this.errors.push(t)}tolerate(t){if(!this.tolerant)throw t;this.recordError(t)}throwError(t){throw t.description??(t.description=lr(t.code,t.data)),new Vt(t)}tolerateError(t){t.description??(t.description=lr(t.code,t.data));const n=new Vt(t);if(!this.tolerant)throw n;this.recordError(n)}}function wi(e,t){if(!e)throw new Error(`ASSERT: ${t}`)}const yi={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDEC0-\uDEEB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/u,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05EF-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u07FD\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D3-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CD0-\u1CD2\u1CD4-\u1CFA\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD27\uDD30-\uDD39\uDF00-\uDF1C\uDF27\uDF30-\uDF50\uDFE0-\uDFF6]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD44-\uDD46\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDC9-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3B-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC5E\uDC5F\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDC00-\uDC3A\uDCA0-\uDCE9\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD7\uDDDA-\uDDE1\uDDE3\uDDE4\uDE00-\uDE3E\uDE47\uDE50-\uDE99\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD8E\uDD90\uDD91\uDD93-\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF4F-\uDF87\uDF8F-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD00-\uDD2C\uDD30-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4B\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/u},O={fromCodePoint:e=>e<65536?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10))+String.fromCharCode(56320+(e-65536&1023)),isWhiteSpace:e=>e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e),isLineTerminator:e=>e===10||e===13||e===8232||e===8233,isIdentifierStart:e=>e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&yi.NonAsciiIdentifierStart.test(O.fromCodePoint(e)),isIdentifierPart:e=>e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&yi.NonAsciiIdentifierPart.test(O.fromCodePoint(e)),isDecimalDigit:e=>e>=48&&e<=57,isHexDigit:e=>e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102,isOctalDigit:e=>e>=48&&e<=55};function xi(e){return"0123456789abcdef".indexOf(e.toLowerCase())}function Wn(e){return"01234567".indexOf(e)}const Ke=[[],[],[]];ur.forEach(e=>{var t;return(t=Ke[e.length-1])==null?void 0:t.push(e)}),ya.forEach(e=>{var t;return(t=Ke[e.length-1])==null?void 0:t.push(e)}),Fa.forEach(e=>{var t;return(t=Ke[e.length-1])==null?void 0:t.push(e)}),xa.forEach(e=>{var t;return(t=Ke[e.length-1])==null?void 0:t.push(e)}),_u.forEach(e=>{var t;return(t=Ke[e.length-1])==null?void 0:t.push(e)});let Ku=class{constructor(e,t){this.source=e,this.errorHandler=t,this._length=e.length,this.index=0,this.lineNumber=1,this.lineStart=0,this.curlyStack=[]}saveState(){return{index:this.index,lineNumber:this.lineNumber,lineStart:this.lineStart,curlyStack:this.curlyStack.slice()}}restoreState(e){this.index=e.index,this.lineNumber=e.lineNumber,this.lineStart=e.lineStart,this.curlyStack=e.curlyStack}eof(){return this.index>=this._length}throwUnexpectedToken(e=F.UnexpectedToken){this.errorHandler.throwError({code:e,index:this.index,line:this.lineNumber,column:this.index-this.lineStart+1,data:{value:this.source.charAt(this.index)}})}tolerateUnexpectedToken(e=F.UnexpectedToken){this.errorHandler.tolerateError({code:e,index:this.index,line:this.lineNumber,column:this.index-this.lineStart+1})}skipSingleLineComment(e){const t=[],n=this.index-e,r={start:{line:this.lineNumber,column:this.index-this.lineStart-e},end:{line:0,column:0}};for(;!this.eof();){const u=this.source.charCodeAt(this.index);if(this.index+=1,O.isLineTerminator(u)){r.end={line:this.lineNumber,column:this.index-this.lineStart-1};const i={multiLine:!1,start:n+e,end:this.index-1,range:[n,this.index-1],loc:r};return t.push(i),u===13&&this.source.charCodeAt(this.index)===10&&(this.index+=1),this.lineNumber+=1,this.lineStart=this.index,t}}r.end={line:this.lineNumber,column:this.index-this.lineStart};const a={multiLine:!1,start:n+e,end:this.index,range:[n,this.index],loc:r};return t.push(a),t}skipMultiLineComment(){const e=[],t=this.index-2,n={start:{line:this.lineNumber,column:this.index-this.lineStart-2},end:{line:0,column:0}};for(;!this.eof();){const a=this.source.charCodeAt(this.index);if(O.isLineTerminator(a))a===13&&this.source.charCodeAt(this.index+1)===10&&(this.index+=1),this.lineNumber+=1,this.index+=1,this.lineStart=this.index;else if(a===42){if(this.source.charCodeAt(this.index+1)===47){this.index+=2,n.end={line:this.lineNumber,column:this.index-this.lineStart};const u={multiLine:!0,start:t+2,end:this.index-2,range:[t,this.index],loc:n};return e.push(u),e}this.index+=1}else this.index+=1}n.end={line:this.lineNumber,column:this.index-this.lineStart};const r={multiLine:!0,start:t+2,end:this.index,range:[t,this.index],loc:n};return e.push(r),this.tolerateUnexpectedToken(),e}scanComments(){let e=[];for(;!this.eof();){let t=this.source.charCodeAt(this.index);if(O.isWhiteSpace(t))this.index+=1;else if(O.isLineTerminator(t))this.index+=1,t===13&&this.source.charCodeAt(this.index)===10&&(this.index+=1),this.lineNumber+=1,this.lineStart=this.index;else{if(t!==47)break;if(t=this.source.charCodeAt(this.index+1),t===47){this.index+=2;const n=this.skipSingleLineComment(2);e=[...e,...n]}else{if(t!==42)break;{this.index+=2;const n=this.skipMultiLineComment();e=[...e,...n]}}}}return e}isKeyword(e){switch((e=e.toLowerCase()).length){case 2:return e===_.If||e===_.In;case 3:return e===_.Var||e===_.For;case 4:return e===_.Else;case 5:return e===_.Break||e===_.While;case 6:return e===_.Return||e===_.Import||e===_.Export;case 8:return e===_.Function||e===_.Continue;default:return!1}}codePointAt(e){let t=this.source.charCodeAt(e);if(t>=55296&&t<=56319){const n=this.source.charCodeAt(e+1);n>=56320&&n<=57343&&(t=1024*(t-55296)+n-56320+65536)}return t}scanHexEscape(e){const t=e==="u"?4:2;let n=0;for(let r=0;r<t;r++){if(this.eof()||!O.isHexDigit(this.source.charCodeAt(this.index)))return null;n=16*n+xi(this.source[this.index]??""),this.index+=1}return String.fromCharCode(n)}scanUnicodeCodePointEscape(){let e=this.source[this.index],t=0;for(e==="}"&&this.throwUnexpectedToken();!this.eof()&&(e=this.source[this.index]??"",this.index+=1,O.isHexDigit(e.charCodeAt(0)));)t=16*t+xi(e);return(t>1114111||e!=="}")&&this.throwUnexpectedToken(),O.fromCodePoint(t)}getIdentifier(){const e=this.index;for(this.index+=1;!this.eof();){const t=this.source.charCodeAt(this.index);if(t===92)return this.index=e,this.getComplexIdentifier();if(t>=55296&&t<57343)return this.index=e,this.getComplexIdentifier();if(!O.isIdentifierPart(t))break;this.index+=1}return this.source.slice(e,this.index)}getComplexIdentifier(){let e,t=this.codePointAt(this.index),n=O.fromCodePoint(t);for(this.index+=n.length,t===92&&(this.source.charCodeAt(this.index)!==117&&this.throwUnexpectedToken(),this.index+=1,this.source[this.index]==="{"?(this.index+=1,e=this.scanUnicodeCodePointEscape()):(e=this.scanHexEscape("u"),(e===null||e==="\\"||!O.isIdentifierStart(e.charCodeAt(0)))&&this.throwUnexpectedToken()),n=e);!this.eof()&&(t=this.codePointAt(this.index),O.isIdentifierPart(t));)e=O.fromCodePoint(t),n+=e,this.index+=e.length,t===92&&(n=n.substring(0,n.length-1),this.source.charCodeAt(this.index)!==117&&this.throwUnexpectedToken(),this.index+=1,this.source[this.index]==="{"?(this.index+=1,e=this.scanUnicodeCodePointEscape()):(e=this.scanHexEscape("u"),(e===null||e==="\\"||!O.isIdentifierPart(e.charCodeAt(0)))&&this.throwUnexpectedToken()),n+=e);return n}octalToDecimal(e){let t=e!=="0",n=Wn(e);return!this.eof()&&O.isOctalDigit(this.source.charCodeAt(this.index))&&(t=!0,n=8*n+Wn(this.source[this.index]??""),this.index+=1,"0123".includes(e)&&!this.eof()&&O.isOctalDigit(this.source.charCodeAt(this.index))&&(n=8*n+Wn(this.source[this.index]??""),this.index+=1)),{code:n,octal:t}}scanIdentifier(){let e;const t=this.index,n=this.source.charCodeAt(t)===92?this.getComplexIdentifier():this.getIdentifier();if(e=n.length===1?C.Identifier:this.isKeyword(n)?C.Keyword:n.toLowerCase()===sn.Null?C.NullLiteral:n.toLowerCase()===sn.True||n.toLowerCase()===sn.False?C.BooleanLiteral:C.Identifier,e!==C.Identifier&&t+n.length!==this.index){const r=this.index;this.index=t,this.tolerateUnexpectedToken(F.InvalidEscapedReservedWord),this.index=r}return{type:e,value:n,lineNumber:this.lineNumber,lineStart:this.lineStart,start:t,end:this.index}}scanPunctuator(){var n;const e=this.index;let t=this.source[this.index]??"";switch(t){case"(":case"{":t==="{"&&this.curlyStack.push("{"),this.index+=1;break;case".":case")":case";":case",":case"[":case"]":case":":case"?":case"~":this.index+=1;break;case"}":this.index+=1,this.curlyStack.pop();break;default:for(let r=Ke.length;r>0;r--)if(t=this.source.substring(this.index,this.index+r),(n=Ke[r-1])==null?void 0:n.includes(t)){this.index+=r;break}}return this.index===e&&this.throwUnexpectedToken(),{type:C.Punctuator,value:t,lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}}scanHexLiteral(e){let t="";for(;!this.eof()&&O.isHexDigit(this.source.charCodeAt(this.index));)t+=this.source[this.index],this.index+=1;return t.length===0&&this.throwUnexpectedToken(),O.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:C.NumericLiteral,value:Number.parseInt(`0x${t}`,16),lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}}scanBinaryLiteral(e){let t="";for(;!this.eof();){const n=this.source[this.index];if(n!=="0"&&n!=="1")break;t+=this.source[this.index],this.index+=1}if(t.length===0&&this.throwUnexpectedToken(),!this.eof()){const n=this.source.charCodeAt(this.index);(O.isIdentifierStart(n)||O.isDecimalDigit(n))&&this.throwUnexpectedToken()}return{type:C.NumericLiteral,value:Number.parseInt(t,2),lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}}scanOctalLiteral(e,t){let n="",r=!1;for(O.isOctalDigit(e.charCodeAt(0))&&(r=!0,n=`0${this.source[this.index]}`),this.index+=1;!this.eof()&&O.isOctalDigit(this.source.charCodeAt(this.index));)n+=this.source[this.index],this.index+=1;return!r&&n.length===0&&this.throwUnexpectedToken(),(O.isIdentifierStart(this.source.charCodeAt(this.index))||O.isDecimalDigit(this.source.charCodeAt(this.index)))&&this.throwUnexpectedToken(),{type:C.NumericLiteral,value:Number.parseInt(n,8),lineNumber:this.lineNumber,lineStart:this.lineStart,start:t,end:this.index}}scanNumericLiteral(){const e=this.index;let t=this.source[e]??"";wi(O.isDecimalDigit(t.charCodeAt(0))||t===".","Numeric literal must start with a decimal digit or a decimal point");let n="";if(t!=="."){if(n=this.source[this.index]??"",this.index+=1,t=this.source[this.index]??"",n==="0"){if(t==="x"||t==="X")return this.index+=1,this.scanHexLiteral(e);if(t==="b"||t==="B")return this.index+=1,this.scanBinaryLiteral(e);if(t==="o"||t==="O")return this.scanOctalLiteral(t,e)}for(;O.isDecimalDigit(this.source.charCodeAt(this.index));)n+=this.source[this.index],this.index+=1;t=this.source[this.index]??""}if(t==="."){for(n+=this.source[this.index],this.index+=1;O.isDecimalDigit(this.source.charCodeAt(this.index));)n+=this.source[this.index],this.index+=1;t=this.source[this.index]??""}if(t==="e"||t==="E")if(n+=this.source[this.index],this.index+=1,t=this.source[this.index]??"",(t==="+"||t==="-")&&(n+=this.source[this.index],this.index+=1),O.isDecimalDigit(this.source.charCodeAt(this.index)))for(;O.isDecimalDigit(this.source.charCodeAt(this.index));)n+=this.source[this.index],this.index+=1;else this.throwUnexpectedToken();return O.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:C.NumericLiteral,value:Number.parseFloat(n),lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}}scanStringLiteral(){const e=this.index;let t=this.source[e];wi(t==="'"||t==='"',"String literal must starts with a quote"),this.index+=1;let n=!1,r="";for(;!this.eof();){let a=this.source[this.index]??"";if(this.index+=1,a===t){t="";break}if(a==="\\")if(a=this.source[this.index]??"",this.index+=1,a&&O.isLineTerminator(a.charCodeAt(0)))this.lineNumber+=1,a==="\r"&&this.source[this.index]===`
`&&(this.index+=1),this.lineStart=this.index;else switch(a){case"u":if(this.source[this.index]==="{")this.index+=1,r+=this.scanUnicodeCodePointEscape();else{const u=this.scanHexEscape(a);u===null&&this.throwUnexpectedToken(),r+=u}break;case"x":{const u=this.scanHexEscape(a);u===null&&this.throwUnexpectedToken(F.InvalidHexEscapeSequence),r+=u;break}case"n":r+=`
`;break;case"r":r+="\r";break;case"t":r+="	";break;case"b":r+="\b";break;case"f":r+="\f";break;case"v":r+="\v";break;case"8":case"9":r+=a,this.tolerateUnexpectedToken();break;default:if(a&&O.isOctalDigit(a.charCodeAt(0))){const u=this.octalToDecimal(a);n=u.octal||n,r+=String.fromCharCode(u.code)}else r+=a}else{if(O.isLineTerminator(a.charCodeAt(0)))break;r+=a}}return t!==""&&(this.index=e,this.throwUnexpectedToken()),{type:C.StringLiteral,value:r,lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}}scanTemplate(){let e="",t=!1;const n=this.index,r=this.source[n]==="`";let a=!1,u=2;for(this.index+=1;!this.eof();){let i=this.source[this.index]??"";if(this.index+=1,i==="`"){u=1,a=!0,t=!0;break}if(i!=="$")if(i!=="\\")O.isLineTerminator(i.charCodeAt(0))?(this.lineNumber+=1,i==="\r"&&this.source[this.index]===`
`&&(this.index+=1),this.lineStart=this.index,e+=`
`):e+=i;else if(i=this.source[this.index]??"",this.index+=1,O.isLineTerminator(i.charCodeAt(0)))this.lineNumber+=1,i==="\r"&&this.source[this.index]===`
`&&(this.index+=1),this.lineStart=this.index;else switch(i){case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"u":if(this.source[this.index]==="{")this.index+=1,e+=this.scanUnicodeCodePointEscape();else{const s=this.index,o=this.scanHexEscape(i);o!==null?e+=o:(this.index=s,e+=i)}break;case"x":{const s=this.scanHexEscape(i);s===null&&this.throwUnexpectedToken(F.InvalidHexEscapeSequence),e+=s;break}case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:i==="0"?(O.isDecimalDigit(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(F.TemplateOctalLiteral),e+="\0"):O.isOctalDigit(i.charCodeAt(0))?this.throwUnexpectedToken(F.TemplateOctalLiteral):e+=i}else{if(this.source[this.index]==="{"){this.curlyStack.push("${"),this.index+=1,t=!0;break}e+=i}}return t||this.throwUnexpectedToken(),r||this.curlyStack.pop(),{type:C.Template,value:this.source.slice(n+1,this.index-u),cooked:e,head:r,tail:a,lineNumber:this.lineNumber,lineStart:this.lineStart,start:n,end:this.index}}lex(){if(this.eof())return{type:C.EOF,value:"",lineNumber:this.lineNumber,lineStart:this.lineStart,start:this.index,end:this.index};const e=this.source.charCodeAt(this.index);return O.isIdentifierStart(e)?this.scanIdentifier():e===40||e===41||e===59?this.scanPunctuator():e===39||e===34?this.scanStringLiteral():e===46?O.isDecimalDigit(this.source.charCodeAt(this.index+1))?this.scanNumericLiteral():this.scanPunctuator():O.isDecimalDigit(e)?this.scanNumericLiteral():e===96||e===125&&this.curlyStack[this.curlyStack.length-1]==="${"?this.scanTemplate():e>=55296&&e<57343&&O.isIdentifierStart(this.codePointAt(this.index))?this.scanIdentifier():this.scanPunctuator()}};const te={None:0,Function:1,IfClause:2,ForLoop:4,ForOfLoop:8,WhileLoop:16},Zn={AsObject:0,Automatic:1};function Fi(e,t=0){let n=e.start-e.lineStart,r=e.lineNumber;return n<0&&(n+=t,r-=1),{index:e.start,line:r,column:n}}function Ai(e){return[{index:e.range[0],...e.loc.start},{index:e.range[1],...e.loc.end}]}function Ci(e){return e in pi?pi[e]:0}let qu=class{constructor(e,t={},n){this.delegate=n,this.hasLineTerminator=!1,this.options={tokens:typeof t.tokens=="boolean"&&t.tokens,comments:typeof t.comments=="boolean"&&t.comments,tolerant:typeof t.tolerant=="boolean"&&t.tolerant},this.options.comments&&(this.commentHandler=new Wu),this.errorHandler=new Hu(this.options.tolerant),this.scanner=new Ku(e,this.errorHandler),this.context={isAssignmentTarget:!1,blockContext:te.None,curlyParsingType:Zn.AsObject},this.rawToken={type:C.EOF,value:"",lineNumber:this.scanner.lineNumber,lineStart:0,start:0,end:0},this.tokens=[],this.startMarker={index:0,line:this.scanner.lineNumber,column:0},this.endMarker={index:0,line:this.scanner.lineNumber,column:0},this.readNextRawToken(),this.endMarker={index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}throwIfInvalidType(e,t,{validTypes:n,invalidTypes:r}){n!=null&&n.some(a=>e.type===a)||r!=null&&r.some(a=>e.type===a)&&this.throwError(F.InvalidExpression,t)}throwError(e,t,n=this.endMarker){const{index:r,line:a,column:u}=t,i=n.index-r-1;this.errorHandler.throwError({code:e,index:r,line:a,column:u+1,len:i})}tolerateError(e,t){throw new Error("######################################### !!!")}unexpectedTokenError(e={}){const{rawToken:t}=e;let n,{code:r,data:a}=e;if(t){if(!r)switch(t.type){case C.EOF:r=F.UnexpectedEndOfScript;break;case C.Identifier:r=F.UnexpectedIdentifier;break;case C.NumericLiteral:r=F.UnexpectedNumber;break;case C.StringLiteral:r=F.UnexpectedString;break;case C.Template:r=F.UnexpectedTemplate}n=t.value.toString()}else n="ILLEGAL";r??(r=F.UnexpectedToken),a??(a={value:n});const u=lr(r,a);if(t){const o=t.start,l=t.lineNumber,h=t.start-t.lineStart+1;return new Vt({code:r,index:o,line:l,column:h,len:t.end-t.start-1,data:a,description:u})}const{index:i,line:s}=this.endMarker;return new Vt({code:r,index:i,line:s,column:this.endMarker.column+1,data:a,description:u})}throwUnexpectedToken(e={}){throw e.rawToken??(e.rawToken=this.rawToken),this.unexpectedTokenError(e)}collectComments(e){const{commentHandler:t}=this;!t||!e.length||e.forEach(n=>{const r={type:n.multiLine?x.BlockComment:x.LineComment,value:this.getSourceValue(n),range:n.range,loc:n.loc};t.collectComment(r)})}peekAhead(e){const t=()=>(this.scanner.scanComments(),this.scanner.lex()),n=this.scanner.saveState(),r=e.call(this,t);return this.scanner.restoreState(n),r}getSourceValue(e){return this.scanner.source.slice(e.start,e.end)}convertToToken(e){return{type:Uu[e.type],value:this.getSourceValue(e),range:[e.start,e.end],loc:{start:{line:this.startMarker.line,column:this.startMarker.column},end:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}}}readNextRawToken(){this.endMarker.index=this.scanner.index,this.endMarker.line=this.scanner.lineNumber,this.endMarker.column=this.scanner.index-this.scanner.lineStart;const e=this.rawToken;this.collectComments(this.scanner.scanComments()),this.scanner.index!==this.startMarker.index&&(this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart),this.rawToken=this.scanner.lex(),this.hasLineTerminator=e.lineNumber!==this.rawToken.lineNumber,this.options.tokens&&this.rawToken.type!==C.EOF&&this.tokens.push(this.convertToToken(this.rawToken))}captureStartMarker(){return{index:this.startMarker.index,line:this.startMarker.line,column:this.startMarker.column}}getItemLocation(e){return{range:[e.index,this.endMarker.index],loc:{start:{line:e.line,column:e.column},end:{line:this.endMarker.line,column:this.endMarker.column}}}}finalize(e){var t,n;return(this.delegate??this.commentHandler)&&((t=this.commentHandler)==null||t.attachComments(e),(n=this.delegate)==null||n.call(this,e)),e}expectPunctuator(e){const t=this.rawToken;this.matchPunctuator(e)?this.readNextRawToken():this.throwUnexpectedToken({rawToken:t,code:F.PunctuatorExpected,data:{value:e}})}expectKeyword(e){this.rawToken.type!==C.Keyword||this.rawToken.value.toLowerCase()!==e.toString()?this.throwUnexpectedToken({rawToken:this.rawToken}):this.readNextRawToken()}expectContextualKeyword(e){this.rawToken.type!==C.Identifier||this.rawToken.value.toLowerCase()!==e?this.throwUnexpectedToken({rawToken:this.rawToken}):this.readNextRawToken()}matchKeyword(e){return this.rawToken.type===C.Keyword&&this.rawToken.value.toLowerCase()===e}matchContextualKeyword(e){return this.rawToken.type===C.Identifier&&this.rawToken.value===e}matchPunctuator(e){return this.rawToken.type===C.Punctuator&&this.rawToken.value===e}getMatchingPunctuator(e){if(typeof e=="string"&&(e=e.split("")),this.rawToken.type===C.Punctuator&&e.length)return e.find(this.matchPunctuator.bind(this))}isolateCoverGrammar(e){const t=this.context.isAssignmentTarget;this.context.isAssignmentTarget=!0;const n=e.call(this);return this.context.isAssignmentTarget=t,n}inheritCoverGrammar(e){var r;const t=this.context.isAssignmentTarget;this.context.isAssignmentTarget=!0;const n=e.call(this);return(r=this.context).isAssignmentTarget&&(r.isAssignmentTarget=t),n}withBlockContext(e,t){const n=this.context.blockContext;this.context.blockContext|=e;const r=this.context.curlyParsingType;this.context.curlyParsingType=Zn.Automatic;const a=t.call(this);return this.context.blockContext=n,this.context.curlyParsingType=r,a}consumeSemicolon(){if(this.matchPunctuator(";"))this.readNextRawToken();else if(!this.hasLineTerminator){if(this.rawToken.type===C.EOF||this.matchPunctuator("}"))return this.endMarker.index=this.startMarker.index,this.endMarker.line=this.startMarker.line,void(this.endMarker.column=this.startMarker.column);this.throwUnexpectedToken({rawToken:this.rawToken})}}parsePrimaryExpression(){const e=this.captureStartMarker(),t=this.rawToken;switch(t.type){case C.Identifier:return this.readNextRawToken(),this.finalize({type:x.Identifier,name:t.value,...this.getItemLocation(e)});case C.NumericLiteral:case C.StringLiteral:return this.context.isAssignmentTarget=!1,this.readNextRawToken(),this.finalize({type:x.Literal,value:t.value,raw:this.getSourceValue(t),isString:typeof t.value=="string",...this.getItemLocation(e)});case C.BooleanLiteral:return this.context.isAssignmentTarget=!1,this.readNextRawToken(),this.finalize({type:x.Literal,value:t.value.toLowerCase()===sn.True,raw:this.getSourceValue(t),isString:!1,...this.getItemLocation(e)});case C.NullLiteral:return this.context.isAssignmentTarget=!1,this.readNextRawToken(),this.finalize({type:x.Literal,value:null,raw:this.getSourceValue(t),isString:!1,...this.getItemLocation(e)});case C.Template:return this.parseTemplateLiteral();case C.Punctuator:switch(t.value){case"(":return this.inheritCoverGrammar(this.parseGroupExpression.bind(this));case"[":return this.inheritCoverGrammar(this.parseArrayInitializer.bind(this));case"{":return this.inheritCoverGrammar(this.parseObjectExpression.bind(this));default:return this.throwUnexpectedToken({rawToken:this.rawToken})}case C.Keyword:return this.context.isAssignmentTarget=!1,this.throwUnexpectedToken({rawToken:this.rawToken});default:return this.throwUnexpectedToken({rawToken:this.rawToken})}}parseArrayInitializer(){const e=this.captureStartMarker();this.expectPunctuator("[");const t=[];for(;!this.matchPunctuator("]");){const n=this.captureStartMarker();this.matchPunctuator(",")?(this.readNextRawToken(),this.throwError(F.InvalidExpression,n)):(t.push(this.inheritCoverGrammar(this.parseAssignmentExpression.bind(this))),this.matchPunctuator("]")||this.expectPunctuator(","))}return this.expectPunctuator("]"),this.finalize({type:x.ArrayExpression,elements:t,...this.getItemLocation(e)})}parseObjectPropertyKey(){const e=this.captureStartMarker(),t=this.rawToken;switch(t.type){case C.StringLiteral:return this.readNextRawToken(),this.finalize({type:x.Literal,value:t.value,raw:this.getSourceValue(t),isString:!0,...this.getItemLocation(e)});case C.Identifier:case C.BooleanLiteral:case C.NullLiteral:case C.Keyword:return this.readNextRawToken(),this.finalize({type:x.Identifier,name:t.value,...this.getItemLocation(e)});default:this.throwError(F.KeyMustBeString,e)}}parseObjectProperty(){const e=this.rawToken,t=this.captureStartMarker(),n=this.parseObjectPropertyKey();let r=!1,a=null;return this.matchPunctuator(":")?(this.readNextRawToken(),a=this.inheritCoverGrammar(this.parseAssignmentExpression.bind(this))):e.type===C.Identifier?(r=!0,a=this.finalize({type:x.Identifier,name:e.value,...this.getItemLocation(t)})):this.throwUnexpectedToken({rawToken:this.rawToken}),this.finalize({type:x.Property,kind:"init",key:n,value:a,shorthand:r,...this.getItemLocation(t)})}parseObjectExpression(){const e=this.captureStartMarker();this.expectPunctuator("{");const t=[];for(;!this.matchPunctuator("}");)t.push(this.parseObjectProperty()),this.matchPunctuator("}")||this.expectPunctuator(",");return this.expectPunctuator("}"),this.finalize({type:x.ObjectExpression,properties:t,...this.getItemLocation(e)})}parseTemplateElement(e=!1){const t=this.rawToken;t.type!==C.Template&&this.throwUnexpectedToken({rawToken:t}),e&&!t.head&&this.throwUnexpectedToken({code:F.InvalidTemplateHead,rawToken:t});const n=this.captureStartMarker();this.readNextRawToken();const{value:r,cooked:a,tail:u}=t,i=this.finalize({type:x.TemplateElement,value:{raw:r,cooked:a},tail:u,...this.getItemLocation(n)});return i.loc.start.column+=1,i.loc.end.column-=u?1:2,i}parseTemplateLiteral(){const e=this.captureStartMarker(),t=[],n=[];let r=this.parseTemplateElement(!0);for(n.push(r);!r.tail;)t.push(this.parseExpression()),r=this.parseTemplateElement(),n.push(r);return this.finalize({type:x.TemplateLiteral,quasis:n,expressions:t,...this.getItemLocation(e)})}parseGroupExpression(){this.expectPunctuator("(");const e=this.inheritCoverGrammar(this.parseAssignmentExpression.bind(this));return this.expectPunctuator(")"),e}parseArguments(){this.expectPunctuator("(");const e=[];if(!this.matchPunctuator(")"))for(;;){const t=this.isolateCoverGrammar(this.parseAssignmentExpression.bind(this));if(e.push(t),this.matchPunctuator(")")||(this.expectPunctuator(","),this.matchPunctuator(")")))break}return this.expectPunctuator(")"),e}parseMemberName(){const e=this.rawToken,t=this.captureStartMarker();return this.readNextRawToken(),e.type!==C.NullLiteral&&e.type!==C.Identifier&&e.type!==C.Keyword&&e.type!==C.BooleanLiteral&&this.throwUnexpectedToken({rawToken:e}),this.finalize({type:x.Identifier,name:e.value,...this.getItemLocation(t)})}parseLeftHandSideExpression(){const e=this.captureStartMarker();let t=this.inheritCoverGrammar(this.parsePrimaryExpression.bind(this));const n=this.captureStartMarker();let r;for(;r=this.getMatchingPunctuator("([.");)switch(r){case"(":{this.context.isAssignmentTarget=!1,t.type!==x.Identifier&&t.type!==x.MemberExpression&&this.throwError(F.IdentifierExpected,e,n);const a=this.parseArguments();t=this.finalize({type:x.CallExpression,callee:t,arguments:a,...this.getItemLocation(e)});continue}case"[":{this.context.isAssignmentTarget=!0,this.expectPunctuator("[");const a=this.isolateCoverGrammar(()=>this.parseExpression());this.expectPunctuator("]"),t=this.finalize({type:x.MemberExpression,computed:!0,object:t,property:a,...this.getItemLocation(e)});continue}case".":{this.context.isAssignmentTarget=!0,this.expectPunctuator(".");const a=this.parseMemberName();t=this.finalize({type:x.MemberExpression,computed:!1,object:t,property:a,...this.getItemLocation(e)});continue}}return t}parseUpdateExpression(){const e=this.captureStartMarker();let t=this.getMatchingPunctuator(ur);if(t){this.readNextRawToken();const u=this.captureStartMarker(),i=this.inheritCoverGrammar(this.parseUnaryExpression.bind(this));return i.type!==x.Identifier&&i.type!==x.MemberExpression&&i.type!==x.CallExpression&&this.throwError(F.InvalidExpression,u),this.context.isAssignmentTarget||this.tolerateError(F.InvalidLeftHandSideInAssignment,e),this.context.isAssignmentTarget=!1,this.finalize({type:x.UpdateExpression,operator:t,argument:i,prefix:!0,...this.getItemLocation(e)})}const n=this.captureStartMarker(),r=this.inheritCoverGrammar(this.parseLeftHandSideExpression.bind(this)),a=this.captureStartMarker();return this.hasLineTerminator||(t=this.getMatchingPunctuator(ur),!t)?r:(r.type!==x.Identifier&&r.type!==x.MemberExpression&&this.throwError(F.InvalidExpression,n,a),this.context.isAssignmentTarget||this.tolerateError(F.InvalidLeftHandSideInAssignment,e),this.readNextRawToken(),this.context.isAssignmentTarget=!1,this.finalize({type:x.UpdateExpression,operator:t,argument:r,prefix:!1,...this.getItemLocation(e)}))}parseUnaryExpression(){const e=this.getMatchingPunctuator(ya);if(e){const t=this.captureStartMarker();this.readNextRawToken();const n=this.inheritCoverGrammar(this.parseUnaryExpression.bind(this));return this.context.isAssignmentTarget=!1,this.finalize({type:x.UnaryExpression,operator:e,argument:n,prefix:!0,...this.getItemLocation(t)})}return this.parseUpdateExpression()}parseBinaryExpression(){const e=this.rawToken;let t=this.inheritCoverGrammar(this.parseUnaryExpression.bind(this));if(this.rawToken.type!==C.Punctuator)return t;const n=this.rawToken.value;let r=Ci(n);if(r===0)return t;this.readNextRawToken(),this.context.isAssignmentTarget=!1;const a=[e,this.rawToken];let u=t,i=this.inheritCoverGrammar(this.parseUnaryExpression.bind(this));const s=[u,n,i],o=[r];for(;this.rawToken.type===C.Punctuator&&(r=Ci(this.rawToken.value))>0;){for(;s.length>2&&r<=o[o.length-1];){i=s.pop();const c=s.pop();o.pop(),u=s.pop(),a.pop();const d=a[a.length-1],D=Fi(d,d.lineStart);s.push(this.finalize(this.createBinaryOrLogicalExpression(D,c,u,i)))}s.push(this.rawToken.value),o.push(r),a.push(this.rawToken),this.readNextRawToken(),s.push(this.inheritCoverGrammar(this.parseUnaryExpression.bind(this)))}let l=s.length-1;t=s[l];let h=a.pop();for(;l>1;){const c=a.pop();if(!c)break;const d=h==null?void 0:h.lineStart,D=Fi(c,d),g=s[l-1];t=this.finalize(this.createBinaryOrLogicalExpression(D,g,s[l-2],t)),l-=2,h=c}return t}createBinaryOrLogicalExpression(e,t,n,r){const a=Fa.includes(t)?x.LogicalExpression:x.BinaryExpression;return a===x.BinaryExpression||((n.type===x.AssignmentExpression||n.type===x.UpdateExpression)&&this.throwError(F.InvalidExpression,...Ai(n)),(r.type===x.AssignmentExpression||r.type===x.UpdateExpression)&&this.throwError(F.InvalidExpression,...Ai(n))),{type:a,operator:t,left:n,right:r,...this.getItemLocation(e)}}parseAssignmentExpression(){const e=this.captureStartMarker(),t=this.inheritCoverGrammar(this.parseBinaryExpression.bind(this)),n=this.captureStartMarker(),r=this.getMatchingPunctuator(xa);if(!r)return t;t.type!==x.Identifier&&t.type!==x.MemberExpression&&this.throwError(F.InvalidExpression,e,n),this.context.isAssignmentTarget||this.tolerateError(F.InvalidLeftHandSideInAssignment,e),this.matchPunctuator("=")||(this.context.isAssignmentTarget=!1),this.readNextRawToken();const a=this.isolateCoverGrammar(this.parseAssignmentExpression.bind(this));return this.finalize({type:x.AssignmentExpression,left:t,operator:r,right:a,...this.getItemLocation(e)})}parseExpression(){return this.isolateCoverGrammar(this.parseAssignmentExpression.bind(this))}parseStatements(e){const t=[];for(;this.rawToken.type!==C.EOF&&!this.matchPunctuator(e);){const n=this.parseStatementListItem();Vu(n)||t.push(n)}return t}parseStatementListItem(){return this.context.isAssignmentTarget=!0,this.matchKeyword(_.Function)?this.parseFunctionDeclaration():this.matchKeyword(_.Export)?this.parseExportDeclaration():this.matchKeyword(_.Import)?this.parseImportDeclaration():this.parseStatement()}parseBlock(){const e=this.captureStartMarker();this.expectPunctuator("{");const t=this.parseStatements("}");return this.expectPunctuator("}"),this.finalize({type:x.BlockStatement,body:t,...this.getItemLocation(e)})}parseObjectStatement(){const e=this.captureStartMarker(),t=this.parseObjectExpression();return this.finalize({type:x.ExpressionStatement,expression:t,...this.getItemLocation(e)})}parseBlockOrObjectStatement(){return this.context.curlyParsingType===Zn.AsObject||this.peekAhead(e=>{let t=e();return!(t.type!==C.Identifier&&t.type!==C.StringLiteral||(t=e(),t.type!==C.Punctuator||t.value!==":"))})?this.parseObjectStatement():this.parseBlock()}parseIdentifier(){const e=this.rawToken;if(e.type!==C.Identifier)return null;const t=this.captureStartMarker();return this.readNextRawToken(),this.finalize({type:x.Identifier,name:e.value,...this.getItemLocation(t)})}parseVariableDeclarator(){const e=this.captureStartMarker(),t=this.parseIdentifier();t||this.throwUnexpectedToken({code:F.IdentifierExpected});let n=null;if(this.matchPunctuator("=")){this.readNextRawToken();const r=this.rawToken;try{n=this.isolateCoverGrammar(this.parseAssignmentExpression.bind(this))}catch{this.throwUnexpectedToken({rawToken:r,code:F.InvalidVariableAssignment})}}return this.finalize({type:x.VariableDeclarator,id:t,init:n,...this.getItemLocation(e)})}parseVariableDeclarators(){const e=[this.parseVariableDeclarator()];for(;this.matchPunctuator(",");)this.readNextRawToken(),e.push(this.parseVariableDeclarator());return e}parseVariableDeclaration(){const e=this.captureStartMarker();this.expectKeyword(_.Var);const t=this.parseVariableDeclarators();return this.consumeSemicolon(),this.finalize({type:x.VariableDeclaration,declarations:t,kind:"var",...this.getItemLocation(e)})}parseEmptyStatement(){const e=this.captureStartMarker();return this.expectPunctuator(";"),this.finalize({type:x.EmptyStatement,...this.getItemLocation(e)})}parseExpressionStatement(){const e=this.captureStartMarker(),t=this.parseExpression();return this.consumeSemicolon(),this.finalize({type:x.ExpressionStatement,expression:t,...this.getItemLocation(e)})}parseIfClause(){return this.withBlockContext(te.IfClause,this.parseStatement.bind(this))}parseIfStatement(){const e=this.captureStartMarker();this.expectKeyword(_.If),this.expectPunctuator("(");const t=this.captureStartMarker(),n=this.parseExpression(),r=this.captureStartMarker();this.expectPunctuator(")"),(n.type===x.AssignmentExpression||n.type===x.UpdateExpression)&&this.throwError(F.InvalidExpression,t,r);const a=this.parseIfClause();let u=null;return this.matchKeyword(_.Else)&&(this.readNextRawToken(),u=this.parseIfClause()),this.finalize({type:x.IfStatement,test:n,consequent:a,alternate:u,...this.getItemLocation(e)})}parseWhileStatement(){const e=this.captureStartMarker();this.expectKeyword(_.While),this.expectPunctuator("(");const t=this.captureStartMarker(),n=this.parseExpression(),r=this.captureStartMarker();this.expectPunctuator(")"),(n.type===x.AssignmentExpression||n.type===x.UpdateExpression)&&this.throwError(F.InvalidExpression,t,r);const a=this.withBlockContext(te.WhileLoop,this.parseStatement.bind(this));return this.finalize({type:x.WhileStatement,test:n,body:a,...this.getItemLocation(e)})}parseForStatement(){let e=x.ForStatement,t=null,n=null,r=null,a=null,u=null;const i=this.captureStartMarker();if(this.expectKeyword(_.For),this.expectPunctuator("("),this.matchKeyword(_.Var)){const o=this.captureStartMarker();this.readNextRawToken();const l=this.parseVariableDeclarators();t=this.finalize({type:x.VariableDeclaration,declarations:l,kind:"var",...this.getItemLocation(o)});const h=this.matchKeyword(_.In),c=this.matchContextualKeyword(Vn.Of);l.length===1&&(h||c)&&(l[0].init&&this.throwError(F.ForInOfLoopInitializer,o),e=h?x.ForInStatement:x.ForOfStatement,a=t)}else if(!this.matchPunctuator(";")){const o=this.context.isAssignmentTarget,l=this.captureStartMarker();t=this.inheritCoverGrammar(this.parseAssignmentExpression.bind(this));const h=this.matchKeyword(_.In),c=this.matchContextualKeyword(Vn.Of);h||c?(this.context.isAssignmentTarget||this.tolerateError(F.InvalidLeftHandSideInForIn,l),t.type!==x.Identifier&&this.throwError(F.InvalidLeftHandSideInForIn,l),e=h?x.ForInStatement:x.ForOfStatement,a=t):this.context.isAssignmentTarget=o}e===x.ForStatement?(this.expectPunctuator(";"),n=this.matchPunctuator(";")?null:this.isolateCoverGrammar(this.parseExpression.bind(this)),this.expectPunctuator(";"),r=this.matchPunctuator(")")?null:this.isolateCoverGrammar(this.parseExpression.bind(this))):(this.readNextRawToken(),u=this.parseExpression()),this.expectPunctuator(")");const s=this.withBlockContext(e===x.ForOfStatement?te.ForOfLoop:te.ForLoop,()=>this.isolateCoverGrammar(this.parseStatement.bind(this)));return e===x.ForInStatement||e===x.ForOfStatement?this.finalize({type:e,left:a,right:u,body:s,...this.getItemLocation(i)}):this.finalize({type:e,init:t,test:n,update:r,body:s,...this.getItemLocation(i)})}parseContinueStatement(){const e=this.captureStartMarker();return this.expectKeyword(_.Continue),this.consumeSemicolon(),this.finalize({type:x.ContinueStatement,...this.getItemLocation(e)})}parseBreakStatement(){const e=this.captureStartMarker();return this.expectKeyword(_.Break),this.consumeSemicolon(),this.finalize({type:x.BreakStatement,...this.getItemLocation(e)})}parseReturnStatement(){const e=this.captureStartMarker();this.expectKeyword(_.Return);const t=(this.matchPunctuator(";")||this.matchPunctuator("}")||this.hasLineTerminator||this.rawToken.type===C.EOF)&&this.rawToken.type!==C.StringLiteral&&this.rawToken.type!==C.Template?null:this.parseExpression();return this.consumeSemicolon(),this.finalize({type:x.ReturnStatement,argument:t,...this.getItemLocation(e)})}parseStatement(){switch(this.rawToken.type){case C.BooleanLiteral:case C.NullLiteral:case C.NumericLiteral:case C.StringLiteral:case C.Template:case C.Identifier:return this.parseExpressionStatement();case C.Punctuator:return this.rawToken.value==="{"?this.parseBlockOrObjectStatement():this.rawToken.value==="("?this.parseExpressionStatement():this.rawToken.value===";"?this.parseEmptyStatement():this.parseExpressionStatement();case C.Keyword:switch(this.rawToken.value.toLowerCase()){case _.Break:return this.parseBreakStatement();case _.Continue:return this.parseContinueStatement();case _.For:return this.parseForStatement();case _.Function:return this.parseFunctionDeclaration();case _.If:return this.parseIfStatement();case _.Return:return this.parseReturnStatement();case _.Var:return this.parseVariableDeclaration();case _.While:return this.parseWhileStatement();default:return this.parseExpressionStatement()}default:return this.throwUnexpectedToken({rawToken:this.rawToken})}}parseFormalParameters(){const e=[];if(this.expectPunctuator("("),!this.matchPunctuator(")"))for(;this.rawToken.type!==C.EOF;){const t=this.parseIdentifier();if(t||this.throwUnexpectedToken({rawToken:this.rawToken,code:F.IdentifierExpected}),e.push(t),this.matchPunctuator(")")||(this.expectPunctuator(","),this.matchPunctuator(")")))break}return this.expectPunctuator(")"),e}parseFunctionDeclaration(){(this.context.blockContext&te.Function)===te.Function&&this.throwUnexpectedToken({code:F.NoFunctionInsideFunction}),((this.context.blockContext&te.WhileLoop)===te.WhileLoop||(this.context.blockContext&te.ForOfLoop)===te.ForOfLoop||(this.context.blockContext&te.IfClause)===te.IfClause)&&this.throwUnexpectedToken({code:F.NoFunctionInsideBlock});const e=this.captureStartMarker();this.expectKeyword(_.Function);const t=this.parseIdentifier();t||this.throwUnexpectedToken({code:F.InvalidFunctionIdentifier});const n=this.parseFormalParameters(),r=this.context.blockContext;this.context.blockContext|=te.Function;const a=this.parseBlock();return this.context.blockContext=r,this.finalize({type:x.FunctionDeclaration,id:t,params:n,body:a,...this.getItemLocation(e)})}parseScript(){const e=this.captureStartMarker(),t=this.parseStatements(),n=this.finalize({type:x.Program,body:t,...this.getItemLocation(e)});return this.options.tokens&&(n.tokens=this.tokens),this.options.tolerant&&(n.errors=this.errorHandler.errors),n}parseExportDeclaration(){this.context.blockContext!==te.None&&this.throwUnexpectedToken({code:F.ModuleExportRootOnly});let e=null;const t=this.captureStartMarker();return this.expectKeyword(_.Export),this.matchKeyword(_.Var)?e=this.parseVariableDeclaration():this.matchKeyword("function")?e=this.parseFunctionDeclaration():this.throwUnexpectedToken({code:F.InvalidExpression}),this.finalize({type:x.ExportNamedDeclaration,declaration:e,specifiers:[],source:null,...this.getItemLocation(t)})}parseModuleSpecifier(){const e=this.captureStartMarker(),t=this.rawToken;if(t.type===C.StringLiteral)return this.readNextRawToken(),this.finalize({type:x.Literal,value:t.value,raw:this.getSourceValue(t),isString:!0,...this.getItemLocation(e)});this.throwError(F.InvalidModuleUri,e)}parseDefaultSpecifier(){const e=this.captureStartMarker(),t=this.parseIdentifier();return t||this.throwUnexpectedToken({code:F.IdentifierExpected}),this.finalize({type:x.ImportDefaultSpecifier,local:t,...this.getItemLocation(e)})}parseImportDeclaration(){this.context.blockContext!==te.None&&this.throwUnexpectedToken({code:F.ModuleImportRootOnly});const e=this.captureStartMarker();this.expectKeyword(_.Import);const t=this.parseDefaultSpecifier();this.expectContextualKeyword(Vn.From);const n=this.parseModuleSpecifier();return this.finalize({type:x.ImportDeclaration,specifiers:[t],source:n,...this.getItemLocation(e)})}};function Ju(e,t,n){return new qu(e,t,n).parseScript()}function Dn(e,t=[]){const n=Ju(e);if(n.body===null||n.body===void 0)throw new Vt({index:0,line:0,column:0,data:null,description:"",code:F.InvalidExpression});return n.loadedModules={},Wt(n,t),n}class gn{constructor(t){const n=this;n._keys=[],n._values=[],n.length=0,t&&t.forEach(r=>{n.set(r[0],r[1])})}entries(){return[].slice.call(this.keys().map((t,n)=>[t,this._values[n]]))}keys(){return[].slice.call(this._keys)}values(){return[].slice.call(this._values)}has(t){return this._keys.includes(t)}get(t){const n=this._keys.indexOf(t);return n>-1?this._values[n]:null}deepGet(t){if(!(t!=null&&t.length))return null;const n=(r,a)=>r==null?null:a.length?n(r instanceof gn?r.get(a[0]):r[a[0]],a.slice(1)):r;return n(this.get(t[0]),t.slice(1))}set(t,n){const r=this,a=this._keys.indexOf(t);return a>-1?r._values[a]=n:(r._keys.push(t),r._values.push(n),r.length=r._values.length),this}sortedSet(t,n,r,a){const u=this,i=this._keys.length,s=r||0,o=a!==void 0?a:i-1;if(i===0)return u._keys.push(t),u._values.push(n),u;if(t===this._keys[s])return this._values.splice(s,0,n),this;if(t===this._keys[o])return this._values.splice(o,0,n),this;if(t>this._keys[o])return this._keys.splice(o+1,0,t),this._values.splice(o+1,0,n),this;if(t<this._keys[s])return this._values.splice(s,0,n),this._keys.splice(s,0,t),this;if(s>=o)return this;const l=s+Math.floor((o-s)/2);return t<this._keys[l]?this.sortedSet(t,n,s,l-1):t>this._keys[l]?this.sortedSet(t,n,l+1,o):this}size(){return this.length}clear(){const t=this;return t._keys.length=t.length=t._values.length=0,this}delete(t){const n=this,r=n._keys.indexOf(t);return r>-1&&(n._keys.splice(r,1),n._values.splice(r,1),n.length=n._keys.length,!0)}forEach(t){this._keys.forEach((n,r)=>{t(this._values[r],n,r)})}map(t){return this.keys().map((n,r)=>t(this._values[r],n,r))}filter(t){const n=this;return n._keys.forEach((r,a)=>{t(n._values[a],r,a)===!1&&n.delete(r)}),this}clone(){return new gn(this.entries())}}class oe{constructor(t=20){this._maxEntries=t,this._values=new gn}delete(t){this._values.has(t)&&this._values.delete(t)}get(t){let n=null;return this._values.has(t)&&(n=this._values.get(t),this._values.delete(t),this._values.set(t,n)),n}put(t,n){if(this._values.size()>=this._maxEntries){const r=this._values.keys()[0];this._values.delete(r)}this._values.set(t,n)}}class Qu{constructor(t=20){this._maxEntries=t,this._cache=new oe(this._maxEntries),this._layerMetadata=new oe(this._maxEntries),this._serviceMetadata=new oe(this._maxEntries),this._portalItems=new oe(this._maxEntries),this._portalItemLayers=new oe(this._maxEntries),this._translations=new oe(this._maxEntries)}clear(){this._cache=new oe(this._maxEntries),this._layerMetadata=new oe(this._maxEntries),this._serviceMetadata=new oe(this._maxEntries),this._portalItems=new oe(this._maxEntries),this._portalItemLayers=new oe(this._maxEntries),this._translations=new oe(this._maxEntries)}addToCache(t,n){this._cache.put(t,n)}removeFromCache(t){this._cache.delete(t)}getFromCache(t){return this._cache.get(t)}getCachedLayerMetadata(t){return this._layerMetadata.get(t)}setCachedLayerMetadata(t,n){this._layerMetadata.put(t,n)}removeCachedLayerMetadata(t,n){this._layerMetadata.get(t)===n&&this._layerMetadata.delete(t)}getCachedServiceMetadata(t){return this._serviceMetadata.get(t)}setCachedServiceMetadata(t,n){this._serviceMetadata.put(t,n)}removeCachedServiceMetadata(t,n){this._serviceMetadata.get(t)===n&&this._serviceMetadata.delete(t)}getCachedPortalItem(t,n){return this._portalItems.get(`${n}:${t}`)}setCachedPortalItem(t,n,r){this._portalItems.put(`${n}:${t}`,r)}removeCachedPortalItem(t,n,r){const a=`${n}:${t}`;this._portalItems.get(a)===r&&this._portalItems.delete(a)}getCachedPortalItemLayer(t,n){return this._portalItemLayers.get(`${n}:${t}`)}setCachedPortalItemLayer(t,n,r){this._portalItemLayers.put(`${n}:${t}`,r)}removeCachedPortalItemLayer(t,n,r){const a=`${n}:${t}`;this._portalItemLayers.get(a)===r&&this._portalItemLayers.delete(a)}getCachedTranslation(t,n){return this._translations.get(JSON.stringify([t,n]))}setCachedTranslation(t,n,r){return this._translations.put(JSON.stringify([t,n]),r)}}const re=class re{constructor(t){this.portalUri=t}normalizeModuleUri(t){const n=/^[a-z0-9]+(@[0-9]+\.[0-9]+\.[0-9]+)?([?|/].*)?$/gi,r=/(?<portalurl>.+)\/home\/item\.html\?id=(?<itemid>.+)$/gi,a=/(?<portalurl>.+)\/sharing\/rest\/content\/users\/[a-z0-9]+\/items\/(?<itemid>.+)$/gi,u=/(?<portalurl>.+)\/sharing\/rest\/content\/items\/(?<itemid>.+)$/gi,i=/(?<itemid>.*)@(?<versionstring>[0-9]+\.[0-9]+\.[0-9]+)([?|/].*)?$/gi;if(t.startsWith("portal+")){let s=t.slice(7),o="",l=s,h=!1;for(const D of[r,u,a]){const g=D.exec(s);if(g!==null){const w=g.groups;l=w.itemid,o=w.portalurl,h=!0;break}}if(h===!1){if(!n.test(s))throw new Mn("UnsupportedUriProtocol",{uri:t});l=s,o=this.portalUri}l.includes("/")&&(l=l.split("/")[0]),l.includes("?")&&(l=l.split("?")[0]);let c="current";const d=i.exec(l);if(d!==null){const D=d.groups;l=D.itemid,c=D.versionstring}return s=new Qn({url:o}).restUrl+"/content/items/"+l+"/resources/"+c+".arc",{url:s,scheme:"portal",uri:"PO:"+s}}if(t.startsWith("mock")){if(t==="mock")return{url:"",scheme:"mock",data:`
      export var hello = 1;
      export function helloWorld() {
          return "Hello World " + hello;
      }
  `,uri:"mock"};const s=t.replace("mock:","");if(re.mocks[s]!==void 0)return{url:"",scheme:"mock",data:re.mocks[s],uri:t}}throw new Mn("UnrecognizedUri",{uri:t})}async fetchModule(t){const n=re.cachedModules.getFromCache(t.uri);if(n)return n;const r=this.fetchSource(t);re.cachedModules.addToCache(t.uri,r);let a=null;try{a=await r}catch(u){throw re.cachedModules.removeFromCache(t.uri),u}return a}async fetchSource(t){if(t.scheme==="portal"){const n=await qa(t.url,{responseType:"text",query:{}});if(n.data)return Dn(n.data,[])}if(t.scheme==="mock")return Dn(t.data??"",[]);throw new Mn("UnsupportedUriProtocol")}static create(t){return new re(t)}static getDefault(){return this._default??(re._default=re._moduleResolverFactory())}static set moduleResolverClass(t){this._moduleResolverFactory=t,this._default=null}};re.mocks={},re.cachedModules=new Qu(30),re._default=null,re._moduleResolverFactory=()=>{const t=Qn.getDefault();return new re(t.url)};let cr=re;const fr=()=>mr.getLogger("esri.arcade.arcadeRuntime"),mt=Symbol("uninitialized");function wn(e){if(e===mt)throw new f(null,"InvalidIdentifier",null)}function Ca(e){return wn(e),e}function It(e,t){const n=B(t);if(e.localScope!==null){const a=e.localScope[n];if(a!==void 0)return{scope:e.localScope,id:n,var:a}}const r=e.globalScope[n];if(r!==void 0)return{scope:e.globalScope,id:n,var:r};throw new f(e,"InvalidIdentifier",t)}function Ea(e,t,n="InvalidIdentifier"){const r=B(t);if(e.localScope!==null){const u=e.localScope[r];if(u!==void 0)return wn(u),u.value}const a=e.globalScope[r];if(a!==void 0)return wn(a),a.value;throw new f(e,n,t)}const on=function(){};on.prototype=Object.freeze(Object.create(null));let Xu=class extends Li{constructor(e,t,n,r){super(),this.definition=e,this.context=t,this._params=n,this._locals=r}createFunction(e){return(...t)=>{const n={spatialReference:this.context.spatialReference,console:this.context.console,services:this.context.services,timeZone:this.context.timeZone??null,lrucache:this.context.lrucache,exports:this.context.exports,libraryResolver:this.context.libraryResolver,interceptor:this.context.interceptor,abortSignal:this.context.abortSignal,localScope:new on,depthCounter:{depth:e.depthCounter.depth+1},globalScope:this.context.globalScope,track:this.context.track};if(n.depthCounter.depth>64)throw new f(e,"MaximumCallDepth",null);return Hn(n,this.definition.body,this._params,this._locals,t,null)}}call(e,t){return me(e,t,(n,r,a)=>{const u={spatialReference:e.spatialReference,services:e.services,globalScope:e.globalScope,depthCounter:{depth:e.depthCounter.depth+1},libraryResolver:e.libraryResolver,exports:e.exports,timeZone:e.timeZone??null,console:e.console,lrucache:e.lrucache,interceptor:e.interceptor,abortSignal:e.abortSignal,localScope:new on,track:e.track};if(u.depthCounter.depth>64)throw new f(e,"MaximumCallDepth",t);return Hn(u,this.definition.body,this._params,this._locals,a,t)})}marshalledCall(e,t,n,r){return r(e,t,(a,u,i)=>{const s={spatialReference:e.spatialReference,globalScope:n.globalScope,services:e.services,depthCounter:{depth:e.depthCounter.depth+1},libraryResolver:e.libraryResolver,exports:e.exports,console:e.console,timeZone:e.timeZone??null,lrucache:e.lrucache,interceptor:e.interceptor,abortSignal:e.abortSignal,localScope:new on,track:e.track};return i=i.map(o=>!K(o)||o instanceof gt?o:ln(o,e,r)),ln(Hn(s,this.definition.body,this._params,this._locals,i,t),n,r)})}};function Hn(e,t,n,r,a,u){try{if(n.length!==a.length)throw new f(e,"WrongNumberOfParameters",u);if(e.localScope!=null){for(let s=0;s<n.length;s++)e.localScope[n[s]]={value:a[s]};for(const s of r)e.localScope[s]=mt}const i=X(e,t);if(i instanceof Y)return i.value;if(i===ae)throw new f(e,"UnexpectedToken",u);if(i===xn)throw new f(e,"UnexpectedToken",u);return i instanceof xr?i.value:i}catch(i){throw i}}let Ct=class va extends $i{constructor(t){super(),this.moduleGlobalContext=t}global(t){const n=B(t),r=this.moduleGlobalContext.globalScope[n];if(wn(r),K(r.value)&&!(r.value instanceof gt)){const a=new gt;return a.fn=r.value,a.parameterEvaluator=me,a.context=this.moduleGlobalContext,this.moduleGlobalContext.globalScope[n]={value:a},a}return r.value}setGlobal(t,n){if(K(n))throw new f(null,"AssignModuleFunction",null);const r=B(t);if(this.moduleGlobalContext.globalScope[r]===void 0)throw new f(null,"ModuleExportNotFound",null);this.moduleGlobalContext.globalScope[r]={value:n}}hasGlobal(t){return this.moduleGlobalContext.exports.has(B(t))}static load(t,n){const{globals:r,exports:a}=Fr(n),u=new kr;for(const o of r)o in u||(u[o]=mt);const i=t.spatialReference??Gt.WebMercator,s={lrucache:t.lrucache,interceptor:t.interceptor,services:t.services,console:t.console??Ba,abortSignal:yn,timeZone:t.timeZone??null,spatialReference:i,track:t.track,depthCounter:{depth:1},libraryResolver:new Fn(t.libraryResolver._moduleSingletons,n.loadedModules),exports:a,localScope:null,globalScope:u};return Ir(s,n),new va(s)}};function Yu(e,t){const n=[];for(let r=0;r<t.arguments.length;r++)n.push(T(e,t.arguments[r]));return n}function me(e,t,n){try{return t.preparsed===!0?n(e,null,t.arguments):n(e,t,Yu(e,t))}catch(r){throw r}}function T(e,t){try{switch(t.type){case"AssignmentExpression":return ol(e,t);case"UpdateExpression":return sl(e,t);case"TemplateLiteral":return Fl(e,t);case"Identifier":return Sr(e,t);case"MemberExpression":return pl(e,t);case"Literal":return t.value;case"CallExpression":return Al(e,t);case"UnaryExpression":return Dl(e,t);case"BinaryExpression":return wl(e,t);case"LogicalExpression":return yl(e,t);case"ArrayExpression":return gl(e,t);case"ObjectExpression":return el(e,t);default:throw new f(e,"Unrecognized",t)}}catch(n){throw As(e,t,n)}}function X(e,t){switch(t.type){case"EmptyStatement":return E;case"VariableDeclaration":return ba(e,t);case"ImportDeclaration":return hl(e,t);case"ExportNamedDeclaration":return dl(e,t);case"BlockStatement":return Ir(e,t);case"FunctionDeclaration":return fl(e,t);case"ReturnStatement":return cl(e,t);case"IfStatement":return ll(e,t);case"ExpressionStatement":return ul(e,t);case"BreakStatement":return ae;case"ContinueStatement":return xn;case"ForStatement":return rl(e,t);case"ForInStatement":return tl(e,t);case"ForOfStatement":return nl(e,t);case"WhileStatement":return il(e,t);default:throw new f(e,"Unrecognized",t)}}function el(e,t){const n=Object.create(null),r=new Map;for(let u=0;u<t.properties.length;u++){const i=t.properties[u],s=i.key.type==="Identifier"?i.key.name:T(e,i.key),o=T(e,i.value);if(K(o))throw new f(e,"NoFunctionInDictionary",t);if(v(s)===!1)throw new f(e,"KeyMustBeString",t);let l=s.toString();const h=l.toLowerCase();r.has(h)?l=r.get(h):r.set(h,l),n[l]=o===E?null:o}const a=new b(n);return a.immutable=!1,a}function tl(e,t){const n=T(e,t.right);t.left.type==="VariableDeclaration"&&ba(e,t.left);const r=It(e,t.left.type==="VariableDeclaration"?t.left.declarations[0].id:t.left);if(k(n)||v(n)){const a=n.length;for(let u=0;u<a;u++){r.scope[r.id]={value:u};const i=X(e,t.body);if(i===ae)break;if(i instanceof Y)return i}return E}if(R(n)){for(let a=0;a<n.length();a++){r.scope[r.id]={value:a};const u=X(e,t.body);if(u===ae)break;if(u instanceof Y)return u}return E}if(n instanceof b||Oe(n)){const a=n.keys();for(let u=0;u<a.length;u++){r.scope[r.id]={value:a[u]};const i=X(e,t.body);if(i===ae)break;if(i instanceof Y)return i}return E}if(Pe(n)){for(const a of Ar(n)){r.scope[r.id]={value:a};const u=X(e,t.body);if(u===ae)break;if(u instanceof Y)return u}return E}return E}function nl(e,t){const n=T(e,t.right);t.left.type==="VariableDeclaration"&&X(e,t.left);const r=It(e,t.left.type==="VariableDeclaration"?t.left.declarations[0].id:t.left);if(k(n)||v(n)){const a=n.length;for(let u=0;u<a;u++){if(u>=n.length)throw new f(e,"OutOfBounds",t);r.scope[r.id]={value:n[u]};const i=X(e,t.body);if(i===ae)break;if(i instanceof Y)return i}return E}if(R(n)){for(let a=0;a<n.length();a++){r.scope[r.id]={value:n.get(a)};const u=X(e,t.body);if(u===ae)break;if(u instanceof Y)return u}return E}if(n instanceof b||Oe(n)){for(const a of n.keys()){const u=n.field(a);r.scope[r.id]={value:b.containerEntry(a,u)};const i=X(e,t.body);if(i===ae)break;if(i instanceof Y)return i}return E}if(Pe(n)){for(const a of Ar(n)){const u=Xe(n,a,e,t,1);r.scope[r.id]={value:b.containerEntry(a,u)};const i=X(e,t.body);if(i===ae)break;if(i instanceof Y)return i}return E}return E}function rl(e,t){t.init!==null&&(t.init.type==="VariableDeclaration"?X(e,t.init):T(e,t.init));const n={testResult:!0,lastAction:E};do al(e,t,n);while(n.testResult===!0);return n.lastAction instanceof Y?n.lastAction:E}function il(e,t){const n={testResult:!0,lastAction:E};if(n.testResult=T(e,t.test),n.testResult===!1)return E;if(n.testResult!==!0)throw new f(e,"BooleanConditionRequired",t);for(;n.testResult===!0&&(n.lastAction=X(e,t.body),n.lastAction!==ae)&&!(n.lastAction instanceof Y);)if(n.testResult=T(e,t.test),n.testResult!==!0&&n.testResult!==!1)throw new f(e,"BooleanConditionRequired",t);return n.lastAction instanceof Y?n.lastAction:E}function al(e,t,n){if(t.test!==null){if(n.testResult=T(e,t.test),n.testResult===!1)return;if(n.testResult!==!0)throw new f(e,"BooleanConditionRequired",t)}n.lastAction=X(e,t.body),n.lastAction!==ae?n.lastAction instanceof Y?n.testResult=!1:t.update!==null&&T(e,t.update):n.testResult=!1}function sl(e,t){if(t.argument.type==="CallExpression")throw new f(e,"NeverReach",t);let n;if(t.argument.type==="MemberExpression"){const u=T(e,t.argument.object);let i;if(t.argument.computed===!0)i=T(e,t.argument.property);else{if(t.argument.property.type!=="Identifier")throw new f(e,"Unrecognized",t);i=t.argument.property.name}if(k(u)){if(!W(i))throw new f(e,"ArrayAccessMustBeNumber",t);if(i<0&&(i=u.length+i),i<0||i>=u.length)throw new f(e,"OutOfBounds",t);n=m(u[i]),u[i]=t.operator==="++"?n+1:n-1}else if(u instanceof b){if(v(i)===!1)throw new f(e,"KeyAccessorMustBeString",t);if(u.hasField(i)!==!0)throw new f(e,"FieldNotFound",t);n=m(u.field(i)),u.setField(i,t.operator==="++"?n+1:n-1)}else if(J(u)){if(v(i)===!1)throw new f(e,"KeyAccessorMustBeString",t);if(u.hasField(i)!==!0)throw new f(e,"FieldNotFound",t);n=m(u.field(i)),u.setField(i,t.operator==="++"?n+1:n-1)}else{if(R(u))throw new f(e,"Immutable",t);if(!(u instanceof Ct))throw new f(e,"InvalidParameter",t);if(v(i)===!1)throw new f(e,"ModuleAccessorMustBeString",t);if(u.hasGlobal(i)!==!0)throw new f(e,"ModuleExportNotFound",t);n=m(u.global(i)),u.setGlobal(i,t.operator==="++"?n+1:n-1)}return t.prefix===!1?n:t.operator==="++"?n+1:n-1}const r=It(e,t.argument);n=m(Ca(r.var).value);const a=t.operator==="++"?n+1:n-1;return r.scope[r.id]={value:a},t.prefix===!1?n:t.operator==="++"?n+1:n-1}function je(e,t,n,r,a){switch(t){case"=":return e===E?null:e;case"/=":return m(n)/m(e);case"*=":return m(n)*m(e);case"-=":return m(n)-m(e);case"+=":return v(n)||v(e)?A(n)+A(e):m(n)+m(e);case"%=":return m(n)%m(e);default:throw new f(a,"UnsupportedOperator",r)}}function ol(e,t){if(t.left.type==="MemberExpression"){const a=T(e,t.left.object);let u;if(t.left.computed===!0)u=T(e,t.left.property);else{if(t.left.property.type!=="Identifier")throw new f(e,"InvalidIdentifier",t);u=t.left.property.name}const i=T(e,t.right);if(k(a)){if(!W(u))throw new f(e,"ArrayAccessMustBeNumber",t);if(u<0&&(u=a.length+u),u<0||u>a.length)throw new f(e,"OutOfBounds",t);if(u===a.length){if(t.operator!=="=")throw new f(e,"OutOfBounds",t);a[u]=je(i,t.operator,a[u],t,e)}else a[u]=je(i,t.operator,a[u],t,e)}else if(a instanceof b){if(v(u)===!1)throw new f(e,"KeyAccessorMustBeString",t);if(a.hasField(u)===!0)a.setField(u,je(i,t.operator,a.field(u),t,e));else{if(t.operator!=="=")throw new f(e,"FieldNotFound",t,{key:u});a.setField(u,je(i,t.operator,null,t,e))}}else if(J(a)){if(v(u)===!1)throw new f(e,"KeyAccessorMustBeString",t);if(a.hasField(u)===!0)a.setField(u,je(i,t.operator,a.field(u),t,e));else{if(t.operator!=="=")throw new f(e,"FieldNotFound",t,{key:u});a.setField(u,je(i,t.operator,null,t,e))}}else{if(R(a))throw new f(e,"Immutable",t);if(!(a instanceof Ct))throw new f(e,"InvalidIdentifier",t);if(v(u)===!1)throw new f(e,"ModuleAccessorMustBeString",t);if(a.hasGlobal(u)!==!0)throw new f(e,"ModuleExportNotFound",t);a.setGlobal(u,je(i,t.operator,a.global(u),t,e))}return E}const n=It(e,t.left),r=T(e,t.right);return n.scope[n.id]={value:je(r,t.operator,t.operator!=="="?Ca(n.var).value:null,t,e)},E}function ul(e,t){const n=T(e,t.expression);return n===E?E:new xr(n)}function ll(e,t){const n=T(e,t.test);if(n===!0)return X(e,t.consequent);if(n===!1)return t.alternate!==null?X(e,t.alternate):E;throw new f(e,"BooleanConditionRequired",t)}function Ir(e,t){let n=E;for(let r=0;r<t.body.length;r++)if(n=X(e,t.body[r]),n instanceof Y||n===ae||n===xn)return n;return n}function cl(e,t){if(t.argument===null)return new Y(E);const n=T(e,t.argument);return new Y(n)}function fl(e,t){if(e.localScope!=null)throw fr().error("Function declarations are only valid in global scope."),new f(e,"NeverReach",t);const n=B(t.id);if(!(n in e.globalScope))throw fr().error(`Function "${n}" not declared.`),new f(e,"NeverReach",t);const r=ji(t),a=t.params.map(i=>B(i)),u=Array.from(r).filter(i=>!a.includes(i));return e.globalScope[n]={value:new Xu(t,e,a,u)},E}function hl(e,t){var i,s;const n=It(e,t.specifiers[0].local),r=e.libraryResolver;if(r==null)throw fr().error("Internal error: module loader not initialized"),new f(e,"NeverReach",t);const a=r.loadLibrary(n.id);let u;return(i=r._moduleSingletons)!=null&&i.has(a.uri)?u=r._moduleSingletons.get(a.uri):(u=Ct.load(e,a.syntax),(s=r._moduleSingletons)==null||s.set(a.uri,u)),n.scope[n.id]={value:u},E}function dl(e,t){return X(e,t.declaration),E}function ba(e,t){for(let n=0;n<t.declarations.length;n++)ml(e,t.declarations[n]);return E}function ml(e,t){let n=t.init===null?null:T(e,t.init);if(n===E&&(n=null),t.id.type!=="Identifier")throw new f(e,"InvalidIdentifier",t);const r=It(e,t.id);r.scope[r.id]={value:n}}function pl(e,t){try{const n=T(e,t.object);if(n===null)throw new f(e,"MemberOfNull",t);if(t.computed===!1){if(t.property.type==="Identifier"){if(n instanceof b||Oe(n))return n.field(t.property.name);if(n instanceof P)return Xe(n,t.property.name,e,t);if(n instanceof Ct){if(!n.hasGlobal(t.property.name))throw new f(e,"InvalidIdentifier",t);return n.global(t.property.name)}}throw new f(e,"InvalidMemberAccessKey",t)}let r=T(e,t.property);if(n instanceof b||Oe(n)){if(v(r))return n.field(r);throw new f(e,"InvalidMemberAccessKey",t)}if(n instanceof Ct){if(v(r))return n.global(r);throw new f(e,"InvalidMemberAccessKey",t)}if(n instanceof P){if(v(r))return Xe(n,r,e,t);throw new f(e,"InvalidMemberAccessKey",t)}if(k(n)){if(W(r)&&isFinite(r)&&Math.floor(r)===r){if(r<0&&(r=n.length+r),r>=n.length||r<0)throw new f(e,"OutOfBounds",t);return n[r]}throw new f(e,"InvalidMemberAccessKey",t)}if(v(n)){if(W(r)&&isFinite(r)&&Math.floor(r)===r){if(r<0&&(r=n.length+r),r>=n.length||r<0)throw new f(e,"OutOfBounds",t);return n[r]}throw new f(e,"InvalidMemberAccessKey",t)}if(R(n)){if(W(r)&&isFinite(r)&&Math.floor(r)===r){if(r<0&&(r=n.length()+r),r>=n.length()||r<0)throw new f(e,"OutOfBounds",t);return n.get(r)}throw new f(e,"InvalidMemberAccessKey",t)}throw new f(e,"InvalidMemberAccessKey",t)}catch(n){throw n}}function Dl(e,t){try{const n=T(e,t.argument);if(H(n)){if(t.operator==="!")return!n;if(t.operator==="-")return-1*m(n);if(t.operator==="+")return 1*m(n);if(t.operator==="~")return~m(n);throw new f(e,"UnsupportUnaryOperator",t)}if(t.operator==="~")return~m(n);if(t.operator==="-")return-1*m(n);if(t.operator==="+")return 1*m(n);throw new f(e,"UnsupportUnaryOperator",t)}catch(n){throw n}}function gl(e,t){try{const n=[];for(let r=0;r<t.elements.length;r++){const a=T(e,t.elements[r]);if(K(a))throw new f(e,"NoFunctionInArray",t);a===E?n.push(null):n.push(a)}return n}catch(n){throw n}}function wl(e,t){try{const n=T(e,t.left),r=T(e,t.right);switch(t.operator){case"|":case"<<":case">>":case">>>":case"^":case"&":return Oi(m(n),m(r),t.operator);case"==":return Ce(n,r);case"!=":return!Ce(n,r);case"<":case">":case"<=":case">=":return Ri(n,r,t.operator);case"+":return v(n)||v(r)?A(n)+A(r):m(n)+m(r);case"-":return m(n)-m(r);case"*":return m(n)*m(r);case"/":return m(n)/m(r);case"%":return m(n)%m(r);default:throw new f(e,"UnsupportedOperator",t)}}catch(n){throw n}}function yl(e,t){try{const n=T(e,t.left);if(H(n))switch(t.operator){case"||":{if(n===!0)return n;const r=T(e,t.right);if(H(r))return r;throw new f(e,"LogicExpressionOrAnd",t)}case"&&":{if(n===!1)return n;const r=T(e,t.right);if(H(r))return r;throw new f(e,"LogicExpressionOrAnd",t)}default:throw new f(e,"LogicExpressionOrAnd",t)}throw new f(e,"LogicalExpressionOnlyBoolean",t)}catch(n){throw n}}function xl(e,t,n){if(K(e))throw new f(t,"NoFunctionInTemplateLiteral",n);return e}function Fl(e,t){let n="",r=0;for(const a of t.quasis)n+=a.value?a.value.cooked:"",a.tail===!1&&(n+=t.expressions[r]?A(xl(T(e,t.expressions[r]),e,t)):"",r++);return n}function Sr(e,t){return Ea(e,t)}function Al(e,t){try{if(t.callee.type==="MemberExpression"){const r=T(e,t.callee.object);if(!(r instanceof Ct))throw new f(e,"FunctionNotFound",t);const a=t.callee.computed===!1?t.callee.property.name:T(e,t.callee.property);if(!r.hasGlobal(a))throw new f(e,"FunctionNotFound",t);const u=r.global(a);if(!K(u))throw new f(e,"CallNonFunction",t);return u.call(e,t)}if(t.callee.type!=="Identifier")throw new f(e,"FunctionNotFound",t);const n=Ea(e,t.callee,"FunctionNotFound");if(K(n))return n.call(e,t);throw new f(e,"CallNonFunction",t)}catch(n){throw n}}function Cl(e,t){try{if(t.preparsed===!0)throw new f(e,"NeverReach",t);const n=t.arguments;p(n===null?[]:n,3,3,e,t);const r=T(e,n[0]);if(H(r)===!1)throw new f(e,"BooleanConditionRequired",t);return T(e,r===!0?n[1]:n[2])}catch(n){throw n}}function El(e,t){try{if(t.preparsed===!0)throw new f(e,"NeverReach",t);const n=t.arguments;p(n===null?[]:n,2,3,e,t);const r=T(e,n[0]);if(n.length===3){const a=T(e,n[1]),u=Cr(r,a);return u!=null&&u!==""?u:T(e,n[2])}return r===null||r===""||r===void 0?T(e,n[1]):r}catch(n){throw n}}function vl(e,t){try{if(t.preparsed===!0)throw new f(e,"NeverReach",t);const n=t.arguments;if(n.length<2)throw new f(e,"WrongNumberOfParameters",t);if(n.length===2)return T(e,n[1]);{if((n.length-1)%2==0)throw new f(e,"WrongNumberOfParameters",t);const r=T(e,n[0]);return Ia(e,t,1,r)}}catch(n){throw n}}function Ia(e,t,n,r){try{const a=t.arguments,u=T(e,a[n]);if(Ce(u,r))return T(e,a[n+1]);{const i=a.length-n;return i===1?T(e,a[n]):i===2?null:i===3?T(e,a[n+2]):Ia(e,t,n+2,r)}}catch(a){throw a}}function bl(e,t){try{if(t.preparsed===!0)throw new f(e,"NeverReach",t);const n=t.arguments;if(n.length<3)throw new f(e,"WrongNumberOfParameters",t);if(n.length%2==0)throw new f(e,"WrongNumberOfParameters",t);const r=T(e,n[0]);if(H(r)===!1)throw new f(e,"BooleanConditionRequired",n[0]);return Sa(e,t,0,r)}catch(n){throw n}}function Sa(e,t,n,r){try{const a=t.arguments;if(r===!0)return T(e,a[n+1]);if(a.length-n===3)return T(e,a[n+2]);{const u=T(e,a[n+2]);if(H(u)===!1)throw new f(e,"BooleanConditionRequired",a[n+2]);return Sa(e,t,n+2,u)}}catch(a){throw a}}function Il(){const e=Object.create(null);Hi(e,me),ua(e,me),qi(e,me,Sr),na(e,me),Xi(e,me),ia(e,me),ta(e,me),ca(e,me),e.iif=Cl,e.defaultvalue=El,e.decode=vl,e.when=bl;const t=function(){this.textformatting={value:b.textFormatting()}};t.prototype=Object.create(null),t.prototype.infinity=Object.freeze({value:Number.POSITIVE_INFINITY}),t.prototype.pi=Object.freeze({value:Math.PI});for(const[n,r]of Object.entries(e))t.prototype[n]=Object.freeze({value:new Dt(r)});return t}const kr=Il();function ka(e){const t={mode:"sync",compiled:!1,functions:Object.create(null),signatures:[],standardFunction:me,evaluateIdentifier:Sr};for(let n=0;n<e.length;n++)e[n].registerFunctions(t);for(const[n,r]of Object.entries(t.functions))kr.prototype[n]=Object.freeze({value:new Dt(r)});for(let n=0;n<t.signatures.length;n++)Vi(t.signatures[n],"sync")}function Ba(e){console.log(e)}function hr(e,t){const n=new Set(Object.keys((t==null?void 0:t.vars)||{}).map(i=>B(i))),r=new Set(Object.keys((t==null?void 0:t.customfunctions)||{}).map(i=>B(i))),{globals:a,exports:u}=Fr(e);return i=>{const s=i.spatialReference??Gt.WebMercator;let o=null;e.usesModules&&(o=new Fn(new Map,e.loadedModules));const l=new kr;for(const d of r)i.customfunctions!=null&&d in i.customfunctions?l[d]={value:new Dt(i.customfunctions[d])}:l[d]=mt;for(const d of n){if(i.vars==null||!(d in i.vars)){d in l||(l[d]=mt);continue}const D=i.vars[d]??null;bi(D)?l[d]={value:se.createFromGraphic(D,i.timeZone??null)}:l[d]={value:D}}for(const d of a)d in l||(l[d]=mt);const h={lrucache:i.lrucache,interceptor:i.interceptor,services:i.services,console:i.console??Ba,abortSignal:yn,timeZone:i.timeZone??null,spatialReference:s,track:i.track,depthCounter:{depth:1},libraryResolver:o,exports:u,localScope:null,globalScope:l},c=Ir(h,e);if(c instanceof Y||c instanceof xr){const d=c.value;if(Xn(d))return null;if(K(d))throw new f(h,"IllegalResult",null);return d}if(Xn(c))return null;throw c===ae?new f(h,"IllegalResult",null):c===xn?new f(h,"IllegalResult",null):new f(h,"NeverReach",null)}}function Sl(e,t){return hr(e,t)(t)}ka([er]);const kl=new Set(["feature","angle","bearing","centroid","envelopeintersects","extent","geometry","ringisclockwise","trackgeometrywindow"]),Ta=new Set(["TrackAccelerationAt","TrackAccelerationWindow","TrackCurrentAcceleration","TrackCurrentDistance","TrackCurrentSpeed","TrackDistanceAt","TrackDistanceWindow","TrackSpeedAt","TrackSpeedWindow"].map(e=>B(e))),Bl=new Set([...Ta,"TrackCurrentTime","TrackDuration","TrackFieldWindow","TrackGeometryWindow","TrackIndex","TrackStartTime","TrackWindow"].map(e=>B(e)));let Na=!1,Ma=!1,ge=null,dr=[],Pa=!1;function Ra(e,t){if(t.useAsync===!0||e.isAsync===!0)return Tl(e,t);if(vi("esri-csp-restrictions"))return hr(e,t);try{return wa(e,t)}catch(n){if(n.declaredRootClass==="esri.arcade.arcadeuncompilableerror")return hr(e,t);throw n}}function Tl(e,t){if(ge===null)throw new f(null,"AsyncNotEnabled",null);if(vi("esri-csp-restrictions"))return ge.prepareScript(e,t);try{return wa(e,t,!0)}catch(n){if(n.declaredRootClass==="esri.arcade.arcadeuncompilableerror")return ge.prepareScript(e,t);throw n}}function Oa(e){ka(e),He(e,"sync"),ge===null?dr.push(e):(He(e,"async"),ge.extend(e))}function Br(e,t=[]){return Dn(e,t)}function La(e,t,n=[]){return Tr(Dn(e,n),t)}function Tr(e,t){if(t.useAsync===!0||e.isAsync===!0){if(ge===null)throw new f(null,"AsyncNotEnabled",null);return ge.executeScript(e,t)}return Sl(e,t)}function Nr(e,t){return Gi(e,t)}function _a(e,t){return Os(e,t)}function Ua(e,t=!1){return t===void 0&&(t=!1),Zi(e).map(({varId:n,memberId:r})=>`${n}.${r}`)}function $a(e){return Ls(e)}function vn(e,t=[]){return e.usesGeometry===void 0&&Wt(e,t),e.usesGeometry===!0}let Kn=null;function Mr(){return Kn||(Kn=Pr(),Kn)}async function Pr(){return await To(),Ma=!0,!0}let qn=null;function bn(){return qn!==null||(qn=Rr()),qn}async function Rr(){await Ou(),ge=await Fe(()=>import("./arcadeAsyncRuntime-CwVF5GE8-DkdlarfO.js"),__vite__mapDeps([91,76,58,1,2,62,63,64,65,66,67,68,69,77,78,79,80,81,82,83,84,85,86,87,61,70,71,72,73,74,75,88,89,57,90]),import.meta.url);for(const e of dr)ge.extend(e),He(e,"async");return dr=null,!0}function Or(){return Na}function Lr(){return!!ge}function _r(){return Ma}let Nl,Jn=null;function Ur(){return Jn||(Jn=$r(),Jn)}async function $r(){await bn();const[e,t,n,r,a,u]=await Promise.all([Fe(()=>import("./featureSetUtils-Djc8epG7-B0kYnZBI.js"),__vite__mapDeps([92,1,2,62,63,58,64,65,66,67,68,69,93,77,78,79,80,81,82,83,84,88,71,72,73,74,75,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,90,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,76,85,86,87,89,57]),import.meta.url).then(i=>i.f),Fe(()=>import("./featuresetbase-BKsM454t-Cb9lQ5YO.js"),__vite__mapDeps([179,1,2,63,58,64,62,65,66,67,68,69,77,78,79,80,81,82,83,84,92,93,88,71,72,73,74,75,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,90,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,76,85,86,87,89,57,70,180]),import.meta.url),Fe(()=>import("./featuresetgeom-fxpf-YMD-DWMoyBCr.js"),__vite__mapDeps([181,58,1,2,63,64,62,65,66,67,68,69,93,77,78,79,80,81,82,83,84,88,71,72,73,74,75]),import.meta.url),Fe(()=>import("./featuresetstats-oafxe6NR-Dqwcq1Ah.js"),__vite__mapDeps([182,63,58,1,2,64,62,65,66,67,68,69,88,76,77,78,79,80,81,82,83,84,85,86,87,89,57,90]),import.meta.url),Fe(()=>import("./featuresetstring-DjdXTr94-BDYyu1rl.js"),__vite__mapDeps([183,62,63,58,1,2,64,65,66,67,68,69]),import.meta.url),Fe(()=>import("./knowledgegraph-3-CWvzvg-DXUm1KuC.js"),__vite__mapDeps([184,1,2,62,63,58,64,65,66,67,68,69,70,145,146,102,165,185,87,186,187,76,77,78,79,80,81,82,83,84,85,86,88,89,57,90]),import.meta.url)]);return Za=e,ge.extend([t,n,r,a,u]),He([t,n,r,a,u],"async"),Na=!0,!0}function zr(){return Nl??(Nl=ou().then(()=>{Pa=!0}))}function jr(e,t=[]){return e.usesFeatureSet===void 0&&Wt(e,t),e.usesFeatureSet===!0}function za(e,t=[]){return e.isAsync===void 0&&Wt(e,t),e.isAsync===!0}function Ml(e,t){if(t){for(const n of t)if(Nr(e,n))return!0;return!1}return!1}async function ja(e,t,n=[],r=!1,a=null){return In(new Set,e,t,n,r,a)}async function In(e,t,n,r=[],a=!1,u=null){const i=typeof t=="string"?Br(t):t,s=[];return i&&(_r()===!1&&(vn(i)||a)&&s.push(Mr()),Lr()===!1&&(i.isAsync===!0||n)&&s.push(bn()),Or()===!1&&(jr(i)||Ml(i,r))&&s.push(Ur()),Pa||Pl(i)&&s.push(zr())),s.length&&await Promise.all(s),await Vr(e,i,u,n,a),!0}function Va(e,t=[]){return e.usesModules===void 0&&Wt(e,t),e.usesModules===!0}async function Vr(e,t,n=null,r=!1,a=!1){const u=Wi(t);n===null&&u.length>0&&(n=cr.getDefault()),t.loadedModules={};for(const i of u){Ei(n);const s=n.normalizeModuleUri(i.source);if(e.has(s.uri))throw new f(null,"CircularModules",null);e.add(s.uri);const o=await n.fetchModule(s);await In(e,o,r,[],a,n),e.delete(s.uri),o.isAsync&&(t.isAsync=!0),o.usesFeatureSet&&(t.usesFeatureSet=!0),o.usesGeometry&&(t.usesGeometry=!0),t.loadedModules[i.libname]={uri:s.uri,script:o}}}function Ga(e){if(vn(e))return!0;const t=ft(e);let n=!1;for(let r=0;r<t.length;r++)if(kl.has(t[r])){n=!0;break}return n}function Wa(e,t){const n=t==null?null:new Set(t.map(r=>r.toLowerCase()));return Zi(e).some(({varId:r,memberId:a})=>r==="$view"&&(n==null||n.has(a)))}let Za=null;function Ha(){return Za}function Pl(e){return ft(e).some(t=>Ta.has(t))}function Ka(e){return ft(e).some(t=>Bl.has(t))}const oc=Object.freeze(Object.defineProperty({__proto__:null,_loadScriptDependenciesImpl:In,compileScript:Ra,enableAsyncSupport:bn,enableAsyncSupportImpl:Rr,enableFeatureSetSupport:Ur,enableFeatureSetSupportImpl:$r,enableGeometrySupport:Mr,enableGeometrySupportImpl:Pr,executeScript:Tr,extend:Oa,extractExpectedFieldLiterals:$a,extractFieldLiterals:Ua,featureSetUtils:Ha,isAsyncEnabled:Lr,isFeatureSetSupportEnabled:Or,isGeometryEnabled:_r,loadDependentModules:Vr,loadScriptDependencies:ja,loadTrackGeometryOperators:zr,parseAndExecuteScript:La,parseScript:Br,referencesFunction:_a,referencesMember:Nr,scriptIsAsync:za,scriptTouchesGeometry:Ga,scriptUsesFeatureSet:jr,scriptUsesGeometryEngine:vn,scriptUsesModules:Va,scriptUsesTrack:Ka,scriptUsesViewProperties:Wa},Symbol.toStringTag,{value:"Module"})),uc=Object.freeze(Object.defineProperty({__proto__:null,_loadScriptDependenciesImpl:In,compileScript:Ra,enableAsyncSupport:bn,enableAsyncSupportImpl:Rr,enableFeatureSetSupport:Ur,enableFeatureSetSupportImpl:$r,enableGeometrySupport:Mr,enableGeometrySupportImpl:Pr,executeScript:Tr,extend:Oa,extractExpectedFieldLiterals:$a,extractFieldLiterals:Ua,featureSetUtils:Ha,isAsyncEnabled:Lr,isFeatureSetSupportEnabled:Or,isGeometryEnabled:_r,loadDependentModules:Vr,loadScriptDependencies:ja,loadTrackGeometryOperators:zr,parseAndExecuteScript:La,parseScript:Br,referencesFunction:_a,referencesMember:Nr,scriptIsAsync:za,scriptTouchesGeometry:Ga,scriptUsesFeatureSet:jr,scriptUsesGeometryEngine:vn,scriptUsesModules:Va,scriptUsesTrack:Ka,scriptUsesViewProperties:Wa},Symbol.toStringTag,{value:"Module"}));export{Ga as A,vn as B,Xi as C,Nt as D,ua as E,oc as F,Po as G,uc as H,Co as I,Ra as M,So as O,qi as P,Ur as Q,Eo as R,Nr as U,ia as a,ca as b,ji as c,Xe as d,xe as e,Ar as f,na as g,Ao as h,Fr as i,Hi as j,vo as k,Rn as l,Br as m,Mr as n,Vi as o,er as p,Tr as q,$a as r,Fn as s,nr as t,ja as u,Ha as v,Ka as w,Ns as x,Cr as y,Bo as z};
