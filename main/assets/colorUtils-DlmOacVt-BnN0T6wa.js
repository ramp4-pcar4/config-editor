import{bp as i,gA as p,q as B,gB as C}from"./index-BeTPrQ6f.js";import"./vec42-DHp-FUwt-Br7hmYJs.js";import{r as G}from"./vec4f64-DD-nkcCV-CSNWKRqG.js";function R(t){return"r"in t&&"g"in t&&"b"in t}function w(t){return"h"in t&&"s"in t&&"v"in t}function x(t){return"l"in t&&"a"in t&&"b"in t}function k(t){return"l"in t&&"c"in t&&"h"in t}function U(t){return"x"in t&&"y"in t&&"z"in t}const q=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],P=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function y(t,r){const n=[];let o,e;if(t[0].length!==r.length)throw new Error("dimensions do not match");const u=t.length,c=t[0].length;let a=0;for(o=0;o<u;o++){for(a=0,e=0;e<c;e++)a+=t[o][e]*r[e];n.push(a)}return n}function z(t){const r=[t.r/255,t.g/255,t.b/255].map(o=>o<=.04045?o/12.92:((o+.055)/1.055)**2.4),n=y(q,r);return{x:100*n[0],y:100*n[1],z:100*n[2]}}function M(t){const r=y(P,[t.x/100,t.y/100,t.z/100]).map(n=>{const o=n<=.0031308?12.92*n:1.055*n**.4166666666666667-.055;return Math.min(1,Math.max(o,0))});return{r:Math.round(255*r[0]),g:Math.round(255*r[1]),b:Math.round(255*r[2])}}function A(t){const r=[t.x/95.047,t.y/100,t.z/108.883].map(n=>n>.008856451679035631?n**.3333333333333333:7.787037037037035*n+.13793103448275862);return{l:116*r[1]-16,a:500*(r[0]-r[1]),b:200*(r[1]-r[2])}}function v(t){const r=t.l,n=[(r+16)/116+t.a/500,(r+16)/116,(r+16)/116-t.b/200].map(o=>o>6/29?o**3:3*(6/29)**2*(o-4/29));return{x:95.047*n[0],y:100*n[1],z:108.883*n[2]}}function W(t){const r=t.l,n=t.a,o=t.b,e=Math.sqrt(n*n+o*o);let u=Math.atan2(o,n);return u=u>0?u:u+2*Math.PI,{l:r,c:e,h:u}}function j(t){const r=t.l,n=t.c,o=t.h;return{l:r,a:n*Math.cos(o),b:n*Math.sin(o)}}function D(t){return A(z(t))}function E(t){return M(v(t))}function F(t){return W(A(z(t)))}function H(t){return M(v(j(t)))}function I(t){const r=t.r,n=t.g,o=t.b,e=Math.max(r,n,o),u=e-Math.min(r,n,o);let c=e,a=u===0?0:e===r?(n-o)/u%6:e===n?(o-r)/u+2:(r-n)/u+4,s=u===0?0:u/c;return a<0&&(a+=6),a*=60,s*=100,c*=100/255,{h:a,s,v:c}}function J(t){const r=(t.h+360)%360/60,n=t.s/100,o=t.v/100*255,e=o*n,u=e*(1-Math.abs(r%2-1));let c;switch(Math.floor(r)){case 0:c={r:e,g:u,b:0};break;case 1:c={r:u,g:e,b:0};break;case 2:c={r:0,g:e,b:u};break;case 3:c={r:0,g:u,b:e};break;case 4:c={r:u,g:0,b:e};break;case 5:case 6:c={r:e,g:0,b:u};break;default:c={r:0,g:0,b:0}}return c.r=Math.round(c.r+o-e),c.g=Math.round(c.g+o-e),c.b=Math.round(c.b+o-e),c}function f(t){return R(t)?t:k(t)?H(t):x(t)?E(t):U(t)?M(t):w(t)?J(t):t}function K(t){return w(t)?t:I(f(t))}function L(t){return x(t)?t:D(f(t))}function Y(t){return k(t)?t:F(f(t))}function N(t){let{r,g:n,b:o,a:e}=t;return e<1&&(r=Math.round(e*r+255*(1-e)),n=Math.round(e*n+255*(1-e)),o=Math.round(e*o+255*(1-e))),new i({r,g:n,b:o})}function O(t,r){const{r:n,g:o,b:e}=r!=null&&r.ignoreAlpha?t:N(t);return .2126*n+.7152*o+.0722*e}function Z(t,r=225){return O(t,{ignoreAlpha:!0})>r?new i([0,0,0,t.a]):new i([255,255,255,t.a])}function _(t,r){const n=L(t);n.l*=1-r;const o=f(n),e=t.clone();return e.setColor(o),e.a=t.a,e}function $(t,r){const n=t.clone();return n.a*=r,n}function tt(t,r){const n=K(t);n.s*=r;const o=f(n),e=t.clone();return e.setColor(o),e.a=t.a,e}function rt(t){return i.toUnitRGBA(t)}function nt(t){return G(t[0],t[1],t[2],t.length>3?t[3]:1)}function ot(t,r){const n=i.toUnitRGBA(t);return n[3]*=r,n}function et(t,r,n={}){if(t.length===0||r<=0)return[];if((t=t.map(o=>typeof o=="string"?new i(o):o)).length===1||r===1){const o=[],e=t[0];for(let u=0;u<r;u++)o.push(e.clone());return o}if(n.shuffle&&(t=p(B(t),n.seed)),t.length>=r){const o=[],e=(t.length-1)/(r-1);for(let u=0;u<r;u++){const c=Math.round(u*e);o.push(t[c].clone())}return o}return Q(t,r,n)}function Q(t,r,n={}){const o=[],e=t.length-1,u=Math.ceil((r-t.length)/e);t:for(let c=0;c<e;c++){const a=t[c],s=t[c+1];for(let h=1;h<=u;h++){const l=h/(u+1);if(o.push(S(a,s,l,n)),o.length+t.length===r)break t}}return[...t.map(c=>c.clone()),...p(o,n.seed??1)]}const b=(t,r)=>{const n=Math.floor(10*r())-5;return Math.min(255,Math.max(0,t+n))};function S(t,r,n,o={}){const e=t.r,u=t.g,c=t.b,a=r.r,s=r.g,h=r.b,l=Math.round(e+(a-e)*n),d=Math.round(u+(s-u)*n),m=Math.round(c+(h-c)*n);if(!o.offset)return new i([l,d,m]);const g=C(o.seed);return new i([b(l,g),b(d,g),b(m,g)])}export{rt as $,K as C,L as G,nt as K,ot as N,et as O,O as U,Y as V,Z as X,_ as Y,$ as Z,tt as _,f,R as w};
