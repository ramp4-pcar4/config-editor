import{eY as m,eZ as x,e_ as s,e$ as l,f0 as T}from"./index-BcWBQvu1.js";function v(e,n){return{...n,filterMode:e.mode}}function y(e,n){return I(e,n).next().value??null}function E(e,n,i){const r=h(e);if(r&&(s(n,r[0])||l(i,r[1])))return"";const o=Array.from(I(e,n,i)),t=V(o,n,i)?"1=1":o.map(u=>u.where||"1=1").reduce((u,f)=>T(u,f),"");return t&&t!=="1=1"?t:""}function h(e){if(d(e)==="manual")return null;const n=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY];for(const{minScale:i,maxScale:r}of e.filters)n[0]=Math.max(n[0],a(i)),n[1]=Math.min(n[1],c(r));return n}function*I(e,n,i){if(d(e)==="manual"){const r=e.filters.find(o=>o.id===e.activeFilterId);r&&(yield r)}else{typeof n=="object"&&(n=n.scale);for(const r of e.filters)b(r.minScale,r.maxScale,n,i)&&(yield r)}}function V(e,n,i){var t,u;if(e.length===0)return!0;const r=a((t=e.at(0))==null?void 0:t.minScale),o=c((u=e.at(-1))==null?void 0:u.maxScale);if(l(r,n)||s(o,i))return!0;for(let f=0;f<e.length-1;f++){const N=e[f],S=e[f+1];if(l(a(S.minScale),c(N.maxScale)))return!0}return!1}function b(e,n,i,r){return e=a(e),i=a(i),n=c(n),!(!m(i,e)&&(r??i)>e)&&!x(n,i)&&(r===void 0||!m(r,e))}function d(e){return"mode"in e?e.mode:e.filterMode}function a(e){return e||Number.POSITIVE_INFINITY}function c(e){return e||0}export{E as T,v as b,y as x};
