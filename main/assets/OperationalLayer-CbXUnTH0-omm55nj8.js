import{v as e,x as v,X as f,S as n,bi as C,n as y,bh as F,q as O,w as x,F as b,cX as P,cY as J,o as E,ar as H,bR as X,h as I,cZ as z,c_ as K}from"./index-12gn5LMs.js";import{o as l}from"./layerContainerType-ChWdCT09-G5sdAsSy.js";import{r as Y}from"./ElevationInfo-DE5to86a-zEEw4gu_.js";import{l as R}from"./TimeExtent-Cf2Pienb-CjK3i2gr.js";const B={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,ArcGISVideoLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,KnowledgeGraphLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},N={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},W={ArcGISFeatureLayer:!0,SubtypeGroupTable:!0},Z={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GroupLayer:!0,IntegratedMesh3DTilesLayer:!0,Object3DTilesLayer:!0,IntegratedMeshLayer:!0,KML:!0,LineOfSightLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,RasterDataLayer:!0,VectorTileLayer:!0,ViewshedLayer:!0,Voxel:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap":{ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-scene/tables":{ArcGISFeatureLayer:!0},"web-map/operational-layers":B,"web-map/basemap":N,"web-map/tables":W,"link-chart/operational-layers":{...B,LinkChartLayer:!0},"link-chart/basemap":N,"link-chart/tables":W,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,BuildingSceneLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,MediaLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,SubtypeGroupLayer:!0,WCS:!0},"portal-item/tables":{ArcGISFeatureLayer:!0,SubtypeGroupTable:!0}};let c=class extends f{constructor(a){super(a),this.description=null,this.label=null,this.type=null}};e([n({type:String,json:{write:!0}})],c.prototype,"description",void 0),e([n({type:String,json:{write:!0}})],c.prototype,"label",void 0),e([n()],c.prototype,"type",void 0),c=e([y("esri.tables.elements.AttributeTableElement")],c);const u=c;let m=class extends v.ClonableMixin(u){constructor(a){super(a),this.displayType="auto",this.type="attachment"}clone(){return super.clone()}};e([n({type:["auto"],json:{write:!0}})],m.prototype,"displayType",void 0),e([n({type:["attachment"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],m.prototype,"type",void 0),m=e([y("esri.tables.elements.AttributeTableAttachmentElement")],m);const D=m;let d=class extends v.ClonableMixin(u){constructor(a){super(a),this.description=null,this.fieldName=null,this.label=null,this.type="field"}clone(){return super.clone()}};e([n({type:String,json:{read:!1,write:!1}})],d.prototype,"description",void 0),e([n({type:String,json:{write:{enabled:!0,isRequired:!0}}})],d.prototype,"fieldName",void 0),e([n({type:String,json:{read:!1,write:!1}})],d.prototype,"label",void 0),e([n({type:["field"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],d.prototype,"type",void 0),d=e([y("esri.tables.elements.AttributeTableFieldElement")],d);const $=d;let S=class extends v.ClonableMixin(u){constructor(a){super(a),this.relationshipId=null,this.type="relationship"}clone(){return super.clone()}};e([n({type:Number,json:{type:F,write:{enabled:!0,isRequired:!0}}})],S.prototype,"relationshipId",void 0),e([n({type:["relationship"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],S.prototype,"type",void 0),S=e([y("esri.tables.elements.AttributeTableRelationshipElement")],S);const V=S,q={base:u,key:"type",typeMap:{attachment:D,field:$,relationship:V}};function _(a){return{typesWithGroup:{base:u,key:"type",typeMap:{attachment:D,field:$,group:a,relationship:V}},typesWithoutGroup:q}}let g=class extends v.ClonableMixin(u){constructor(a){super(a),this.elements=null,this.type="group"}clone(){return super.clone()}};e([n({types:[q],json:{name:"attributeTableElements",write:!0}})],g.prototype,"elements",void 0),e([n({type:["group"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],g.prototype,"type",void 0),g=e([y("esri.tables.elements.AttributeTableGroupElement")],g);const Q=g;let w=class extends v.ClonableMixin(f){constructor(a){super(a),this.field=null,this.order=null}};e([n({type:String,json:{write:!0}})],w.prototype,"field",void 0),e([n({type:["asc","desc"],json:{write:!0}})],w.prototype,"order",void 0),w=e([y("esri.tables.support.FieldOrder")],w);const U=w;var T;const ee=_(Q);let L=T=class extends f{constructor(a){super(a),this.elements=null,this.orderByFields=null}clone(){return new T({elements:O(this.elements),orderByFields:O(this.orderByFields)})}};e([n({types:[ee.typesWithGroup],json:{name:"attributeTableElements",write:!0}})],L.prototype,"elements",void 0),e([n({type:[U],json:{write:!0}})],L.prototype,"orderByFields",void 0),L=T=e([y("esri.tables.AttributeTableTemplate")],L);const re=L,se={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:{enabled:!0,layerContainerTypes:l}}},le={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(a,r)=>!r.disablePopup},write:{enabled:!0,writer(a,r,i){r[i]=!a}}}},ye={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:{enabled:!0,layerContainerTypes:l}}},pe={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:J}}},de={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:{enabled:!0,layerContainerTypes:l}}},ce={value:null,type:Y,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:{enabled:!0,layerContainerTypes:l}}};function ue(a){return{type:a,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const k={write:{enabled:!0,layerContainerTypes:l},read:!0},G={type:Number,json:{origins:{"web-document":k,"portal-item":{write:{layerContainerTypes:l}}}}},be={...G,json:{...G.json,origins:{"web-document":{...k,write:{enabled:!0,layerContainerTypes:l,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(a,r,i)=>{var t;return i&&i.origin!=="service"||!r.drawingInfo||r.drawingInfo.transparency===void 0?(t=r.layerDefinition)!=null&&t.drawingInfo&&r.layerDefinition.drawingInfo.transparency!==void 0?C(r.layerDefinition.drawingInfo.transparency):void 0:C(r.drawingInfo.transparency)}}}},me={type:E,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(a,r)=>{const i=E.fromJSON(a);return r.spatialReference!=null&&typeof r.spatialReference=="object"&&(i.spatialReference=H.fromJSON(r.spatialReference)),i}}}},read:!1}},Se={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},ge={type:Number,json:{origins:{service:{write:{enabled:!1}}},name:"layerDefinition.minScale",write:{layerContainerTypes:l}}},we={type:Number,json:{origins:{service:{write:{enabled:!1}}},name:"layerDefinition.maxScale",write:{layerContainerTypes:l}}},te={json:{write:{ignoreOrigin:!0,layerContainerTypes:l},origins:{"web-map":{read:!1,write:!1}}}},Le={type:re,json:{name:"attributeTableInfo",write:!0}},ve=a=>{let r=class extends a{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(i,t,o){var s;return((s=o==null?void 0:o.portalItem)==null?void 0:s.type)==="Group Layer"?void 0:i}writeListMode(i,t,o,s){(s&&s.layerContainerType==="ground"||i&&X(this,o,{},s))&&(t[o]=i)}writeOperationalLayerType(i,t,o){i&&(t[o]=i)}writeTitle(i,t){t.title=i??"Layer"}readVisibilityTimeExtent(i){return i?R.fromArray(i):null}writeVisibilityTimeExtent(i,t,o,s){i&&s.layerContainerType!=="tables"&&(i.isEmpty?s!=null&&s.messages&&s.messages.push(new I("layer:invalid-visibilityTimeExtent","visibilityTimeExtent cannot be empty")):t[o]=i.toArray())}read(i,t){t&&(t.layer=this),z(this,i,o=>super.read(i,o),t)}write(i,t){var A,M,j;if(!this.persistenceEnabled&&!(t!=null&&t.ignorePersistenceEnabled))return null;if(t!=null&&t.origin){const p=`${t.origin}/${t.layerContainerType||"operational-layers"}`;let h=!!((A=Z[p])!=null&&A[this.operationalLayerType]);if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&p==="web-scene/operational-layers"&&(h=!1),this.operationalLayerType==="ArcGISDimensionLayer"&&p==="web-map/operational-layers"&&(h=!1),!h)return(M=t.messages)==null||M.push(new I("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${p}'`,{layer:this})),null}const o=super.write(i,{...t,layer:this}),s=!!t&&!!t.messages&&!!t.messages.filter(p=>p instanceof I&&p.name==="web-document-write:property-required").length;return K(o==null?void 0:o.url)?((j=t==null?void 0:t.messages)==null||j.push(new I("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&s?null:o}beforeSave(){}};return e([n({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],r.prototype,"id",void 0),e([x("id",["id"])],r.prototype,"readId",null),e([n(te)],r.prototype,"listMode",void 0),e([b("listMode")],r.prototype,"writeListMode",null),e([n({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:"layerType",read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:l,isRequired:!0}}}}})],r.prototype,"operationalLayerType",void 0),e([b("operationalLayerType")],r.prototype,"writeOperationalLayerType",null),e([n(G)],r.prototype,"opacity",void 0),e([n({type:Boolean,readOnly:!1})],r.prototype,"persistenceEnabled",void 0),e([n({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],r.prototype,"title",void 0),e([b("title"),b(["web-scene"],"title")],r.prototype,"writeTitle",null),e([n({type:R,json:{origins:{"web-scene":{write:{layerContainerTypes:l}}}}})],r.prototype,"visibilityTimeExtent",void 0),e([x("visibilityTimeExtent")],r.prototype,"readVisibilityTimeExtent",null),e([b(["portal-item","web-map","web-scene"],"visibilityTimeExtent",{visibilityTimeExtent:{type:[[F,P]]}})],r.prototype,"writeVisibilityTimeExtent",null),e([n({type:Boolean,json:{name:"visibility",write:{layerContainerTypes:l}}})],r.prototype,"visible",void 0),r=e([y("esri.layers.mixins.OperationalLayer")],r),r};export{te as $,G as T,re as V,de as a,Le as c,we as d,se as e,pe as i,me as l,ce as n,be as o,ge as p,le as r,ue as s,ye as t,ve as u,Se as y};
