import{gV as E,hf as w,gS as _,gZ as y,hk as T,gX as c,hz as d,g_ as A,gT as i,h1 as M,h6 as R,h7 as x,hm as I,hr as S,hj as $}from"./index-BeTPrQ6f.js";const L={en:{"panguard.instructions":"Use two fingers to pan the map"},fr:{"panguard.instructions":"Utilisez deux doigts pour faire un panoramique de la carte"}},P={class:"pg-label"},C=_({__name:"map-panguard",setup(l){const{t:p}=y(),t=T("iApi"),s=c(),r=c(-1),o=d([]),n=d([]);A(()=>{h(),n.push(t.event.on(i.MAP_CREATED,()=>{h()})),n.push(t.event.on(i.MAP_DESTROYED,()=>{o.forEach(e=>e.remove())})),n.push(t.event.on(i.MAP_REFRESH_START,()=>{o.forEach(e=>e.remove())})),n.push(t.event.on(i.MAP_REFRESH_END,()=>{h()}))}),M(()=>{n.forEach(e=>t.event.off(e)),o.forEach(e=>e.remove())});const h=()=>{const e=new Map;t.geo.map.viewPromise.then(()=>{o.push(t.geo.map.esriView.on("pointer-down",a=>{a.pointerType==="touch"&&e.set(a.pointerId,{x:a.x,y:a.y})})),o.push(t.geo.map.esriView.on(["pointer-up","pointer-leave"],a=>{a.pointerType==="touch"&&window.setTimeout(()=>{e.delete(a.pointerId)},200)})),o.push(t.geo.map.esriView.on("pointer-move",a=>{const{pointerId:m,pointerType:g,x:v,y:f}=a,u=e.get(m);if(!u||g!=="touch"||e.size!==1){s.value.classList.remove("pg-active");return}Math.sqrt(Math.pow(v-u.x,2)+Math.pow(f-u.y,2))<20||(s.value.classList.add("pg-active"),r.value!==-1&&clearTimeout(r.value),r.value=window.setTimeout(()=>{s.value.classList.remove("pg-active")},2e3))}))})};return(e,a)=>(x(),R("div",{class:"pg",ref_key:"panGuard",ref:s},[I("p",P,S($(p)("panguard.instructions")),1)],512))}}),D=w(C,[["__scopeId","data-v-22ab9ef7"]]);class b extends E{added(){Object.entries(L).forEach(s=>this.$iApi.$i18n.mergeLocaleMessage(...s));const{destroy:p,el:t}=this.mount(D,{app:this.$element});this.$vApp.$el.getElementsByClassName("inner-shell")[0].appendChild(t.childNodes[0]),this.removed=()=>{p()}}}export{b as default};
