const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./point-icon-BSJft8AI-Cvu9un9G.js","./index-Bq7Udiuc.js","./index-CpSsk29H.css","./polyline-icon-CqjafPK0-BwgvA4IE.js","./polygon-icon-BrXtjiJl-wj5LREAw.js","./circle-icon-DrE2wWqh-CNrbmpD8.js","./rectangle-icon-D8mTZj4O-z-SCzvEx.js","./edit-icon-C_tqZ1EG-DUbBs928.js"])))=>i.map(i=>d[i]);
var H=Object.defineProperty;var J=(l,o,t)=>o in l?H(l,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[o]=t;var T=(l,o,t)=>J(l,typeof o!="symbol"?o+"":o,t);import{as as x,ar as I,at as B,fV as $,av as z,aw as k,h8 as O,ay as P,az as r,aL as u,aY as y,aB as b,aC as v,aE as h,fT as _,h9 as g,ax as A,aV as w,aW as M,aA as E,aX as D,aD as N,aG as Z,aI as G,aJ as K,aK as L,aM as X,aF as V,a_ as Y,_ as f}from"./index-Bq7Udiuc.js";import{y as j}from"./draw-store-C1_quxsr-C3ChE95Q.js";const q={},Q={class:"border-b p-0 self-center w-2/3"};function U(l,o){return r(),u("span",Q)}const F=x(q,[["render",U]]),W=I({__name:"zoom-nav",setup(l){const{t:o}=z(),t=k("iApi"),a=O(400,!0,()=>t.geo.map.zoomIn()),e=O(400,!0,()=>t.geo.map.zoomOut());return(i,p)=>{const c=P("mapnav-button");return r(),u("div",null,[y(c,{onClickFunction:h(a),tooltip:h(o)("mapnav.zoomIn")},{default:b(()=>p[0]||(p[0]=[v("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"fill-current w-32 h-20"},[v("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),v("path",{d:"M0 0h24v24H0z",fill:"none"})],-1)])),_:1},8,["onClickFunction","tooltip"]),y(F),y(c,{onClickFunction:h(e),tooltip:h(o)("mapnav.zoomOut")},{default:b(()=>p[1]||(p[1]=[v("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"fill-current w-32 h-20"},[v("path",{d:"M19 13H5v-2h14v2z"}),v("path",{d:"M0 0h24v24H0z",fill:"none"})],-1)])),_:1},8,["onClickFunction","tooltip"])])}}}),ee={class:"mapnav-section bg-white-75 hover:bg-white"},te=I({__name:"draw-nav-section",setup(l){const o=k("iApi"),{t}=z(),a=j(),e=[{type:"point",icon:_(g(()=>f(()=>import("./point-icon-BSJft8AI-Cvu9un9G.js"),__vite__mapDeps([0,1,2]),import.meta.url)))},{type:"polyline",icon:_(g(()=>f(()=>import("./polyline-icon-CqjafPK0-BwgvA4IE.js"),__vite__mapDeps([3,1,2]),import.meta.url)))},{type:"polygon",icon:_(g(()=>f(()=>import("./polygon-icon-BrXtjiJl-wj5LREAw.js"),__vite__mapDeps([4,1,2]),import.meta.url)))},{type:"circle",icon:_(g(()=>f(()=>import("./circle-icon-DrE2wWqh-CNrbmpD8.js"),__vite__mapDeps([5,1,2]),import.meta.url)))},{type:"rectangle",icon:_(g(()=>f(()=>import("./rectangle-icon-D8mTZj4O-z-SCzvEx.js"),__vite__mapDeps([6,1,2]),import.meta.url)))}],i=A(()=>{const m=e.filter(n=>a.supportedTypes.some(s=>s.type===n.type));return m.push({type:"edit",icon:_(g(()=>f(()=>import("./edit-icon-C_tqZ1EG-DUbBs928.js"),__vite__mapDeps([7,1,2]),import.meta.url)))}),m}),p=m=>{a.activeTool===m?a.setActiveTool(null):a.setActiveTool(m)},c=()=>{o.geo.map.setMouseFocus()};return(m,n)=>{const s=P("mapnav-button");return r(),u("div",ee,[(r(!0),u(w,null,M(i.value,d=>(r(),E(s,{key:d.type,onMousedown:c,onClickFunction:()=>p(d.type),tooltip:h(t)(`draw.${d.type}.tooltip`),class:N({"active-tool":h(a).activeTool===d.type})},{default:b(()=>[(r(),E(D(d.icon),{class:"fill-current w-32 h-20"}))]),_:2},1032,["onClickFunction","tooltip","class"]))),128))])}}}),ae=x(te,[["__scopeId","data-v-033c1fd2"]]),oe={class:"mapnav absolute right-0 bottom-0 pb-36 sm:pb-48 pr-12"},ne=["content"],se={class:"mapnav-section bg-white-75 hover:bg-white"},ie=I({__name:"mapnav",setup(l){const o=k("iApi"),t=$(),{t:a}=z(),e=Z(),i=A(()=>o.getConfig().fixtures.mapnav.items.some(n=>n==="draw")),p=()=>{e.value._tippy.hide()},c=n=>{var s;n.key==="Tab"&&((s=e.value)!=null&&s.matches(":focus"))&&e.value._tippy.show()};G(()=>{var n,s;(n=e.value)==null||n.addEventListener("blur",p),(s=e.value)==null||s.addEventListener("keyup",c)}),K(()=>{var n,s;(n=e.value)==null||n.removeEventListener("blur",p),(s=e.value)==null||s.removeEventListener("keyup",c)});const m=A(()=>t.order.map(n=>t.items[n]).filter(n=>n.componentId&&n.id!=="draw"));return(n,s)=>{const d=L("focus-list"),R=L("tippy");return r(),u("div",oe,[X((r(),u("div",{class:"flex flex-col",content:h(a)("panels.controls.items"),ref_key:"el",ref:e},[i.value?(r(),u(w,{key:0},[y(ae),s[0]||(s[0]=v("span",{class:"py-1"},null,-1))],64)):V("",!0),y(W,{class:"mapnav-section bg-white-75 hover:bg-white"}),s[1]||(s[1]=v("span",{class:"py-1"},null,-1)),v("div",se,[(r(!0),u(w,null,M(m.value,(C,S)=>(r(),u(w,{key:C.id+"button"},[(r(),E(D(C.id+"-nav-button"))),S!==m.value.length-1?(r(),E(F,{key:0,class:"mapnav-divider"})):V("",!0)],64))),128))])],8,ne)),[[d],[R,{trigger:"manual",placement:"top-end",touch:!1,maxWidth:190}]])])}}}),re=x(ie,[["__scopeId","data-v-96b1b7dc"]]);class le extends Y{constructor(){super(...arguments);T(this,"mapnavStore",$(this.$vApp.$pinia))}get config(){return super.config}_parseConfig(t){if(!t)return;const a=t.items.map(e=>({id:e}));this.mapnavStore.items=a.reduce((e,i)=>(e[i.id]=i,e),{}),this.mapnavStore.order=a.map(e=>e.id),this._validateItems()}_validateItems(){const t=["geolocator","zoom","home","fullscreen"];this.mapnavStore.order.forEach(a=>{(this.$iApi.fixture.exists(a)||t.includes(a))&&(this.mapnavStore.items[a].componentId=`${a}-nav-button`)})}}const pe={en:{"mapnav.zoomIn":"Zoom In","mapnav.zoomOut":"Zoom Out","mapnav.home":"Home","mapnav.fullscreen":"Full Screen","mapnav.geolocator":"Your Location","mapnav.geolocator.error.permission":"The location request was denied. Please check your browser permission settings.","mapnav.geolocator.error.internal":"Your location could not be found."},fr:{"mapnav.zoomIn":"Zoom avant","mapnav.zoomOut":"Zoom arrière","mapnav.home":"Accueil","mapnav.fullscreen":"Plein Écran","mapnav.geolocator":"Votre position","mapnav.geolocator.error.permission":"Demande de localisation refusée. Veuillez vérifier les paramètres d'autorisation de votre navigateur.","mapnav.geolocator.error.internal":"Votre emplacement n'a pu être trouvé."}};class ue extends le{async added(){Object.entries(pe).forEach(i=>this.$iApi.$i18n.mergeLocaleMessage(...i));const{destroy:o,el:t}=this.mount(re,{app:this.$element});this.$vApp.$el.getElementsByClassName("inner-shell")[0].appendChild(t.childNodes[0]),this._parseConfig(this.config);const a=this.$vApp.$watch(()=>this.config,i=>this._parseConfig(i)),e=this.$iApi.event.on(B.COMPONENT,()=>{this._parseConfig(this.config)});this.removed=()=>{a(),this.$iApi.event.off(e);const i=$(this.$vApp.$pinia),p={...i.items};Object.keys(p).forEach(c=>i.removeItem(c)),i.$reset(),o()}}}export{ue as default};
