import{v as u,I as f,t as p,ae as b,eP as g,eQ as y,eR as F,eS as d,eT as w,eU as v,eV as I,eW as h}from"./index-DLCK036j.js";const D=e=>{let i=class extends e{constructor(){super(...arguments),this.customParameters=null}};return u([f({type:Object,json:{write:{overridePolicy:s=>({enabled:!!(s&&Object.keys(s).length>0)})}}})],i.prototype,"customParameters",void 0),i=u([p("esri.layers.mixins.CustomParametersMixin")],i),i};function Q({displayField:e,editFieldsInfo:i,fields:s,objectIdField:t,title:n},l){if(!s)return null;const a=N({editFieldsInfo:i,fields:s,objectIdField:t},l);if(!a.length)return null;const r=x({titleBase:n,fields:s,displayField:e}),o=P();return new b({title:r,content:o,fieldInfos:a})}function B(e){var c;const{title:i,graphic:s}=e??{},{attributes:t,sourceLayer:n}=s??{},l=n&&"displayField"in n?n.displayField:null,a=l?t==null?void 0:t[l]:null,r=a!=null?JSON.stringify(a):null,o=(c=s==null?void 0:s.getObjectId())==null?void 0:c.toString();return i||r||o||""}const L=(e,i)=>i.visibleFieldNames?i.visibleFieldNames.has(e.name):h(e,i);function j({fields:e,ignoreFieldTypes:i,sortDisabled:s}){const t=e;return i&&(e=e.filter(n=>!i.includes(n.type))),e===t&&(e=e.slice()),s!==!0&&e.sort(C),e}function C(e,i){return e.type==="oid"?-1:i.type==="oid"?1:m(e)?-1:m(i)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((i.alias||i.name).toLocaleLowerCase())}function N(e,i){const s=i==null?void 0:i.visibleFieldNames;return j({fields:e.fields??[],ignoreFieldTypes:(i==null?void 0:i.ignoreFieldTypes)||O,sortDisabled:i==null?void 0:i.sortDisabled}).map(t=>new g({fieldName:t.name,isEditable:y(t,e),label:t.alias,format:S(t),visible:L(t,{...e,visibleFieldNames:s})}))}function S(e){switch(e.type){case"small-integer":case"integer":case"single":return new d({digitSeparator:!0,places:0});case"double":return new d({digitSeparator:!0,places:2});case"string":return F(e.name)?new d({digitSeparator:!0,places:0}):void 0;default:return}}function P(){return[new w,new v]}function x(e){const i=I(e),{titleBase:s}=e;return i?`${s}: {${i.trim()}}`:s??""}function m(e){var i;return(e.name&&e.name.toLowerCase())==="name"?!0:((i=e.alias)==null?void 0:i.toLowerCase())==="name"}const O=["geometry","blob","raster","guid","xml"];export{D as L,Q as h,B as j};
