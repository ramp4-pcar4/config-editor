import{m as e,E as a,R as O,bP as m,bv as E,bR as W,e4 as Y,n as y,cD as J,l as I,e5 as K,e6 as H,e7 as Q,bo as f,Y as A,q as R,bQ as x,F as B,be as U}from"./index-BeTPrQ6f.js";import{e as u}from"./layerContainerType-CJrPp4UB-BIF7XAYP.js";import{r as z}from"./ElevationInfo-tlrAM5SV-D86C1F9d.js";const D={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,ArcGISVideoLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,KnowledgeGraphLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,ParquetLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},F={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},N={ArcGISFeatureLayer:!0,SubtypeGroupTable:!0},X={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,CatalogLayer:!0,CSV:!0,GaussianSplatLayer:!0,GeoJSON:!0,GroupLayer:!0,IntegratedMesh3DTilesLayer:!0,Object3DTilesLayer:!0,IntegratedMeshLayer:!0,KML:!0,LineOfSightLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,RasterDataLayer:!0,VectorTileLayer:!0,ViewshedLayer:!0,Voxel:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap-base-layers":{ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap-ground-layers":{IntegratedMesh3DTilesLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-scene/tables":{ArcGISFeatureLayer:!0},"web-map/operational-layers":D,"web-map/basemap-base-layers":F,"web-map/tables":N,"link-chart/operational-layers":{...D,LinkChartLayer:!0},"link-chart/basemap-base-layers":F,"link-chart/tables":N,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,BuildingSceneLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,MediaLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,SubtypeGroupLayer:!0,WCS:!0},"portal-item/tables":{ArcGISFeatureLayer:!0,SubtypeGroupTable:!0}};let c=class extends A{constructor(t){super(t),this.description=null,this.label=null,this.type=null}};e([a({type:String,json:{write:!0}})],c.prototype,"description",void 0),e([a({type:String,json:{write:!0}})],c.prototype,"label",void 0),e([a()],c.prototype,"type",void 0),c=e([y("esri.tables.elements.AttributeTableElement")],c);const b=c;let S=class extends f(b){constructor(t){super(t),this.displayType="auto",this.type="attachment"}clone(){return super.clone()}};e([a({type:["auto"],json:{write:!0}})],S.prototype,"displayType",void 0),e([a({type:["attachment"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],S.prototype,"type",void 0),S=e([y("esri.tables.elements.AttributeTableAttachmentElement")],S);const q=S;let d=class extends f(b){constructor(t){super(t),this.description=null,this.fieldName=null,this.label=null,this.type="field"}clone(){return super.clone()}};e([a({type:String,json:{read:!1,write:!1}})],d.prototype,"description",void 0),e([a({type:String,json:{write:{enabled:!0,isRequired:!0}}})],d.prototype,"fieldName",void 0),e([a({type:String,json:{read:!1,write:!1}})],d.prototype,"label",void 0),e([a({type:["field"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],d.prototype,"type",void 0),d=e([y("esri.tables.elements.AttributeTableFieldElement")],d);const V=d;let g=class extends f(b){constructor(t){super(t),this.relationshipId=null,this.type="relationship"}clone(){return super.clone()}};e([a({type:Number,json:{type:W,write:{enabled:!0,isRequired:!0}}})],g.prototype,"relationshipId",void 0),e([a({type:["relationship"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],g.prototype,"type",void 0),g=e([y("esri.tables.elements.AttributeTableRelationshipElement")],g);const $=g,P={base:b,key:"type",typeMap:{attachment:q,field:V,relationship:$}};function Z(t){return{typesWithGroup:{base:b,key:"type",typeMap:{attachment:q,field:V,group:t,relationship:$}},typesWithoutGroup:P}}let w=class extends f(b){constructor(t){super(t),this.elements=null,this.type="group"}clone(){return super.clone()}};e([a({types:[P],json:{name:"attributeTableElements",write:!0}})],w.prototype,"elements",void 0),e([a({type:["group"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],w.prototype,"type",void 0),w=e([y("esri.tables.elements.AttributeTableGroupElement")],w);const _=w;let L=class extends f(A){constructor(t){super(t),this.field=null,this.order=null}};e([a({type:String,json:{write:!0}})],L.prototype,"field",void 0),e([a({type:["asc","desc"],json:{write:!0}})],L.prototype,"order",void 0),L=e([y("esri.tables.support.FieldOrder")],L);const ee=L;var h;const re=Z(_);let v=h=class extends A{constructor(t){super(t),this.elements=null,this.orderByFields=null}clone(){return new h({elements:R(this.elements),orderByFields:R(this.orderByFields)})}};e([a({types:[re.typesWithGroup],json:{name:"attributeTableElements",write:!0}})],v.prototype,"elements",void 0),e([a({type:[ee],json:{write:!0}})],v.prototype,"orderByFields",void 0),v=h=e([y("esri.tables.AttributeTableTemplate")],v);const te=v,le={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:{enabled:!0,layerContainerTypes:u}}},oe={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(t,l)=>!l.disablePopup},write:{enabled:!0,writer(t,l,i){l[i]=!t}}}},ue={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:{enabled:!0,layerContainerTypes:u}}},ye={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:Q}}},pe={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:{enabled:!0,layerContainerTypes:u}}},de={value:null,type:z,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:{enabled:!0,layerContainerTypes:u}}};function ce(t){return{type:t,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const k={write:{enabled:!0,layerContainerTypes:u},read:!0},G={type:Number,json:{origins:{"web-document":k,"portal-item":{write:{layerContainerTypes:u}}}}},be={...G,json:{...G.json,origins:{"web-document":{...k,write:{enabled:!0,layerContainerTypes:u,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(t,l,i)=>{var n;return i&&i.origin!=="service"||!l.drawingInfo||l.drawingInfo.transparency===void 0?(n=l.layerDefinition)!=null&&n.drawingInfo&&l.layerDefinition.drawingInfo.transparency!==void 0?x(l.layerDefinition.drawingInfo.transparency):void 0:x(l.drawingInfo.transparency)}}}},me={type:B,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(t,l)=>{const i=B.fromJSON(t);return l.spatialReference!=null&&typeof l.spatialReference=="object"&&(i.spatialReference=U.fromJSON(l.spatialReference)),i}}}},read:!1}},Se={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},ge={type:Number,json:{origins:{service:{write:{enabled:!1}}},name:"layerDefinition.minScale",write:{layerContainerTypes:u}}},we={type:Number,json:{origins:{service:{write:{enabled:!1}}},name:"layerDefinition.maxScale",write:{layerContainerTypes:u}}},ie={json:{write:{ignoreOrigin:!0,layerContainerTypes:u},origins:{"web-map":{read:!1,write:!1}}}},Le={type:te,json:{name:"attributeTableInfo",write:!0}},ve=t=>{const l=t;let i=class extends l{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(n,r,s){var o;return((o=s==null?void 0:s.portalItem)==null?void 0:o.type)==="Group Layer"?void 0:n}writeListMode(n,r,s,o){(o&&o.layerContainerType==="ground"||n&&J(this,s,{},o))&&(r[s]=n)}writeOperationalLayerType(n,r,s){n&&(r[s]=n)}writeTitle(n,r){r.title=n??"Layer"}readVisibilityTimeExtent(n){return n?E.fromArray(n):null}writeVisibilityTimeExtent(n,r,s,o){n&&o.layerContainerType!=="tables"&&(n.isEmpty?o!=null&&o.messages&&o.messages.push(new I("layer:invalid-visibilityTimeExtent","visibilityTimeExtent cannot be empty")):r[s]=n.toArray())}read(n,r){r&&(r.layer=this),K(this,n,s=>super.read(n,s),r)}write(n,r){var j,M,C;if(!this.persistenceEnabled&&!(r!=null&&r.ignorePersistenceEnabled))return null;if(r!=null&&r.origin){const p=`${r.origin}/${r.layerContainerType||"operational-layers"}`;let T=!!((j=X[p])!=null&&j[this.operationalLayerType]);if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&p==="web-scene/operational-layers"&&(T=!1),this.operationalLayerType==="ArcGISDimensionLayer"&&p==="web-map/operational-layers"&&(T=!1),!T)return(M=r.messages)==null||M.push(new I("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${p}'`,{layer:this})),null}const s=super.write(n,{...r,layer:this}),o=!!r&&!!r.messages&&!!r.messages.filter(p=>p instanceof I&&p.name==="web-document-write:property-required").length;return H(s==null?void 0:s.url)?((C=r==null?void 0:r.messages)==null||C.push(new I("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&o?null:s}beforeSave(){}};return e([a({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],i.prototype,"id",void 0),e([O("id",["id"])],i.prototype,"readId",null),e([a(ie)],i.prototype,"listMode",void 0),e([m("listMode")],i.prototype,"writeListMode",null),e([a({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:"layerType",read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:u,isRequired:!0}}}}})],i.prototype,"operationalLayerType",void 0),e([m("operationalLayerType")],i.prototype,"writeOperationalLayerType",null),e([a(G)],i.prototype,"opacity",void 0),e([a({type:Boolean,readOnly:!1})],i.prototype,"persistenceEnabled",void 0),e([a({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],i.prototype,"title",void 0),e([m("title"),m(["web-scene"],"title")],i.prototype,"writeTitle",null),e([a({type:E,json:{origins:{"web-scene":{write:{layerContainerTypes:u}}}}})],i.prototype,"visibilityTimeExtent",void 0),e([O("visibilityTimeExtent")],i.prototype,"readVisibilityTimeExtent",null),e([m(["portal-item","web-map","web-scene"],"visibilityTimeExtent",{visibilityTimeExtent:{type:[[W,Y]]}})],i.prototype,"writeVisibilityTimeExtent",null),e([a({type:Boolean,json:{name:"visibility",write:{layerContainerTypes:u}}})],i.prototype,"visible",void 0),i=e([y("esri.layers.mixins.OperationalLayer")],i),i};export{ie as P,ye as a,ve as b,we as c,ge as d,G as h,ue as i,be as l,pe as n,ce as o,Se as p,te as q,le as r,de as s,oe as t,Le as u,me as y};
