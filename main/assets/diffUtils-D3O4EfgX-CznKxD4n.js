import{cd as D,a7 as V,aj as k}from"./index-BeTPrQ6f.js";const S=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function d(e){return e instanceof k}function g(e){return e instanceof V?Object.keys(e.items):d(e)?D(e).keys():e?Object.keys(e):[]}function p(e,n){return e instanceof V?e.items[n]:e[n]}function C(e,n){return!(!Array.isArray(e)||!Array.isArray(n))&&e.length!==n.length}function c(e){return e?e.declaredClass:null}function j(e,n){var b;const t=e.diff;if(t&&typeof t=="function")return t(e,n);const f=g(e),i=g(n);if(f.length===0&&i.length===0)return;if(!f.length||!i.length||C(e,n))return{type:"complete",oldValue:e,newValue:n};const s=i.filter(o=>!f.includes(o)),w=f.filter(o=>!i.includes(o)),m=f.filter(o=>i.includes(o)&&p(e,o)!==p(n,o)).concat(s,w).sort(),h=c(e);if(h&&S.has(h)&&m.length)return{type:"complete",oldValue:e,newValue:n};let a;const A=d(e)&&d(n);for(const o of m){const r=p(e,o),l=p(n,o);let u;if((A||typeof r!="function"&&typeof l!="function")&&r!==l&&(r!=null||l!=null)){if(t&&t[o]&&typeof t[o]=="function")u=(b=t[o])==null?void 0:b.call(t,r,l);else if(r instanceof Date&&l instanceof Date){if(r.getTime()===l.getTime())continue;u={type:"complete",oldValue:r,newValue:l}}else u=typeof r=="object"&&typeof l=="object"&&c(r)===c(l)?j(r,l):{type:"complete",oldValue:r,newValue:l};u!=null&&(a!=null?a.diff[o]=u:a={type:"partial",diff:{[o]:u}})}}return a}function P(e,n){if(e==null)return!1;const t=n.split(".");let f=e;for(const i of t){if(f.type==="complete")return!0;if(f.type!=="partial")return!1;{const s=f.diff[i];if(!s)return!1;f=s}}return!0}function T(e,n){if(typeof e!="function"&&typeof n!="function"&&(e!=null||n!=null))return e==null||n==null||typeof e=="object"&&typeof n=="object"&&c(e)!==c(n)?{type:"complete",oldValue:e,newValue:n}:j(e,n)}function y(e){if(e==null)return!0;switch(e.type){case"complete":return!1;case"collection":{const n=e;for(const t of n.added)if(!y(t))return!1;for(const t of n.removed)if(!y(t))return!1;for(const t of n.changed)if(!y(t))return!1;return!0}case"partial":for(const n in e.diff)if(!y(e.diff[n]))return!1;return!0}}export{T as C,P as S,y as s};
