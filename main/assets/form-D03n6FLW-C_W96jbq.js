import{jI as M}from"./index-BeTPrQ6f.js";import{D as L,w as p}from"./dom-cV1JHjxC-ECa-LXIB.js";const w=["calcite-input","calcite-input-number","calcite-input-text","calcite-text-area"];function A(e){return`${e.split("-").map((t,i)=>i===0?t:`${t[0].toUpperCase()}${t.slice(1)}`).join("")}${w.includes(e)?"Input":"Change"}`}const f="hidden-form-input";function h(e){return"checked"in e}const m=new WeakMap,E=new WeakSet;function $(e,t){if(p(t.parentElement,"[form]"))return!0;const i="calciteInternalFormComponentRegister";let n=!1;return e.addEventListener(i,a=>{n=a.composedPath().some(r=>E.has(r)),a.stopPropagation()},{once:!0}),t.dispatchEvent(new CustomEvent(i,{bubbles:!0,composed:!0})),n}function q(e,{status:t,message:i,icon:n}){"status"in e&&(e.status=t),"validationIcon"in e&&typeof e.validationIcon!="string"&&(e.validationIcon=n),"validationMessage"in e&&!e.validationMessage&&(e.validationMessage=i)}function y(e){return e.nodeName==="CALCITE-RADIO-BUTTON"?p(e,"calcite-radio-button-group"):e}const D=new CustomEvent("calciteInvalid",{bubbles:!0,composed:!0});function g(e){var c;const t=e==null?void 0:e.target,i=t==null?void 0:t.validationMessage,n=y(t==null?void 0:t.parentElement);if(!n)return;const a=(c=n==null?void 0:n.nodeName)==null?void 0:c.toLowerCase(),r=a==null?void 0:a.split("-");if(r.length<2||r[0]!=="calcite")return;e==null||e.preventDefault(),"validity"in n&&(n.validity=t==null?void 0:t.validity),n.dispatchEvent(D),q(n,{message:i,icon:!0,status:"invalid"});const d=A(a);n.addEventListener(d,()=>{"status"in n&&(n.status="idle"),"validationIcon"in n&&(n.validationIcon===""||n.validationIcon===!0)&&(n.validationIcon=!1),"validationMessage"in n&&n.validationMessage===i&&(n.validationMessage=""),"validity"in n&&(n.validity=t==null?void 0:t.validity)},{once:!0})}function R(e){const{formEl:t}=e;return t?(t.addEventListener("invalid",g,!0),t.requestSubmit(),t.removeEventListener("invalid",g,!0),requestAnimationFrame(()=>{const i=t.querySelectorAll("[status=invalid]");for(const n of i)if(n!=null&&n.validationMessage){n==null||n.setFocus();break}}),!0):!1}function T(e){var t;(t=e.formEl)==null||t.reset()}function O(e){const{el:t,value:i}=e,n=F(e);if(!n||$(n,t))return;e.formEl=n,e.defaultValue=i,h(e)&&(e.defaultChecked=e.checked);const a=S.bind(e);n.addEventListener("reset",a),m.set(e.el,a),E.add(t)}function F(e){const{el:t,form:i}=e;return i?L(t,{id:i}):p(t,"form")}function S(){var e;if("status"in this&&(this.status="idle"),"validationIcon"in this&&(this.validationIcon=!1),"validationMessage"in this&&(this.validationMessage=""),h(this)){this.checked=this.defaultChecked;return}this.value=this.defaultValue,(e=this.onFormReset)==null||e.call(this)}function j(e){const{el:t,formEl:i}=e;if(!i)return;const n=m.get(t);i.removeEventListener("reset",n),m.delete(t),e.formEl=null,E.delete(t)}const x="calciteInternalHiddenInputInput",k=e=>{e.target.dispatchEvent(new CustomEvent(x,{bubbles:!0}))},I=e=>e.removeEventListener("input",k);function V(e){const{el:t,formEl:i,name:n,value:a}=e,{ownerDocument:r}=t,d=t.querySelectorAll(`input[slot="${f}"]`);if(!i||!n){d.forEach(o=>{I(o),o.remove()});return}const c=Array.isArray(a)?a:[a],u=[],v=new Set;d.forEach(o=>{const s=c.find(C=>C==o.value);s!=null?(v.add(s),b(e,o,s)):u.push(o)});let l;c.forEach(o=>{if(v.has(o))return;let s=u.pop();s||(s=r.createElement("input"),s.ariaHidden="true",s.slot=f),l||(l=r.createDocumentFragment()),l.append(s),s.addEventListener("input",k),b(e,s,o)}),l&&t.append(l),u.forEach(o=>{I(o),o.remove()})}function b(e,t,i){var v;const{defaultValue:n,disabled:a,form:r,name:d,required:c}=e;t.defaultValue=n,t.disabled=a,t.name=d,t.required=c,t.tabIndex=-1,r?t.setAttribute("form",r):t.removeAttribute("form"),h(e)?(t.checked=e.checked,t.defaultChecked=e.defaultChecked,t.value=e.checked?i||"on":""):t.value=i||"",(v=e.syncHiddenFormInput)==null||v.call(e,t);const u=y(e.el);if(u&&"validity"in u)for(const l in{...t==null?void 0:t.validity})u.validity[l]=t.validity[l]}const P=({component:e})=>(V(e),M`<slot name=${f}></slot>`);export{R as H,F as I,P as O,j as T,T as V,O as x,x as y};
