import{i6 as M}from"./index-DRDU_nTl.js";import{C as L,b as p}from"./dom-PjyVZjPa-CCzf5gka.js";const A=["calcite-input","calcite-input-number","calcite-input-text","calcite-text-area"];function $(e){return`${e.split("-").map((n,i)=>i===0?n:`${n[0].toUpperCase()}${n.slice(1)}`).join("")}${A.includes(e)?"Input":"Change"}`}const f="hidden-form-input";function h(e){return"checked"in e}const m=new WeakMap,E=new WeakSet;function q(e,n){if(p(n.parentElement,"[form]"))return!0;const i="calciteInternalFormComponentRegister";let t=!1;return e.addEventListener(i,a=>{t=a.composedPath().some(r=>E.has(r)),a.stopPropagation()},{once:!0}),n.dispatchEvent(new CustomEvent(i,{bubbles:!0,composed:!0})),t}function w(e,{status:n,message:i,icon:t}){"status"in e&&(e.status=n),"validationIcon"in e&&typeof e.validationIcon!="string"&&(e.validationIcon=t),"validationMessage"in e&&!e.validationMessage&&(e.validationMessage=i)}function y(e){return e.nodeName==="CALCITE-RADIO-BUTTON"?p(e,"calcite-radio-button-group"):e}const F=new CustomEvent("calciteInvalid",{bubbles:!0,composed:!0});function g(e){var c;const n=e==null?void 0:e.target,i=n==null?void 0:n.validationMessage,t=y(n==null?void 0:n.parentElement);if(!t)return;const a=(c=t==null?void 0:t.nodeName)==null?void 0:c.toLowerCase(),r=a==null?void 0:a.split("-");if(r.length<2||r[0]!=="calcite")return;e==null||e.preventDefault(),"validity"in t&&(t.validity=n==null?void 0:n.validity),t.dispatchEvent(F),w(t,{message:i,icon:!0,status:"invalid"});const u=$(a);t.addEventListener(u,()=>{"status"in t&&(t.status="idle"),"validationIcon"in t&&(t.validationIcon===""||t.validationIcon===!0)&&(t.validationIcon=!1),"validationMessage"in t&&t.validationMessage===i&&(t.validationMessage=""),"validity"in t&&(t.validity=n==null?void 0:n.validity)},{once:!0})}function R(e){const{formEl:n}=e;return n?(n.addEventListener("invalid",g,!0),n.requestSubmit(),n.removeEventListener("invalid",g,!0),requestAnimationFrame(()=>{const i=n.querySelectorAll("[status=invalid]");for(const t of i)if(t!=null&&t.validationMessage){t==null||t.setFocus();break}}),!0):!1}function T(e){var n;(n=e.formEl)==null||n.reset()}function O(e){const{el:n,value:i}=e,t=S(e);if(!t||q(t,n))return;e.formEl=t,e.defaultValue=i,h(e)&&(e.defaultChecked=e.checked);const a=x.bind(e);t.addEventListener("reset",a),m.set(e.el,a),E.add(n)}function S(e){const{el:n,form:i}=e;return i?L(n,{id:i}):p(n,"form")}function x(){var e;if("status"in this&&(this.status="idle"),"validationIcon"in this&&(this.validationIcon=!1),"validationMessage"in this&&(this.validationMessage=""),h(this)){this.checked=this.defaultChecked;return}this.value=this.defaultValue,(e=this.onFormReset)==null||e.call(this)}function P(e){const{el:n,formEl:i}=e;if(!i)return;const t=m.get(n);i.removeEventListener("reset",t),m.delete(n),e.formEl=null,E.delete(n)}const D="calciteInternalHiddenInputInput",C=e=>{e.target.dispatchEvent(new CustomEvent(D,{bubbles:!0}))},b=e=>e.removeEventListener("input",C);function V(e){const{el:n,formEl:i,name:t,value:a}=e,{ownerDocument:r}=n,u=n.querySelectorAll(`input[slot="${f}"]`);if(!i||!t){u.forEach(o=>{b(o),o.remove()});return}const c=Array.isArray(a)?a:[a],d=[],v=new Set;u.forEach(o=>{const s=c.find(k=>k==o.value);s!=null?(v.add(s),I(e,o,s)):d.push(o)});let l;c.forEach(o=>{if(v.has(o))return;let s=d.pop();s||(s=r.createElement("input"),s.ariaHidden="true",s.slot=f),l||(l=r.createDocumentFragment()),l.append(s),s.addEventListener("input",C),I(e,s,o)}),l&&n.append(l),d.forEach(o=>{b(o),o.remove()})}function I(e,n,i){var v;const{defaultValue:t,disabled:a,form:r,name:u,required:c}=e;n.defaultValue=t,n.disabled=a,n.name=u,n.required=c,n.tabIndex=-1,r?n.setAttribute("form",r):n.removeAttribute("form"),h(e)?(n.checked=e.checked,n.defaultChecked=e.defaultChecked,n.value=e.checked?i||"on":""):n.value=i||"",(v=e.syncHiddenFormInput)==null||v.call(e,n);const d=y(e.el);if(d&&"validity"in d)for(const l in{...n==null?void 0:n.validity})d.validity[l]=n.validity[l]}const U=({component:e})=>(V(e),M`<slot name=${f}></slot>`);export{R as H,S as I,U as O,P as T,T as V,O as x,D as y};
