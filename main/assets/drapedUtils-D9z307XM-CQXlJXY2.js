import{F as m,a4 as c}from"./index-BeTPrQ6f.js";function u(e,n){return n?"xoffset"in n&&n.xoffset?Math.max(e,Math.abs(n.xoffset)):"yoffset"in n&&n.yoffset?Math.max(e,Math.abs(n.yoffset||0)):e:e}function x(e){let n=0,s=0;for(let t=0;t<e.length;t++){const r=e[t].size;typeof r=="number"&&(n+=r,s++)}return n/s}function p(e,n){var s;return typeof e=="number"?e:(s=e==null?void 0:e.stops)!=null&&s.length?x(e.stops):n}function M(e,n){if(!n)return e;const s=n.filter(o=>o.type==="size").map(o=>{const{maxSize:a,minSize:f}=o;return(p(a,e)+p(f,e))/2});let t=0;const r=s.length;if(r===0)return e;for(let o=0;o<r;o++)t+=s[o];const i=Math.floor(t/r);return Math.max(i,e)}function b(e){var i;const n=e==null?void 0:e.renderer,s=e==null?void 0:e.pointerType,t=s==="touch"?9:6;if(!n)return t;const r="visualVariables"in n?M(t,n.visualVariables):t;if(n.type==="simple")return u(r,n.symbol);if(n.type==="unique-value"){let o=r;return(i=n.uniqueValueInfos)==null||i.forEach(a=>{o=u(o,a.symbol)}),o}if(n.type==="class-breaks"){let o=r;return n.classBreakInfos.forEach(a=>{o=u(o,a.symbol)}),o}return n.type==="dot-density"||n.type,r}function d(e,n,s,t=new m){let r=0;if(s.type==="2d")r=n*(s.resolution??0);else if(s.type==="3d"){const h=s.overlayPixelSizeInMapUnits(e),l=s.basemapSpatialReference;r=l==null||l.equals(s.spatialReference)?n*h:c(l)/c(s.spatialReference)}const i=e.x-r,o=e.y-r,a=e.x+r,f=e.y+r,{spatialReference:y}=s;return t.xmin=Math.min(i,a),t.ymin=Math.min(o,f),t.xmax=Math.max(i,a),t.ymax=Math.max(o,f),t.spatialReference=y,t}function R(e,n,s){const t=s.toMap(e);return t==null?!1:d(t,b(),s,z).intersects(n)}let z=new m;export{d as h,b as y,R as z};
