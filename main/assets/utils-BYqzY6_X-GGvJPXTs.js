const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./geometryEngineJSON-CGn_tfx8-CijjZxZ3.js","./geometryEngineBase-DueYg7ux-B6e4gAE3.js","./_commonjsHelpers-BITg13Vk-KnjfkSck.js","./json-BI97KiBB-Ce5cWfI2.js"])))=>i.map(i=>d[i]);
import{_}from"./index-DiOGazkl.js";import{n as L,i as R}from"./defaultCIMValues-gWpu7WSC-cjxb95kj.js";function q(t){return typeof t=="function"}function Z(t,r,e,o){return q(t)?t(r,e,o):t}function tt(t){return[t.r,t.g,t.b,t.a]}const B=` /-,
`;function x(t){let r=t.length;for(;r--;)if(!B.includes(t.charAt(r)))return!1;return!0}function rt(t,r){const e=[];let o=0,a=-1;do if(a=t.indexOf("[",o),a>=o){if(a>o){const n=t.slice(o,a);e.push([n,null,x(n)])}if(o=a+1,a=t.indexOf("]",o),a>=o){if(a>o){const n=r[t.slice(o,a)];n&&e.push([null,n,!1])}o=a+1}}while(a!==-1);if(o<t.length){const n=t.slice(o);e.push([n,null,x(n)])}return e}function et(t,r,e,o){let a="",n=null;for(const M of r){const[i,u,f]=M;if(i)f?n=i:(n&&(a+=n,n=null),a+=i);else{let m=u;e!=null&&(m=W(u,e));const s=t.attributes[m];s&&(n&&(a+=n,n=null),a+=s)}}return j(a,o)}function j(t,r){switch(typeof t!="string"&&(t=String(t)),r){case"LowerCase":return t.toLowerCase();case"Allcaps":return t.toUpperCase();default:return t}}function nt(t,r,e,o,a,n,M=!0){const i=r/a,u=e/n,f=Math.ceil(i/2),m=Math.ceil(u/2);for(let s=0;s<n;s++)for(let l=0;l<a;l++){const p=4*(l+(M?n-s-1:s)*a);let c=0,I=0,b=0,d=0,P=0,S=0,k=0;const w=(s+.5)*u;for(let h=Math.floor(s*u);h<(s+1)*u;h++){const T=Math.abs(w-(h+.5))/m,O=(l+.5)*i,D=T*T;for(let g=Math.floor(l*i);g<(l+1)*i;g++){let y=Math.abs(O-(g+.5))/f;const C=Math.sqrt(D+y*y);C>=-1&&C<=1&&(c=2*C*C*C-3*C*C+1,c>0&&(y=4*(g+h*r),k+=c*t[y+3],b+=c,t[y+3]<255&&(c=c*t[y+3]/250),d+=c*t[y],P+=c*t[y+1],S+=c*t[y+2],I+=c))}}o[p]=d/I,o[p+1]=P/I,o[p+2]=S/I,o[p+3]=k/b}}function H(t){return t?[t[0],t[1],t[2],t[3]/255]:[0,0,0,0]}function ot(t){var r;return((r=t.data)==null?void 0:r.symbol)??null}function at(t){return t.type==="CIMVectorMarker"||t.type==="CIMPictureMarker"||t.type==="CIMBarChartMarker"||t.type==="CIMCharacterMarker"||t.type==="CIMPieChartMarker"||t.type==="CIMStackedBarChartMarker"}function it(t){return t.type==="CIMGradientStroke"||t.type==="CIMPictureStroke"||t.type==="CIMSolidStroke"}function st(t){return t!=null&&(t.type==="CIMGradientFill"||t.type==="CIMHatchFill"||t.type==="CIMPictureFill"||t.type==="CIMSolidFill"||t.type==="CIMWaterFill")}function U(t){return t!=null&&(t.type==="CIMMarkerPlacementAlongLineRandomSize"||t.type==="CIMMarkerPlacementAlongLineSameSize"||t.type==="CIMMarkerPlacementAlongLineVariableSize"||t.type==="CIMMarkerPlacementAtExtremities"||t.type==="CIMMarkerPlacementAtMeasuredUnits"||t.type==="CIMMarkerPlacementAtRatioPositions"||t.type==="CIMMarkerPlacementOnLine"||t.type==="CIMMarkerPlacementOnVertices")}const lt=(t,r=0)=>t==null||isNaN(t)?r:t,ct=(t,r)=>t??r,ut=(t,r)=>t??r,ft=t=>t.tintColor?H(t.tintColor):[255,255,255,1],Mt=t=>{if(!t)return!1;for(const r of t)switch(r.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":case"CIMGeometricEffectDonut":return!0}return!1};function yt(){return _(()=>import("./geometryEngineJSON-CGn_tfx8-CijjZxZ3.js"),__vite__mapDeps([0,1,2,3]),import.meta.url).then(t=>t.g)}function mt(t){if(!t)return"normal";switch(t.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function Ct(t){if(!t)return"normal";switch(t.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function pt(t){let r="normal",e="normal";if(t){const o=t.toLowerCase();o.includes("italic")?r="italic":o.includes("oblique")&&(r="oblique"),o.includes("bold")?e="bold":o.includes("light")&&(e="lighter")}return{style:r,weight:e}}function It(t){return t.underline?"underline":t.strikethrough?"line-through":"none"}function N(t){if(!t)return null;switch(t.type){case"CIMPolygonSymbol":if(t.symbolLayers)for(const r of t.symbolLayers){const e=N(r);if(e!=null)return e}break;case"CIMTextSymbol":return N(t.symbol);case"CIMSolidFill":return t.color}return null}function v(t){if(t)switch(t.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const r=t.symbolLayers;if(r)for(const e of r){const o=v(e);if(o!=null)return o}break}case"CIMTextSymbol":return v(t.symbol);case"CIMSolidStroke":return t.color}}function F(t){if(t)switch(t.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(t.symbolLayers)for(const r of t.symbolLayers){const e=F(r);if(e!==void 0)return e}break;case"CIMTextSymbol":return F(t.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return t.width}}function ht(t){switch(t){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function bt(t){switch(t){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function dt(t){return(t?Object.keys(t):[]).map(r=>({name:r,alias:r,type:typeof t[r]=="string"?"esriFieldTypeString":"esriFieldTypeDouble"}))}const kt=t=>t.includes("data:image/svg+xml");function Pt(t){if(!t)return null;switch(t.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function A(t){return t&&t.charAt(0).toLowerCase()+t.slice(1)}function St(t,r,e,o,a,n,M=!0){const{infos:i}=n;let u=1,f=0,m=0,s=0,l=1;for(const{absoluteAnchorPoint:I,offsetX:b,offsetY:d,rotation:P,size:S,frameHeight:k,rotateClockWise:w,scaleSymbolsProportionally:h}of i)l=I?1:u,m=E(b,d,f,l,m),s=V(b,d,f,l,s),k&&(h||M)&&(u*=S/k),f=z(P,w,f);const p=E(o,a,f,l,m),c=V(o,a,f,l,s);return{size:t*u,rotation:z(r,e,f),offsetX:p,offsetY:c}}function X(t){if(t==null)return!1;if(Array.isArray(t))return t.every(r=>X(r));switch(typeof t){case"string":return!!t;case"number":return!isNaN(t)}}function Y(t,r){if(r==="color"||r==="outlinecolor"||r==="backgroundcolor"||r==="borderlinecolor"||r==="tintcolor")return[...R[r]];const e=L[t];if(!e)throw new Error(`InternalError: default value for type ${t}.`);return e[r]}function $(t){return t.split(" ").map(r=>Number(r))}function J(t){return typeof t=="string"?$(t):t}function gt(t){return t!=null&&t.dashTemplate&&(t.dashTemplate=J(t.dashTemplate)),t}function G(t){if(t==null)return"Normal";switch(t.type){case"CIMTextSymbol":return t.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const r=t.symbolLayers;if(!r)return"Normal";for(const e of r)if(e.type==="CIMVectorMarker")return G(e)}break;case"CIMVectorMarker":{const r=t.markerGraphics;if(!r)return"Normal";for(const e of r)if(e.symbol)return G(e.symbol)}}return"Normal"}function wt(t){if(t)switch(t.type){case"CIMTextSymbol":return t.height;case"CIMPointSymbol":{let r=0;if(t.symbolLayers){for(const e of t.symbolLayers)if(e)switch(e.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{const o=e.size??L.CIMVectorMarker.size;o>r&&(r=o);break}}}return r}case"CIMLineSymbol":case"CIMPolygonSymbol":{let r=0;if(t.symbolLayers){for(const e of t.symbolLayers)if(e)switch(e.type){case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const o=e.width;o!=null&&o>r&&(r=o);break}case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":if(e.markerPlacement&&U(e.markerPlacement)){const o=e.size??L.CIMVectorMarker.size;o>r&&(r=o)}break;case"CIMPictureFill":{const o=e.height;o!=null&&o>r&&(r=o)}}}return r}}}function W(t,r){if(r!==null){const e=r.get(t);return e?e.name:t}return t}function Lt(t){return t.map(r=>({...r,propertyName:A(r.propertyName)}))}function At(t){const r={};for(const e in t){const o=t[e];r[A(e)]=o}return r}function V(t,r,e,o,a){const n=e*Math.PI/180;if(n){const M=Math.cos(n);return(Math.sin(n)*t+M*r)*o+a}return r*o+a}function E(t,r,e,o,a){const n=e*Math.PI/180;return n?(Math.cos(n)*t-Math.sin(n)*r)*o+a:t*o+a}function z(t,r,e){return r?e-t:e+t}function Tt(t,r,e){const o=e==="Color"||e==="TintColor"||e==="ToColor",a=e==="Rotation"||e==="Angle"||e==="ToRotation";let n=r[A(e)];if(n!=null&&(o?n=[n[0]/255,n[1]/255,n[2]/255,n[3]/255]:a&&(n*=Math.PI/180)),n==null&&(n=Y(r.type,e.toLowerCase()),n!=null&&(o?n=[n[0]/255,n[1]/255,n[2]/255,n[3]]:a&&(n*=Math.PI/180))),r.primitiveName!=null){const M=t[r.primitiveName];if(M!=null){const i=M[e];i==null||(typeof i=="string"||typeof i=="number"||Array.isArray(i)?(n=i,n!=null&&(o?n=[n[0]/255,n[1]/255,n[2]/255,n[3]/255]:a&&(n*=Math.PI/180))):(n={valueExpressionInfo:i,defaultValue:n},n!=null&&(o?n={type:"Process",op:"ArcadeColor",value:n}:a&&(n={type:"Process",op:"Divide",left:n,right:180/Math.PI}))))}}if(n==null)throw new Error(`Failed to derive a value or an expression for "${e}".`);return n}function xt(t,r){return Math.max(Math.min((t??r)/100,1),0)}export{tt as $,N as A,bt as C,J as D,X as E,G as F,Pt as I,et as K,xt as L,pt as M,F as N,Y as O,Lt as P,rt as Q,wt as S,H as V,Z as Y,nt as _,Tt as a,St as b,yt as c,ct as d,ot as e,Ct as f,At as g,dt as h,Mt as i,gt as k,ft as l,ht as m,st as n,lt as o,kt as p,W as q,at as r,ut as s,it as t,mt as u,A as w,v as x,It as y,U as z};
