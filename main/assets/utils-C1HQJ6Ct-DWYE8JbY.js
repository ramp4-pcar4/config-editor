const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./previewWebStyleSymbol-DR9_l-qc-Dk-0NTIS.js","./index-Cd7FS_80.js","./index-CpSsk29H.css","./webStyleAcceptedFormats-DsfCZOwz-CG7ZQ6BV.js","./globalCss-CFN4F315-D83uZ6WN.js","./Queue-B8H6jIv7-CjHlhDYg.js","./signal-DxzURL18-Dd2UKOJd.js","./Version-BTMwSXf1-UyJ4JbmM.js","./jsxFactory-C5LxVioS-Bw1wj4Mb.js","./intl-DLmy-Li5-QIMhWnKT.js","./uuid-Dj9mdEVg-BaKSCiyT.js","./utils-C_9ghOVk-CMRCnpDy.js","./jsonUtils-DzmXEA9_-CzpxYD2g.js","./parser-hXQyB-Qx-F1FB6C4p.js","./mat4f32-CiZjBg9k-CUm34GoR.js","./mat4-BFStKTjU-BuOOeQ4W.js","./common-CYWrYyJl-E8-sukrT.js","./cimSymbolUtils-BuFg2oLA-Dq0PNuHs.js","./utils-BYqzY6_X-dnmw_C7j.js","./defaultCIMValues-gWpu7WSC-cjxb95kj.js","./enums-f9UUstHQ-hLTu4V1l.js","./LRUCache-BLmkvs7b-BtVniFdK.js","./MemCache-BCippCv6-0PeZDn4o.js","./colorUtils-DxUhbS7D-C3COCPdl.js","./vec42-D8CJyqHG-DnfLTeQH.js","./vec4f64-CjUMzAyX-DPYbdAom.js","./mat2df32-BCnkwMW8-BLRY8i4P.js","./mat2d-BQA-1WB--Pnyy0dhf.js","./webStyleSymbolUtils-BLJ6xjmu-DLE8mbm-.js","./devEnvironmentUtils-CxrVv3RG-ktR0Kqgv.js","./styleUtils-DxAOZq5S-CbEV8W4-.js","./ColorStop-DoHCvOqO-BLZ1Qy_r.js","./TimeExtent-gZaEUVeW-BAhRnc81.js","./utils-BG7WTOnW-BY2hR4XJ.js","./timeZoneUtils-z3WjfjXQ-D2SA9WZQ.js","./typeUtils-I5iG5ZKA-j5a4OeB1.js","./ClassBreaksRenderer-D97YzbWp-D74J60YZ.js","./commonProperties-BLIn8DYU-DYLQ_4JZ.js","./colorRamps-KMmVdCPJ-M1Fwj08c.js","./visualVariableUtils-BO-_wo28-CyPAo6zN.js","./lengthUtils-wU9RRIqK-DguGs5-0.js","./RendererLegendOptions-f5mIImtQ-Bw3HqHIi.js","./FieldsIndex-Y7EBAYp0-BSlJY1sS.js","./heatmapUtils--OU2Fakh-DKCNMFII.js","./SimpleRenderer-ADQlYl8U-BoylXCW9.js","./UniqueValueRenderer-BmoLL_Ee-BB8ogjQk.js","./diffUtils-BSe9IE26-DiRtW7qV.js","./previewSymbol2D-5k-1dpmM-uur_rcu_.js","./fontUtils-Ce-zEYaT-s1s6Day8.js","./quantizationUtils-Cndke4AR-CCwBecJp.js","./previewCIMSymbol-BBpXdm5e-zTupJeiU.js","./CIMSymbolHelper-Bcp4nGf3-z9rfBVrj.js","./BidiEngine-Bdqv5H5j-Dyqh9XG-.js","./OptimizedGeometry-1qDYm3YK-Bg8p0ppE.js","./memoryEstimations-iHVpvWPf-loMiBY4Q.js","./Rect-KI3be8Nv-C-eJrr_r.js","./rasterizingUtils-B8CPqgVl-raOz1c2e.js","./floatRGBA-YJlz5IlR-DJlmEx2c.js","./definitions-CBIQmVpq-o3EUznKY.js","./vec2-BnynUbeJ-CKtGJQAy.js","./vec2f32-CVhmN3Me-DxoqVD7C.js","./BoundingBox-D9JxeQeA-SaxmeIkg.js","./CIMSymbolRasterizer-DA73qZaB-ip6gln1O.js","./CIMResourceManager-CQYnPdeC-0QPtlH4t.js","./imageUtils-DEFspgr5-CDLWguip.js","./OverrideHelper-GkMo7t6B-ji7gmFx_.js","./callExpressionWithFeature-uWLbeAgq-o2d9gDtU.js"])))=>i.map(i=>d[i]);
import{a5 as nt,dz as S,io as Dt,b4 as wt,fr as R,c as tt,a8 as Nt,d4 as Ut,bL as lt,l as Tt,ko as Ft,kp as Gt,_ as D,fc as Pt,c7 as qt,b as Bt,am as Wt,k0 as Qt,ah as Ht}from"./index-Cd7FS_80.js";import{h as Kt}from"./globalCss-CFN4F315-D83uZ6WN.js";import{G as Xt,T as A,$ as Yt}from"./jsxFactory-C5LxVioS-Bw1wj4Mb.js";import{P as Jt,G as te,Y as ee,l as xt,z as At,$ as ae,b as ne,j as le,V as Y,s as oe,i as ie,q as N}from"./utils-C_9ghOVk-CMRCnpDy.js";import{C as ot,h as Mt}from"./colorUtils-DxUhbS7D-C3COCPdl.js";import{l as ut}from"./mat2df32-BCnkwMW8-BLRY8i4P.js";import{p as F,q as re,x as it,g as se,_ as ce}from"./mat2d-BQA-1WB--Pnyy0dhf.js";import{resolveWebStyleSymbol as ue}from"./webStyleSymbolUtils-BLJ6xjmu-DLE8mbm-.js";import{T as he}from"./intl-DLmy-Li5-QIMhWnKT.js";import"./ColorStop-DoHCvOqO-BLZ1Qy_r.js";import"./mat4f32-CiZjBg9k-CUm34GoR.js";import"./mat4-BFStKTjU-BuOOeQ4W.js";import{h as pe}from"./TimeExtent-gZaEUVeW-BAhRnc81.js";import{F as me,x as fe}from"./utils-BG7WTOnW-BY2hR4XJ.js";import{q as de}from"./typeUtils-I5iG5ZKA-j5a4OeB1.js";function Pa({level:e,class:t,...a},n){const l=kt(e);return A(`h${l}`,{...a,"aria-level":String(l),class:Yt(Kt.heading,t),role:"heading"},n)}function kt(e){return Ut(Math.ceil(e),1,6)}function qa(e,t=1){return kt(e+t)}var k;(function(e){e[e.size=22]="size",e[e.lineWidth=50]="lineWidth",e[e.maxSize=120]="maxSize",e[e.maxOutlineSize=80]="maxOutlineSize",e[e.tallSymbolWidth=20]="tallSymbolWidth"})(k||(k={}));const G={fill:[{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"}],squareFill:[{type:"path",path:"M -10,-10 L 10,-10 L 10,10 L -10,10 L -10,-10 Z"}],meshSymbol3DFill:[{type:"path",path:"M -10,-8 L 6,0 L 6,6 L -10,6 L -10,-8 Z"},{type:"path",path:"M -10,-8 L -7,-10 L 9,-2 L 6,0 L -10,-8 Z"},{type:"path",path:"M 6,0 L 9,-2 L 9,4 L 6,6 L 6,0 Z"}],pathSymbol3DLayer:[{type:"path",path:"M 3,12 L 12,0 L 11,-2 L -4,5 L -1,5 L 1,7 L 3,10 L 3,12 Z"},{type:"circle",cx:-2,cy:10,r:5}],extrudeSymbol3DLayer:[{type:"path",path:"M -7,-5 L -2,0 L -2,7 L -7,3 L -7,-5 Z"},{type:"path",path:"M -2,0 L -2,7 L 10,-3 L 10,-10 L -2,0 Z"},{type:"path",path:"M -7,-5 L -2,0 L 10,-10 L -2,-10 L -7,-5 Z"}],cone:[{type:"path",path:"M 0,-10 L -8,5 L -4,6.5 L 0,7 L 4,6.5 L 8,5 Z"}],tallCone:[{type:"path",path:"M 0,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 0,-9 Z"}],invertedCone:[{type:"path",path:"M 0,7 L -8,-8 L 8,-8 Z"},{type:"path",path:"M -8,-8 L -4,-9.5 L 0,-10 L 4,-9.5 L 8,-8 L 4,-6.5 L 0,-6 L -4,-6.5 Z"}],cube:[{type:"path",path:"M -10,-7 L 0,-12 L 10,-7 L 0,-2 L -10,-7 Z"},{type:"path",path:"M -10,-7 L 0,-2 L 0,12 L -10,7 L -10,-7 Z"},{type:"path",path:"M 0,-2 L 10,-7 L 10,7 L 0,12 L 0,-2 Z"}],tallCube:[{type:"path",path:"M -3.5,-8.5 L 0,-9.5 L 3.5,-8.5 L 0,-7.5 L -3.5,-8.5 Z"},{type:"path",path:"M -3.5,-8.5 L 0,-7.5 L 0,9 L -3.5,8 L -3.5,-8.5 Z"},{type:"path",path:"M 0,-7.5 L 3.5,-8.5 L 3.5,8 L 0,9 L 0,-7.5 Z"}],cylinder:[{type:"path",path:"M -8,-9 L -8,7 L -4,8.5 L 0,9 L 4,8.5 L 8,7 L 8,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:8,ry:2}],tallCylinder:[{type:"path",path:"M -3.5,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 3.5,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:3.5,ry:1}],diamond:[{type:"path",path:"M 0,-10 L 10,-1 L -1,1 L 0,-10 Z"},{type:"path",path:"M 0,-10 L -1,1 L -8,-1 L 0,-10 Z"},{type:"path",path:"M -1,1 L 0,10 L -8,-1 L -1,1 Z"},{type:"path",path:"M -1,0 L 0,10 L 10,-1 L -1,1 Z"}],tetrahedron:[{type:"path",path:"M 0,-10 L 10,7 L 0,0 L 0,-10 Z"},{type:"path",path:"M 0,-10 L 0,0 L -8,7 L 0,-10 Z"},{type:"path",path:"M 10,7 L 0,0 L -8,7 L 10,7 Z"}]};function ye(e,t,a){const n=k.size;let l=n,o=n;e<1?l*=.75:e>1&&(o*=1.25);const i=0,r=0;let s=n,u=n;return t&&a&&(l=o=s=u=0),[{type:"path",path:[{command:"M",values:[s,i]},{command:"L",values:[a?s:.875*s,i]},{command:"L",values:[a?l-.5*s:r,o-.5*u]},{command:"L",values:[l-.5*s,o-.5*u]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[s,i]},{command:"L",values:[s,t?i:.125*u]},{command:"L",values:[l-.5*s,t?o-.5*u:u]},{command:"L",values:[l-.5*s,o-.5*u]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[l-.5*s,o-.5*u]},{command:"L",values:[a?l-.5*s:r,o-.5*u]},{command:"L",values:[a?l-.5*s:r,t?o-.5*u:u]},{command:"L",values:[l-.5*s,t?o-.5*u:u]},{command:"Z",values:[]}]}]}function ge(e){const t=k.size,a=.5*e,n=0,l=0;return[{type:"path",path:[{command:"M",values:[l,.7*t*.5]},{command:"L",values:[.3*t,.7*t]},{command:"L",values:[.3*t,.7*t+a]},{command:"L",values:[l,.7*t+a-.7*t*.5]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*t,.7*t]},{command:"L",values:[.3*t,.7*t+a]},{command:"L",values:[t,a]},{command:"L",values:[t,n]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*t,n]},{command:"L",values:[t,n]},{command:"L",values:[.3*t,.7*t]},{command:"L",values:[l,.7*t*.5]},{command:"Z",values:[]}]}]}function Le(){return[{type:"path",path:"M80,80.2v-27c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4C8.3,59.3,5.7,58,3.9,56c-1.1-1.2-2.4-2.1-3.9-2.8v27"},{type:"path",path:"M11,59.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8v-24c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-1.1-1.2-2.4-2.1-3.9-2.8v24c1.5,0.7,2.8,1.6,3.9,2.8C5.7,58,8.3,59.3,11,59.4z"},{type:"path",path:"M11,35.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8V3.6c-1.5,0.7-2.8,1.6-3.9,2.8c-2.2,2.1-4.6,3.4-7.1,3.4s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6S42.5,9.9,40,9.9s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.5,0-5-1.3-7.1-3.4C2.8,5.3,1.4,4.3,0,3.6v25.6c1.5,0.7,2.8,1.6,3.9,2.8C5.7,34.1,8.3,35.3,11,35.4z"}]}function be(e,t){let a=t?k.tallSymbolWidth:e;const n=e,l=t?4:6;a<=k.size?a-=.5*l:a-=l;const o=0,i=0,r=t?.35*a:.5*a;return[{type:"path",path:[{command:"M",values:[.5*a,o]},{command:"L",values:[a,.5*r]},{command:"L",values:[.5*a,r]},{command:"L",values:[i,.5*r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[o,.5*r]},{command:"L",values:[.5*a,r]},{command:"L",values:[.5*a,n]},{command:"L",values:[i,n-.5*r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.5*a,r]},{command:"L",values:[.5*a,n]},{command:"L",values:[a,n-.5*r]},{command:"L",values:[a,.5*r]},{command:"Z",values:[]}]}]}function ve(e,t){let a=t?k.tallSymbolWidth:e;const n=e,l=t?4:6;a<=k.size?a-=.5*l:a-=l;const o=.5*a,i=.15*a,r=0,s=n-i;return[{type:"ellipse",cx:.5*a,cy:s,rx:o,ry:i},{type:"path",path:[{command:"M",values:[r,i]},{command:"L",values:[r,s]},{command:"L",values:[a,s]},{command:"L",values:[a,i]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*a,cy:i,rx:o,ry:i}]}function we(e,t){let a=t?k.tallSymbolWidth:e;const n=e,l=t?4:6;a<=k.size?a-=.5*l:a-=l;const o=.15*a,i=n-o;return[{type:"ellipse",cx:.5*a,cy:i,rx:.5*a,ry:o},{type:"path",path:[{command:"M",values:[.5*a,0]},{command:"L",values:[a,i]},{command:"L",values:[0,i]},{command:"Z",values:[]}]}]}function xe(e){let t=e;const a=e,n=6;t<k.size?t-=.5*n:t-=n;const l=.15*t,o=0;return[{type:"path",path:[{command:"M",values:[0,o]},{command:"L",values:[t,o]},{command:"L",values:[.5*t,a-l]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*t,cy:o,rx:.5*t,ry:l}]}function Ae(e){let t=e;const a=e,n=4;t<k.size?t-=.5*n:t-=n;const l=0,o=0,i=t,r=a,s=Math.floor(e/10)-1||1;return[{type:"path",path:[{command:"M",values:[.45*i,l]},{command:"L",values:[i,.5*r-s]},{command:"L",values:[.45*i-s,.5*r+s]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*i,l]},{command:"L",values:[.45*i-s,.5*r+s]},{command:"L",values:[o,.5*r-s]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[o,.5*r-s]},{command:"L",values:[.45*i-s,.5*r+s]},{command:"L",values:[.45*i,a]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*i,a]},{command:"L",values:[i,.5*r-s]},{command:"L",values:[.45*i-s,.5*r+s]},{command:"Z",values:[]}]}]}function Me(e){const t=e,a=2;let n=e;n<k.size?n-=.5*a:n-=a;const l=0,o=0;return[{type:"path",path:[{command:"M",values:[.45*t,l]},{command:"L",values:[t,n]},{command:"L",values:[.45*t,.6*n]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*t,l]},{command:"L",values:[.45*t,.6*n]},{command:"L",values:[o,n]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[o,n]},{command:"L",values:[.45*t,.6*n]},{command:"L",values:[t,n]},{command:"Z",values:[]}]}]}function O(e,t){return Math.round(Math.min(Math.max(e+255*t*.75,0),255))}function Ba(e,t){if(e==null)return new S;if("type"in e&&(e.type==="linear"||e.type==="pattern"))return e;const a=new S(e);return new S([O(a.r,t),O(a.g,t),O(a.b,t),a.a])}let ke=0;function Se(){return ke++}let ze=0;function Ce(){return ze++}let Ze=0;function Ie(){return Ze++}const $e="http://www.w3.org/2000/svg",ht=nt("android"),Ve=nt("chrome")||ht&&ht>=4?"auto":"optimizeLegibility",Ee={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},Re=/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g;let M={},w={};const je=Math.PI;function j(e,t){const a=e*(je/180);return Math.abs(t*Math.sin(a))+Math.abs(t*Math.cos(a))}function St(e){return e.map(t=>`${t.command} ${t.values.join(" ")}`).join(" ").trim()}function zt(e,t,a,n,l){if(e){if(e.type==="circle")return A("circle",{cx:e.cx,cy:e.cy,fill:t,"fill-rule":"evenodd",r:e.r,stroke:a.color,"stroke-dasharray":a.dashArray,"stroke-dashoffset":a.dashOffset,"stroke-linecap":a.cap,"stroke-linejoin":a.join,"stroke-miterlimit":"4","stroke-width":a.width});if(e.type==="ellipse")return A("ellipse",{cx:e.cx,cy:e.cy,fill:t,"fill-rule":"evenodd",rx:e.rx,ry:e.ry,stroke:a.color,"stroke-dasharray":a.dashArray,"stroke-linecap":a.cap,"stroke-linejoin":a.join,"stroke-miterlimit":"4","stroke-width":a.width});if(e.type==="rect")return A("rect",{fill:t,"fill-rule":"evenodd",height:e.height,stroke:a.color,"stroke-dasharray":a.dashArray,"stroke-linecap":a.cap,"stroke-linejoin":a.join,"stroke-miterlimit":"4","stroke-width":a.width,width:e.width,x:e.x,y:e.y});if(e.type==="image")return A("image",{alt:l||"image",height:e.height,href:e.src,preserveAspectRatio:"none",width:e.width,x:e.x,y:e.y});if(e.type==="path"){const o=typeof e.path!="string"?St(e.path):e.path;return A("path",{d:o,fill:t,"fill-rule":"evenodd",stroke:a.color,"stroke-dasharray":a.dashArray,"stroke-linecap":a.cap,"stroke-linejoin":a.join,"stroke-miterlimit":"4","stroke-width":a.width})}if(e.type==="text")return lt(n),A("text",{"dominant-baseline":n.dominantBaseline,fill:t,"fill-rule":"evenodd","font-family":n.font.family,"font-size":n.font.size,"font-style":n.font.style,"font-variant":n.font.variant,"font-weight":n.font.weight,kerning:n.kerning,rotate:n.rotate,stroke:a.color,"stroke-dasharray":a.dashArray,"stroke-linecap":a.cap,"stroke-linejoin":a.join,"stroke-miterlimit":"4","stroke-width":a.width,"text-anchor":n.align,"text-decoration":n.decoration,"text-rendering":Ve,x:e.x,y:e.y},e.text)}return null}function Ct(e){if(!e)return{fill:"none",pattern:null,linearGradient:null};if(!("type"in e))return{fill:new S(e).toString(),pattern:null,linearGradient:null};if(e.type==="pattern"){const a=`patternId-${Se()}`;return{fill:`url(#${a})`,pattern:{id:a,x:e.x,y:e.y,width:e.width,height:e.height,image:{x:0,y:0,width:e.width,height:e.height,href:e.src}},linearGradient:null}}const t=`linearGradientId-${Ce()}`;return{fill:`url(#${t})`,pattern:null,linearGradient:{id:t,x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,stops:e.colors.map(a=>({offset:a.offset,color:a.color&&new S(a.color).toString()}))}}}function Zt(e){const t={color:"none",width:1,cap:"butt",join:"4",dashArray:"none",dashOffset:"0"};return e&&(e.width!=null&&(t.width=e.width),e.cap&&(t.cap=e.cap),e.join&&(t.join=e.join.toString()),e.color&&(t.color=new S(e.color).toString()),e.dashArray&&(t.dashArray=e.dashArray),e.dashoffset&&(t.dashOffset=e.dashoffset),e.style&&!e.dashArray&&(t.dashArray=le(e).join(",")||"none")),t}function It(e,t){const a={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};if(e){const n=e.alignBaseline,l=n==="baseline"?"auto":n==="top"?"text-top":n==="bottom"?"hanging":n;a.align=e.align,a.dominantBaseline=l,a.decoration=e.decoration,a.kerning=e.kerning?"auto":"0",a.rotate=e.rotated?"90":"0",lt(t),a.font.style=t.style||"normal",a.font.variant=t.variant||"normal",a.font.weight=t.weight||"normal",a.font.size=t.size&&t.size.toString()||"10pt",a.font.family=t.family||"serif"}return a}function Oe(e){const{pattern:t,linearGradient:a}=e;if(t)return A("pattern",{height:t.height,id:t.id,patternUnits:"userSpaceOnUse",width:t.width,x:t.x,y:t.y},A("image",{height:t.image.height,href:t.image.href,width:t.image.width,x:t.image.x,y:t.image.y}));if(a){const n=a.stops.map((l,o)=>A("stop",{key:`${o}-stop`,offset:l.offset,"stop-color":l.color}));return A("linearGradient",{gradientUnits:"userSpaceOnUse",id:a.id,x1:a.x1,x2:a.x2,y1:a.y1,y2:a.y2},n)}return null}function _e(e,t){if(!e||e.length===0)return null;const a=[];for(const n of e){const{shape:l,fill:o,stroke:i,font:r}=n,s=Ct(o),u=Zt(i),h=l.type==="text"?It(l,r):null,f=zt(l,s.fill,u,h);f&&a.push(f)}return A("mask",{id:t,maskUnits:"userSpaceOnUse"},A("g",null,a))}function pt(e,t,a){return re(e,it(e),[t,a])}function mt(e,t,a,n,l){return se(e,it(e),[t,a]),e[4]=e[4]*t-n*t+n,e[5]=e[5]*a-l*a+l,e}function De(e,t,a,n){const l=t%360*Math.PI/180;ce(e,it(e),l);const o=Math.cos(l),i=Math.sin(l),r=e[4],s=e[5];return e[4]=r*o-s*i+n*i-a*o+a,e[5]=s*o+r*i-a*i-n*o+n,e}function z(e,t){M&&"left"in M?(M.left!=null&&M.left>e&&(M.left=e),(M.right==null||M.right<e)&&(M.right=e),(M.top==null||M.top>t)&&(M.top=t),(M.bottom==null||M.bottom<t)&&(M.bottom=t)):M={left:e,bottom:t,right:e,top:t}}function ft(e){const t=e.args,a=t.length;let n;switch(e.action){case"M":case"L":case"C":case"S":case"Q":case"T":for(n=0;n<a;n+=2)z(t[n],t[n+1]);w.x=t[a-2],w.y=t[a-1];break;case"H":for(n=0;n<a;++n)z(t[n],w.y);w.x=t[a-1];break;case"V":for(n=0;n<a;++n)z(w.x,t[n]);w.y=t[a-1];break;case"m":{let l=0;for(("x"in w)||(z(w.x=t[0],w.y=t[1]),l=2),n=l;n<a;n+=2)z(w.x+=t[n],w.y+=t[n+1]);break}case"l":case"t":for(n=0;n<a;n+=2)z(w.x+=t[n],w.y+=t[n+1]);break;case"h":for(n=0;n<a;++n)z(w.x+=t[n],w.y);break;case"v":for(n=0;n<a;++n)z(w.x,w.y+=t[n]);break;case"c":for(n=0;n<a;n+=6)z(w.x+t[n],w.y+t[n+1]),z(w.x+t[n+2],w.y+t[n+3]),z(w.x+=t[n+4],w.y+=t[n+5]);break;case"s":case"q":for(n=0;n<a;n+=4)z(w.x+t[n],w.y+t[n+1]),z(w.x+=t[n+2],w.y+=t[n+3]);break;case"A":for(n=0;n<a;n+=7)z(t[n+5],t[n+6]);w.x=t[a-2],w.y=t[a-1];break;case"a":for(n=0;n<a;n+=7)z(w.x+=t[n+5],w.y+=t[n+6])}}function dt(e,t,a){const n=Ee[e.toLowerCase()];let l;typeof n=="number"&&(n?t.length>=n&&(l={action:e,args:t.slice(0,t.length-t.length%n)},a.push(l),ft(l)):(l={action:e,args:[]},a.push(l),ft(l)))}function Ne(e){const t=(typeof e.path!="string"?St(e.path):e.path).match(Re),a=[];if(M={},w={},!t)return null;let n="",l=[];const o=t.length;for(let r=0;r<o;++r){const s=t[r],u=parseFloat(s);isNaN(u)?(n&&dt(n,l,a),l=[],n=s):l.push(u)}dt(n,l,a);const i={x:0,y:0,width:0,height:0};return M&&"left"in M&&(i.x=M.left,i.y=M.top,i.width=M.right-M.left,i.height=M.bottom-M.top),i}function Ue(e){const t={x:0,y:0,width:0,height:0};if(e.type==="circle")t.x=e.cx-e.r,t.y=e.cy-e.r,t.width=2*e.r,t.height=2*e.r;else if(e.type==="ellipse")t.x=e.cx-e.rx,t.y=e.cy-e.ry,t.width=2*e.rx,t.height=2*e.ry;else if(e.type==="image"||e.type==="rect")t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height;else if(e.type==="path"){const a=Ne(e);t.x=a.x,t.y=a.y,t.width=a.width,t.height=a.height}return t}function Te(e){const t={x:0,y:0,width:0,height:0};let a=null,n=Number.NEGATIVE_INFINITY,l=Number.NEGATIVE_INFINITY;for(const o of e)a?(a.x=Math.min(a.x,o.x),a.y=Math.min(a.y,o.y),n=Math.max(n,o.x+o.width),l=Math.max(l,o.y+o.height)):(a=t,a.x=o.x,a.y=o.y,n=o.x+o.width,l=o.y+o.height);return a&&(a.width=n-a.x,a.height=l-a.y),a}function Fe(e,t,a,n,l,o,i,r,s){let u=(i&&o?j(o,t):t)/2,h=(i&&o?j(o,a):a)/2;if(s){const g=s[0],v=s[1];u=(i&&o?j(o,g):g)/2,h=(i&&o?j(o,v):v)/2}const f=e.width+n,p=e.height+n,d=ut(),c=ut();let m=!1;if(l&&f!==0&&p!==0){const g=t!==a?t/a:f/p,v=t>a?t:a;let b=1,C=1;isNaN(v)||(g>1?(b=v/f,C=v/g/p):(C=v/p,b=v*g/f)),F(c,c,mt(d,b,C,u,h)),m=!0}const y=e.x+(f-n)/2,L=e.y+(p-n)/2;if(F(c,c,pt(d,u-y,h-L)),!m&&(f>t||p>a)){const g=f/t>p/a,v=(g?t:a)/(g?f:p);F(c,c,mt(d,v,v,y,L))}return r&&F(c,c,pt(d,r[0],r[1])),o&&F(c,c,De(d,o,y,L)),`matrix(${c[0]},${c[1]},${c[2]},${c[3]},${c[4]},${c[5]})`}function Ge(e,t,a){const n=e==null?void 0:e.effects.find(u=>u.type==="bloom");if(!n)return null;const{strength:l,radius:o}=n,i=l>0?o:0,r=(l+i)*t,s=4*l+1;return A("filter",{filterUnits:"userSpaceOnUse",height:"300%",id:`bloom${a}`,width:"300%",x:"-100%",y:"-100%"},A("feMorphology",{in:"SourceGraphic",operator:"dilate",radius:(l+.5*i)*(5**(t/100)*(.4+t/100)),result:"dilate"}),A("feGaussianBlur",{in:"dilate",result:"blur",stdDeviation:r/25}),A("feGaussianBlur",{in:"blur",result:"intensityBlur",stdDeviation:r/50}),A("feComponentTransfer",{in:"SourceGraphic",result:"intensityBrightness"},A("feFuncR",{slope:s,type:"linear"}),A("feFuncG",{slope:s,type:"linear"}),A("feFuncB",{slope:s,type:"linear"})),A("feMerge",null,A("feMergeNode",{in:"intensityBlur"}),A("feMergeNode",{in:"intensityBrightness"}),A("feGaussianBlur",{stdDeviation:l/10})))}function Pe(e,t,a,n={}){var f,p,d;const l=[],o=[],i=Ie(),r=Ge(n.effectView,t,i);let s=null;if(r){const c=(f=n.effectView)==null?void 0:f.effects.find(g=>g.type==="bloom"),m=(c.strength?c.strength+c.radius/2:0)/3,y=t+t*m,L=a+a*m;s=[Math.max(y,10),Math.max(L,10)]}let u=t,h=a;if(n.useRotationSize)for(let c=0;c<e.length;c++){const m=((p=n.rotations)==null?void 0:p[c])??0;u=Math.max(j(m,t),u),h=Math.max(j(m,a),h)}for(let c=0;c<e.length;c++){const m=e[c],y=[],L=[];let g=0,v=0,b=0;for(const E of m){const{shape:$,fill:P,stroke:q,font:jt,offset:X}=E;n.ignoreStrokeWidth||$.type==="text"||(g+=(q==null?void 0:q.width)||0);const ct=Ct(P),Ot=Zt(q),_t=$.type==="text"?It($,jt):null;l.push(Oe(ct)),y.push(zt($,ct.fill,Ot,_t,n.ariaLabel)),L.push(Ue($)),X&&(v+=X[0],b+=X[1])}const C=((d=n.rotations)==null?void 0:d[c])??0;n.useRotationSize&&(v+=(u-j(C,t))/2,b+=(h-j(C,a))/2);const V=Fe(Te(L),t,a,g,n.scale??!1,C,n.useRotationSize??!1,[v,b],s);let I=null;if(n.masking){const E=`mask-${c}`,$=n.masking[c];l.push(_e($,E)),I=`url(#${E})`}o.push(I?A("g",{mask:I},A("g",{transform:V},y)):A("g",{transform:V},y))}return r&&(lt(s),u=s[0],h=s[1]),A("svg",{"aria-label":n.ariaLabel,focusable:!1,height:h,role:"img",style:"display: block;",width:u,xmlns:$e},r,A("defs",null,l),r?A("g",{filter:`url(#bloom${i})`},o):o)}const yt=Xt();function qe(e,t){yt.append(e,t),yt.detach(t)}function H(e,t,a){const n=Math.ceil(t[0]),l=Math.ceil(t[1]);if(!e.some(i=>!!i.length))return null;const o=(a==null?void 0:a.node)||document.createElement("div");return a.opacity!=null&&(o.style.opacity=a.opacity.toString()),a.effectView!=null&&(o.style.filter=xt(a.effectView)),qe(o,()=>Pe(e,n,l,a)),o}function Be(e,t){e=Math.ceil(e),t=Math.ceil(t);const a=document.createElement("canvas");a.width=e,a.height=t,a.style.width=e+"px",a.style.height=t+"px";const n=a.getContext("2d");return n.clearRect(0,0,e,t),n}function We(e,t,a){return e?Bt(e,{responseType:"image"}).then(n=>{const l=n.data,o=l.width,i=l.height,r=o/i;let s=t;if(a){const u=Math.max(o,i);s=Math.min(s,u)}return{image:l,width:r<=1?Math.ceil(s*r):s,height:r<=1?s:Math.ceil(s/r)}}):Promise.reject(new tt("renderUtils: imageDataSize","href not provided."))}function Qe(e,t){return!(!e||t==="ignore")&&(t!=="multiply"||e.r!==255||e.g!==255||e.b!==255||e.a!==1)}function He(e,t,a,n,l){switch(l){case"multiply":e[t]*=a[0],e[t+1]*=a[1],e[t+2]*=a[2],e[t+3]*=a[3];break;default:{const o=ot({r:e[t],g:e[t+1],b:e[t+2]});o.h=n.h,o.s=n.s,o.v=o.v/100*n.v;const i=Mt(o);e[t]=i.r,e[t+1]=i.g,e[t+2]=i.b,e[t+3]*=a[3];break}}}function Ke(e,t,a,n,l){return We(e,t,l).then(o=>{var s;const i=o.width??t,r=o.height??t;if(o.image&&Qe(a,n)){let u=o.image.width,h=o.image.height;nt("edge")&&/\.svg$/i.test(e)&&(u-=1,h-=1);const f=Be(i,r);f.drawImage(o.image,0,0,u,h,0,0,i,r);const p=f.getImageData(0,0,i,r),d=[a.r/255,a.g/255,a.b/255,a.a],c=ot(a);for(let m=0;m<p.data.length;m+=4)He(p.data,m,d,c,n);f.putImageData(p,0,0),e=f.canvas.toDataURL("image/png")}else{const u=(s=Tt)==null?void 0:s.findCredential(e);if(u!=null&&u.token){const h=e.includes("?")?"&":"?";e=`${e}${h}token=${u.token}`}}return{url:e,width:i,height:r}}).catch(()=>({url:e,width:t,height:t}))}const _=k.size,W=k.maxSize,rt=k.maxOutlineSize,gt=k.lineWidth,et=k.tallSymbolWidth;function T(e){const t=e.outline,a=e.material!=null?e.material.color:null,n=a!=null?a.toHex():null;if(t==null||"pattern"in t&&t.pattern!=null&&t.pattern.type==="style"&&t.pattern.style==="none")return e.type==="fill"&&n==="#ffffff"?{color:"#bdc3c7",width:.75}:null;const l=R(t.size)||0;return{color:"rgba("+(t.color!=null?t.color.toRgba():"255,255,255,1")+")",width:Math.min(l,rt),style:"pattern"in t&&t.pattern!=null&&t.pattern.type==="style"?At(t.pattern.style):null,join:"butt",cap:"patternCap"in t?t.patternCap:"butt"}}async function Xe(e,t){var n,l,o;if((n=e.thumbnail)!=null&&n.url)return e.thumbnail.url;if(t.type==="icon"&&((l=t==null?void 0:t.resource)!=null&&l.href))return ae(t);const a=wt("esri/images/Legend/legend3dsymboldefault.png");if(e.styleOrigin&&(e.styleOrigin.styleName||e.styleOrigin.styleUrl)){const i=await ue(e.styleOrigin,{portal:e.styleOrigin.portal}).catch(()=>null);if(i&&"thumbnail"in i&&((o=i.thumbnail)!=null&&o.url))return i.thumbnail.url}return a}function J(e,t=1){const a=e.a,n=ot(e),l=n.h,o=n.s/t,i=100-(100-n.v)/t,{r,g:s,b:u}=Mt({h:l,s:o,v:i});return[r,s,u,a]}function Q(e){var t;return e.type==="water"?e.color==null?null:e.color:((t=e.material)==null?void 0:t.color)==null?null:e.material.color}function x(e,t=0){const a=Q(e);if(!a){if(e.type==="fill")return null;const l=Jt.r,o=O(l,t);return[o,o,o,100]}const n=a.toRgba();for(let l=0;l<3;l++)n[l]=O(n[l],t);return n}async function $t(e,t){const a=e.style;return a==="none"?null:{type:"pattern",x:0,y:0,src:await te(wt(`esri/symbols/patterns/${a}.png`),t.toCss(!0)),width:5,height:5}}function Lt(e){return e.outline?T(e):{color:"rgba(0, 0, 0, 1)",width:1.5}}function st(e,t){const a=Q(e);if(!a)return null;let n="rgba(";return n+=O(a.r,t)+",",n+=O(a.g,t)+",",n+=O(a.b,t)+",",n+a.a+");"}function at(e,t){const a=st(e,t);return a?"pattern"in e&&e.pattern!=null&&e.pattern.type==="style"&&e.pattern.style==="none"?null:{color:a,width:Math.min(e.size?R(e.size):.75,rt),style:"pattern"in e&&e.pattern!=null&&e.pattern.type==="style"?At(e.pattern.style):null,cap:"cap"in e?e.cap:null,join:"join"in e?e.join==="miter"?R(2):e.join:null}:{}}function B(e,t,a){const n=a!=null?.75*a:0;return{type:"linear",x1:n?.25*n:0,y1:n?.5*n:0,x2:n||4,y2:n?.5*n:4,colors:[{color:e,offset:0},{color:t,offset:1}]}}function Ye(e){const t=e.depth,a=e.height,n=e.width;return n!==0&&t!==0&&a!==0&&n===t&&n!=null&&a!=null&&n<a}function Je(e,t,a){var l,o;const n=[];if(!e)return n;switch(e.type){case"icon":{const i=t,r=t;switch(((l=e.resource)==null?void 0:l.primitive)??Gt){case"circle":n.push({shape:{type:"circle",cx:0,cy:0,r:.5*t},fill:x(e,0),stroke:T(e)});break;case"square":n.push({shape:{type:"path",path:[{command:"M",values:[0,r]},{command:"L",values:[0,0]},{command:"L",values:[i,0]},{command:"L",values:[i,r]},{command:"Z",values:[]}]},fill:x(e,0),stroke:T(e)});break;case"triangle":n.push({shape:{type:"path",path:[{command:"M",values:[0,r]},{command:"L",values:[.5*i,0]},{command:"L",values:[i,r]},{command:"Z",values:[]}]},fill:x(e,0),stroke:T(e)});break;case"cross":n.push({shape:{type:"path",path:[{command:"M",values:[.5*i,0]},{command:"L",values:[.5*i,r]},{command:"M",values:[0,.5*r]},{command:"L",values:[i,.5*r]}]},stroke:Lt(e)});break;case"x":n.push({shape:{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[i,r]},{command:"M",values:[i,0]},{command:"L",values:[0,r]}]},stroke:Lt(e)});break;case"kite":n.push({shape:{type:"path",path:[{command:"M",values:[0,.5*r]},{command:"L",values:[.5*i,0]},{command:"L",values:[i,.5*r]},{command:"L",values:[.5*i,r]},{command:"Z",values:[]}]},fill:x(e,0),stroke:T(e)})}break}case"object":switch(((o=e.resource)==null?void 0:o.primitive)??Ft){case"cone":{const i=B(x(e,0),x(e,-.6),a?et:t),r=we(t,a);n.push({shape:r[0],fill:i},{shape:r[1],fill:i});break}case"inverted-cone":{const i=x(e,0),r=B(i,x(e,-.6),t),s=xe(t);n.push({shape:s[0],fill:r},{shape:s[1],fill:i});break}case"cube":{const i=be(t,a);n.push({shape:i[0],fill:x(e,0)},{shape:i[1],fill:x(e,-.3)},{shape:i[2],fill:x(e,-.5)});break}case"cylinder":{const i=B(x(e,0),x(e,-.6),a?et:t),r=ve(t,a);n.push({shape:r[0],fill:i},{shape:r[1],fill:i},{shape:r[2],fill:x(e,0)});break}case"diamond":{const i=Ae(t);n.push({shape:i[0],fill:x(e,-.3)},{shape:i[1],fill:x(e,0)},{shape:i[2],fill:x(e,-.3)},{shape:i[3],fill:x(e,-.7)});break}case"sphere":{const i=B(x(e,0),x(e,-.6));i.x1=0,i.y1=0,i.x2=.25*t,i.y2=.25*t,n.push({shape:{type:"circle",cx:0,cy:0,r:.5*t},fill:i});break}case"tetrahedron":{const i=Me(t);n.push({shape:i[0],fill:x(e,-.3)},{shape:i[1],fill:x(e,0)},{shape:i[2],fill:x(e,-.6)});break}}break}return n}function K(e){const t=typeof(e==null?void 0:e.size)=="number"?e==null?void 0:e.size:null;return t?R(t):null}function ta(e){return e.type==="icon"?"multiply":"tint"}async function ea(e,t){const a=K(t),n=t!=null&&t.maxSize?R(t.maxSize):null,l=(t==null?void 0:t.disableUpsampling)??!1,o=e.symbolLayers,i=[],r=[];let s=!1,u=0,h=0,f=0;o.forEach(c=>{var g,v,b,C;if(c.type!=="icon"&&c.type!=="object")return;c&&c.type==="icon"&&(f=Math.max(c.size&&R(c.size),f));const m=c.type==="icon"?c.size&&R(c.size):0,y=a||m?Math.ceil(Math.min(a||m,n||W)):_;let L=c.type==="icon"?c.angle:null;if((t==null?void 0:t.rotation)!=null&&(L=(L??0)+t.rotation),r.push(L),(g=c==null?void 0:c.resource)==null?void 0:g.href){const V=Xe(e,c).then(I=>{var P;const E=(P=c==null?void 0:c.material)==null?void 0:P.color,$=ta(c);return Ke(I,y,E,$,l)}).then(I=>{const E=I.width,$=I.height;return u=Math.max(u,E),h=Math.max(h,$),L&&(s=!0),[{shape:{type:"image",x:0,y:0,width:E,height:$,src:I.url},fill:null,stroke:null}]});i.push(V)}else{let V=y;c.type==="icon"&&a&&(V=y*(m/f));const I=(t==null?void 0:t.symbolConfig)==="tall"||((v=t==null?void 0:t.symbolConfig)==null?void 0:v.isTall)||c.type==="object"&&Ye(c);u=Math.max(u,I?et:V),h=Math.max(h,V),L&&((b=c.resource)!=null&&b.primitive)&&["square","triangle","x"].includes((C=c.resource)==null?void 0:C.primitive)&&(s=!0),i.push(Promise.resolve(Je(c,V,I)))}});const p=await Promise.allSettled(i),d=[];return p.forEach(c=>{c.status==="fulfilled"?d.push(c.value):c.reason&&Nt.getLogger("esri.symbols.support.previewSymbol3D").warn("error while building swatchInfo!",c.reason)}),H(d,[u,h],{node:t==null?void 0:t.node,scale:!1,opacity:t==null?void 0:t.opacity,ariaLabel:t==null?void 0:t.ariaLabel,rotations:r,useRotationSize:s})}function aa(e,t){const a=e.symbolLayers,n=[],l=ee(e),o=K(t),i=(t!=null&&t.maxSize?R(t.maxSize):null)||rt;let r,s=0,u=0;return a.forEach((h,f)=>{if(!h||h.type!=="line"&&h.type!=="path")return;const p=[];switch(h.type){case"line":{const d=at(h,0);if(d==null)break;const c=(d==null?void 0:d.width)||0;f===0&&(r=c);const m=Math.min(o||c,i),y=f===0?m:o?m*(c/r):m,L=y>gt/2?2*y:gt;u=Math.max(u,y),s=Math.max(s,L),d.width=y,p.push({shape:{type:"path",path:[{command:"M",values:[0,.5*u]},{command:"L",values:[s,.5*u]}]},stroke:d});break}case"path":{const d=Math.min(o||_,i),c=x(h,0),m=x(h,-.2),y=st(h,-.4),L=y?{color:y,width:1}:{};if(h.profile==="quad"){const g=h.width,v=h.height,b=ye(g&&v?g/v:1,v===0,g===0),C={...L,join:"bevel"};p.push({shape:b[0],fill:m,stroke:C},{shape:b[1],fill:m,stroke:C},{shape:b[2],fill:c,stroke:C})}else p.push({shape:G.pathSymbol3DLayer[0],fill:m,stroke:L},{shape:G.pathSymbol3DLayer[1],fill:c,stroke:L});u=Math.max(u,d),s=u}}n.push(p)}),Promise.resolve(H(n,[s,u],{node:t==null?void 0:t.node,scale:l,opacity:t==null?void 0:t.opacity,ariaLabel:t==null?void 0:t.ariaLabel}))}async function na(e,t){const a=e.type==="mesh-3d",n=e.symbolLayers,l=K(t),o=t!=null&&t.maxSize?R(t.maxSize):null,i=l||_,r=[];let s=0,u=0,h=!1;for(let f=0;f<n.length;f++){const p=n.at(f),d=[];if(!a||p.type==="fill"){switch(p.type){case"fill":{const c=Math.min(i,o||W);if(s=Math.max(s,c),u=Math.max(u,c),h=!0,a){const m=G.meshSymbol3DFill,y=st(p,-.4),L=y?{color:y,width:1,join:"round"}:{};d.push({shape:m[0],fill:x(p,0),stroke:L},{shape:m[1],fill:x(p,-.2),stroke:L},{shape:m[2],fill:x(p,-.6),stroke:L})}else{let m=x(p,0);const y="pattern"in p?p.pattern:null,L=T(p),g=Q(p);y!=null&&y.type==="style"&&y.style!=="solid"&&g&&(m=await $t(y,g)),d.push({shape:G.fill[0],fill:m,stroke:L})}break}case"line":{const c=at(p,0);if(c==null)break;const m={stroke:c,shape:G.fill[0]};s=Math.max(s,_),u=Math.max(u,_),d.push(m);break}case"extrude":{const c={join:"round",width:1,...at(p,-.4)},m=x(p,0),y=x(p,-.2),L=Math.min(i,o||W),g=ge(L);c.width=1,d.push({shape:g[0],fill:y,stroke:c},{shape:g[1],fill:y,stroke:c},{shape:g[2],fill:m,stroke:c});const v=_,b=.7*_+.5*L;s=Math.max(s,v),u=Math.max(u,b);break}case"water":{const c=Q(p),m=J(c),y=J(c,2),L=J(c,3),g=Le();h=!0,d.push({shape:g[0],fill:m},{shape:g[1],fill:y},{shape:g[2],fill:L});const v=Math.min(i,o||W);s=Math.max(s,v),u=Math.max(u,v);break}}r.push(d)}}return H(r,[s,u],{node:t==null?void 0:t.node,scale:h,opacity:t==null?void 0:t.opacity,ariaLabel:t==null?void 0:t.ariaLabel})}function la(e,t){if(e.symbolLayers.length===0)return Promise.reject(new tt("symbolPreview: renderPreviewHTML3D","No symbolLayers in the symbol."));switch(e.type){case"point-3d":return ea(e,t);case"line-3d":return aa(e,t);case"polygon-3d":case"mesh-3d":return na(e,t)}return Promise.reject(new tt("symbolPreview: swatchInfo3D","symbol not supported."))}const oa=Object.freeze(Object.defineProperty({__proto__:null,getPatternDescriptor:$t,getSizeFromOptions:K,getSymbolLayerFill:x,previewSymbol3D:la},Symbol.toStringTag,{value:"Module"}));let U=null;const bt=[255,255,255];function vt(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function Wa(e,t,a){const{backgroundColor:n,outline:l,dotSize:o}=e,i=(a==null?void 0:a.swatchSize)||k.size,r=.8,s=Math.round(i*i/Math.max(o,.5)**2*r),u=window.devicePixelRatio,h=document.createElement("canvas"),f=i*u;h.width=f,h.height=f,h.style.width=h.width/u+"px",h.style.height=h.height/u+"px";const p=h.getContext("2d");if(n&&(p.fillStyle=n.toCss(!0),p.fillRect(0,0,f,f),p.fill()),p.fillStyle=(t==null?void 0:t.toCss(!0))??"",U&&U.length/2===s)for(let c=0;c<2*s;c+=2){const m=U[c],y=U[c+1];p.fillRect(m,y,o*u,o*u),p.fill()}else{U=[];for(let c=0;c<2*s;c+=2){const m=vt(0,f),y=vt(0,f);U.push(m,y),p.fillRect(m,y,o*u,o*u),p.fill()}}l&&(l.color&&(p.strokeStyle=l.color.toCss(!0)),p.lineWidth=l.width,p.strokeRect(0,0,f,f));const d=new Image(i,i);return d.src=h.toDataURL(),d.ariaLabel=(a==null?void 0:a.ariaLabel)??null,d.alt=(a==null?void 0:a.ariaLabel)??"",d}function Qa(e,t={}){const a=t.radius||40,n=2*Math.PI*a,l=e.length,o=n/l,i=[],r=ne(t.outline);(r==null?void 0:r.width)!=null&&(r.width*=2),(r||t.backgroundColor)&&i.push({shape:{type:"circle",cx:a,cy:a,r:a},fill:t.backgroundColor,stroke:r,offset:[0,0]});const s=t.values,u=s&&s.length===l&&s.reduce((c,m)=>c+m,0)===100,h=[0];for(let c=0;c<l;c++){let m=null;u&&(m=s[c]*n/100,h.push(m+h[c])),i.push({shape:{type:"circle",cx:a,cy:a,r:a/2},fill:[0,0,0,0],stroke:{width:a,dashArray:`${(m??o)/2} ${n}`,dashoffset:"-"+(u?h[c]/2:c*(o/2)),color:e[c]},offset:[0,0]})}let f=null;const p=2*a+((r==null?void 0:r.width)||0),d=t.holePercentage;if(d){r&&i.push({shape:{type:"circle",cx:a,cy:a,r:a*d},fill:null,stroke:r,offset:[0,0]});const c=p/2;f=[[{shape:{type:"circle",cx:c,cy:c,r:c},fill:bt,stroke:r?{...r,color:bt}:null,offset:[0,0]},{shape:{type:"circle",cx:c,cy:c,r:a*d},fill:[0,0,0],stroke:null,offset:[0,0]}]]}return H([i],[p,p],{effectView:t.effectList,ignoreStrokeWidth:!0,masking:f,rotations:[-90],ariaLabel:t.ariaLabel})}function Ha(e,t={}){const a=t.align==="horizontal",n=a?75:24,l=a?24:75,o=t.width??n,i=t.height??l,r=t.gradient??!0,s=window.devicePixelRatio,u=o*s,h=i*s,f=document.createElement("canvas");f.width=u,f.height=h,f.ariaLabel=t.ariaLabel??null,f.style.width=`${o}px`,f.style.height=`${i}px`;const p=f.getContext("2d"),d=a?u:0,c=a?0:h;if(r){const y=p.createLinearGradient(0,0,d,c),L=e.length,g=L===1?0:1/(L-1);e.forEach((v,b)=>y.addColorStop(b*g,v.toString())),p.fillStyle=y,p.fillRect(0,0,u,h)}else{const y=a?u/e.length:u,L=a?h:h/e.length;let g=0,v=0;for(const b of e)p.fillStyle=b.toString(),p.fillRect(g,v,y,L),g=a?g+y:0,v=a?0:v+L}const m=document.createElement("div");return m.style.width=`${o}px`,m.style.height=`${i}px`,ia(m,t==null?void 0:t.effectList),m.appendChild(f),m}function ia(e,t){if(!t)return;e.style.filter=xt(t);const a=t.effects;if(a){for(const n of a)if((n==null?void 0:n.type)==="drop-shadow"){n.offsetX<0?e.style.marginLeft=`${Math.abs(n.offsetX)}px`:e.style.marginRight=`${n.offsetX}px`;break}}}async function ra(e,t){switch(e.type){case"web-style":{const{previewWebStyleSymbol:a}=await D(()=>import("./previewWebStyleSymbol-DR9_l-qc-Dk-0NTIS.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46]),import.meta.url);return a(e,ra,t)}case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":{const{previewSymbol3D:a}=await Promise.resolve().then(()=>oa);return a(e,t)}case"simple-marker":case"simple-line":case"simple-fill":case"picture-marker":case"picture-fill":case"text":{const{previewSymbol2D:a}=await D(()=>import("./previewSymbol2D-5k-1dpmM-uur_rcu_.js"),__vite__mapDeps([47,1,2,23,24,16,25,48,49,11,12,13,14,15,17,18,19,20,21,22,4,5,6,7,8,9,10,26,27,28,29,30,3,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46]),import.meta.url);return a(e,t)}case"cim":{const{previewCIMSymbol:a}=await D(()=>import("./previewCIMSymbol-BBpXdm5e-zTupJeiU.js"),__vite__mapDeps([50,1,2,51,52,48,53,54,55,20,18,19,56,57,58,27,16,26,59,60,61,62,63,64,65,23,24,25,66,49,4,5,6,7,8,9,10,11,12,13,14,15,17,21,22,28,29,30,3,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46]),import.meta.url);return a(e,t)}default:return}}function Vt(e){return e&&"opacity"in e?e.opacity*Vt(e.parent):1}async function Ka(e,t){var v;if(!e)return;const a=e.sourceLayer,n=(t!=null&&t.useSourceLayer?a:e.layer)??a,l=t!=null&&t.ignoreOpacity?1:Vt(n);if(e.symbol!=null&&(t==null||t.ignoreGraphicSymbol!==!0)){const b=e.symbol.type==="web-style"?await e.symbol.fetchSymbol({...t,acceptedFormats:["web","cim"],cache:t!=null?t.webStyleCache:null}):e.symbol.clone();return Y(b,null,l),b}const o=(t==null?void 0:t.renderer)??sa(n);let i=o&&"getSymbolAsync"in o?await o.getSymbolAsync(e,t):null;if(!i)return;if(i=i.type==="web-style"?await i.fetchSymbol({...t,cache:t!=null?t.webStyleCache:null}):i.clone(),!o||!("visualVariables"in o)||!((v=o.visualVariables)!=null&&v.length))return Y(i,null,l),i;if("arcadeRequiredForVisualVariables"in o&&o.arcadeRequiredForVisualVariables&&(t==null?void 0:t.arcade)==null){const b={...t};b.arcade=await Wt(),t=b}const{getColor:r,getOpacity:s,getAllSizes:u,getRotationAngle:h}=await D(()=>import("./visualVariableUtils-BO-_wo28-CyPAo6zN.js"),__vite__mapDeps([39,1,2,40]),import.meta.url).then(b=>b.b),f=[],p=[],d=[],c=[];for(const b of o.visualVariables)switch(b.type){case"color":f.push(b);break;case"opacity":p.push(b);break;case"rotation":c.push(b);break;case"size":b.target||d.push(b)}const m=!!f.length&&f[f.length-1],y=m?r(m,e,t):null,L=!!p.length&&p[p.length-1];let g=L?s(L,e,t):null;if(l!=null&&(g=g!=null?g*l:l),t!=null&&t.ignoreOpacity&&(g=1),Y(i,y,g),d.length&&(t==null?void 0:t.ignoreSizeVariables)!==!0){const b=u(d,e,t);await oe(i,b)}if((t==null?void 0:t.ignoreRotationVariables)!==!0)for(const b of c)ie(i,h(b,e,t),b.axis);return i}function sa(e){if(e)return"renderer"in e?e.renderer:void 0}const ca=/^-?(\d+)(\.(\d+))?$/i;function ua(e,t){return e-t}function ha(e,t){let a,n;return a=Number(e.toFixed(t)),a<e?n=a+1/10**t:(n=a,a-=1/10**t),a=Number(a.toFixed(t)),n=Number(n.toFixed(t)),[a,n]}function pa(e,t,a,n,l){const o=ma(e,t,a,n),i=o.previous==null||o.previous<=l,r=o.next==null||o.next<=l;return i&&r||o.previous+o.next<=2*l}function Et(e){const t=String(e),a=t.match(ca);if(a!=null&&a[1])return{integer:a[1].split("").length,fractional:a[3]?a[3].split("").length:0};if(t.toLowerCase().includes("e")){const n=t.split("e"),l=n[0],o=n[1];if(l&&o){const i=Number(l);let r=Number(o);const s=r>0;s||(r=Math.abs(r));const u=Et(i);return s?(u.integer+=r,r>u.fractional?u.fractional=0:u.fractional-=r):(u.fractional+=r,r>u.integer?u.integer=1:u.integer-=r),u}}return{integer:0,fractional:0}}function ma(e,t,a,n){const l={previous:null,next:null};if(a!=null){const o=e-a,i=t-a-o;l.previous=Math.floor(Math.abs(100*i/o))}if(n!=null){const o=n-e,i=n-t-o;l.next=Math.floor(Math.abs(100*i/o))}return l}function Xa(e,t={}){const a=e.slice(),{tolerance:n=2,strictBounds:l=!1,indexes:o=a.map((i,r)=>r)}=t;o.sort(ua);for(let i=0;i<o.length;i++){const r=o[i],s=a[r],u=r===0?null:a[r-1],h=r===a.length-1?null:a[r+1],f=Et(s).fractional;if(f){let p,d=0,c=!1;for(;d<=f&&!c;){const m=ha(s,d);p=l&&i===0?m[1]:m[0],c=pa(s,p,u,h,n),d++}c&&(a[r]=p)}}return a}const fa={maximumFractionDigits:20};function da(e){return he(e,fa)}const ya="<",ga=">";function La(e,t,a,n){let l="";return t===0?l=`${ya} `:t===a&&(l=`${ga} `),l+(n?fe(e,n):da(e))}const Ya=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwcdIkqhiWn5fHwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6JrzFUAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwaeIkqhiWl5/HwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6sKxboAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwadJEqhiWl5fPwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu75+IUcAAAAASUVORK5CYII="];async function ba(e){if(!("visualVariables"in e)||!e.visualVariables)return null;const t=e.visualVariables.find(i=>i.type==="color");if(!t)return null;let a=null,n=null;if(t.stops){if(t.stops.length===1)return t.stops[0].color;a=t.stops[0].value,n=t.stops[t.stops.length-1].value}const l=a!=null&&n!=null?a+(n-a)/2:0,{getColor:o}=await D(async()=>{const{getColor:i}=await import("./visualVariableUtils-BO-_wo28-CyPAo6zN.js");return{getColor:i}},__vite__mapDeps([39,1,2,40]),import.meta.url).then(i=>i.b);return o(t,l)??null}async function Ja(e,t){const a=e.trailCap,n=e.trailWidth||1,l=t||await ba(e)||e.color;return new Pt({cap:a,color:l,width:n})}function va(e,t){var a,n;if(!t.field)return null;if("featureReduction"in e)switch((a=e.featureReduction)==null?void 0:a.type){case"cluster":case"binning":{const l=e.featureReduction.fields.find(({name:o})=>o.toLowerCase()===t.field.toLowerCase());return l&&"getField"in e?e.getField(l.onStatisticField):null}}return"getField"in e?(n=e.getField)==null?void 0:n.call(e,t.field):null}function wa(e,t){var n,l,o;const a="popupTemplate"in e?(n=e.popupTemplate)==null?void 0:n.fieldInfos:null;if(a!=null&&a.length&&t)return(o=(l=a.find(i=>{var r;return((r=i.fieldName)==null?void 0:r.toLowerCase())===t.toLowerCase()}))==null?void 0:l.format)==null?void 0:o.dateFormat}function tn(e,t,a){var o,i,r,s;const n=va(e,t);if(!n||!me(n)&&!qt(n))return null;let l=wa(e,n.name);if(!l&&n.type==="date"){let u=0,h=0;t.stops?(u=((i=(o=t.stops)==null?void 0:o.at(0))==null?void 0:i.value)??u,h=((s=(r=t.stops)==null?void 0:r.at(-1))==null?void 0:s.value)??h):"minDataValue"in t&&"maxDataValue"in t&&(u=t.minDataValue??u,h=t.maxDataValue??h),l=h-u>2*pe.days?"short-date":"short-date-short-time"}return{fieldType:n.type,format:l,timeZoneOptions:{layerTimeZone:"preferredTimeZone"in e?e.preferredTimeZone:null,viewTimeZone:a,datesInUnknownTimezone:"datesInUnknownTimezone"in e&&e.datesInUnknownTimezone}}}function en(e){var t,a;if("authoringInfo"in e)return(a=(t=e.authoringInfo)==null?void 0:t.visualVariables)==null?void 0:a.find(({theme:n})=>n==="reference-size")}const xa=new S([64,64,64]);function Rt(e,t){const a=[],n=e.length-1;return e.length===5?a.push(0,2,4):a.push(0,n),e.map((l,o)=>a.includes(o)?La(l,o,n,t):null)}async function Aa(e,t,a){let n=!1,l=[],o=[];if(e.stops){const u=e.stops;l=u.map(h=>h.value),n=u.some(h=>!!h.label),n&&(o=u.map(h=>h.label))}const i=l[0],r=l[l.length-1];if(i==null&&r==null)return null;const s=n?null:Rt(l,a);return(await Promise.all(l.map(async(u,h)=>({value:u,color:e.type==="opacity"?await Ma(u,e,t):(await D(()=>import("./visualVariableUtils-BO-_wo28-CyPAo6zN.js"),__vite__mapDeps([39,1,2,40]),import.meta.url).then(f=>f.b)).getColor(e,u),label:n?o[h]:(s==null?void 0:s[h])??""})))).reverse()}async function Ma(e,t,a){const n=new S(a??xa),l=(await D(()=>import("./visualVariableUtils-BO-_wo28-CyPAo6zN.js"),__vite__mapDeps([39,1,2,40]),import.meta.url).then(o=>o.b)).getOpacity(t,e);return l!=null&&(n.a=l),n}function an(e){let t=!1,a=[],n=[];a=e.map(r=>r.value),t=e.some(r=>!!r.label),t&&(n=e.map(r=>r.label??""));const l=a[0],o=a[a.length-1];if(l==null&&o==null)return null;const i=t?null:Rt(a);return a.map((r,s)=>({value:r,color:ka(r,e),label:t?n[s]:(i==null?void 0:i[s])??""})).reverse()}function ka(e,t){const{startIndex:a,endIndex:n,weight:l}=Sa(e,t);if(a===n)return t[a].color;const o=S.blendColors(t[a].color,t[n].color,l);return new S(o)}function Sa(e,t){let a=0,n=t.length-1;return t.some((l,o)=>e<l.value?(n=o,!0):(a=o,!1)),{startIndex:a,endIndex:n,weight:(e-t[a].value)/(t[n].value-t[a].value)}}function nn(e,t){let a=[];if(e&&e.type==="multipart")e.colorRamps.reverse().forEach((n,l)=>{l===0?a.push({value:t.max,color:new S(n.toColor),label:"high"}):a.push({value:null,color:new S(n.toColor),label:""}),l===e.colorRamps.length-1?a.push({value:t.min,color:new S(n.fromColor),label:"low"}):a.push({value:null,color:new S(n.fromColor),label:""})});else{let n,l;e&&e.type==="algorithmic"?(n=e.fromColor,l=e.toColor):(n=[0,0,0,1],l=[255,255,255,1]),a=[{value:t.max,color:new S(l),label:"high"},{value:t.min,color:new S(n),label:"low"}]}return a}function za(e){if(!e.colorStops)return[];const t=[...e.colorStops].filter(n=>{var l;return((l=n.color)==null?void 0:l.a)>0});let a=t.length-1;if(t[0]){const n=t[a];n&&n.ratio!==1&&(t.push(new de({ratio:1,color:n.color})),a++)}return t.map((n,l)=>{var i,r;let o="";return l===0?o=((i=e.legendOptions)==null?void 0:i.minLabel)||"low":l===a&&(o=((r=e.legendOptions)==null?void 0:r.maxLabel)||"high"),{color:n.color,label:o,ratio:n.ratio}}).reverse()}Dt("short-date");async function Z(e,t,a){Ht(e,t,()=>[]).push(...a)}async function ln(e){var a,n;const t=new Map;if(!e)return t;if("visualVariables"in e&&e.visualVariables){for(const l of e.visualVariables)if(Ca(l)){const o=(await Aa(l)??[]).map(i=>i.color);await Z(t,l.field||l.valueExpression,o)}}if(e.type==="heatmap"){const l=za(e).map(o=>o.color);await Z(t,e.field||e.valueExpression,l)}else if(e.type==="pie-chart"){for(const l of e.attributes)await Z(t,l.field||l.valueExpression,[l.color]);await Z(t,"default",[(a=e==null?void 0:e.othersCategory)==null?void 0:a.color,N(e.backgroundFillSymbol,null)])}else if(e.type==="dot-density"){for(const l of e.attributes)await Z(t,l.field||l.valueExpression,[l.color]);await Z(t,"default",[e.backgroundColor])}else if(e.type==="unique-value")if(((n=e.authoringInfo)==null?void 0:n.type)==="predominance")for(const l of e.uniqueValueInfos??[])await Z(t,l.value.toString(),[N(l.symbol,null)]);else{const l=(e.uniqueValueInfos??[]).map(u=>N(u.symbol,null)),{field:o,field2:i,field3:r,valueExpression:s}=e;(o||s)&&await Z(t,o||s,l),i&&await Z(t,i,l),r&&await Z(t,r,l)}else if(e.type==="class-breaks"){const l=e.classBreakInfos.map(r=>N(r.symbol,null)),{field:o,valueExpression:i}=e;await Z(t,o??i,l)}else e.type==="simple"&&await Z(t,"default",[N(e.symbol,null)]);return"defaultSymbol"in e&&e.defaultSymbol&&await Z(t,"default",[N(e.defaultSymbol,null)]),t.forEach((l,o)=>{const i=Qt(l.filter(Boolean),(r,s)=>JSON.stringify(r)===JSON.stringify(s));t.set(o,i)}),t}function Ca(e){return e.type==="color"}export{ga as $,Ue as A,ba as B,Ja as C,H as D,Aa as F,ka as G,zt as J,Te as M,an as N,ya as O,ra as R,Pa as S,ln as U,tn as V,Ct as _,Oe as a,Ka as b,nn as c,Qa as d,Ya as e,Wa as f,k as g,Pe as h,Zt as i,en as j,Fe as k,Xa as l,Et as m,La as n,ma as o,G as p,za as q,Ba as r,x as v,Ha as y,qa as z};
